{"version":3,"file":"index.es.js","sources":["../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/react/cjs/react-jsx-runtime.development.js","../node_modules/react/jsx-runtime.js","../src/context/FeedBackContext.tsx","../node_modules/framer-motion/dist/es/context/MotionConfigContext.mjs","../node_modules/framer-motion/dist/es/context/MotionContext/index.mjs","../node_modules/framer-motion/dist/es/context/PresenceContext.mjs","../node_modules/framer-motion/dist/es/utils/is-browser.mjs","../node_modules/framer-motion/dist/es/utils/use-isomorphic-effect.mjs","../node_modules/framer-motion/dist/es/context/LazyContext.mjs","../node_modules/framer-motion/dist/es/render/dom/utils/camel-to-dash.mjs","../node_modules/framer-motion/dist/es/animation/optimized-appear/data-id.mjs","../node_modules/framer-motion/dist/es/utils/GlobalConfig.mjs","../node_modules/framer-motion/dist/es/frameloop/render-step.mjs","../node_modules/framer-motion/dist/es/frameloop/batcher.mjs","../node_modules/framer-motion/dist/es/frameloop/microtask.mjs","../node_modules/framer-motion/dist/es/utils/is-ref-object.mjs","../node_modules/framer-motion/dist/es/context/SwitchLayoutGroupContext.mjs","../node_modules/framer-motion/dist/es/motion/utils/use-visual-element.mjs","../node_modules/framer-motion/dist/es/motion/utils/use-motion-ref.mjs","../node_modules/framer-motion/dist/es/render/utils/is-variant-label.mjs","../node_modules/framer-motion/dist/es/animation/utils/is-animation-controls.mjs","../node_modules/framer-motion/dist/es/render/utils/variant-props.mjs","../node_modules/framer-motion/dist/es/render/utils/is-controlling-variants.mjs","../node_modules/framer-motion/dist/es/context/MotionContext/utils.mjs","../node_modules/framer-motion/dist/es/context/MotionContext/create.mjs","../node_modules/framer-motion/dist/es/motion/features/definitions.mjs","../node_modules/framer-motion/dist/es/motion/features/load-features.mjs","../node_modules/framer-motion/dist/es/context/LayoutGroupContext.mjs","../node_modules/framer-motion/dist/es/motion/utils/symbol.mjs","../node_modules/framer-motion/dist/es/utils/noop.mjs","../node_modules/framer-motion/dist/es/utils/errors.mjs","../node_modules/framer-motion/dist/es/motion/index.mjs","../node_modules/framer-motion/dist/es/render/dom/motion-proxy.mjs","../node_modules/framer-motion/dist/es/render/svg/lowercase-elements.mjs","../node_modules/framer-motion/dist/es/render/dom/utils/is-svg-component.mjs","../node_modules/framer-motion/dist/es/projection/styles/scale-correction.mjs","../node_modules/framer-motion/dist/es/render/html/utils/transform.mjs","../node_modules/framer-motion/dist/es/motion/utils/is-forced-motion-value.mjs","../node_modules/framer-motion/dist/es/value/utils/is-motion-value.mjs","../node_modules/framer-motion/dist/es/render/html/utils/build-transform.mjs","../node_modules/framer-motion/dist/es/render/dom/utils/is-css-variable.mjs","../node_modules/framer-motion/dist/es/render/dom/value-types/get-as-type.mjs","../node_modules/framer-motion/dist/es/utils/clamp.mjs","../node_modules/framer-motion/dist/es/value/types/numbers/index.mjs","../node_modules/framer-motion/dist/es/value/types/utils.mjs","../node_modules/framer-motion/dist/es/value/types/numbers/units.mjs","../node_modules/framer-motion/dist/es/render/dom/value-types/type-int.mjs","../node_modules/framer-motion/dist/es/render/dom/value-types/number.mjs","../node_modules/framer-motion/dist/es/render/html/utils/build-styles.mjs","../node_modules/framer-motion/dist/es/render/html/utils/create-render-state.mjs","../node_modules/framer-motion/dist/es/render/html/use-props.mjs","../node_modules/framer-motion/dist/es/motion/utils/valid-prop.mjs","../node_modules/framer-motion/dist/es/render/dom/utils/filter-props.mjs","../node_modules/framer-motion/dist/es/render/svg/utils/transform-origin.mjs","../node_modules/framer-motion/dist/es/render/svg/utils/path.mjs","../node_modules/framer-motion/dist/es/render/svg/utils/build-attrs.mjs","../node_modules/framer-motion/dist/es/render/svg/utils/create-render-state.mjs","../node_modules/framer-motion/dist/es/render/svg/utils/is-svg-tag.mjs","../node_modules/framer-motion/dist/es/render/svg/use-props.mjs","../node_modules/framer-motion/dist/es/render/dom/use-render.mjs","../node_modules/framer-motion/dist/es/render/html/utils/render.mjs","../node_modules/framer-motion/dist/es/render/svg/utils/camel-case-attrs.mjs","../node_modules/framer-motion/dist/es/render/svg/utils/render.mjs","../node_modules/framer-motion/dist/es/render/html/utils/scrape-motion-values.mjs","../node_modules/framer-motion/dist/es/render/svg/utils/scrape-motion-values.mjs","../node_modules/framer-motion/dist/es/render/utils/resolve-variants.mjs","../node_modules/framer-motion/dist/es/utils/use-constant.mjs","../node_modules/framer-motion/dist/es/animation/utils/is-keyframes-target.mjs","../node_modules/framer-motion/dist/es/utils/resolve-value.mjs","../node_modules/framer-motion/dist/es/value/utils/resolve-motion-value.mjs","../node_modules/framer-motion/dist/es/motion/utils/use-visual-state.mjs","../node_modules/framer-motion/dist/es/frameloop/frame.mjs","../node_modules/framer-motion/dist/es/render/svg/config-motion.mjs","../node_modules/framer-motion/dist/es/render/html/config-motion.mjs","../node_modules/framer-motion/dist/es/render/dom/utils/create-config.mjs","../node_modules/framer-motion/dist/es/events/add-dom-event.mjs","../node_modules/framer-motion/dist/es/events/utils/is-primary-pointer.mjs","../node_modules/framer-motion/dist/es/events/event-info.mjs","../node_modules/framer-motion/dist/es/events/add-pointer-event.mjs","../node_modules/framer-motion/dist/es/utils/pipe.mjs","../node_modules/framer-motion/dist/es/gestures/drag/utils/lock.mjs","../node_modules/framer-motion/dist/es/motion/features/Feature.mjs","../node_modules/framer-motion/dist/es/gestures/hover.mjs","../node_modules/framer-motion/dist/es/gestures/focus.mjs","../node_modules/framer-motion/dist/es/gestures/utils/is-node-or-child.mjs","../node_modules/framer-motion/dist/es/gestures/press.mjs","../node_modules/framer-motion/dist/es/motion/features/viewport/observers.mjs","../node_modules/framer-motion/dist/es/motion/features/viewport/index.mjs","../node_modules/framer-motion/dist/es/motion/features/gestures.mjs","../node_modules/framer-motion/dist/es/utils/shallow-compare.mjs","../node_modules/framer-motion/dist/es/render/utils/resolve-dynamic-variants.mjs","../node_modules/framer-motion/dist/es/utils/time-conversion.mjs","../node_modules/framer-motion/dist/es/animation/utils/default-transitions.mjs","../node_modules/framer-motion/dist/es/animation/utils/transitions.mjs","../node_modules/framer-motion/dist/es/animation/animators/waapi/utils/get-final-keyframe.mjs","../node_modules/framer-motion/dist/es/frameloop/sync-time.mjs","../node_modules/framer-motion/dist/es/utils/is-zero-value-string.mjs","../node_modules/framer-motion/dist/es/animation/utils/is-none.mjs","../node_modules/framer-motion/dist/es/utils/is-numerical-string.mjs","../node_modules/framer-motion/dist/es/render/dom/utils/css-variables-conversion.mjs","../node_modules/framer-motion/dist/es/render/dom/utils/unit-conversion.mjs","../node_modules/framer-motion/dist/es/render/dom/value-types/test.mjs","../node_modules/framer-motion/dist/es/render/dom/value-types/type-auto.mjs","../node_modules/framer-motion/dist/es/render/dom/value-types/dimensions.mjs","../node_modules/framer-motion/dist/es/render/utils/KeyframesResolver.mjs","../node_modules/framer-motion/dist/es/value/types/color/utils.mjs","../node_modules/framer-motion/dist/es/value/types/color/rgba.mjs","../node_modules/framer-motion/dist/es/value/types/color/hex.mjs","../node_modules/framer-motion/dist/es/value/types/color/hsla.mjs","../node_modules/framer-motion/dist/es/value/types/color/index.mjs","../node_modules/framer-motion/dist/es/value/types/complex/index.mjs","../node_modules/framer-motion/dist/es/value/types/complex/filter.mjs","../node_modules/framer-motion/dist/es/render/dom/value-types/defaults.mjs","../node_modules/framer-motion/dist/es/render/dom/value-types/animatable-none.mjs","../node_modules/framer-motion/dist/es/render/html/utils/make-none-animatable.mjs","../node_modules/framer-motion/dist/es/render/dom/DOMKeyframesResolver.mjs","../node_modules/framer-motion/dist/es/utils/memo.mjs","../node_modules/framer-motion/dist/es/animation/utils/is-animatable.mjs","../node_modules/framer-motion/dist/es/animation/animators/utils/can-animate.mjs","../node_modules/framer-motion/dist/es/animation/animators/BaseAnimation.mjs","../node_modules/framer-motion/dist/es/utils/velocity-per-second.mjs","../node_modules/framer-motion/dist/es/animation/generators/utils/velocity.mjs","../node_modules/framer-motion/dist/es/animation/generators/spring/find.mjs","../node_modules/framer-motion/dist/es/animation/generators/spring/index.mjs","../node_modules/framer-motion/dist/es/animation/generators/inertia.mjs","../node_modules/framer-motion/dist/es/easing/cubic-bezier.mjs","../node_modules/framer-motion/dist/es/easing/ease.mjs","../node_modules/framer-motion/dist/es/easing/utils/is-easing-array.mjs","../node_modules/framer-motion/dist/es/easing/modifiers/mirror.mjs","../node_modules/framer-motion/dist/es/easing/modifiers/reverse.mjs","../node_modules/framer-motion/dist/es/easing/circ.mjs","../node_modules/framer-motion/dist/es/easing/back.mjs","../node_modules/framer-motion/dist/es/easing/anticipate.mjs","../node_modules/framer-motion/dist/es/easing/utils/map.mjs","../node_modules/framer-motion/dist/es/utils/progress.mjs","../node_modules/framer-motion/dist/es/utils/mix/number.mjs","../node_modules/framer-motion/dist/es/utils/hsla-to-rgba.mjs","../node_modules/framer-motion/dist/es/utils/mix/immediate.mjs","../node_modules/framer-motion/dist/es/utils/mix/color.mjs","../node_modules/framer-motion/dist/es/utils/mix/visibility.mjs","../node_modules/framer-motion/dist/es/utils/mix/complex.mjs","../node_modules/framer-motion/dist/es/utils/mix/index.mjs","../node_modules/framer-motion/dist/es/utils/interpolate.mjs","../node_modules/framer-motion/dist/es/utils/offsets/fill.mjs","../node_modules/framer-motion/dist/es/utils/offsets/default.mjs","../node_modules/framer-motion/dist/es/utils/offsets/time.mjs","../node_modules/framer-motion/dist/es/animation/generators/keyframes.mjs","../node_modules/framer-motion/dist/es/animation/generators/utils/calc-duration.mjs","../node_modules/framer-motion/dist/es/animation/animators/drivers/driver-frameloop.mjs","../node_modules/framer-motion/dist/es/animation/animators/MainThreadAnimation.mjs","../node_modules/framer-motion/dist/es/easing/utils/is-bezier-definition.mjs","../node_modules/framer-motion/dist/es/animation/animators/waapi/easing.mjs","../node_modules/framer-motion/dist/es/animation/animators/waapi/index.mjs","../node_modules/framer-motion/dist/es/animation/animators/AcceleratedAnimation.mjs","../node_modules/framer-motion/dist/es/render/dom/scroll/observe.mjs","../node_modules/framer-motion/dist/es/render/dom/scroll/supports.mjs","../node_modules/framer-motion/dist/es/animation/GroupPlaybackControls.mjs","../node_modules/framer-motion/dist/es/animation/interfaces/motion-value.mjs","../node_modules/framer-motion/dist/es/value/use-will-change/is.mjs","../node_modules/framer-motion/dist/es/utils/array.mjs","../node_modules/framer-motion/dist/es/utils/subscription-manager.mjs","../node_modules/framer-motion/dist/es/utils/warn-once.mjs","../node_modules/framer-motion/dist/es/value/index.mjs","../node_modules/framer-motion/dist/es/render/utils/setters.mjs","../node_modules/framer-motion/dist/es/animation/optimized-appear/get-appear-id.mjs","../node_modules/framer-motion/dist/es/animation/interfaces/visual-element-target.mjs","../node_modules/framer-motion/dist/es/animation/interfaces/visual-element-variant.mjs","../node_modules/framer-motion/dist/es/animation/interfaces/visual-element.mjs","../node_modules/framer-motion/dist/es/render/utils/animation-state.mjs","../node_modules/framer-motion/dist/es/motion/features/animation/index.mjs","../node_modules/framer-motion/dist/es/motion/features/animation/exit.mjs","../node_modules/framer-motion/dist/es/motion/features/animations.mjs","../node_modules/framer-motion/dist/es/utils/distance.mjs","../node_modules/framer-motion/dist/es/gestures/pan/PanSession.mjs","../node_modules/framer-motion/dist/es/projection/geometry/delta-calc.mjs","../node_modules/framer-motion/dist/es/gestures/drag/utils/constraints.mjs","../node_modules/framer-motion/dist/es/projection/geometry/models.mjs","../node_modules/framer-motion/dist/es/projection/utils/each-axis.mjs","../node_modules/framer-motion/dist/es/projection/geometry/conversion.mjs","../node_modules/framer-motion/dist/es/projection/utils/has-transform.mjs","../node_modules/framer-motion/dist/es/projection/geometry/delta-apply.mjs","../node_modules/framer-motion/dist/es/projection/utils/measure.mjs","../node_modules/framer-motion/dist/es/utils/get-context-window.mjs","../node_modules/framer-motion/dist/es/gestures/drag/VisualElementDragControls.mjs","../node_modules/framer-motion/dist/es/gestures/drag/index.mjs","../node_modules/framer-motion/dist/es/gestures/pan/index.mjs","../node_modules/framer-motion/dist/es/components/AnimatePresence/use-presence.mjs","../node_modules/framer-motion/dist/es/projection/node/state.mjs","../node_modules/framer-motion/dist/es/projection/styles/scale-border-radius.mjs","../node_modules/framer-motion/dist/es/projection/styles/scale-box-shadow.mjs","../node_modules/framer-motion/dist/es/motion/features/layout/MeasureLayout.mjs","../node_modules/framer-motion/dist/es/projection/animation/mix-values.mjs","../node_modules/framer-motion/dist/es/projection/geometry/copy.mjs","../node_modules/framer-motion/dist/es/projection/geometry/delta-remove.mjs","../node_modules/framer-motion/dist/es/projection/geometry/utils.mjs","../node_modules/framer-motion/dist/es/projection/shared/stack.mjs","../node_modules/framer-motion/dist/es/projection/styles/transform.mjs","../node_modules/framer-motion/dist/es/render/utils/compare-by-depth.mjs","../node_modules/framer-motion/dist/es/render/utils/flat-tree.mjs","../node_modules/framer-motion/dist/es/utils/delay.mjs","../node_modules/framer-motion/dist/es/debug/record.mjs","../node_modules/framer-motion/dist/es/render/dom/utils/is-svg-element.mjs","../node_modules/framer-motion/dist/es/animation/interfaces/single-value.mjs","../node_modules/framer-motion/dist/es/projection/node/create-projection-node.mjs","../node_modules/framer-motion/dist/es/projection/node/DocumentProjectionNode.mjs","../node_modules/framer-motion/dist/es/projection/node/HTMLProjectionNode.mjs","../node_modules/framer-motion/dist/es/motion/features/drag.mjs","../node_modules/framer-motion/dist/es/utils/reduced-motion/state.mjs","../node_modules/framer-motion/dist/es/utils/reduced-motion/index.mjs","../node_modules/framer-motion/dist/es/render/utils/motion-values.mjs","../node_modules/framer-motion/dist/es/render/store.mjs","../node_modules/framer-motion/dist/es/render/dom/value-types/find.mjs","../node_modules/framer-motion/dist/es/render/VisualElement.mjs","../node_modules/framer-motion/dist/es/render/dom/DOMVisualElement.mjs","../node_modules/framer-motion/dist/es/render/html/HTMLVisualElement.mjs","../node_modules/framer-motion/dist/es/render/svg/SVGVisualElement.mjs","../node_modules/framer-motion/dist/es/render/dom/create-visual-element.mjs","../node_modules/framer-motion/dist/es/motion/features/layout.mjs","../node_modules/framer-motion/dist/es/render/dom/motion.mjs","../node_modules/framer-motion/dist/es/utils/use-is-mounted.mjs","../node_modules/framer-motion/dist/es/utils/use-force-update.mjs","../node_modules/framer-motion/dist/es/components/AnimatePresence/PopChild.mjs","../node_modules/framer-motion/dist/es/components/AnimatePresence/PresenceChild.mjs","../node_modules/framer-motion/dist/es/utils/use-unmount-effect.mjs","../node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs","../node_modules/framer-motion/dist/es/value/use-motion-value.mjs","../node_modules/framer-motion/dist/es/utils/transform.mjs","../node_modules/framer-motion/dist/es/value/use-combine-values.mjs","../node_modules/framer-motion/dist/es/value/use-computed.mjs","../node_modules/framer-motion/dist/es/value/use-transform.mjs","../node_modules/framer-motion/dist/es/render/dom/utils/resolve-element.mjs","../node_modules/framer-motion/dist/es/utils/reduced-motion/use-reduced-motion.mjs","../node_modules/framer-motion/dist/es/animation/utils/is-dom-keyframes.mjs","../node_modules/framer-motion/dist/es/animation/utils/create-visual-element.mjs","../node_modules/framer-motion/dist/es/easing/utils/create-generator-easing.mjs","../node_modules/framer-motion/dist/es/animation/sequence/utils/calc-time.mjs","../node_modules/framer-motion/dist/es/utils/wrap.mjs","../node_modules/framer-motion/dist/es/easing/utils/get-easing-for-segment.mjs","../node_modules/framer-motion/dist/es/animation/sequence/utils/edit.mjs","../node_modules/framer-motion/dist/es/animation/sequence/utils/sort.mjs","../node_modules/framer-motion/dist/es/animation/sequence/create.mjs","../node_modules/framer-motion/dist/es/animation/animate.mjs","../node_modules/@react-aria/utils/dist/useLayoutEffect.mjs","../node_modules/@react-aria/utils/dist/chain.mjs","../node_modules/@react-aria/utils/dist/platform.mjs","../node_modules/@react-aria/utils/dist/isScrollable.mjs","../node_modules/@react-aria/utils/dist/getScrollParent.mjs","../node_modules/react-modal-sheet/dist/index.mjs","../src/shared/hooks/useWindowDimensions.ts","../src/shared/components/Modal/index.tsx","../src/assets/terrible.png","../src/assets/bad.png","../src/assets/neutral.png","../src/assets/good.png","../src/assets/excelent.png","../src/shared/constants/data.ts","../src/shared/components/Input/index.tsx","../node_modules/imask/esm/core/utils.js","../node_modules/imask/esm/core/action-details.js","../node_modules/imask/esm/core/holder.js","../node_modules/imask/esm/masked/factory.js","../node_modules/imask/esm/controls/mask-element.js","../node_modules/imask/esm/controls/html-mask-element.js","../node_modules/imask/esm/controls/html-input-mask-element.js","../node_modules/imask/esm/controls/html-contenteditable-mask-element.js","../node_modules/imask/esm/controls/input-history.js","../node_modules/imask/esm/controls/input.js","../node_modules/imask/esm/core/change-details.js","../node_modules/imask/esm/core/continuous-tail-details.js","../node_modules/imask/esm/masked/base.js","../node_modules/imask/esm/masked/pattern/chunk-tail-details.js","../node_modules/imask/esm/masked/pattern/cursor.js","../node_modules/imask/esm/masked/pattern/fixed-definition.js","../node_modules/imask/esm/masked/pattern/input-definition.js","../node_modules/imask/esm/masked/regexp.js","../node_modules/imask/esm/masked/pattern.js","../node_modules/imask/esm/masked/range.js","../node_modules/imask/esm/masked/date.js","../node_modules/imask/esm/masked/dynamic.js","../node_modules/imask/esm/masked/enum.js","../node_modules/imask/esm/masked/function.js","../node_modules/imask/esm/masked/number.js","../node_modules/imask/esm/masked/pipe.js","../node_modules/imask/esm/masked/repeat.js","../node_modules/imask/esm/index.js","../node_modules/react-is/cjs/react-is.production.min.js","../node_modules/react-is/cjs/react-is.development.js","../node_modules/react-is/index.js","../node_modules/object-assign/index.js","../node_modules/prop-types/lib/ReactPropTypesSecret.js","../node_modules/prop-types/lib/has.js","../node_modules/prop-types/checkPropTypes.js","../node_modules/prop-types/factoryWithTypeCheckers.js","../node_modules/prop-types/factoryWithThrowingShims.js","../node_modules/prop-types/index.js","../node_modules/react-imask/esm/mixin.js","../node_modules/react-imask/esm/input.js","../src/shared/components/InputMask/index.tsx","../src/assets/close.png","../src/shared/components/FormContainer/index.tsx","../src/shared/components/Button/index.tsx","../src/components/FinalForm/index.tsx","../src/shared/hooks/useFeedback.ts","../src/shared/components/RateItem/index.tsx","../src/components/InitialContent/index.tsx","../src/assets/vector.png","../src/assets/check.png","../src/assets/delete.png","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/native.js","../node_modules/uuid/dist/esm-browser/v4.js","../src/components/FeedbackForm/index.tsx","../src/components/FeedBackModal/index.tsx","../src/components/Feedback/index.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","/**\n * @license React\n * react-jsx-runtime.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\nvar React = require('react');\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n// The Symbol used to tag the ReactElement-like types.\nvar REACT_ELEMENT_TYPE = Symbol.for('react.element');\nvar REACT_PORTAL_TYPE = Symbol.for('react.portal');\nvar REACT_FRAGMENT_TYPE = Symbol.for('react.fragment');\nvar REACT_STRICT_MODE_TYPE = Symbol.for('react.strict_mode');\nvar REACT_PROFILER_TYPE = Symbol.for('react.profiler');\nvar REACT_PROVIDER_TYPE = Symbol.for('react.provider');\nvar REACT_CONTEXT_TYPE = Symbol.for('react.context');\nvar REACT_FORWARD_REF_TYPE = Symbol.for('react.forward_ref');\nvar REACT_SUSPENSE_TYPE = Symbol.for('react.suspense');\nvar REACT_SUSPENSE_LIST_TYPE = Symbol.for('react.suspense_list');\nvar REACT_MEMO_TYPE = Symbol.for('react.memo');\nvar REACT_LAZY_TYPE = Symbol.for('react.lazy');\nvar REACT_OFFSCREEN_TYPE = Symbol.for('react.offscreen');\nvar MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nvar FAUX_ITERATOR_SYMBOL = '@@iterator';\nfunction getIteratorFn(maybeIterable) {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n\n  var maybeIterator = MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL];\n\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n\n  return null;\n}\n\nvar ReactSharedInternals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nfunction error(format) {\n  {\n    {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      printWarning('error', format, args);\n    }\n  }\n}\n\nfunction printWarning(level, format, args) {\n  // When changing this logic, you might want to also\n  // update consoleWithStackDev.www.js as well.\n  {\n    var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n    var stack = ReactDebugCurrentFrame.getStackAddendum();\n\n    if (stack !== '') {\n      format += '%s';\n      args = args.concat([stack]);\n    } // eslint-disable-next-line react-internal/safe-string-coercion\n\n\n    var argsWithFormat = args.map(function (item) {\n      return String(item);\n    }); // Careful: RN currently depends on this prefix\n\n    argsWithFormat.unshift('Warning: ' + format); // We intentionally don't use spread (or .apply) directly because it\n    // breaks IE9: https://github.com/facebook/react/issues/13610\n    // eslint-disable-next-line react-internal/no-production-logging\n\n    Function.prototype.apply.call(console[level], console, argsWithFormat);\n  }\n}\n\n// -----------------------------------------------------------------------------\n\nvar enableScopeAPI = false; // Experimental Create Event Handle API.\nvar enableCacheElement = false;\nvar enableTransitionTracing = false; // No known bugs, but needs performance testing\n\nvar enableLegacyHidden = false; // Enables unstable_avoidThisFallback feature in Fiber\n// stuff. Intended to enable React core members to more easily debug scheduling\n// issues in DEV builds.\n\nvar enableDebugTracing = false; // Track which Fiber(s) schedule render work.\n\nvar REACT_MODULE_REFERENCE;\n\n{\n  REACT_MODULE_REFERENCE = Symbol.for('react.module.reference');\n}\n\nfunction isValidElementType(type) {\n  if (typeof type === 'string' || typeof type === 'function') {\n    return true;\n  } // Note: typeof might be other than 'symbol' or 'number' (e.g. if it's a polyfill).\n\n\n  if (type === REACT_FRAGMENT_TYPE || type === REACT_PROFILER_TYPE || enableDebugTracing  || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || enableLegacyHidden  || type === REACT_OFFSCREEN_TYPE || enableScopeAPI  || enableCacheElement  || enableTransitionTracing ) {\n    return true;\n  }\n\n  if (typeof type === 'object' && type !== null) {\n    if (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || // This needs to include all possible module reference object\n    // types supported by any Flight configuration anywhere since\n    // we don't know which Flight build this will end up being used\n    // with.\n    type.$$typeof === REACT_MODULE_REFERENCE || type.getModuleId !== undefined) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction getWrappedName(outerType, innerType, wrapperName) {\n  var displayName = outerType.displayName;\n\n  if (displayName) {\n    return displayName;\n  }\n\n  var functionName = innerType.displayName || innerType.name || '';\n  return functionName !== '' ? wrapperName + \"(\" + functionName + \")\" : wrapperName;\n} // Keep in sync with react-reconciler/getComponentNameFromFiber\n\n\nfunction getContextName(type) {\n  return type.displayName || 'Context';\n} // Note that the reconciler package should generally prefer to use getComponentNameFromFiber() instead.\n\n\nfunction getComponentNameFromType(type) {\n  if (type == null) {\n    // Host root, text node or just invalid type.\n    return null;\n  }\n\n  {\n    if (typeof type.tag === 'number') {\n      error('Received an unexpected object in getComponentNameFromType(). ' + 'This is likely a bug in React. Please file an issue.');\n    }\n  }\n\n  if (typeof type === 'function') {\n    return type.displayName || type.name || null;\n  }\n\n  if (typeof type === 'string') {\n    return type;\n  }\n\n  switch (type) {\n    case REACT_FRAGMENT_TYPE:\n      return 'Fragment';\n\n    case REACT_PORTAL_TYPE:\n      return 'Portal';\n\n    case REACT_PROFILER_TYPE:\n      return 'Profiler';\n\n    case REACT_STRICT_MODE_TYPE:\n      return 'StrictMode';\n\n    case REACT_SUSPENSE_TYPE:\n      return 'Suspense';\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return 'SuspenseList';\n\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_CONTEXT_TYPE:\n        var context = type;\n        return getContextName(context) + '.Consumer';\n\n      case REACT_PROVIDER_TYPE:\n        var provider = type;\n        return getContextName(provider._context) + '.Provider';\n\n      case REACT_FORWARD_REF_TYPE:\n        return getWrappedName(type, type.render, 'ForwardRef');\n\n      case REACT_MEMO_TYPE:\n        var outerName = type.displayName || null;\n\n        if (outerName !== null) {\n          return outerName;\n        }\n\n        return getComponentNameFromType(type.type) || 'Memo';\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            return getComponentNameFromType(init(payload));\n          } catch (x) {\n            return null;\n          }\n        }\n\n      // eslint-disable-next-line no-fallthrough\n    }\n  }\n\n  return null;\n}\n\nvar assign = Object.assign;\n\n// Helpers to patch console.logs to avoid logging during side-effect free\n// replaying on render function. This currently only patches the object\n// lazily which won't cover if the log function was extracted eagerly.\n// We could also eagerly patch the method.\nvar disabledDepth = 0;\nvar prevLog;\nvar prevInfo;\nvar prevWarn;\nvar prevError;\nvar prevGroup;\nvar prevGroupCollapsed;\nvar prevGroupEnd;\n\nfunction disabledLog() {}\n\ndisabledLog.__reactDisabledLog = true;\nfunction disableLogs() {\n  {\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      prevLog = console.log;\n      prevInfo = console.info;\n      prevWarn = console.warn;\n      prevError = console.error;\n      prevGroup = console.group;\n      prevGroupCollapsed = console.groupCollapsed;\n      prevGroupEnd = console.groupEnd; // https://github.com/facebook/react/issues/19099\n\n      var props = {\n        configurable: true,\n        enumerable: true,\n        value: disabledLog,\n        writable: true\n      }; // $FlowFixMe Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        info: props,\n        log: props,\n        warn: props,\n        error: props,\n        group: props,\n        groupCollapsed: props,\n        groupEnd: props\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    disabledDepth++;\n  }\n}\nfunction reenableLogs() {\n  {\n    disabledDepth--;\n\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      var props = {\n        configurable: true,\n        enumerable: true,\n        writable: true\n      }; // $FlowFixMe Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        log: assign({}, props, {\n          value: prevLog\n        }),\n        info: assign({}, props, {\n          value: prevInfo\n        }),\n        warn: assign({}, props, {\n          value: prevWarn\n        }),\n        error: assign({}, props, {\n          value: prevError\n        }),\n        group: assign({}, props, {\n          value: prevGroup\n        }),\n        groupCollapsed: assign({}, props, {\n          value: prevGroupCollapsed\n        }),\n        groupEnd: assign({}, props, {\n          value: prevGroupEnd\n        })\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    if (disabledDepth < 0) {\n      error('disabledDepth fell below zero. ' + 'This is a bug in React. Please file an issue.');\n    }\n  }\n}\n\nvar ReactCurrentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\nvar prefix;\nfunction describeBuiltInComponentFrame(name, source, ownerFn) {\n  {\n    if (prefix === undefined) {\n      // Extract the VM specific prefix used by each line.\n      try {\n        throw Error();\n      } catch (x) {\n        var match = x.stack.trim().match(/\\n( *(at )?)/);\n        prefix = match && match[1] || '';\n      }\n    } // We use the prefix to ensure our stacks line up with native stack frames.\n\n\n    return '\\n' + prefix + name;\n  }\n}\nvar reentry = false;\nvar componentFrameCache;\n\n{\n  var PossiblyWeakMap = typeof WeakMap === 'function' ? WeakMap : Map;\n  componentFrameCache = new PossiblyWeakMap();\n}\n\nfunction describeNativeComponentFrame(fn, construct) {\n  // If something asked for a stack inside a fake render, it should get ignored.\n  if ( !fn || reentry) {\n    return '';\n  }\n\n  {\n    var frame = componentFrameCache.get(fn);\n\n    if (frame !== undefined) {\n      return frame;\n    }\n  }\n\n  var control;\n  reentry = true;\n  var previousPrepareStackTrace = Error.prepareStackTrace; // $FlowFixMe It does accept undefined.\n\n  Error.prepareStackTrace = undefined;\n  var previousDispatcher;\n\n  {\n    previousDispatcher = ReactCurrentDispatcher.current; // Set the dispatcher in DEV because this might be call in the render function\n    // for warnings.\n\n    ReactCurrentDispatcher.current = null;\n    disableLogs();\n  }\n\n  try {\n    // This should throw.\n    if (construct) {\n      // Something should be setting the props in the constructor.\n      var Fake = function () {\n        throw Error();\n      }; // $FlowFixMe\n\n\n      Object.defineProperty(Fake.prototype, 'props', {\n        set: function () {\n          // We use a throwing setter instead of frozen or non-writable props\n          // because that won't throw in a non-strict mode function.\n          throw Error();\n        }\n      });\n\n      if (typeof Reflect === 'object' && Reflect.construct) {\n        // We construct a different control for this case to include any extra\n        // frames added by the construct call.\n        try {\n          Reflect.construct(Fake, []);\n        } catch (x) {\n          control = x;\n        }\n\n        Reflect.construct(fn, [], Fake);\n      } else {\n        try {\n          Fake.call();\n        } catch (x) {\n          control = x;\n        }\n\n        fn.call(Fake.prototype);\n      }\n    } else {\n      try {\n        throw Error();\n      } catch (x) {\n        control = x;\n      }\n\n      fn();\n    }\n  } catch (sample) {\n    // This is inlined manually because closure doesn't do it for us.\n    if (sample && control && typeof sample.stack === 'string') {\n      // This extracts the first frame from the sample that isn't also in the control.\n      // Skipping one frame that we assume is the frame that calls the two.\n      var sampleLines = sample.stack.split('\\n');\n      var controlLines = control.stack.split('\\n');\n      var s = sampleLines.length - 1;\n      var c = controlLines.length - 1;\n\n      while (s >= 1 && c >= 0 && sampleLines[s] !== controlLines[c]) {\n        // We expect at least one stack frame to be shared.\n        // Typically this will be the root most one. However, stack frames may be\n        // cut off due to maximum stack limits. In this case, one maybe cut off\n        // earlier than the other. We assume that the sample is longer or the same\n        // and there for cut off earlier. So we should find the root most frame in\n        // the sample somewhere in the control.\n        c--;\n      }\n\n      for (; s >= 1 && c >= 0; s--, c--) {\n        // Next we find the first one that isn't the same which should be the\n        // frame that called our sample function and the control.\n        if (sampleLines[s] !== controlLines[c]) {\n          // In V8, the first line is describing the message but other VMs don't.\n          // If we're about to return the first line, and the control is also on the same\n          // line, that's a pretty good indicator that our sample threw at same line as\n          // the control. I.e. before we entered the sample frame. So we ignore this result.\n          // This can happen if you passed a class to function component, or non-function.\n          if (s !== 1 || c !== 1) {\n            do {\n              s--;\n              c--; // We may still have similar intermediate frames from the construct call.\n              // The next one that isn't the same should be our match though.\n\n              if (c < 0 || sampleLines[s] !== controlLines[c]) {\n                // V8 adds a \"new\" prefix for native classes. Let's remove it to make it prettier.\n                var _frame = '\\n' + sampleLines[s].replace(' at new ', ' at '); // If our component frame is labeled \"<anonymous>\"\n                // but we have a user-provided \"displayName\"\n                // splice it in to make the stack more readable.\n\n\n                if (fn.displayName && _frame.includes('<anonymous>')) {\n                  _frame = _frame.replace('<anonymous>', fn.displayName);\n                }\n\n                {\n                  if (typeof fn === 'function') {\n                    componentFrameCache.set(fn, _frame);\n                  }\n                } // Return the line we found.\n\n\n                return _frame;\n              }\n            } while (s >= 1 && c >= 0);\n          }\n\n          break;\n        }\n      }\n    }\n  } finally {\n    reentry = false;\n\n    {\n      ReactCurrentDispatcher.current = previousDispatcher;\n      reenableLogs();\n    }\n\n    Error.prepareStackTrace = previousPrepareStackTrace;\n  } // Fallback to just using the name if we couldn't make it throw.\n\n\n  var name = fn ? fn.displayName || fn.name : '';\n  var syntheticFrame = name ? describeBuiltInComponentFrame(name) : '';\n\n  {\n    if (typeof fn === 'function') {\n      componentFrameCache.set(fn, syntheticFrame);\n    }\n  }\n\n  return syntheticFrame;\n}\nfunction describeFunctionComponentFrame(fn, source, ownerFn) {\n  {\n    return describeNativeComponentFrame(fn, false);\n  }\n}\n\nfunction shouldConstruct(Component) {\n  var prototype = Component.prototype;\n  return !!(prototype && prototype.isReactComponent);\n}\n\nfunction describeUnknownElementTypeFrameInDEV(type, source, ownerFn) {\n\n  if (type == null) {\n    return '';\n  }\n\n  if (typeof type === 'function') {\n    {\n      return describeNativeComponentFrame(type, shouldConstruct(type));\n    }\n  }\n\n  if (typeof type === 'string') {\n    return describeBuiltInComponentFrame(type);\n  }\n\n  switch (type) {\n    case REACT_SUSPENSE_TYPE:\n      return describeBuiltInComponentFrame('Suspense');\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return describeBuiltInComponentFrame('SuspenseList');\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_FORWARD_REF_TYPE:\n        return describeFunctionComponentFrame(type.render);\n\n      case REACT_MEMO_TYPE:\n        // Memo may contain any component type so we recursively resolve it.\n        return describeUnknownElementTypeFrameInDEV(type.type, source, ownerFn);\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            // Lazy may contain any component type so we recursively resolve it.\n            return describeUnknownElementTypeFrameInDEV(init(payload), source, ownerFn);\n          } catch (x) {}\n        }\n    }\n  }\n\n  return '';\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar loggedTypeFailures = {};\nvar ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n\nfunction setCurrentlyValidatingElement(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n      ReactDebugCurrentFrame.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame.setExtraStackFrame(null);\n    }\n  }\n}\n\nfunction checkPropTypes(typeSpecs, values, location, componentName, element) {\n  {\n    // $FlowFixMe This is okay but Flow doesn't know it.\n    var has = Function.call.bind(hasOwnProperty);\n\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error$1 = void 0; // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            // eslint-disable-next-line react-internal/prod-error-codes\n            var err = Error((componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' + 'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.');\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n\n          error$1 = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED');\n        } catch (ex) {\n          error$1 = ex;\n        }\n\n        if (error$1 && !(error$1 instanceof Error)) {\n          setCurrentlyValidatingElement(element);\n\n          error('%s: type specification of %s' + ' `%s` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a %s. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).', componentName || 'React class', location, typeSpecName, typeof error$1);\n\n          setCurrentlyValidatingElement(null);\n        }\n\n        if (error$1 instanceof Error && !(error$1.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error$1.message] = true;\n          setCurrentlyValidatingElement(element);\n\n          error('Failed %s type: %s', location, error$1.message);\n\n          setCurrentlyValidatingElement(null);\n        }\n      }\n    }\n  }\n}\n\nvar isArrayImpl = Array.isArray; // eslint-disable-next-line no-redeclare\n\nfunction isArray(a) {\n  return isArrayImpl(a);\n}\n\n/*\n * The `'' + value` pattern (used in in perf-sensitive code) throws for Symbol\n * and Temporal.* types. See https://github.com/facebook/react/pull/22064.\n *\n * The functions in this module will throw an easier-to-understand,\n * easier-to-debug exception with a clear errors message message explaining the\n * problem. (Instead of a confusing exception thrown inside the implementation\n * of the `value` object).\n */\n// $FlowFixMe only called in DEV, so void return is not possible.\nfunction typeName(value) {\n  {\n    // toStringTag is needed for namespaced types like Temporal.Instant\n    var hasToStringTag = typeof Symbol === 'function' && Symbol.toStringTag;\n    var type = hasToStringTag && value[Symbol.toStringTag] || value.constructor.name || 'Object';\n    return type;\n  }\n} // $FlowFixMe only called in DEV, so void return is not possible.\n\n\nfunction willCoercionThrow(value) {\n  {\n    try {\n      testStringCoercion(value);\n      return false;\n    } catch (e) {\n      return true;\n    }\n  }\n}\n\nfunction testStringCoercion(value) {\n  // If you ended up here by following an exception call stack, here's what's\n  // happened: you supplied an object or symbol value to React (as a prop, key,\n  // DOM attribute, CSS property, string ref, etc.) and when React tried to\n  // coerce it to a string using `'' + value`, an exception was thrown.\n  //\n  // The most common types that will cause this exception are `Symbol` instances\n  // and Temporal objects like `Temporal.Instant`. But any object that has a\n  // `valueOf` or `[Symbol.toPrimitive]` method that throws will also cause this\n  // exception. (Library authors do this to prevent users from using built-in\n  // numeric operators like `+` or comparison operators like `>=` because custom\n  // methods are needed to perform accurate arithmetic or comparison.)\n  //\n  // To fix the problem, coerce this object or symbol value to a string before\n  // passing it to React. The most reliable way is usually `String(value)`.\n  //\n  // To find which value is throwing, check the browser or debugger console.\n  // Before this exception was thrown, there should be `console.error` output\n  // that shows the type (Symbol, Temporal.PlainDate, etc.) that caused the\n  // problem and how that type was used: key, atrribute, input value prop, etc.\n  // In most cases, this console output also shows the component and its\n  // ancestor components where the exception happened.\n  //\n  // eslint-disable-next-line react-internal/safe-string-coercion\n  return '' + value;\n}\nfunction checkKeyStringCoercion(value) {\n  {\n    if (willCoercionThrow(value)) {\n      error('The provided key is an unsupported type %s.' + ' This value must be coerced to a string before before using it here.', typeName(value));\n\n      return testStringCoercion(value); // throw (to help callers find troubleshooting comments)\n    }\n  }\n}\n\nvar ReactCurrentOwner = ReactSharedInternals.ReactCurrentOwner;\nvar RESERVED_PROPS = {\n  key: true,\n  ref: true,\n  __self: true,\n  __source: true\n};\nvar specialPropKeyWarningShown;\nvar specialPropRefWarningShown;\nvar didWarnAboutStringRefs;\n\n{\n  didWarnAboutStringRefs = {};\n}\n\nfunction hasValidRef(config) {\n  {\n    if (hasOwnProperty.call(config, 'ref')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'ref').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.ref !== undefined;\n}\n\nfunction hasValidKey(config) {\n  {\n    if (hasOwnProperty.call(config, 'key')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'key').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.key !== undefined;\n}\n\nfunction warnIfStringRefCannotBeAutoConverted(config, self) {\n  {\n    if (typeof config.ref === 'string' && ReactCurrentOwner.current && self && ReactCurrentOwner.current.stateNode !== self) {\n      var componentName = getComponentNameFromType(ReactCurrentOwner.current.type);\n\n      if (!didWarnAboutStringRefs[componentName]) {\n        error('Component \"%s\" contains the string ref \"%s\". ' + 'Support for string refs will be removed in a future major release. ' + 'This case cannot be automatically converted to an arrow function. ' + 'We ask you to manually fix this case by using useRef() or createRef() instead. ' + 'Learn more about using refs safely here: ' + 'https://reactjs.org/link/strict-mode-string-ref', getComponentNameFromType(ReactCurrentOwner.current.type), config.ref);\n\n        didWarnAboutStringRefs[componentName] = true;\n      }\n    }\n  }\n}\n\nfunction defineKeyPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingKey = function () {\n      if (!specialPropKeyWarningShown) {\n        specialPropKeyWarningShown = true;\n\n        error('%s: `key` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingKey.isReactWarning = true;\n    Object.defineProperty(props, 'key', {\n      get: warnAboutAccessingKey,\n      configurable: true\n    });\n  }\n}\n\nfunction defineRefPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingRef = function () {\n      if (!specialPropRefWarningShown) {\n        specialPropRefWarningShown = true;\n\n        error('%s: `ref` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingRef.isReactWarning = true;\n    Object.defineProperty(props, 'ref', {\n      get: warnAboutAccessingRef,\n      configurable: true\n    });\n  }\n}\n/**\n * Factory method to create a new React element. This no longer adheres to\n * the class pattern, so do not use new to call it. Also, instanceof check\n * will not work. Instead test $$typeof field against Symbol.for('react.element') to check\n * if something is a React Element.\n *\n * @param {*} type\n * @param {*} props\n * @param {*} key\n * @param {string|object} ref\n * @param {*} owner\n * @param {*} self A *temporary* helper to detect places where `this` is\n * different from the `owner` when React.createElement is called, so that we\n * can warn. We want to get rid of owner and replace string `ref`s with arrow\n * functions, and as long as `this` and owner are the same, there will be no\n * change in behavior.\n * @param {*} source An annotation object (added by a transpiler or otherwise)\n * indicating filename, line number, and/or other information.\n * @internal\n */\n\n\nvar ReactElement = function (type, key, ref, self, source, owner, props) {\n  var element = {\n    // This tag allows us to uniquely identify this as a React Element\n    $$typeof: REACT_ELEMENT_TYPE,\n    // Built-in properties that belong on the element\n    type: type,\n    key: key,\n    ref: ref,\n    props: props,\n    // Record the component responsible for creating this element.\n    _owner: owner\n  };\n\n  {\n    // The validation flag is currently mutative. We put it on\n    // an external backing store so that we can freeze the whole object.\n    // This can be replaced with a WeakMap once they are implemented in\n    // commonly used development environments.\n    element._store = {}; // To make comparing ReactElements easier for testing purposes, we make\n    // the validation flag non-enumerable (where possible, which should\n    // include every environment we run tests in), so the test framework\n    // ignores it.\n\n    Object.defineProperty(element._store, 'validated', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: false\n    }); // self and source are DEV only properties.\n\n    Object.defineProperty(element, '_self', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: self\n    }); // Two elements created in two different places should be considered\n    // equal for testing purposes and therefore we hide it from enumeration.\n\n    Object.defineProperty(element, '_source', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: source\n    });\n\n    if (Object.freeze) {\n      Object.freeze(element.props);\n      Object.freeze(element);\n    }\n  }\n\n  return element;\n};\n/**\n * https://github.com/reactjs/rfcs/pull/107\n * @param {*} type\n * @param {object} props\n * @param {string} key\n */\n\nfunction jsxDEV(type, config, maybeKey, source, self) {\n  {\n    var propName; // Reserved names are extracted\n\n    var props = {};\n    var key = null;\n    var ref = null; // Currently, key can be spread in as a prop. This causes a potential\n    // issue if key is also explicitly declared (ie. <div {...props} key=\"Hi\" />\n    // or <div key=\"Hi\" {...props} /> ). We want to deprecate key spread,\n    // but as an intermediary step, we will use jsxDEV for everything except\n    // <div {...props} key=\"Hi\" />, because we aren't currently able to tell if\n    // key is explicitly declared to be undefined or not.\n\n    if (maybeKey !== undefined) {\n      {\n        checkKeyStringCoercion(maybeKey);\n      }\n\n      key = '' + maybeKey;\n    }\n\n    if (hasValidKey(config)) {\n      {\n        checkKeyStringCoercion(config.key);\n      }\n\n      key = '' + config.key;\n    }\n\n    if (hasValidRef(config)) {\n      ref = config.ref;\n      warnIfStringRefCannotBeAutoConverted(config, self);\n    } // Remaining properties are added to a new props object\n\n\n    for (propName in config) {\n      if (hasOwnProperty.call(config, propName) && !RESERVED_PROPS.hasOwnProperty(propName)) {\n        props[propName] = config[propName];\n      }\n    } // Resolve default props\n\n\n    if (type && type.defaultProps) {\n      var defaultProps = type.defaultProps;\n\n      for (propName in defaultProps) {\n        if (props[propName] === undefined) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    }\n\n    if (key || ref) {\n      var displayName = typeof type === 'function' ? type.displayName || type.name || 'Unknown' : type;\n\n      if (key) {\n        defineKeyPropWarningGetter(props, displayName);\n      }\n\n      if (ref) {\n        defineRefPropWarningGetter(props, displayName);\n      }\n    }\n\n    return ReactElement(type, key, ref, self, source, ReactCurrentOwner.current, props);\n  }\n}\n\nvar ReactCurrentOwner$1 = ReactSharedInternals.ReactCurrentOwner;\nvar ReactDebugCurrentFrame$1 = ReactSharedInternals.ReactDebugCurrentFrame;\n\nfunction setCurrentlyValidatingElement$1(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n      ReactDebugCurrentFrame$1.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame$1.setExtraStackFrame(null);\n    }\n  }\n}\n\nvar propTypesMisspellWarningShown;\n\n{\n  propTypesMisspellWarningShown = false;\n}\n/**\n * Verifies the object is a ReactElement.\n * See https://reactjs.org/docs/react-api.html#isvalidelement\n * @param {?object} object\n * @return {boolean} True if `object` is a ReactElement.\n * @final\n */\n\n\nfunction isValidElement(object) {\n  {\n    return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n  }\n}\n\nfunction getDeclarationErrorAddendum() {\n  {\n    if (ReactCurrentOwner$1.current) {\n      var name = getComponentNameFromType(ReactCurrentOwner$1.current.type);\n\n      if (name) {\n        return '\\n\\nCheck the render method of `' + name + '`.';\n      }\n    }\n\n    return '';\n  }\n}\n\nfunction getSourceInfoErrorAddendum(source) {\n  {\n    if (source !== undefined) {\n      var fileName = source.fileName.replace(/^.*[\\\\\\/]/, '');\n      var lineNumber = source.lineNumber;\n      return '\\n\\nCheck your code at ' + fileName + ':' + lineNumber + '.';\n    }\n\n    return '';\n  }\n}\n/**\n * Warn if there's no key explicitly set on dynamic arrays of children or\n * object keys are not valid. This allows us to keep track of children between\n * updates.\n */\n\n\nvar ownerHasKeyUseWarning = {};\n\nfunction getCurrentComponentErrorInfo(parentType) {\n  {\n    var info = getDeclarationErrorAddendum();\n\n    if (!info) {\n      var parentName = typeof parentType === 'string' ? parentType : parentType.displayName || parentType.name;\n\n      if (parentName) {\n        info = \"\\n\\nCheck the top-level render call using <\" + parentName + \">.\";\n      }\n    }\n\n    return info;\n  }\n}\n/**\n * Warn if the element doesn't have an explicit key assigned to it.\n * This element is in an array. The array could grow and shrink or be\n * reordered. All children that haven't already been validated are required to\n * have a \"key\" property assigned to it. Error statuses are cached so a warning\n * will only be shown once.\n *\n * @internal\n * @param {ReactElement} element Element that requires a key.\n * @param {*} parentType element's parent's type.\n */\n\n\nfunction validateExplicitKey(element, parentType) {\n  {\n    if (!element._store || element._store.validated || element.key != null) {\n      return;\n    }\n\n    element._store.validated = true;\n    var currentComponentErrorInfo = getCurrentComponentErrorInfo(parentType);\n\n    if (ownerHasKeyUseWarning[currentComponentErrorInfo]) {\n      return;\n    }\n\n    ownerHasKeyUseWarning[currentComponentErrorInfo] = true; // Usually the current owner is the offender, but if it accepts children as a\n    // property, it may be the creator of the child that's responsible for\n    // assigning it a key.\n\n    var childOwner = '';\n\n    if (element && element._owner && element._owner !== ReactCurrentOwner$1.current) {\n      // Give the component that originally created this child.\n      childOwner = \" It was passed a child from \" + getComponentNameFromType(element._owner.type) + \".\";\n    }\n\n    setCurrentlyValidatingElement$1(element);\n\n    error('Each child in a list should have a unique \"key\" prop.' + '%s%s See https://reactjs.org/link/warning-keys for more information.', currentComponentErrorInfo, childOwner);\n\n    setCurrentlyValidatingElement$1(null);\n  }\n}\n/**\n * Ensure that every element either is passed in a static location, in an\n * array with an explicit keys property defined, or in an object literal\n * with valid key property.\n *\n * @internal\n * @param {ReactNode} node Statically passed child of any type.\n * @param {*} parentType node's parent's type.\n */\n\n\nfunction validateChildKeys(node, parentType) {\n  {\n    if (typeof node !== 'object') {\n      return;\n    }\n\n    if (isArray(node)) {\n      for (var i = 0; i < node.length; i++) {\n        var child = node[i];\n\n        if (isValidElement(child)) {\n          validateExplicitKey(child, parentType);\n        }\n      }\n    } else if (isValidElement(node)) {\n      // This element was passed in a valid location.\n      if (node._store) {\n        node._store.validated = true;\n      }\n    } else if (node) {\n      var iteratorFn = getIteratorFn(node);\n\n      if (typeof iteratorFn === 'function') {\n        // Entry iterators used to provide implicit keys,\n        // but now we print a separate warning for them later.\n        if (iteratorFn !== node.entries) {\n          var iterator = iteratorFn.call(node);\n          var step;\n\n          while (!(step = iterator.next()).done) {\n            if (isValidElement(step.value)) {\n              validateExplicitKey(step.value, parentType);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n/**\n * Given an element, validate that its props follow the propTypes definition,\n * provided by the type.\n *\n * @param {ReactElement} element\n */\n\n\nfunction validatePropTypes(element) {\n  {\n    var type = element.type;\n\n    if (type === null || type === undefined || typeof type === 'string') {\n      return;\n    }\n\n    var propTypes;\n\n    if (typeof type === 'function') {\n      propTypes = type.propTypes;\n    } else if (typeof type === 'object' && (type.$$typeof === REACT_FORWARD_REF_TYPE || // Note: Memo only checks outer props here.\n    // Inner props are checked in the reconciler.\n    type.$$typeof === REACT_MEMO_TYPE)) {\n      propTypes = type.propTypes;\n    } else {\n      return;\n    }\n\n    if (propTypes) {\n      // Intentionally inside to avoid triggering lazy initializers:\n      var name = getComponentNameFromType(type);\n      checkPropTypes(propTypes, element.props, 'prop', name, element);\n    } else if (type.PropTypes !== undefined && !propTypesMisspellWarningShown) {\n      propTypesMisspellWarningShown = true; // Intentionally inside to avoid triggering lazy initializers:\n\n      var _name = getComponentNameFromType(type);\n\n      error('Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?', _name || 'Unknown');\n    }\n\n    if (typeof type.getDefaultProps === 'function' && !type.getDefaultProps.isReactClassApproved) {\n      error('getDefaultProps is only used on classic React.createClass ' + 'definitions. Use a static property named `defaultProps` instead.');\n    }\n  }\n}\n/**\n * Given a fragment, validate that it can only be provided with fragment props\n * @param {ReactElement} fragment\n */\n\n\nfunction validateFragmentProps(fragment) {\n  {\n    var keys = Object.keys(fragment.props);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n\n      if (key !== 'children' && key !== 'key') {\n        setCurrentlyValidatingElement$1(fragment);\n\n        error('Invalid prop `%s` supplied to `React.Fragment`. ' + 'React.Fragment can only have `key` and `children` props.', key);\n\n        setCurrentlyValidatingElement$1(null);\n        break;\n      }\n    }\n\n    if (fragment.ref !== null) {\n      setCurrentlyValidatingElement$1(fragment);\n\n      error('Invalid attribute `ref` supplied to `React.Fragment`.');\n\n      setCurrentlyValidatingElement$1(null);\n    }\n  }\n}\n\nvar didWarnAboutKeySpread = {};\nfunction jsxWithValidation(type, props, key, isStaticChildren, source, self) {\n  {\n    var validType = isValidElementType(type); // We warn in this case but don't throw. We expect the element creation to\n    // succeed and there will likely be errors in render.\n\n    if (!validType) {\n      var info = '';\n\n      if (type === undefined || typeof type === 'object' && type !== null && Object.keys(type).length === 0) {\n        info += ' You likely forgot to export your component from the file ' + \"it's defined in, or you might have mixed up default and named imports.\";\n      }\n\n      var sourceInfo = getSourceInfoErrorAddendum(source);\n\n      if (sourceInfo) {\n        info += sourceInfo;\n      } else {\n        info += getDeclarationErrorAddendum();\n      }\n\n      var typeString;\n\n      if (type === null) {\n        typeString = 'null';\n      } else if (isArray(type)) {\n        typeString = 'array';\n      } else if (type !== undefined && type.$$typeof === REACT_ELEMENT_TYPE) {\n        typeString = \"<\" + (getComponentNameFromType(type.type) || 'Unknown') + \" />\";\n        info = ' Did you accidentally export a JSX literal instead of a component?';\n      } else {\n        typeString = typeof type;\n      }\n\n      error('React.jsx: type is invalid -- expected a string (for ' + 'built-in components) or a class/function (for composite ' + 'components) but got: %s.%s', typeString, info);\n    }\n\n    var element = jsxDEV(type, props, key, source, self); // The result can be nullish if a mock or a custom function is used.\n    // TODO: Drop this when these are no longer allowed as the type argument.\n\n    if (element == null) {\n      return element;\n    } // Skip key warning if the type isn't valid since our key validation logic\n    // doesn't expect a non-string/function type and can throw confusing errors.\n    // We don't want exception behavior to differ between dev and prod.\n    // (Rendering will throw with a helpful message and as soon as the type is\n    // fixed, the key warnings will appear.)\n\n\n    if (validType) {\n      var children = props.children;\n\n      if (children !== undefined) {\n        if (isStaticChildren) {\n          if (isArray(children)) {\n            for (var i = 0; i < children.length; i++) {\n              validateChildKeys(children[i], type);\n            }\n\n            if (Object.freeze) {\n              Object.freeze(children);\n            }\n          } else {\n            error('React.jsx: Static children should always be an array. ' + 'You are likely explicitly calling React.jsxs or React.jsxDEV. ' + 'Use the Babel transform instead.');\n          }\n        } else {\n          validateChildKeys(children, type);\n        }\n      }\n    }\n\n    {\n      if (hasOwnProperty.call(props, 'key')) {\n        var componentName = getComponentNameFromType(type);\n        var keys = Object.keys(props).filter(function (k) {\n          return k !== 'key';\n        });\n        var beforeExample = keys.length > 0 ? '{key: someKey, ' + keys.join(': ..., ') + ': ...}' : '{key: someKey}';\n\n        if (!didWarnAboutKeySpread[componentName + beforeExample]) {\n          var afterExample = keys.length > 0 ? '{' + keys.join(': ..., ') + ': ...}' : '{}';\n\n          error('A props object containing a \"key\" prop is being spread into JSX:\\n' + '  let props = %s;\\n' + '  <%s {...props} />\\n' + 'React keys must be passed directly to JSX without using spread:\\n' + '  let props = %s;\\n' + '  <%s key={someKey} {...props} />', beforeExample, componentName, afterExample, componentName);\n\n          didWarnAboutKeySpread[componentName + beforeExample] = true;\n        }\n      }\n    }\n\n    if (type === REACT_FRAGMENT_TYPE) {\n      validateFragmentProps(element);\n    } else {\n      validatePropTypes(element);\n    }\n\n    return element;\n  }\n} // These two functions exist to still get child warnings in dev\n// even with the prod transform. This means that jsxDEV is purely\n// opt-in behavior for better messages but that we won't stop\n// giving you warnings if you use production apis.\n\nfunction jsxWithValidationStatic(type, props, key) {\n  {\n    return jsxWithValidation(type, props, key, true);\n  }\n}\nfunction jsxWithValidationDynamic(type, props, key) {\n  {\n    return jsxWithValidation(type, props, key, false);\n  }\n}\n\nvar jsx =  jsxWithValidationDynamic ; // we may want to special case jsxs internally to take advantage of static children.\n// for now we can ship identical prod functions\n\nvar jsxs =  jsxWithValidationStatic ;\n\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsx = jsx;\nexports.jsxs = jsxs;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","import { FC, createContext, useState } from \"react\";\n\nexport interface IFeedBackContext {\n    rateValue: number | null;\n    text: string;\n    stage: number;\n    onChangeStage: (stage: number) => void;\n    onChangeRate: (value: number) => void;\n    onSetText: (value: string) => void;\n}\n\nconst FeedBackContext = createContext<IFeedBackContext | null>(null);\n\ninterface FeedBackProviderProps {\n    children: React.ReactNode;\n}\n\nconst FeedBackProvider: FC<FeedBackProviderProps> = ({ children }) => {\n    const [rateValue, setRateValue] = useState<number | null>(null);\n    const [stage, setStage] = useState(0);\n    const [text, setText] = useState(\"\");\n\n    const onChangeRate = (value: number) => {\n        setRateValue(value);\n    };\n\n    const onSetText = (value: string) => {\n        setText(value);\n    };\n\n    const onChangeStage = (value: number) => {\n        setStage(value);\n    };\n\n    return (\n        <FeedBackContext.Provider\n            value={{\n                rateValue,\n                text,\n                stage,\n                onChangeStage,\n                onSetText,\n                onChangeRate,\n            }}\n        >\n            {children}\n        </FeedBackContext.Provider>\n    );\n};\n\nexport { FeedBackProvider, FeedBackContext };\n","import { createContext } from 'react';\n\n/**\n * @public\n */\nconst MotionConfigContext = createContext({\n    transformPagePoint: (p) => p,\n    isStatic: false,\n    reducedMotion: \"never\",\n});\n\nexport { MotionConfigContext };\n","import { createContext } from 'react';\n\nconst MotionContext = createContext({});\n\nexport { MotionContext };\n","import { createContext } from 'react';\n\n/**\n * @public\n */\nconst PresenceContext = createContext(null);\n\nexport { PresenceContext };\n","const isBrowser = typeof document !== \"undefined\";\n\nexport { isBrowser };\n","import { useLayoutEffect, useEffect } from 'react';\nimport { isBrowser } from './is-browser.mjs';\n\nconst useIsomorphicLayoutEffect = isBrowser ? useLayoutEffect : useEffect;\n\nexport { useIsomorphicLayoutEffect };\n","import { createContext } from 'react';\n\nconst LazyContext = createContext({ strict: false });\n\nexport { LazyContext };\n","/**\n * Convert camelCase to dash-case properties.\n */\nconst camelToDash = (str) => str.replace(/([a-z])([A-Z])/gu, \"$1-$2\").toLowerCase();\n\nexport { camelToDash };\n","import { camelToDash } from '../../render/dom/utils/camel-to-dash.mjs';\n\nconst optimizedAppearDataId = \"framerAppearId\";\nconst optimizedAppearDataAttribute = \"data-\" + camelToDash(optimizedAppearDataId);\n\nexport { optimizedAppearDataAttribute, optimizedAppearDataId };\n","const MotionGlobalConfig = {\n    skipAnimations: false,\n    useManualTiming: false,\n};\n\nexport { MotionGlobalConfig };\n","class Queue {\n    constructor() {\n        this.order = [];\n        this.scheduled = new Set();\n    }\n    add(process) {\n        if (!this.scheduled.has(process)) {\n            this.scheduled.add(process);\n            this.order.push(process);\n            return true;\n        }\n    }\n    remove(process) {\n        const index = this.order.indexOf(process);\n        if (index !== -1) {\n            this.order.splice(index, 1);\n            this.scheduled.delete(process);\n        }\n    }\n    clear() {\n        this.order.length = 0;\n        this.scheduled.clear();\n    }\n}\nfunction createRenderStep(runNextFrame) {\n    /**\n     * We create and reuse two queues, one to queue jobs for the current frame\n     * and one for the next. We reuse to avoid triggering GC after x frames.\n     */\n    let thisFrame = new Queue();\n    let nextFrame = new Queue();\n    let numToRun = 0;\n    /**\n     * Track whether we're currently processing jobs in this step. This way\n     * we can decide whether to schedule new jobs for this frame or next.\n     */\n    let isProcessing = false;\n    let flushNextFrame = false;\n    /**\n     * A set of processes which were marked keepAlive when scheduled.\n     */\n    const toKeepAlive = new WeakSet();\n    const step = {\n        /**\n         * Schedule a process to run on the next frame.\n         */\n        schedule: (callback, keepAlive = false, immediate = false) => {\n            const addToCurrentFrame = immediate && isProcessing;\n            const queue = addToCurrentFrame ? thisFrame : nextFrame;\n            if (keepAlive)\n                toKeepAlive.add(callback);\n            if (queue.add(callback) && addToCurrentFrame && isProcessing) {\n                // If we're adding it to the currently running queue, update its measured size\n                numToRun = thisFrame.order.length;\n            }\n            return callback;\n        },\n        /**\n         * Cancel the provided callback from running on the next frame.\n         */\n        cancel: (callback) => {\n            nextFrame.remove(callback);\n            toKeepAlive.delete(callback);\n        },\n        /**\n         * Execute all schedule callbacks.\n         */\n        process: (frameData) => {\n            /**\n             * If we're already processing we've probably been triggered by a flushSync\n             * inside an existing process. Instead of executing, mark flushNextFrame\n             * as true and ensure we flush the following frame at the end of this one.\n             */\n            if (isProcessing) {\n                flushNextFrame = true;\n                return;\n            }\n            isProcessing = true;\n            [thisFrame, nextFrame] = [nextFrame, thisFrame];\n            // Clear the next frame queue\n            nextFrame.clear();\n            // Execute this frame\n            numToRun = thisFrame.order.length;\n            if (numToRun) {\n                for (let i = 0; i < numToRun; i++) {\n                    const callback = thisFrame.order[i];\n                    if (toKeepAlive.has(callback)) {\n                        step.schedule(callback);\n                        runNextFrame();\n                    }\n                    callback(frameData);\n                }\n            }\n            isProcessing = false;\n            if (flushNextFrame) {\n                flushNextFrame = false;\n                step.process(frameData);\n            }\n        },\n    };\n    return step;\n}\n\nexport { createRenderStep };\n","import { MotionGlobalConfig } from '../utils/GlobalConfig.mjs';\nimport { createRenderStep } from './render-step.mjs';\n\nconst stepsOrder = [\n    \"read\", // Read\n    \"resolveKeyframes\", // Write/Read/Write/Read\n    \"update\", // Compute\n    \"preRender\", // Compute\n    \"render\", // Write\n    \"postRender\", // Compute\n];\nconst maxElapsed = 40;\nfunction createRenderBatcher(scheduleNextBatch, allowKeepAlive) {\n    let runNextFrame = false;\n    let useDefaultElapsed = true;\n    const state = {\n        delta: 0,\n        timestamp: 0,\n        isProcessing: false,\n    };\n    const steps = stepsOrder.reduce((acc, key) => {\n        acc[key] = createRenderStep(() => (runNextFrame = true));\n        return acc;\n    }, {});\n    const processStep = (stepId) => {\n        steps[stepId].process(state);\n    };\n    const processBatch = () => {\n        const timestamp = MotionGlobalConfig.useManualTiming\n            ? state.timestamp\n            : performance.now();\n        runNextFrame = false;\n        state.delta = useDefaultElapsed\n            ? 1000 / 60\n            : Math.max(Math.min(timestamp - state.timestamp, maxElapsed), 1);\n        state.timestamp = timestamp;\n        state.isProcessing = true;\n        stepsOrder.forEach(processStep);\n        state.isProcessing = false;\n        if (runNextFrame && allowKeepAlive) {\n            useDefaultElapsed = false;\n            scheduleNextBatch(processBatch);\n        }\n    };\n    const wake = () => {\n        runNextFrame = true;\n        useDefaultElapsed = true;\n        if (!state.isProcessing) {\n            scheduleNextBatch(processBatch);\n        }\n    };\n    const schedule = stepsOrder.reduce((acc, key) => {\n        const step = steps[key];\n        acc[key] = (process, keepAlive = false, immediate = false) => {\n            if (!runNextFrame)\n                wake();\n            return step.schedule(process, keepAlive, immediate);\n        };\n        return acc;\n    }, {});\n    const cancel = (process) => stepsOrder.forEach((key) => steps[key].cancel(process));\n    return { schedule, cancel, state, steps };\n}\n\nexport { createRenderBatcher, stepsOrder };\n","import { createRenderBatcher } from './batcher.mjs';\n\nconst { schedule: microtask, cancel: cancelMicrotask } = createRenderBatcher(queueMicrotask, false);\n\nexport { cancelMicrotask, microtask };\n","function isRefObject(ref) {\n    return (ref &&\n        typeof ref === \"object\" &&\n        Object.prototype.hasOwnProperty.call(ref, \"current\"));\n}\n\nexport { isRefObject };\n","import { createContext } from 'react';\n\n/**\n * Internal, exported only for usage in Framer\n */\nconst SwitchLayoutGroupContext = createContext({});\n\nexport { SwitchLayoutGroupContext };\n","import { useContext, useRef, useInsertionEffect, useEffect } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { MotionContext } from '../../context/MotionContext/index.mjs';\nimport { useIsomorphicLayoutEffect } from '../../utils/use-isomorphic-effect.mjs';\nimport { LazyContext } from '../../context/LazyContext.mjs';\nimport { MotionConfigContext } from '../../context/MotionConfigContext.mjs';\nimport { optimizedAppearDataAttribute } from '../../animation/optimized-appear/data-id.mjs';\nimport { microtask } from '../../frameloop/microtask.mjs';\nimport { isRefObject } from '../../utils/is-ref-object.mjs';\nimport { SwitchLayoutGroupContext } from '../../context/SwitchLayoutGroupContext.mjs';\n\nlet scheduleHandoffComplete = false;\nfunction useVisualElement(Component, visualState, props, createVisualElement, ProjectionNodeConstructor) {\n    const { visualElement: parent } = useContext(MotionContext);\n    const lazyContext = useContext(LazyContext);\n    const presenceContext = useContext(PresenceContext);\n    const reducedMotionConfig = useContext(MotionConfigContext).reducedMotion;\n    const visualElementRef = useRef();\n    /**\n     * If we haven't preloaded a renderer, check to see if we have one lazy-loaded\n     */\n    createVisualElement = createVisualElement || lazyContext.renderer;\n    if (!visualElementRef.current && createVisualElement) {\n        visualElementRef.current = createVisualElement(Component, {\n            visualState,\n            parent,\n            props,\n            presenceContext,\n            blockInitialAnimation: presenceContext\n                ? presenceContext.initial === false\n                : false,\n            reducedMotionConfig,\n        });\n    }\n    const visualElement = visualElementRef.current;\n    /**\n     * Load Motion gesture and animation features. These are rendered as renderless\n     * components so each feature can optionally make use of React lifecycle methods.\n     */\n    const initialLayoutGroupConfig = useContext(SwitchLayoutGroupContext);\n    if (visualElement &&\n        !visualElement.projection &&\n        ProjectionNodeConstructor &&\n        (visualElement.type === \"html\" || visualElement.type === \"svg\")) {\n        createProjectionNode(visualElementRef.current, props, ProjectionNodeConstructor, initialLayoutGroupConfig);\n    }\n    useInsertionEffect(() => {\n        visualElement && visualElement.update(props, presenceContext);\n    });\n    /**\n     * Cache this value as we want to know whether HandoffAppearAnimations\n     * was present on initial render - it will be deleted after this.\n     */\n    const wantsHandoff = useRef(Boolean(props[optimizedAppearDataAttribute] &&\n        !window.HandoffComplete));\n    useIsomorphicLayoutEffect(() => {\n        if (!visualElement)\n            return;\n        visualElement.updateFeatures();\n        microtask.render(visualElement.render);\n        /**\n         * Ideally this function would always run in a useEffect.\n         *\n         * However, if we have optimised appear animations to handoff from,\n         * it needs to happen synchronously to ensure there's no flash of\n         * incorrect styles in the event of a hydration error.\n         *\n         * So if we detect a situtation where optimised appear animations\n         * are running, we use useLayoutEffect to trigger animations.\n         */\n        if (wantsHandoff.current && visualElement.animationState) {\n            visualElement.animationState.animateChanges();\n        }\n    });\n    useEffect(() => {\n        if (!visualElement)\n            return;\n        if (!wantsHandoff.current && visualElement.animationState) {\n            visualElement.animationState.animateChanges();\n        }\n        if (wantsHandoff.current) {\n            wantsHandoff.current = false;\n            // This ensures all future calls to animateChanges() will run in useEffect\n            if (!scheduleHandoffComplete) {\n                scheduleHandoffComplete = true;\n                queueMicrotask(completeHandoff);\n            }\n        }\n    });\n    return visualElement;\n}\nfunction completeHandoff() {\n    window.HandoffComplete = true;\n}\nfunction createProjectionNode(visualElement, props, ProjectionNodeConstructor, initialPromotionConfig) {\n    const { layoutId, layout, drag, dragConstraints, layoutScroll, layoutRoot, } = props;\n    visualElement.projection = new ProjectionNodeConstructor(visualElement.latestValues, props[\"data-framer-portal-id\"]\n        ? undefined\n        : getClosestProjectingNode(visualElement.parent));\n    visualElement.projection.setOptions({\n        layoutId,\n        layout,\n        alwaysMeasureLayout: Boolean(drag) || (dragConstraints && isRefObject(dragConstraints)),\n        visualElement,\n        scheduleRender: () => visualElement.scheduleRender(),\n        /**\n         * TODO: Update options in an effect. This could be tricky as it'll be too late\n         * to update by the time layout animations run.\n         * We also need to fix this safeToRemove by linking it up to the one returned by usePresence,\n         * ensuring it gets called if there's no potential layout animations.\n         *\n         */\n        animationType: typeof layout === \"string\" ? layout : \"both\",\n        initialPromotionConfig,\n        layoutScroll,\n        layoutRoot,\n    });\n}\nfunction getClosestProjectingNode(visualElement) {\n    if (!visualElement)\n        return undefined;\n    return visualElement.options.allowProjection !== false\n        ? visualElement.projection\n        : getClosestProjectingNode(visualElement.parent);\n}\n\nexport { useVisualElement };\n","import { useCallback } from 'react';\nimport { isRefObject } from '../../utils/is-ref-object.mjs';\n\n/**\n * Creates a ref function that, when called, hydrates the provided\n * external ref and VisualElement.\n */\nfunction useMotionRef(visualState, visualElement, externalRef) {\n    return useCallback((instance) => {\n        instance && visualState.mount && visualState.mount(instance);\n        if (visualElement) {\n            if (instance) {\n                visualElement.mount(instance);\n            }\n            else {\n                visualElement.unmount();\n            }\n        }\n        if (externalRef) {\n            if (typeof externalRef === \"function\") {\n                externalRef(instance);\n            }\n            else if (isRefObject(externalRef)) {\n                externalRef.current = instance;\n            }\n        }\n    }, \n    /**\n     * Only pass a new ref callback to React if we've received a visual element\n     * factory. Otherwise we'll be mounting/remounting every time externalRef\n     * or other dependencies change.\n     */\n    [visualElement]);\n}\n\nexport { useMotionRef };\n","/**\n * Decides if the supplied variable is variant label\n */\nfunction isVariantLabel(v) {\n    return typeof v === \"string\" || Array.isArray(v);\n}\n\nexport { isVariantLabel };\n","function isAnimationControls(v) {\n    return (v !== null &&\n        typeof v === \"object\" &&\n        typeof v.start === \"function\");\n}\n\nexport { isAnimationControls };\n","const variantPriorityOrder = [\n    \"animate\",\n    \"whileInView\",\n    \"whileFocus\",\n    \"whileHover\",\n    \"whileTap\",\n    \"whileDrag\",\n    \"exit\",\n];\nconst variantProps = [\"initial\", ...variantPriorityOrder];\n\nexport { variantPriorityOrder, variantProps };\n","import { isAnimationControls } from '../../animation/utils/is-animation-controls.mjs';\nimport { isVariantLabel } from './is-variant-label.mjs';\nimport { variantProps } from './variant-props.mjs';\n\nfunction isControllingVariants(props) {\n    return (isAnimationControls(props.animate) ||\n        variantProps.some((name) => isVariantLabel(props[name])));\n}\nfunction isVariantNode(props) {\n    return Boolean(isControllingVariants(props) || props.variants);\n}\n\nexport { isControllingVariants, isVariantNode };\n","import { isVariantLabel } from '../../render/utils/is-variant-label.mjs';\nimport { isControllingVariants } from '../../render/utils/is-controlling-variants.mjs';\n\nfunction getCurrentTreeVariants(props, context) {\n    if (isControllingVariants(props)) {\n        const { initial, animate } = props;\n        return {\n            initial: initial === false || isVariantLabel(initial)\n                ? initial\n                : undefined,\n            animate: isVariantLabel(animate) ? animate : undefined,\n        };\n    }\n    return props.inherit !== false ? context : {};\n}\n\nexport { getCurrentTreeVariants };\n","import { useContext, useMemo } from 'react';\nimport { MotionContext } from './index.mjs';\nimport { getCurrentTreeVariants } from './utils.mjs';\n\nfunction useCreateMotionContext(props) {\n    const { initial, animate } = getCurrentTreeVariants(props, useContext(MotionContext));\n    return useMemo(() => ({ initial, animate }), [variantLabelsAsDependency(initial), variantLabelsAsDependency(animate)]);\n}\nfunction variantLabelsAsDependency(prop) {\n    return Array.isArray(prop) ? prop.join(\" \") : prop;\n}\n\nexport { useCreateMotionContext };\n","const featureProps = {\n    animation: [\n        \"animate\",\n        \"variants\",\n        \"whileHover\",\n        \"whileTap\",\n        \"exit\",\n        \"whileInView\",\n        \"whileFocus\",\n        \"whileDrag\",\n    ],\n    exit: [\"exit\"],\n    drag: [\"drag\", \"dragControls\"],\n    focus: [\"whileFocus\"],\n    hover: [\"whileHover\", \"onHoverStart\", \"onHoverEnd\"],\n    tap: [\"whileTap\", \"onTap\", \"onTapStart\", \"onTapCancel\"],\n    pan: [\"onPan\", \"onPanStart\", \"onPanSessionStart\", \"onPanEnd\"],\n    inView: [\"whileInView\", \"onViewportEnter\", \"onViewportLeave\"],\n    layout: [\"layout\", \"layoutId\"],\n};\nconst featureDefinitions = {};\nfor (const key in featureProps) {\n    featureDefinitions[key] = {\n        isEnabled: (props) => featureProps[key].some((name) => !!props[name]),\n    };\n}\n\nexport { featureDefinitions };\n","import { featureDefinitions } from './definitions.mjs';\n\nfunction loadFeatures(features) {\n    for (const key in features) {\n        featureDefinitions[key] = {\n            ...featureDefinitions[key],\n            ...features[key],\n        };\n    }\n}\n\nexport { loadFeatures };\n","import { createContext } from 'react';\n\nconst LayoutGroupContext = createContext({});\n\nexport { LayoutGroupContext };\n","const motionComponentSymbol = Symbol.for(\"motionComponentSymbol\");\n\nexport { motionComponentSymbol };\n","const noop = (any) => any;\n\nexport { noop };\n","import { noop } from './noop.mjs';\n\nlet warning = noop;\nlet invariant = noop;\nif (process.env.NODE_ENV !== \"production\") {\n    warning = (check, message) => {\n        if (!check && typeof console !== \"undefined\") {\n            console.warn(message);\n        }\n    };\n    invariant = (check, message) => {\n        if (!check) {\n            throw new Error(message);\n        }\n    };\n}\n\nexport { invariant, warning };\n","import { jsxs, jsx } from 'react/jsx-runtime';\nimport { forwardRef, useContext } from 'react';\nimport { MotionConfigContext } from '../context/MotionConfigContext.mjs';\nimport { MotionContext } from '../context/MotionContext/index.mjs';\nimport { useVisualElement } from './utils/use-visual-element.mjs';\nimport { useMotionRef } from './utils/use-motion-ref.mjs';\nimport { useCreateMotionContext } from '../context/MotionContext/create.mjs';\nimport { loadFeatures } from './features/load-features.mjs';\nimport { isBrowser } from '../utils/is-browser.mjs';\nimport { LayoutGroupContext } from '../context/LayoutGroupContext.mjs';\nimport { LazyContext } from '../context/LazyContext.mjs';\nimport { motionComponentSymbol } from './utils/symbol.mjs';\nimport { warning, invariant } from '../utils/errors.mjs';\nimport { featureDefinitions } from './features/definitions.mjs';\n\n/**\n * Create a `motion` component.\n *\n * This function accepts a Component argument, which can be either a string (ie \"div\"\n * for `motion.div`), or an actual React component.\n *\n * Alongside this is a config option which provides a way of rendering the provided\n * component \"offline\", or outside the React render cycle.\n */\nfunction createMotionComponent({ preloadedFeatures, createVisualElement, useRender, useVisualState, Component, }) {\n    preloadedFeatures && loadFeatures(preloadedFeatures);\n    function MotionComponent(props, externalRef) {\n        /**\n         * If we need to measure the element we load this functionality in a\n         * separate class component in order to gain access to getSnapshotBeforeUpdate.\n         */\n        let MeasureLayout;\n        const configAndProps = {\n            ...useContext(MotionConfigContext),\n            ...props,\n            layoutId: useLayoutId(props),\n        };\n        const { isStatic } = configAndProps;\n        const context = useCreateMotionContext(props);\n        const visualState = useVisualState(props, isStatic);\n        if (!isStatic && isBrowser) {\n            useStrictMode(configAndProps, preloadedFeatures);\n            const layoutProjection = getProjectionFunctionality(configAndProps);\n            MeasureLayout = layoutProjection.MeasureLayout;\n            /**\n             * Create a VisualElement for this component. A VisualElement provides a common\n             * interface to renderer-specific APIs (ie DOM/Three.js etc) as well as\n             * providing a way of rendering to these APIs outside of the React render loop\n             * for more performant animations and interactions\n             */\n            context.visualElement = useVisualElement(Component, visualState, configAndProps, createVisualElement, layoutProjection.ProjectionNode);\n        }\n        /**\n         * The mount order and hierarchy is specific to ensure our element ref\n         * is hydrated by the time features fire their effects.\n         */\n        return (jsxs(MotionContext.Provider, { value: context, children: [MeasureLayout && context.visualElement ? (jsx(MeasureLayout, { visualElement: context.visualElement, ...configAndProps })) : null, useRender(Component, props, useMotionRef(visualState, context.visualElement, externalRef), visualState, isStatic, context.visualElement)] }));\n    }\n    const ForwardRefComponent = forwardRef(MotionComponent);\n    ForwardRefComponent[motionComponentSymbol] = Component;\n    return ForwardRefComponent;\n}\nfunction useLayoutId({ layoutId }) {\n    const layoutGroupId = useContext(LayoutGroupContext).id;\n    return layoutGroupId && layoutId !== undefined\n        ? layoutGroupId + \"-\" + layoutId\n        : layoutId;\n}\nfunction useStrictMode(configAndProps, preloadedFeatures) {\n    const isStrict = useContext(LazyContext).strict;\n    /**\n     * If we're in development mode, check to make sure we're not rendering a motion component\n     * as a child of LazyMotion, as this will break the file-size benefits of using it.\n     */\n    if (process.env.NODE_ENV !== \"production\" &&\n        preloadedFeatures &&\n        isStrict) {\n        const strictMessage = \"You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.\";\n        configAndProps.ignoreStrict\n            ? warning(false, strictMessage)\n            : invariant(false, strictMessage);\n    }\n}\nfunction getProjectionFunctionality(props) {\n    const { drag, layout } = featureDefinitions;\n    if (!drag && !layout)\n        return {};\n    const combined = { ...drag, ...layout };\n    return {\n        MeasureLayout: (drag === null || drag === void 0 ? void 0 : drag.isEnabled(props)) || (layout === null || layout === void 0 ? void 0 : layout.isEnabled(props))\n            ? combined.MeasureLayout\n            : undefined,\n        ProjectionNode: combined.ProjectionNode,\n    };\n}\n\nexport { createMotionComponent };\n","import { createMotionComponent } from '../../motion/index.mjs';\n\n/**\n * Convert any React component into a `motion` component. The provided component\n * **must** use `React.forwardRef` to the underlying DOM component you want to animate.\n *\n * ```jsx\n * const Component = React.forwardRef((props, ref) => {\n *   return <div ref={ref} />\n * })\n *\n * const MotionComponent = motion(Component)\n * ```\n *\n * @public\n */\nfunction createMotionProxy(createConfig) {\n    function custom(Component, customMotionComponentConfig = {}) {\n        return createMotionComponent(createConfig(Component, customMotionComponentConfig));\n    }\n    if (typeof Proxy === \"undefined\") {\n        return custom;\n    }\n    /**\n     * A cache of generated `motion` components, e.g `motion.div`, `motion.input` etc.\n     * Rather than generating them anew every render.\n     */\n    const componentCache = new Map();\n    return new Proxy(custom, {\n        /**\n         * Called when `motion` is referenced with a prop: `motion.div`, `motion.input` etc.\n         * The prop name is passed through as `key` and we can use that to generate a `motion`\n         * DOM component with that name.\n         */\n        get: (_target, key) => {\n            /**\n             * If this element doesn't exist in the component cache, create it and cache.\n             */\n            if (!componentCache.has(key)) {\n                componentCache.set(key, custom(key));\n            }\n            return componentCache.get(key);\n        },\n    });\n}\n\nexport { createMotionProxy };\n","/**\n * We keep these listed seperately as we use the lowercase tag names as part\n * of the runtime bundle to detect SVG components\n */\nconst lowercaseSVGElements = [\n    \"animate\",\n    \"circle\",\n    \"defs\",\n    \"desc\",\n    \"ellipse\",\n    \"g\",\n    \"image\",\n    \"line\",\n    \"filter\",\n    \"marker\",\n    \"mask\",\n    \"metadata\",\n    \"path\",\n    \"pattern\",\n    \"polygon\",\n    \"polyline\",\n    \"rect\",\n    \"stop\",\n    \"switch\",\n    \"symbol\",\n    \"svg\",\n    \"text\",\n    \"tspan\",\n    \"use\",\n    \"view\",\n];\n\nexport { lowercaseSVGElements };\n","import { lowercaseSVGElements } from '../../svg/lowercase-elements.mjs';\n\nfunction isSVGComponent(Component) {\n    if (\n    /**\n     * If it's not a string, it's a custom React component. Currently we only support\n     * HTML custom React components.\n     */\n    typeof Component !== \"string\" ||\n        /**\n         * If it contains a dash, the element is a custom HTML webcomponent.\n         */\n        Component.includes(\"-\")) {\n        return false;\n    }\n    else if (\n    /**\n     * If it's in our list of lowercase SVG tags, it's an SVG component\n     */\n    lowercaseSVGElements.indexOf(Component) > -1 ||\n        /**\n         * If it contains a capital letter, it's an SVG component\n         */\n        /[A-Z]/u.test(Component)) {\n        return true;\n    }\n    return false;\n}\n\nexport { isSVGComponent };\n","const scaleCorrectors = {};\nfunction addScaleCorrector(correctors) {\n    Object.assign(scaleCorrectors, correctors);\n}\n\nexport { addScaleCorrector, scaleCorrectors };\n","/**\n * Generate a list of every possible transform key.\n */\nconst transformPropOrder = [\n    \"transformPerspective\",\n    \"x\",\n    \"y\",\n    \"z\",\n    \"translateX\",\n    \"translateY\",\n    \"translateZ\",\n    \"scale\",\n    \"scaleX\",\n    \"scaleY\",\n    \"rotate\",\n    \"rotateX\",\n    \"rotateY\",\n    \"rotateZ\",\n    \"skew\",\n    \"skewX\",\n    \"skewY\",\n];\n/**\n * A quick lookup for transform props.\n */\nconst transformProps = new Set(transformPropOrder);\n\nexport { transformPropOrder, transformProps };\n","import { scaleCorrectors } from '../../projection/styles/scale-correction.mjs';\nimport { transformProps } from '../../render/html/utils/transform.mjs';\n\nfunction isForcedMotionValue(key, { layout, layoutId }) {\n    return (transformProps.has(key) ||\n        key.startsWith(\"origin\") ||\n        ((layout || layoutId !== undefined) &&\n            (!!scaleCorrectors[key] || key === \"opacity\")));\n}\n\nexport { isForcedMotionValue };\n","const isMotionValue = (value) => Boolean(value && value.getVelocity);\n\nexport { isMotionValue };\n","import { transformPropOrder } from './transform.mjs';\n\nconst translateAlias = {\n    x: \"translateX\",\n    y: \"translateY\",\n    z: \"translateZ\",\n    transformPerspective: \"perspective\",\n};\nconst numTransforms = transformPropOrder.length;\n/**\n * Build a CSS transform style from individual x/y/scale etc properties.\n *\n * This outputs with a default order of transforms/scales/rotations, this can be customised by\n * providing a transformTemplate function.\n */\nfunction buildTransform(transform, { enableHardwareAcceleration = true, allowTransformNone = true, }, transformIsDefault, transformTemplate) {\n    // The transform string we're going to build into.\n    let transformString = \"\";\n    /**\n     * Loop over all possible transforms in order, adding the ones that\n     * are present to the transform string.\n     */\n    for (let i = 0; i < numTransforms; i++) {\n        const key = transformPropOrder[i];\n        if (transform[key] !== undefined) {\n            const transformName = translateAlias[key] || key;\n            transformString += `${transformName}(${transform[key]}) `;\n        }\n    }\n    if (enableHardwareAcceleration && !transform.z) {\n        transformString += \"translateZ(0)\";\n    }\n    transformString = transformString.trim();\n    // If we have a custom `transform` template, pass our transform values and\n    // generated transformString to that before returning\n    if (transformTemplate) {\n        transformString = transformTemplate(transform, transformIsDefault ? \"\" : transformString);\n    }\n    else if (allowTransformNone && transformIsDefault) {\n        transformString = \"none\";\n    }\n    return transformString;\n}\n\nexport { buildTransform };\n","const checkStringStartsWith = (token) => (key) => typeof key === \"string\" && key.startsWith(token);\nconst isCSSVariableName = checkStringStartsWith(\"--\");\nconst startsAsVariableToken = checkStringStartsWith(\"var(--\");\nconst isCSSVariableToken = (value) => {\n    const startsWithToken = startsAsVariableToken(value);\n    if (!startsWithToken)\n        return false;\n    // Ensure any comments are stripped from the value as this can harm performance of the regex.\n    return singleCssVariableRegex.test(value.split(\"/*\")[0].trim());\n};\nconst singleCssVariableRegex = /var\\(--(?:[\\w-]+\\s*|[\\w-]+\\s*,(?:\\s*[^)(\\s]|\\s*\\((?:[^)(]|\\([^)(]*\\))*\\))+\\s*)\\)$/iu;\n\nexport { isCSSVariableName, isCSSVariableToken };\n","/**\n * Provided a value and a ValueType, returns the value as that value type.\n */\nconst getValueAsType = (value, type) => {\n    return type && typeof value === \"number\"\n        ? type.transform(value)\n        : value;\n};\n\nexport { getValueAsType };\n","const clamp = (min, max, v) => {\n    if (v > max)\n        return max;\n    if (v < min)\n        return min;\n    return v;\n};\n\nexport { clamp };\n","import { clamp } from '../../../utils/clamp.mjs';\n\nconst number = {\n    test: (v) => typeof v === \"number\",\n    parse: parseFloat,\n    transform: (v) => v,\n};\nconst alpha = {\n    ...number,\n    transform: (v) => clamp(0, 1, v),\n};\nconst scale = {\n    ...number,\n    default: 1,\n};\n\nexport { alpha, number, scale };\n","/**\n * TODO: When we move from string as a source of truth to data models\n * everything in this folder should probably be referred to as models vs types\n */\n// If this number is a decimal, make it just five decimal places\n// to avoid exponents\nconst sanitize = (v) => Math.round(v * 100000) / 100000;\nconst floatRegex = /-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)/gu;\nconst colorRegex = /(?:#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\))/giu;\nconst singleColorRegex = /^(?:#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\))$/iu;\nfunction isString(v) {\n    return typeof v === \"string\";\n}\n\nexport { colorRegex, floatRegex, isString, sanitize, singleColorRegex };\n","import { isString } from '../utils.mjs';\n\nconst createUnitType = (unit) => ({\n    test: (v) => isString(v) && v.endsWith(unit) && v.split(\" \").length === 1,\n    parse: parseFloat,\n    transform: (v) => `${v}${unit}`,\n});\nconst degrees = createUnitType(\"deg\");\nconst percent = createUnitType(\"%\");\nconst px = createUnitType(\"px\");\nconst vh = createUnitType(\"vh\");\nconst vw = createUnitType(\"vw\");\nconst progressPercentage = {\n    ...percent,\n    parse: (v) => percent.parse(v) / 100,\n    transform: (v) => percent.transform(v * 100),\n};\n\nexport { degrees, percent, progressPercentage, px, vh, vw };\n","import { number } from '../../../value/types/numbers/index.mjs';\n\nconst int = {\n    ...number,\n    transform: Math.round,\n};\n\nexport { int };\n","import { scale, alpha } from '../../../value/types/numbers/index.mjs';\nimport { px, degrees, progressPercentage } from '../../../value/types/numbers/units.mjs';\nimport { int } from './type-int.mjs';\n\nconst numberValueTypes = {\n    // Border props\n    borderWidth: px,\n    borderTopWidth: px,\n    borderRightWidth: px,\n    borderBottomWidth: px,\n    borderLeftWidth: px,\n    borderRadius: px,\n    radius: px,\n    borderTopLeftRadius: px,\n    borderTopRightRadius: px,\n    borderBottomRightRadius: px,\n    borderBottomLeftRadius: px,\n    // Positioning props\n    width: px,\n    maxWidth: px,\n    height: px,\n    maxHeight: px,\n    size: px,\n    top: px,\n    right: px,\n    bottom: px,\n    left: px,\n    // Spacing props\n    padding: px,\n    paddingTop: px,\n    paddingRight: px,\n    paddingBottom: px,\n    paddingLeft: px,\n    margin: px,\n    marginTop: px,\n    marginRight: px,\n    marginBottom: px,\n    marginLeft: px,\n    // Transform props\n    rotate: degrees,\n    rotateX: degrees,\n    rotateY: degrees,\n    rotateZ: degrees,\n    scale,\n    scaleX: scale,\n    scaleY: scale,\n    scaleZ: scale,\n    skew: degrees,\n    skewX: degrees,\n    skewY: degrees,\n    distance: px,\n    translateX: px,\n    translateY: px,\n    translateZ: px,\n    x: px,\n    y: px,\n    z: px,\n    perspective: px,\n    transformPerspective: px,\n    opacity: alpha,\n    originX: progressPercentage,\n    originY: progressPercentage,\n    originZ: px,\n    // Misc\n    zIndex: int,\n    backgroundPositionX: px,\n    backgroundPositionY: px,\n    // SVG\n    fillOpacity: alpha,\n    strokeOpacity: alpha,\n    numOctaves: int,\n};\n\nexport { numberValueTypes };\n","import { buildTransform } from './build-transform.mjs';\nimport { isCSSVariableName } from '../../dom/utils/is-css-variable.mjs';\nimport { transformProps } from './transform.mjs';\nimport { getValueAsType } from '../../dom/value-types/get-as-type.mjs';\nimport { numberValueTypes } from '../../dom/value-types/number.mjs';\n\nfunction buildHTMLStyles(state, latestValues, options, transformTemplate) {\n    const { style, vars, transform, transformOrigin } = state;\n    // Track whether we encounter any transform or transformOrigin values.\n    let hasTransform = false;\n    let hasTransformOrigin = false;\n    // Does the calculated transform essentially equal \"none\"?\n    let transformIsNone = true;\n    /**\n     * Loop over all our latest animated values and decide whether to handle them\n     * as a style or CSS variable.\n     *\n     * Transforms and transform origins are kept seperately for further processing.\n     */\n    for (const key in latestValues) {\n        const value = latestValues[key];\n        /**\n         * If this is a CSS variable we don't do any further processing.\n         */\n        if (isCSSVariableName(key)) {\n            vars[key] = value;\n            continue;\n        }\n        // Convert the value to its default value type, ie 0 -> \"0px\"\n        const valueType = numberValueTypes[key];\n        const valueAsType = getValueAsType(value, valueType);\n        if (transformProps.has(key)) {\n            // If this is a transform, flag to enable further transform processing\n            hasTransform = true;\n            transform[key] = valueAsType;\n            // If we already know we have a non-default transform, early return\n            if (!transformIsNone)\n                continue;\n            // Otherwise check to see if this is a default transform\n            if (value !== (valueType.default || 0))\n                transformIsNone = false;\n        }\n        else if (key.startsWith(\"origin\")) {\n            // If this is a transform origin, flag and enable further transform-origin processing\n            hasTransformOrigin = true;\n            transformOrigin[key] = valueAsType;\n        }\n        else {\n            style[key] = valueAsType;\n        }\n    }\n    if (!latestValues.transform) {\n        if (hasTransform || transformTemplate) {\n            style.transform = buildTransform(state.transform, options, transformIsNone, transformTemplate);\n        }\n        else if (style.transform) {\n            /**\n             * If we have previously created a transform but currently don't have any,\n             * reset transform style to none.\n             */\n            style.transform = \"none\";\n        }\n    }\n    /**\n     * Build a transformOrigin style. Uses the same defaults as the browser for\n     * undefined origins.\n     */\n    if (hasTransformOrigin) {\n        const { originX = \"50%\", originY = \"50%\", originZ = 0, } = transformOrigin;\n        style.transformOrigin = `${originX} ${originY} ${originZ}`;\n    }\n}\n\nexport { buildHTMLStyles };\n","const createHtmlRenderState = () => ({\n    style: {},\n    transform: {},\n    transformOrigin: {},\n    vars: {},\n});\n\nexport { createHtmlRenderState };\n","import { useMemo } from 'react';\nimport { isForcedMotionValue } from '../../motion/utils/is-forced-motion-value.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\nimport { buildHTMLStyles } from './utils/build-styles.mjs';\nimport { createHtmlRenderState } from './utils/create-render-state.mjs';\n\nfunction copyRawValuesOnly(target, source, props) {\n    for (const key in source) {\n        if (!isMotionValue(source[key]) && !isForcedMotionValue(key, props)) {\n            target[key] = source[key];\n        }\n    }\n}\nfunction useInitialMotionValues({ transformTemplate }, visualState, isStatic) {\n    return useMemo(() => {\n        const state = createHtmlRenderState();\n        buildHTMLStyles(state, visualState, { enableHardwareAcceleration: !isStatic }, transformTemplate);\n        return Object.assign({}, state.vars, state.style);\n    }, [visualState]);\n}\nfunction useStyle(props, visualState, isStatic) {\n    const styleProp = props.style || {};\n    const style = {};\n    /**\n     * Copy non-Motion Values straight into style\n     */\n    copyRawValuesOnly(style, styleProp, props);\n    Object.assign(style, useInitialMotionValues(props, visualState, isStatic));\n    return style;\n}\nfunction useHTMLProps(props, visualState, isStatic) {\n    // The `any` isn't ideal but it is the type of createElement props argument\n    const htmlProps = {};\n    const style = useStyle(props, visualState, isStatic);\n    if (props.drag && props.dragListener !== false) {\n        // Disable the ghost element when a user drags\n        htmlProps.draggable = false;\n        // Disable text selection\n        style.userSelect =\n            style.WebkitUserSelect =\n                style.WebkitTouchCallout =\n                    \"none\";\n        // Disable scrolling on the draggable direction\n        style.touchAction =\n            props.drag === true\n                ? \"none\"\n                : `pan-${props.drag === \"x\" ? \"y\" : \"x\"}`;\n    }\n    if (props.tabIndex === undefined &&\n        (props.onTap || props.onTapStart || props.whileTap)) {\n        htmlProps.tabIndex = 0;\n    }\n    htmlProps.style = style;\n    return htmlProps;\n}\n\nexport { copyRawValuesOnly, useHTMLProps };\n","/**\n * A list of all valid MotionProps.\n *\n * @privateRemarks\n * This doesn't throw if a `MotionProp` name is missing - it should.\n */\nconst validMotionProps = new Set([\n    \"animate\",\n    \"exit\",\n    \"variants\",\n    \"initial\",\n    \"style\",\n    \"values\",\n    \"variants\",\n    \"transition\",\n    \"transformTemplate\",\n    \"custom\",\n    \"inherit\",\n    \"onBeforeLayoutMeasure\",\n    \"onAnimationStart\",\n    \"onAnimationComplete\",\n    \"onUpdate\",\n    \"onDragStart\",\n    \"onDrag\",\n    \"onDragEnd\",\n    \"onMeasureDragConstraints\",\n    \"onDirectionLock\",\n    \"onDragTransitionEnd\",\n    \"_dragX\",\n    \"_dragY\",\n    \"onHoverStart\",\n    \"onHoverEnd\",\n    \"onViewportEnter\",\n    \"onViewportLeave\",\n    \"globalTapTarget\",\n    \"ignoreStrict\",\n    \"viewport\",\n]);\n/**\n * Check whether a prop name is a valid `MotionProp` key.\n *\n * @param key - Name of the property to check\n * @returns `true` is key is a valid `MotionProp`.\n *\n * @public\n */\nfunction isValidMotionProp(key) {\n    return (key.startsWith(\"while\") ||\n        (key.startsWith(\"drag\") && key !== \"draggable\") ||\n        key.startsWith(\"layout\") ||\n        key.startsWith(\"onTap\") ||\n        key.startsWith(\"onPan\") ||\n        key.startsWith(\"onLayout\") ||\n        validMotionProps.has(key));\n}\n\nexport { isValidMotionProp };\n","import { isValidMotionProp } from '../../../motion/utils/valid-prop.mjs';\n\nlet shouldForward = (key) => !isValidMotionProp(key);\nfunction loadExternalIsValidProp(isValidProp) {\n    if (!isValidProp)\n        return;\n    // Explicitly filter our events\n    shouldForward = (key) => key.startsWith(\"on\") ? !isValidMotionProp(key) : isValidProp(key);\n}\n/**\n * Emotion and Styled Components both allow users to pass through arbitrary props to their components\n * to dynamically generate CSS. They both use the `@emotion/is-prop-valid` package to determine which\n * of these should be passed to the underlying DOM node.\n *\n * However, when styling a Motion component `styled(motion.div)`, both packages pass through *all* props\n * as it's seen as an arbitrary component rather than a DOM node. Motion only allows arbitrary props\n * passed through the `custom` prop so it doesn't *need* the payload or computational overhead of\n * `@emotion/is-prop-valid`, however to fix this problem we need to use it.\n *\n * By making it an optionalDependency we can offer this functionality only in the situations where it's\n * actually required.\n */\ntry {\n    /**\n     * We attempt to import this package but require won't be defined in esm environments, in that case\n     * isPropValid will have to be provided via `MotionContext`. In a 6.0.0 this should probably be removed\n     * in favour of explicit injection.\n     */\n    loadExternalIsValidProp(require(\"@emotion/is-prop-valid\").default);\n}\ncatch (_a) {\n    // We don't need to actually do anything here - the fallback is the existing `isPropValid`.\n}\nfunction filterProps(props, isDom, forwardMotionProps) {\n    const filteredProps = {};\n    for (const key in props) {\n        /**\n         * values is considered a valid prop by Emotion, so if it's present\n         * this will be rendered out to the DOM unless explicitly filtered.\n         *\n         * We check the type as it could be used with the `feColorMatrix`\n         * element, which we support.\n         */\n        if (key === \"values\" && typeof props.values === \"object\")\n            continue;\n        if (shouldForward(key) ||\n            (forwardMotionProps === true && isValidMotionProp(key)) ||\n            (!isDom && !isValidMotionProp(key)) ||\n            // If trying to use native HTML drag events, forward drag listeners\n            (props[\"draggable\"] &&\n                key.startsWith(\"onDrag\"))) {\n            filteredProps[key] =\n                props[key];\n        }\n    }\n    return filteredProps;\n}\n\nexport { filterProps, loadExternalIsValidProp };\n","import { px } from '../../../value/types/numbers/units.mjs';\n\nfunction calcOrigin(origin, offset, size) {\n    return typeof origin === \"string\"\n        ? origin\n        : px.transform(offset + size * origin);\n}\n/**\n * The SVG transform origin defaults are different to CSS and is less intuitive,\n * so we use the measured dimensions of the SVG to reconcile these.\n */\nfunction calcSVGTransformOrigin(dimensions, originX, originY) {\n    const pxOriginX = calcOrigin(originX, dimensions.x, dimensions.width);\n    const pxOriginY = calcOrigin(originY, dimensions.y, dimensions.height);\n    return `${pxOriginX} ${pxOriginY}`;\n}\n\nexport { calcSVGTransformOrigin };\n","import { px } from '../../../value/types/numbers/units.mjs';\n\nconst dashKeys = {\n    offset: \"stroke-dashoffset\",\n    array: \"stroke-dasharray\",\n};\nconst camelKeys = {\n    offset: \"strokeDashoffset\",\n    array: \"strokeDasharray\",\n};\n/**\n * Build SVG path properties. Uses the path's measured length to convert\n * our custom pathLength, pathSpacing and pathOffset into stroke-dashoffset\n * and stroke-dasharray attributes.\n *\n * This function is mutative to reduce per-frame GC.\n */\nfunction buildSVGPath(attrs, length, spacing = 1, offset = 0, useDashCase = true) {\n    // Normalise path length by setting SVG attribute pathLength to 1\n    attrs.pathLength = 1;\n    // We use dash case when setting attributes directly to the DOM node and camel case\n    // when defining props on a React component.\n    const keys = useDashCase ? dashKeys : camelKeys;\n    // Build the dash offset\n    attrs[keys.offset] = px.transform(-offset);\n    // Build the dash array\n    const pathLength = px.transform(length);\n    const pathSpacing = px.transform(spacing);\n    attrs[keys.array] = `${pathLength} ${pathSpacing}`;\n}\n\nexport { buildSVGPath };\n","import { buildHTMLStyles } from '../../html/utils/build-styles.mjs';\nimport { calcSVGTransformOrigin } from './transform-origin.mjs';\nimport { buildSVGPath } from './path.mjs';\n\n/**\n * Build SVG visual attrbutes, like cx and style.transform\n */\nfunction buildSVGAttrs(state, { attrX, attrY, attrScale, originX, originY, pathLength, pathSpacing = 1, pathOffset = 0, \n// This is object creation, which we try to avoid per-frame.\n...latest }, options, isSVGTag, transformTemplate) {\n    buildHTMLStyles(state, latest, options, transformTemplate);\n    /**\n     * For svg tags we just want to make sure viewBox is animatable and treat all the styles\n     * as normal HTML tags.\n     */\n    if (isSVGTag) {\n        if (state.style.viewBox) {\n            state.attrs.viewBox = state.style.viewBox;\n        }\n        return;\n    }\n    state.attrs = state.style;\n    state.style = {};\n    const { attrs, style, dimensions } = state;\n    /**\n     * However, we apply transforms as CSS transforms. So if we detect a transform we take it from attrs\n     * and copy it into style.\n     */\n    if (attrs.transform) {\n        if (dimensions)\n            style.transform = attrs.transform;\n        delete attrs.transform;\n    }\n    // Parse transformOrigin\n    if (dimensions &&\n        (originX !== undefined || originY !== undefined || style.transform)) {\n        style.transformOrigin = calcSVGTransformOrigin(dimensions, originX !== undefined ? originX : 0.5, originY !== undefined ? originY : 0.5);\n    }\n    // Render attrX/attrY/attrScale as attributes\n    if (attrX !== undefined)\n        attrs.x = attrX;\n    if (attrY !== undefined)\n        attrs.y = attrY;\n    if (attrScale !== undefined)\n        attrs.scale = attrScale;\n    // Build SVG path if one has been defined\n    if (pathLength !== undefined) {\n        buildSVGPath(attrs, pathLength, pathSpacing, pathOffset, false);\n    }\n}\n\nexport { buildSVGAttrs };\n","import { createHtmlRenderState } from '../../html/utils/create-render-state.mjs';\n\nconst createSvgRenderState = () => ({\n    ...createHtmlRenderState(),\n    attrs: {},\n});\n\nexport { createSvgRenderState };\n","const isSVGTag = (tag) => typeof tag === \"string\" && tag.toLowerCase() === \"svg\";\n\nexport { isSVGTag };\n","import { useMemo } from 'react';\nimport { copyRawValuesOnly } from '../html/use-props.mjs';\nimport { buildSVGAttrs } from './utils/build-attrs.mjs';\nimport { createSvgRenderState } from './utils/create-render-state.mjs';\nimport { isSVGTag } from './utils/is-svg-tag.mjs';\n\nfunction useSVGProps(props, visualState, _isStatic, Component) {\n    const visualProps = useMemo(() => {\n        const state = createSvgRenderState();\n        buildSVGAttrs(state, visualState, { enableHardwareAcceleration: false }, isSVGTag(Component), props.transformTemplate);\n        return {\n            ...state.attrs,\n            style: { ...state.style },\n        };\n    }, [visualState]);\n    if (props.style) {\n        const rawStyles = {};\n        copyRawValuesOnly(rawStyles, props.style, props);\n        visualProps.style = { ...rawStyles, ...visualProps.style };\n    }\n    return visualProps;\n}\n\nexport { useSVGProps };\n","import { Fragment, useMemo, createElement } from 'react';\nimport { useHTMLProps } from '../html/use-props.mjs';\nimport { filterProps } from './utils/filter-props.mjs';\nimport { isSVGComponent } from './utils/is-svg-component.mjs';\nimport { useSVGProps } from '../svg/use-props.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\n\nfunction createUseRender(forwardMotionProps = false) {\n    const useRender = (Component, props, ref, { latestValues }, isStatic) => {\n        const useVisualProps = isSVGComponent(Component)\n            ? useSVGProps\n            : useHTMLProps;\n        const visualProps = useVisualProps(props, latestValues, isStatic, Component);\n        const filteredProps = filterProps(props, typeof Component === \"string\", forwardMotionProps);\n        const elementProps = Component !== Fragment\n            ? { ...filteredProps, ...visualProps, ref }\n            : {};\n        /**\n         * If component has been handed a motion value as its child,\n         * memoise its initial value and render that. Subsequent updates\n         * will be handled by the onChange handler\n         */\n        const { children } = props;\n        const renderedChildren = useMemo(() => (isMotionValue(children) ? children.get() : children), [children]);\n        return createElement(Component, {\n            ...elementProps,\n            children: renderedChildren,\n        });\n    };\n    return useRender;\n}\n\nexport { createUseRender };\n","function renderHTML(element, { style, vars }, styleProp, projection) {\n    Object.assign(element.style, style, projection && projection.getProjectionStyles(styleProp));\n    // Loop over any CSS variables and assign those.\n    for (const key in vars) {\n        element.style.setProperty(key, vars[key]);\n    }\n}\n\nexport { renderHTML };\n","/**\n * A set of attribute names that are always read/written as camel case.\n */\nconst camelCaseAttributes = new Set([\n    \"baseFrequency\",\n    \"diffuseConstant\",\n    \"kernelMatrix\",\n    \"kernelUnitLength\",\n    \"keySplines\",\n    \"keyTimes\",\n    \"limitingConeAngle\",\n    \"markerHeight\",\n    \"markerWidth\",\n    \"numOctaves\",\n    \"targetX\",\n    \"targetY\",\n    \"surfaceScale\",\n    \"specularConstant\",\n    \"specularExponent\",\n    \"stdDeviation\",\n    \"tableValues\",\n    \"viewBox\",\n    \"gradientTransform\",\n    \"pathLength\",\n    \"startOffset\",\n    \"textLength\",\n    \"lengthAdjust\",\n]);\n\nexport { camelCaseAttributes };\n","import { camelToDash } from '../../dom/utils/camel-to-dash.mjs';\nimport { renderHTML } from '../../html/utils/render.mjs';\nimport { camelCaseAttributes } from './camel-case-attrs.mjs';\n\nfunction renderSVG(element, renderState, _styleProp, projection) {\n    renderHTML(element, renderState, undefined, projection);\n    for (const key in renderState.attrs) {\n        element.setAttribute(!camelCaseAttributes.has(key) ? camelToDash(key) : key, renderState.attrs[key]);\n    }\n}\n\nexport { renderSVG };\n","import { isForcedMotionValue } from '../../../motion/utils/is-forced-motion-value.mjs';\nimport { isMotionValue } from '../../../value/utils/is-motion-value.mjs';\n\nfunction scrapeMotionValuesFromProps(props, prevProps, visualElement) {\n    var _a;\n    const { style } = props;\n    const newValues = {};\n    for (const key in style) {\n        if (isMotionValue(style[key]) ||\n            (prevProps.style &&\n                isMotionValue(prevProps.style[key])) ||\n            isForcedMotionValue(key, props) ||\n            ((_a = visualElement === null || visualElement === void 0 ? void 0 : visualElement.getValue(key)) === null || _a === void 0 ? void 0 : _a.liveStyle) !== undefined) {\n            newValues[key] = style[key];\n        }\n    }\n    return newValues;\n}\n\nexport { scrapeMotionValuesFromProps };\n","import { isMotionValue } from '../../../value/utils/is-motion-value.mjs';\nimport { scrapeMotionValuesFromProps as scrapeMotionValuesFromProps$1 } from '../../html/utils/scrape-motion-values.mjs';\nimport { transformPropOrder } from '../../html/utils/transform.mjs';\n\nfunction scrapeMotionValuesFromProps(props, prevProps, visualElement) {\n    const newValues = scrapeMotionValuesFromProps$1(props, prevProps, visualElement);\n    for (const key in props) {\n        if (isMotionValue(props[key]) ||\n            isMotionValue(prevProps[key])) {\n            const targetKey = transformPropOrder.indexOf(key) !== -1\n                ? \"attr\" + key.charAt(0).toUpperCase() + key.substring(1)\n                : key;\n            newValues[targetKey] = props[key];\n        }\n    }\n    return newValues;\n}\n\nexport { scrapeMotionValuesFromProps };\n","function getValueState(visualElement) {\n    const state = [{}, {}];\n    visualElement === null || visualElement === void 0 ? void 0 : visualElement.values.forEach((value, key) => {\n        state[0][key] = value.get();\n        state[1][key] = value.getVelocity();\n    });\n    return state;\n}\nfunction resolveVariantFromProps(props, definition, custom, visualElement) {\n    /**\n     * If the variant definition is a function, resolve.\n     */\n    if (typeof definition === \"function\") {\n        const [current, velocity] = getValueState(visualElement);\n        definition = definition(custom !== undefined ? custom : props.custom, current, velocity);\n    }\n    /**\n     * If the variant definition is a variant label, or\n     * the function returned a variant label, resolve.\n     */\n    if (typeof definition === \"string\") {\n        definition = props.variants && props.variants[definition];\n    }\n    /**\n     * At this point we've resolved both functions and variant labels,\n     * but the resolved variant label might itself have been a function.\n     * If so, resolve. This can only have returned a valid target object.\n     */\n    if (typeof definition === \"function\") {\n        const [current, velocity] = getValueState(visualElement);\n        definition = definition(custom !== undefined ? custom : props.custom, current, velocity);\n    }\n    return definition;\n}\n\nexport { resolveVariantFromProps };\n","import { useRef } from 'react';\n\n/**\n * Creates a constant value over the lifecycle of a component.\n *\n * Even if `useMemo` is provided an empty array as its final argument, it doesn't offer\n * a guarantee that it won't re-run for performance reasons later on. By using `useConstant`\n * you can ensure that initialisers don't execute twice or more.\n */\nfunction useConstant(init) {\n    const ref = useRef(null);\n    if (ref.current === null) {\n        ref.current = init();\n    }\n    return ref.current;\n}\n\nexport { useConstant };\n","const isKeyframesTarget = (v) => {\n    return Array.isArray(v);\n};\n\nexport { isKeyframesTarget };\n","import { isKeyframesTarget } from '../animation/utils/is-keyframes-target.mjs';\n\nconst isCustomValue = (v) => {\n    return Boolean(v && typeof v === \"object\" && v.mix && v.toValue);\n};\nconst resolveFinalValueInKeyframes = (v) => {\n    // TODO maybe throw if v.length - 1 is placeholder token?\n    return isKeyframesTarget(v) ? v[v.length - 1] || 0 : v;\n};\n\nexport { isCustomValue, resolveFinalValueInKeyframes };\n","import { isCustomValue } from '../../utils/resolve-value.mjs';\nimport { isMotionValue } from './is-motion-value.mjs';\n\n/**\n * If the provided value is a MotionValue, this returns the actual value, otherwise just the value itself\n *\n * TODO: Remove and move to library\n */\nfunction resolveMotionValue(value) {\n    const unwrappedValue = isMotionValue(value) ? value.get() : value;\n    return isCustomValue(unwrappedValue)\n        ? unwrappedValue.toValue()\n        : unwrappedValue;\n}\n\nexport { resolveMotionValue };\n","import { useContext } from 'react';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.mjs';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { resolveVariantFromProps } from '../../render/utils/resolve-variants.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\nimport { resolveMotionValue } from '../../value/utils/resolve-motion-value.mjs';\nimport { MotionContext } from '../../context/MotionContext/index.mjs';\nimport { isControllingVariants, isVariantNode } from '../../render/utils/is-controlling-variants.mjs';\n\nfunction makeState({ scrapeMotionValuesFromProps, createRenderState, onMount, }, props, context, presenceContext) {\n    const state = {\n        latestValues: makeLatestValues(props, context, presenceContext, scrapeMotionValuesFromProps),\n        renderState: createRenderState(),\n    };\n    if (onMount) {\n        state.mount = (instance) => onMount(props, instance, state);\n    }\n    return state;\n}\nconst makeUseVisualState = (config) => (props, isStatic) => {\n    const context = useContext(MotionContext);\n    const presenceContext = useContext(PresenceContext);\n    const make = () => makeState(config, props, context, presenceContext);\n    return isStatic ? make() : useConstant(make);\n};\nfunction makeLatestValues(props, context, presenceContext, scrapeMotionValues) {\n    const values = {};\n    const motionValues = scrapeMotionValues(props, {});\n    for (const key in motionValues) {\n        values[key] = resolveMotionValue(motionValues[key]);\n    }\n    let { initial, animate } = props;\n    const isControllingVariants$1 = isControllingVariants(props);\n    const isVariantNode$1 = isVariantNode(props);\n    if (context &&\n        isVariantNode$1 &&\n        !isControllingVariants$1 &&\n        props.inherit !== false) {\n        if (initial === undefined)\n            initial = context.initial;\n        if (animate === undefined)\n            animate = context.animate;\n    }\n    let isInitialAnimationBlocked = presenceContext\n        ? presenceContext.initial === false\n        : false;\n    isInitialAnimationBlocked = isInitialAnimationBlocked || initial === false;\n    const variantToSet = isInitialAnimationBlocked ? animate : initial;\n    if (variantToSet &&\n        typeof variantToSet !== \"boolean\" &&\n        !isAnimationControls(variantToSet)) {\n        const list = Array.isArray(variantToSet) ? variantToSet : [variantToSet];\n        list.forEach((definition) => {\n            const resolved = resolveVariantFromProps(props, definition);\n            if (!resolved)\n                return;\n            const { transitionEnd, transition, ...target } = resolved;\n            for (const key in target) {\n                let valueTarget = target[key];\n                if (Array.isArray(valueTarget)) {\n                    /**\n                     * Take final keyframe if the initial animation is blocked because\n                     * we want to initialise at the end of that blocked animation.\n                     */\n                    const index = isInitialAnimationBlocked\n                        ? valueTarget.length - 1\n                        : 0;\n                    valueTarget = valueTarget[index];\n                }\n                if (valueTarget !== null) {\n                    values[key] = valueTarget;\n                }\n            }\n            for (const key in transitionEnd)\n                values[key] = transitionEnd[key];\n        });\n    }\n    return values;\n}\n\nexport { makeUseVisualState };\n","import { noop } from '../utils/noop.mjs';\nimport { createRenderBatcher } from './batcher.mjs';\n\nconst { schedule: frame, cancel: cancelFrame, state: frameData, steps, } = createRenderBatcher(typeof requestAnimationFrame !== \"undefined\" ? requestAnimationFrame : noop, true);\n\nexport { cancelFrame, frame, frameData, steps };\n","import { renderSVG } from './utils/render.mjs';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\nimport { makeUseVisualState } from '../../motion/utils/use-visual-state.mjs';\nimport { createSvgRenderState } from './utils/create-render-state.mjs';\nimport { buildSVGAttrs } from './utils/build-attrs.mjs';\nimport { isSVGTag } from './utils/is-svg-tag.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\n\nconst svgMotionConfig = {\n    useVisualState: makeUseVisualState({\n        scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n        createRenderState: createSvgRenderState,\n        onMount: (props, instance, { renderState, latestValues }) => {\n            frame.read(() => {\n                try {\n                    renderState.dimensions =\n                        typeof instance.getBBox ===\n                            \"function\"\n                            ? instance.getBBox()\n                            : instance.getBoundingClientRect();\n                }\n                catch (e) {\n                    // Most likely trying to measure an unrendered element under Firefox\n                    renderState.dimensions = {\n                        x: 0,\n                        y: 0,\n                        width: 0,\n                        height: 0,\n                    };\n                }\n            });\n            frame.render(() => {\n                buildSVGAttrs(renderState, latestValues, { enableHardwareAcceleration: false }, isSVGTag(instance.tagName), props.transformTemplate);\n                renderSVG(instance, renderState);\n            });\n        },\n    }),\n};\n\nexport { svgMotionConfig };\n","import { makeUseVisualState } from '../../motion/utils/use-visual-state.mjs';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\nimport { createHtmlRenderState } from './utils/create-render-state.mjs';\n\nconst htmlMotionConfig = {\n    useVisualState: makeUseVisualState({\n        scrapeMotionValuesFromProps,\n        createRenderState: createHtmlRenderState,\n    }),\n};\n\nexport { htmlMotionConfig };\n","import { isSVGComponent } from './is-svg-component.mjs';\nimport { createUseRender } from '../use-render.mjs';\nimport { svgMotionConfig } from '../../svg/config-motion.mjs';\nimport { htmlMotionConfig } from '../../html/config-motion.mjs';\n\nfunction createDomMotionConfig(Component, { forwardMotionProps = false }, preloadedFeatures, createVisualElement) {\n    const baseConfig = isSVGComponent(Component)\n        ? svgMotionConfig\n        : htmlMotionConfig;\n    return {\n        ...baseConfig,\n        preloadedFeatures,\n        useRender: createUseRender(forwardMotionProps),\n        createVisualElement,\n        Component,\n    };\n}\n\nexport { createDomMotionConfig };\n","function addDomEvent(target, eventName, handler, options = { passive: true }) {\n    target.addEventListener(eventName, handler, options);\n    return () => target.removeEventListener(eventName, handler);\n}\n\nexport { addDomEvent };\n","const isPrimaryPointer = (event) => {\n    if (event.pointerType === \"mouse\") {\n        return typeof event.button !== \"number\" || event.button <= 0;\n    }\n    else {\n        /**\n         * isPrimary is true for all mice buttons, whereas every touch point\n         * is regarded as its own input. So subsequent concurrent touch points\n         * will be false.\n         *\n         * Specifically match against false here as incomplete versions of\n         * PointerEvents in very old browser might have it set as undefined.\n         */\n        return event.isPrimary !== false;\n    }\n};\n\nexport { isPrimaryPointer };\n","import { isPrimaryPointer } from './utils/is-primary-pointer.mjs';\n\nfunction extractEventInfo(event, pointType = \"page\") {\n    return {\n        point: {\n            x: event[`${pointType}X`],\n            y: event[`${pointType}Y`],\n        },\n    };\n}\nconst addPointerInfo = (handler) => {\n    return (event) => isPrimaryPointer(event) && handler(event, extractEventInfo(event));\n};\n\nexport { addPointerInfo, extractEventInfo };\n","import { addDomEvent } from './add-dom-event.mjs';\nimport { addPointerInfo } from './event-info.mjs';\n\nfunction addPointerEvent(target, eventName, handler, options) {\n    return addDomEvent(target, eventName, addPointerInfo(handler), options);\n}\n\nexport { addPointerEvent };\n","/**\n * Pipe\n * Compose other transformers to run linearily\n * pipe(min(20), max(40))\n * @param  {...functions} transformers\n * @return {function}\n */\nconst combineFunctions = (a, b) => (v) => b(a(v));\nconst pipe = (...transformers) => transformers.reduce(combineFunctions);\n\nexport { pipe };\n","function createLock(name) {\n    let lock = null;\n    return () => {\n        const openLock = () => {\n            lock = null;\n        };\n        if (lock === null) {\n            lock = name;\n            return openLock;\n        }\n        return false;\n    };\n}\nconst globalHorizontalLock = createLock(\"dragHorizontal\");\nconst globalVerticalLock = createLock(\"dragVertical\");\nfunction getGlobalLock(drag) {\n    let lock = false;\n    if (drag === \"y\") {\n        lock = globalVerticalLock();\n    }\n    else if (drag === \"x\") {\n        lock = globalHorizontalLock();\n    }\n    else {\n        const openHorizontal = globalHorizontalLock();\n        const openVertical = globalVerticalLock();\n        if (openHorizontal && openVertical) {\n            lock = () => {\n                openHorizontal();\n                openVertical();\n            };\n        }\n        else {\n            // Release the locks because we don't use them\n            if (openHorizontal)\n                openHorizontal();\n            if (openVertical)\n                openVertical();\n        }\n    }\n    return lock;\n}\nfunction isDragActive() {\n    // Check the gesture lock - if we get it, it means no drag gesture is active\n    // and we can safely fire the tap gesture.\n    const openGestureLock = getGlobalLock(true);\n    if (!openGestureLock)\n        return true;\n    openGestureLock();\n    return false;\n}\n\nexport { createLock, getGlobalLock, isDragActive };\n","class Feature {\n    constructor(node) {\n        this.isMounted = false;\n        this.node = node;\n    }\n    update() { }\n}\n\nexport { Feature };\n","import { addPointerEvent } from '../events/add-pointer-event.mjs';\nimport { pipe } from '../utils/pipe.mjs';\nimport { isDragActive } from './drag/utils/lock.mjs';\nimport { Feature } from '../motion/features/Feature.mjs';\nimport { frame } from '../frameloop/frame.mjs';\n\nfunction addHoverEvent(node, isActive) {\n    const eventName = isActive ? \"pointerenter\" : \"pointerleave\";\n    const callbackName = isActive ? \"onHoverStart\" : \"onHoverEnd\";\n    const handleEvent = (event, info) => {\n        if (event.pointerType === \"touch\" || isDragActive())\n            return;\n        const props = node.getProps();\n        if (node.animationState && props.whileHover) {\n            node.animationState.setActive(\"whileHover\", isActive);\n        }\n        const callback = props[callbackName];\n        if (callback) {\n            frame.postRender(() => callback(event, info));\n        }\n    };\n    return addPointerEvent(node.current, eventName, handleEvent, {\n        passive: !node.getProps()[callbackName],\n    });\n}\nclass HoverGesture extends Feature {\n    mount() {\n        this.unmount = pipe(addHoverEvent(this.node, true), addHoverEvent(this.node, false));\n    }\n    unmount() { }\n}\n\nexport { HoverGesture };\n","import { addDomEvent } from '../events/add-dom-event.mjs';\nimport { Feature } from '../motion/features/Feature.mjs';\nimport { pipe } from '../utils/pipe.mjs';\n\nclass FocusGesture extends Feature {\n    constructor() {\n        super(...arguments);\n        this.isActive = false;\n    }\n    onFocus() {\n        let isFocusVisible = false;\n        /**\n         * If this element doesn't match focus-visible then don't\n         * apply whileHover. But, if matches throws that focus-visible\n         * is not a valid selector then in that browser outline styles will be applied\n         * to the element by default and we want to match that behaviour with whileFocus.\n         */\n        try {\n            isFocusVisible = this.node.current.matches(\":focus-visible\");\n        }\n        catch (e) {\n            isFocusVisible = true;\n        }\n        if (!isFocusVisible || !this.node.animationState)\n            return;\n        this.node.animationState.setActive(\"whileFocus\", true);\n        this.isActive = true;\n    }\n    onBlur() {\n        if (!this.isActive || !this.node.animationState)\n            return;\n        this.node.animationState.setActive(\"whileFocus\", false);\n        this.isActive = false;\n    }\n    mount() {\n        this.unmount = pipe(addDomEvent(this.node.current, \"focus\", () => this.onFocus()), addDomEvent(this.node.current, \"blur\", () => this.onBlur()));\n    }\n    unmount() { }\n}\n\nexport { FocusGesture };\n","/**\n * Recursively traverse up the tree to check whether the provided child node\n * is the parent or a descendant of it.\n *\n * @param parent - Element to find\n * @param child - Element to test against parent\n */\nconst isNodeOrChild = (parent, child) => {\n    if (!child) {\n        return false;\n    }\n    else if (parent === child) {\n        return true;\n    }\n    else {\n        return isNodeOrChild(parent, child.parentElement);\n    }\n};\n\nexport { isNodeOrChild };\n","import { extractEventInfo } from '../events/event-info.mjs';\nimport { addDomEvent } from '../events/add-dom-event.mjs';\nimport { addPointerEvent } from '../events/add-pointer-event.mjs';\nimport { Feature } from '../motion/features/Feature.mjs';\nimport { pipe } from '../utils/pipe.mjs';\nimport { isDragActive } from './drag/utils/lock.mjs';\nimport { isNodeOrChild } from './utils/is-node-or-child.mjs';\nimport { noop } from '../utils/noop.mjs';\nimport { frame } from '../frameloop/frame.mjs';\n\nfunction fireSyntheticPointerEvent(name, handler) {\n    if (!handler)\n        return;\n    const syntheticPointerEvent = new PointerEvent(\"pointer\" + name);\n    handler(syntheticPointerEvent, extractEventInfo(syntheticPointerEvent));\n}\nclass PressGesture extends Feature {\n    constructor() {\n        super(...arguments);\n        this.removeStartListeners = noop;\n        this.removeEndListeners = noop;\n        this.removeAccessibleListeners = noop;\n        this.startPointerPress = (startEvent, startInfo) => {\n            if (this.isPressing)\n                return;\n            this.removeEndListeners();\n            const props = this.node.getProps();\n            const endPointerPress = (endEvent, endInfo) => {\n                if (!this.checkPressEnd())\n                    return;\n                const { onTap, onTapCancel, globalTapTarget } = this.node.getProps();\n                /**\n                 * We only count this as a tap gesture if the event.target is the same\n                 * as, or a child of, this component's element\n                 */\n                const handler = !globalTapTarget &&\n                    !isNodeOrChild(this.node.current, endEvent.target)\n                    ? onTapCancel\n                    : onTap;\n                if (handler) {\n                    frame.update(() => handler(endEvent, endInfo));\n                }\n            };\n            const removePointerUpListener = addPointerEvent(window, \"pointerup\", endPointerPress, {\n                passive: !(props.onTap || props[\"onPointerUp\"]),\n            });\n            const removePointerCancelListener = addPointerEvent(window, \"pointercancel\", (cancelEvent, cancelInfo) => this.cancelPress(cancelEvent, cancelInfo), {\n                passive: !(props.onTapCancel ||\n                    props[\"onPointerCancel\"]),\n            });\n            this.removeEndListeners = pipe(removePointerUpListener, removePointerCancelListener);\n            this.startPress(startEvent, startInfo);\n        };\n        this.startAccessiblePress = () => {\n            const handleKeydown = (keydownEvent) => {\n                if (keydownEvent.key !== \"Enter\" || this.isPressing)\n                    return;\n                const handleKeyup = (keyupEvent) => {\n                    if (keyupEvent.key !== \"Enter\" || !this.checkPressEnd())\n                        return;\n                    fireSyntheticPointerEvent(\"up\", (event, info) => {\n                        const { onTap } = this.node.getProps();\n                        if (onTap) {\n                            frame.postRender(() => onTap(event, info));\n                        }\n                    });\n                };\n                this.removeEndListeners();\n                this.removeEndListeners = addDomEvent(this.node.current, \"keyup\", handleKeyup);\n                fireSyntheticPointerEvent(\"down\", (event, info) => {\n                    this.startPress(event, info);\n                });\n            };\n            const removeKeydownListener = addDomEvent(this.node.current, \"keydown\", handleKeydown);\n            const handleBlur = () => {\n                if (!this.isPressing)\n                    return;\n                fireSyntheticPointerEvent(\"cancel\", (cancelEvent, cancelInfo) => this.cancelPress(cancelEvent, cancelInfo));\n            };\n            const removeBlurListener = addDomEvent(this.node.current, \"blur\", handleBlur);\n            this.removeAccessibleListeners = pipe(removeKeydownListener, removeBlurListener);\n        };\n    }\n    startPress(event, info) {\n        this.isPressing = true;\n        const { onTapStart, whileTap } = this.node.getProps();\n        /**\n         * Ensure we trigger animations before firing event callback\n         */\n        if (whileTap && this.node.animationState) {\n            this.node.animationState.setActive(\"whileTap\", true);\n        }\n        if (onTapStart) {\n            frame.postRender(() => onTapStart(event, info));\n        }\n    }\n    checkPressEnd() {\n        this.removeEndListeners();\n        this.isPressing = false;\n        const props = this.node.getProps();\n        if (props.whileTap && this.node.animationState) {\n            this.node.animationState.setActive(\"whileTap\", false);\n        }\n        return !isDragActive();\n    }\n    cancelPress(event, info) {\n        if (!this.checkPressEnd())\n            return;\n        const { onTapCancel } = this.node.getProps();\n        if (onTapCancel) {\n            frame.postRender(() => onTapCancel(event, info));\n        }\n    }\n    mount() {\n        const props = this.node.getProps();\n        const removePointerListener = addPointerEvent(props.globalTapTarget ? window : this.node.current, \"pointerdown\", this.startPointerPress, {\n            passive: !(props.onTapStart ||\n                props[\"onPointerStart\"]),\n        });\n        const removeFocusListener = addDomEvent(this.node.current, \"focus\", this.startAccessiblePress);\n        this.removeStartListeners = pipe(removePointerListener, removeFocusListener);\n    }\n    unmount() {\n        this.removeStartListeners();\n        this.removeEndListeners();\n        this.removeAccessibleListeners();\n    }\n}\n\nexport { PressGesture };\n","/**\n * Map an IntersectionHandler callback to an element. We only ever make one handler for one\n * element, so even though these handlers might all be triggered by different\n * observers, we can keep them in the same map.\n */\nconst observerCallbacks = new WeakMap();\n/**\n * Multiple observers can be created for multiple element/document roots. Each with\n * different settings. So here we store dictionaries of observers to each root,\n * using serialised settings (threshold/margin) as lookup keys.\n */\nconst observers = new WeakMap();\nconst fireObserverCallback = (entry) => {\n    const callback = observerCallbacks.get(entry.target);\n    callback && callback(entry);\n};\nconst fireAllObserverCallbacks = (entries) => {\n    entries.forEach(fireObserverCallback);\n};\nfunction initIntersectionObserver({ root, ...options }) {\n    const lookupRoot = root || document;\n    /**\n     * If we don't have an observer lookup map for this root, create one.\n     */\n    if (!observers.has(lookupRoot)) {\n        observers.set(lookupRoot, {});\n    }\n    const rootObservers = observers.get(lookupRoot);\n    const key = JSON.stringify(options);\n    /**\n     * If we don't have an observer for this combination of root and settings,\n     * create one.\n     */\n    if (!rootObservers[key]) {\n        rootObservers[key] = new IntersectionObserver(fireAllObserverCallbacks, { root, ...options });\n    }\n    return rootObservers[key];\n}\nfunction observeIntersection(element, options, callback) {\n    const rootInteresectionObserver = initIntersectionObserver(options);\n    observerCallbacks.set(element, callback);\n    rootInteresectionObserver.observe(element);\n    return () => {\n        observerCallbacks.delete(element);\n        rootInteresectionObserver.unobserve(element);\n    };\n}\n\nexport { observeIntersection };\n","import { Feature } from '../Feature.mjs';\nimport { observeIntersection } from './observers.mjs';\n\nconst thresholdNames = {\n    some: 0,\n    all: 1,\n};\nclass InViewFeature extends Feature {\n    constructor() {\n        super(...arguments);\n        this.hasEnteredView = false;\n        this.isInView = false;\n    }\n    startObserver() {\n        this.unmount();\n        const { viewport = {} } = this.node.getProps();\n        const { root, margin: rootMargin, amount = \"some\", once } = viewport;\n        const options = {\n            root: root ? root.current : undefined,\n            rootMargin,\n            threshold: typeof amount === \"number\" ? amount : thresholdNames[amount],\n        };\n        const onIntersectionUpdate = (entry) => {\n            const { isIntersecting } = entry;\n            /**\n             * If there's been no change in the viewport state, early return.\n             */\n            if (this.isInView === isIntersecting)\n                return;\n            this.isInView = isIntersecting;\n            /**\n             * Handle hasEnteredView. If this is only meant to run once, and\n             * element isn't visible, early return. Otherwise set hasEnteredView to true.\n             */\n            if (once && !isIntersecting && this.hasEnteredView) {\n                return;\n            }\n            else if (isIntersecting) {\n                this.hasEnteredView = true;\n            }\n            if (this.node.animationState) {\n                this.node.animationState.setActive(\"whileInView\", isIntersecting);\n            }\n            /**\n             * Use the latest committed props rather than the ones in scope\n             * when this observer is created\n             */\n            const { onViewportEnter, onViewportLeave } = this.node.getProps();\n            const callback = isIntersecting ? onViewportEnter : onViewportLeave;\n            callback && callback(entry);\n        };\n        return observeIntersection(this.node.current, options, onIntersectionUpdate);\n    }\n    mount() {\n        this.startObserver();\n    }\n    update() {\n        if (typeof IntersectionObserver === \"undefined\")\n            return;\n        const { props, prevProps } = this.node;\n        const hasOptionsChanged = [\"amount\", \"margin\", \"root\"].some(hasViewportOptionChanged(props, prevProps));\n        if (hasOptionsChanged) {\n            this.startObserver();\n        }\n    }\n    unmount() { }\n}\nfunction hasViewportOptionChanged({ viewport = {} }, { viewport: prevViewport = {} } = {}) {\n    return (name) => viewport[name] !== prevViewport[name];\n}\n\nexport { InViewFeature };\n","import { HoverGesture } from '../../gestures/hover.mjs';\nimport { FocusGesture } from '../../gestures/focus.mjs';\nimport { PressGesture } from '../../gestures/press.mjs';\nimport { InViewFeature } from './viewport/index.mjs';\n\nconst gestureAnimations = {\n    inView: {\n        Feature: InViewFeature,\n    },\n    tap: {\n        Feature: PressGesture,\n    },\n    focus: {\n        Feature: FocusGesture,\n    },\n    hover: {\n        Feature: HoverGesture,\n    },\n};\n\nexport { gestureAnimations };\n","function shallowCompare(next, prev) {\n    if (!Array.isArray(prev))\n        return false;\n    const prevLength = prev.length;\n    if (prevLength !== next.length)\n        return false;\n    for (let i = 0; i < prevLength; i++) {\n        if (prev[i] !== next[i])\n            return false;\n    }\n    return true;\n}\n\nexport { shallowCompare };\n","import { resolveVariantFromProps } from './resolve-variants.mjs';\n\nfunction resolveVariant(visualElement, definition, custom) {\n    const props = visualElement.getProps();\n    return resolveVariantFromProps(props, definition, custom !== undefined ? custom : props.custom, visualElement);\n}\n\nexport { resolveVariant };\n","/**\n * Converts seconds to milliseconds\n *\n * @param seconds - Time in seconds.\n * @return milliseconds - Converted time in milliseconds.\n */\nconst secondsToMilliseconds = (seconds) => seconds * 1000;\nconst millisecondsToSeconds = (milliseconds) => milliseconds / 1000;\n\nexport { millisecondsToSeconds, secondsToMilliseconds };\n","import { transformProps } from '../../render/html/utils/transform.mjs';\n\nconst underDampedSpring = {\n    type: \"spring\",\n    stiffness: 500,\n    damping: 25,\n    restSpeed: 10,\n};\nconst criticallyDampedSpring = (target) => ({\n    type: \"spring\",\n    stiffness: 550,\n    damping: target === 0 ? 2 * Math.sqrt(550) : 30,\n    restSpeed: 10,\n});\nconst keyframesTransition = {\n    type: \"keyframes\",\n    duration: 0.8,\n};\n/**\n * Default easing curve is a slightly shallower version of\n * the default browser easing curve.\n */\nconst ease = {\n    type: \"keyframes\",\n    ease: [0.25, 0.1, 0.35, 1],\n    duration: 0.3,\n};\nconst getDefaultTransition = (valueKey, { keyframes }) => {\n    if (keyframes.length > 2) {\n        return keyframesTransition;\n    }\n    else if (transformProps.has(valueKey)) {\n        return valueKey.startsWith(\"scale\")\n            ? criticallyDampedSpring(keyframes[1])\n            : underDampedSpring;\n    }\n    return ease;\n};\n\nexport { getDefaultTransition };\n","/**\n * Decide whether a transition is defined on a given Transition.\n * This filters out orchestration options and returns true\n * if any options are left.\n */\nfunction isTransitionDefined({ when, delay: _delay, delayChildren, staggerChildren, staggerDirection, repeat, repeatType, repeatDelay, from, elapsed, ...transition }) {\n    return !!Object.keys(transition).length;\n}\nfunction getValueTransition(transition, key) {\n    return (transition[key] ||\n        transition[\"default\"] ||\n        transition);\n}\n\nexport { getValueTransition, isTransitionDefined };\n","const isNotNull = (value) => value !== null;\nfunction getFinalKeyframe(keyframes, { repeat, repeatType = \"loop\" }, finalKeyframe) {\n    const resolvedKeyframes = keyframes.filter(isNotNull);\n    const index = repeat && repeatType !== \"loop\" && repeat % 2 === 1\n        ? 0\n        : resolvedKeyframes.length - 1;\n    return !index || finalKeyframe === undefined\n        ? resolvedKeyframes[index]\n        : finalKeyframe;\n}\n\nexport { getFinalKeyframe };\n","import { MotionGlobalConfig } from '../utils/GlobalConfig.mjs';\nimport { frameData } from './frame.mjs';\n\nlet now;\nfunction clearTime() {\n    now = undefined;\n}\n/**\n * An eventloop-synchronous alternative to performance.now().\n *\n * Ensures that time measurements remain consistent within a synchronous context.\n * Usually calling performance.now() twice within the same synchronous context\n * will return different values which isn't useful for animations when we're usually\n * trying to sync animations to the same frame.\n */\nconst time = {\n    now: () => {\n        if (now === undefined) {\n            time.set(frameData.isProcessing || MotionGlobalConfig.useManualTiming\n                ? frameData.timestamp\n                : performance.now());\n        }\n        return now;\n    },\n    set: (newTime) => {\n        now = newTime;\n        queueMicrotask(clearTime);\n    },\n};\n\nexport { time };\n","/**\n * Check if the value is a zero value string like \"0px\" or \"0%\"\n */\nconst isZeroValueString = (v) => /^0[^.\\s]+$/u.test(v);\n\nexport { isZeroValueString };\n","import { isZeroValueString } from '../../utils/is-zero-value-string.mjs';\n\nfunction isNone(value) {\n    if (typeof value === \"number\") {\n        return value === 0;\n    }\n    else if (value !== null) {\n        return value === \"none\" || value === \"0\" || isZeroValueString(value);\n    }\n    else {\n        return true;\n    }\n}\n\nexport { isNone };\n","/**\n * Check if value is a numerical string, ie a string that is purely a number eg \"100\" or \"-100.1\"\n */\nconst isNumericalString = (v) => /^-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)$/u.test(v);\n\nexport { isNumericalString };\n","import { invariant } from '../../../utils/errors.mjs';\nimport { isNumericalString } from '../../../utils/is-numerical-string.mjs';\nimport { isCSSVariableToken } from './is-css-variable.mjs';\n\n/**\n * Parse Framer's special CSS variable format into a CSS token and a fallback.\n *\n * ```\n * `var(--foo, #fff)` => [`--foo`, '#fff']\n * ```\n *\n * @param current\n */\nconst splitCSSVariableRegex = \n// eslint-disable-next-line redos-detector/no-unsafe-regex -- false positive, as it can match a lot of words\n/^var\\(--(?:([\\w-]+)|([\\w-]+), ?([a-zA-Z\\d ()%#.,-]+))\\)/u;\nfunction parseCSSVariable(current) {\n    const match = splitCSSVariableRegex.exec(current);\n    if (!match)\n        return [,];\n    const [, token1, token2, fallback] = match;\n    return [`--${token1 !== null && token1 !== void 0 ? token1 : token2}`, fallback];\n}\nconst maxDepth = 4;\nfunction getVariableValue(current, element, depth = 1) {\n    invariant(depth <= maxDepth, `Max CSS variable fallback depth detected in property \"${current}\". This may indicate a circular fallback dependency.`);\n    const [token, fallback] = parseCSSVariable(current);\n    // No CSS variable detected\n    if (!token)\n        return;\n    // Attempt to read this CSS variable off the element\n    const resolved = window.getComputedStyle(element).getPropertyValue(token);\n    if (resolved) {\n        const trimmed = resolved.trim();\n        return isNumericalString(trimmed) ? parseFloat(trimmed) : trimmed;\n    }\n    return isCSSVariableToken(fallback)\n        ? getVariableValue(fallback, element, depth + 1)\n        : fallback;\n}\n\nexport { getVariableValue, parseCSSVariable };\n","import { transformPropOrder } from '../../html/utils/transform.mjs';\nimport { number } from '../../../value/types/numbers/index.mjs';\nimport { px } from '../../../value/types/numbers/units.mjs';\n\nconst positionalKeys = new Set([\n    \"width\",\n    \"height\",\n    \"top\",\n    \"left\",\n    \"right\",\n    \"bottom\",\n    \"x\",\n    \"y\",\n    \"translateX\",\n    \"translateY\",\n]);\nconst isNumOrPxType = (v) => v === number || v === px;\nconst getPosFromMatrix = (matrix, pos) => parseFloat(matrix.split(\", \")[pos]);\nconst getTranslateFromMatrix = (pos2, pos3) => (_bbox, { transform }) => {\n    if (transform === \"none\" || !transform)\n        return 0;\n    const matrix3d = transform.match(/^matrix3d\\((.+)\\)$/u);\n    if (matrix3d) {\n        return getPosFromMatrix(matrix3d[1], pos3);\n    }\n    else {\n        const matrix = transform.match(/^matrix\\((.+)\\)$/u);\n        if (matrix) {\n            return getPosFromMatrix(matrix[1], pos2);\n        }\n        else {\n            return 0;\n        }\n    }\n};\nconst transformKeys = new Set([\"x\", \"y\", \"z\"]);\nconst nonTranslationalTransformKeys = transformPropOrder.filter((key) => !transformKeys.has(key));\nfunction removeNonTranslationalTransform(visualElement) {\n    const removedTransforms = [];\n    nonTranslationalTransformKeys.forEach((key) => {\n        const value = visualElement.getValue(key);\n        if (value !== undefined) {\n            removedTransforms.push([key, value.get()]);\n            value.set(key.startsWith(\"scale\") ? 1 : 0);\n        }\n    });\n    return removedTransforms;\n}\nconst positionalValues = {\n    // Dimensions\n    width: ({ x }, { paddingLeft = \"0\", paddingRight = \"0\" }) => x.max - x.min - parseFloat(paddingLeft) - parseFloat(paddingRight),\n    height: ({ y }, { paddingTop = \"0\", paddingBottom = \"0\" }) => y.max - y.min - parseFloat(paddingTop) - parseFloat(paddingBottom),\n    top: (_bbox, { top }) => parseFloat(top),\n    left: (_bbox, { left }) => parseFloat(left),\n    bottom: ({ y }, { top }) => parseFloat(top) + (y.max - y.min),\n    right: ({ x }, { left }) => parseFloat(left) + (x.max - x.min),\n    // Transform\n    x: getTranslateFromMatrix(4, 13),\n    y: getTranslateFromMatrix(5, 14),\n};\n// Alias translate longform names\npositionalValues.translateX = positionalValues.x;\npositionalValues.translateY = positionalValues.y;\n\nexport { isNumOrPxType, positionalKeys, positionalValues, removeNonTranslationalTransform };\n","/**\n * Tests a provided value against a ValueType\n */\nconst testValueType = (v) => (type) => type.test(v);\n\nexport { testValueType };\n","/**\n * ValueType for \"auto\"\n */\nconst auto = {\n    test: (v) => v === \"auto\",\n    parse: (v) => v,\n};\n\nexport { auto };\n","import { number } from '../../../value/types/numbers/index.mjs';\nimport { px, percent, degrees, vw, vh } from '../../../value/types/numbers/units.mjs';\nimport { testValueType } from './test.mjs';\nimport { auto } from './type-auto.mjs';\n\n/**\n * A list of value types commonly used for dimensions\n */\nconst dimensionValueTypes = [number, px, percent, degrees, vw, vh, auto];\n/**\n * Tests a dimensional value against the list of dimension ValueTypes\n */\nconst findDimensionValueType = (v) => dimensionValueTypes.find(testValueType(v));\n\nexport { dimensionValueTypes, findDimensionValueType };\n","import { removeNonTranslationalTransform } from '../dom/utils/unit-conversion.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\n\nconst toResolve = new Set();\nlet isScheduled = false;\nlet anyNeedsMeasurement = false;\nfunction measureAllKeyframes() {\n    if (anyNeedsMeasurement) {\n        const resolversToMeasure = Array.from(toResolve).filter((resolver) => resolver.needsMeasurement);\n        const elementsToMeasure = new Set(resolversToMeasure.map((resolver) => resolver.element));\n        const transformsToRestore = new Map();\n        /**\n         * Write pass\n         * If we're measuring elements we want to remove bounding box-changing transforms.\n         */\n        elementsToMeasure.forEach((element) => {\n            const removedTransforms = removeNonTranslationalTransform(element);\n            if (!removedTransforms.length)\n                return;\n            transformsToRestore.set(element, removedTransforms);\n            element.render();\n        });\n        // Read\n        resolversToMeasure.forEach((resolver) => resolver.measureInitialState());\n        // Write\n        elementsToMeasure.forEach((element) => {\n            element.render();\n            const restore = transformsToRestore.get(element);\n            if (restore) {\n                restore.forEach(([key, value]) => {\n                    var _a;\n                    (_a = element.getValue(key)) === null || _a === void 0 ? void 0 : _a.set(value);\n                });\n            }\n        });\n        // Read\n        resolversToMeasure.forEach((resolver) => resolver.measureEndState());\n        // Write\n        resolversToMeasure.forEach((resolver) => {\n            if (resolver.suspendedScrollY !== undefined) {\n                window.scrollTo(0, resolver.suspendedScrollY);\n            }\n        });\n    }\n    anyNeedsMeasurement = false;\n    isScheduled = false;\n    toResolve.forEach((resolver) => resolver.complete());\n    toResolve.clear();\n}\nfunction readAllKeyframes() {\n    toResolve.forEach((resolver) => {\n        resolver.readKeyframes();\n        if (resolver.needsMeasurement) {\n            anyNeedsMeasurement = true;\n        }\n    });\n}\nfunction flushKeyframeResolvers() {\n    readAllKeyframes();\n    measureAllKeyframes();\n}\nclass KeyframeResolver {\n    constructor(unresolvedKeyframes, onComplete, name, motionValue, element, isAsync = false) {\n        /**\n         * Track whether this resolver has completed. Once complete, it never\n         * needs to attempt keyframe resolution again.\n         */\n        this.isComplete = false;\n        /**\n         * Track whether this resolver is async. If it is, it'll be added to the\n         * resolver queue and flushed in the next frame. Resolvers that aren't going\n         * to trigger read/write thrashing don't need to be async.\n         */\n        this.isAsync = false;\n        /**\n         * Track whether this resolver needs to perform a measurement\n         * to resolve its keyframes.\n         */\n        this.needsMeasurement = false;\n        /**\n         * Track whether this resolver is currently scheduled to resolve\n         * to allow it to be cancelled and resumed externally.\n         */\n        this.isScheduled = false;\n        this.unresolvedKeyframes = [...unresolvedKeyframes];\n        this.onComplete = onComplete;\n        this.name = name;\n        this.motionValue = motionValue;\n        this.element = element;\n        this.isAsync = isAsync;\n    }\n    scheduleResolve() {\n        this.isScheduled = true;\n        if (this.isAsync) {\n            toResolve.add(this);\n            if (!isScheduled) {\n                isScheduled = true;\n                frame.read(readAllKeyframes);\n                frame.resolveKeyframes(measureAllKeyframes);\n            }\n        }\n        else {\n            this.readKeyframes();\n            this.complete();\n        }\n    }\n    readKeyframes() {\n        const { unresolvedKeyframes, name, element, motionValue } = this;\n        /**\n         * If a keyframe is null, we hydrate it either by reading it from\n         * the instance, or propagating from previous keyframes.\n         */\n        for (let i = 0; i < unresolvedKeyframes.length; i++) {\n            if (unresolvedKeyframes[i] === null) {\n                /**\n                 * If the first keyframe is null, we need to find its value by sampling the element\n                 */\n                if (i === 0) {\n                    const currentValue = motionValue === null || motionValue === void 0 ? void 0 : motionValue.get();\n                    const finalKeyframe = unresolvedKeyframes[unresolvedKeyframes.length - 1];\n                    if (currentValue !== undefined) {\n                        unresolvedKeyframes[0] = currentValue;\n                    }\n                    else if (element && name) {\n                        const valueAsRead = element.readValue(name, finalKeyframe);\n                        if (valueAsRead !== undefined && valueAsRead !== null) {\n                            unresolvedKeyframes[0] = valueAsRead;\n                        }\n                    }\n                    if (unresolvedKeyframes[0] === undefined) {\n                        unresolvedKeyframes[0] = finalKeyframe;\n                    }\n                    if (motionValue && currentValue === undefined) {\n                        motionValue.set(unresolvedKeyframes[0]);\n                    }\n                }\n                else {\n                    unresolvedKeyframes[i] = unresolvedKeyframes[i - 1];\n                }\n            }\n        }\n    }\n    setFinalKeyframe() { }\n    measureInitialState() { }\n    renderEndStyles() { }\n    measureEndState() { }\n    complete() {\n        this.isComplete = true;\n        this.onComplete(this.unresolvedKeyframes, this.finalKeyframe);\n        toResolve.delete(this);\n    }\n    cancel() {\n        if (!this.isComplete) {\n            this.isScheduled = false;\n            toResolve.delete(this);\n        }\n    }\n    resume() {\n        if (!this.isComplete)\n            this.scheduleResolve();\n    }\n}\n\nexport { KeyframeResolver, flushKeyframeResolvers };\n","import { isString, singleColorRegex, floatRegex } from '../utils.mjs';\n\n/**\n * Returns true if the provided string is a color, ie rgba(0,0,0,0) or #000,\n * but false if a number or multiple colors\n */\nconst isColorString = (type, testProp) => (v) => {\n    return Boolean((isString(v) && singleColorRegex.test(v) && v.startsWith(type)) ||\n        (testProp && Object.prototype.hasOwnProperty.call(v, testProp)));\n};\nconst splitColor = (aName, bName, cName) => (v) => {\n    if (!isString(v))\n        return v;\n    const [a, b, c, alpha] = v.match(floatRegex);\n    return {\n        [aName]: parseFloat(a),\n        [bName]: parseFloat(b),\n        [cName]: parseFloat(c),\n        alpha: alpha !== undefined ? parseFloat(alpha) : 1,\n    };\n};\n\nexport { isColorString, splitColor };\n","import { clamp } from '../../../utils/clamp.mjs';\nimport { alpha, number } from '../numbers/index.mjs';\nimport { sanitize } from '../utils.mjs';\nimport { isColorString, splitColor } from './utils.mjs';\n\nconst clampRgbUnit = (v) => clamp(0, 255, v);\nconst rgbUnit = {\n    ...number,\n    transform: (v) => Math.round(clampRgbUnit(v)),\n};\nconst rgba = {\n    test: isColorString(\"rgb\", \"red\"),\n    parse: splitColor(\"red\", \"green\", \"blue\"),\n    transform: ({ red, green, blue, alpha: alpha$1 = 1 }) => \"rgba(\" +\n        rgbUnit.transform(red) +\n        \", \" +\n        rgbUnit.transform(green) +\n        \", \" +\n        rgbUnit.transform(blue) +\n        \", \" +\n        sanitize(alpha.transform(alpha$1)) +\n        \")\",\n};\n\nexport { rgbUnit, rgba };\n","import { rgba } from './rgba.mjs';\nimport { isColorString } from './utils.mjs';\n\nfunction parseHex(v) {\n    let r = \"\";\n    let g = \"\";\n    let b = \"\";\n    let a = \"\";\n    // If we have 6 characters, ie #FF0000\n    if (v.length > 5) {\n        r = v.substring(1, 3);\n        g = v.substring(3, 5);\n        b = v.substring(5, 7);\n        a = v.substring(7, 9);\n        // Or we have 3 characters, ie #F00\n    }\n    else {\n        r = v.substring(1, 2);\n        g = v.substring(2, 3);\n        b = v.substring(3, 4);\n        a = v.substring(4, 5);\n        r += r;\n        g += g;\n        b += b;\n        a += a;\n    }\n    return {\n        red: parseInt(r, 16),\n        green: parseInt(g, 16),\n        blue: parseInt(b, 16),\n        alpha: a ? parseInt(a, 16) / 255 : 1,\n    };\n}\nconst hex = {\n    test: isColorString(\"#\"),\n    parse: parseHex,\n    transform: rgba.transform,\n};\n\nexport { hex };\n","import { alpha } from '../numbers/index.mjs';\nimport { percent } from '../numbers/units.mjs';\nimport { sanitize } from '../utils.mjs';\nimport { isColorString, splitColor } from './utils.mjs';\n\nconst hsla = {\n    test: isColorString(\"hsl\", \"hue\"),\n    parse: splitColor(\"hue\", \"saturation\", \"lightness\"),\n    transform: ({ hue, saturation, lightness, alpha: alpha$1 = 1 }) => {\n        return (\"hsla(\" +\n            Math.round(hue) +\n            \", \" +\n            percent.transform(sanitize(saturation)) +\n            \", \" +\n            percent.transform(sanitize(lightness)) +\n            \", \" +\n            sanitize(alpha.transform(alpha$1)) +\n            \")\");\n    },\n};\n\nexport { hsla };\n","import { isString } from '../utils.mjs';\nimport { hex } from './hex.mjs';\nimport { hsla } from './hsla.mjs';\nimport { rgba } from './rgba.mjs';\n\nconst color = {\n    test: (v) => rgba.test(v) || hex.test(v) || hsla.test(v),\n    parse: (v) => {\n        if (rgba.test(v)) {\n            return rgba.parse(v);\n        }\n        else if (hsla.test(v)) {\n            return hsla.parse(v);\n        }\n        else {\n            return hex.parse(v);\n        }\n    },\n    transform: (v) => {\n        return isString(v)\n            ? v\n            : v.hasOwnProperty(\"red\")\n                ? rgba.transform(v)\n                : hsla.transform(v);\n    },\n};\n\nexport { color };\n","import { color } from '../color/index.mjs';\nimport { isString, floatRegex, colorRegex, sanitize } from '../utils.mjs';\n\nfunction test(v) {\n    var _a, _b;\n    return (isNaN(v) &&\n        isString(v) &&\n        (((_a = v.match(floatRegex)) === null || _a === void 0 ? void 0 : _a.length) || 0) +\n            (((_b = v.match(colorRegex)) === null || _b === void 0 ? void 0 : _b.length) || 0) >\n            0);\n}\nconst NUMBER_TOKEN = \"number\";\nconst COLOR_TOKEN = \"color\";\nconst VAR_TOKEN = \"var\";\nconst VAR_FUNCTION_TOKEN = \"var(\";\nconst SPLIT_TOKEN = \"${}\";\n// this regex consists of the `singleCssVariableRegex|rgbHSLValueRegex|digitRegex`\nconst complexRegex = /var\\s*\\(\\s*--(?:[\\w-]+\\s*|[\\w-]+\\s*,(?:\\s*[^)(\\s]|\\s*\\((?:[^)(]|\\([^)(]*\\))*\\))+\\s*)\\)|#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\)|-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)/giu;\nfunction analyseComplexValue(value) {\n    const originalValue = value.toString();\n    const values = [];\n    const indexes = {\n        color: [],\n        number: [],\n        var: [],\n    };\n    const types = [];\n    let i = 0;\n    const tokenised = originalValue.replace(complexRegex, (parsedValue) => {\n        if (color.test(parsedValue)) {\n            indexes.color.push(i);\n            types.push(COLOR_TOKEN);\n            values.push(color.parse(parsedValue));\n        }\n        else if (parsedValue.startsWith(VAR_FUNCTION_TOKEN)) {\n            indexes.var.push(i);\n            types.push(VAR_TOKEN);\n            values.push(parsedValue);\n        }\n        else {\n            indexes.number.push(i);\n            types.push(NUMBER_TOKEN);\n            values.push(parseFloat(parsedValue));\n        }\n        ++i;\n        return SPLIT_TOKEN;\n    });\n    const split = tokenised.split(SPLIT_TOKEN);\n    return { values, split, indexes, types };\n}\nfunction parseComplexValue(v) {\n    return analyseComplexValue(v).values;\n}\nfunction createTransformer(source) {\n    const { split, types } = analyseComplexValue(source);\n    const numSections = split.length;\n    return (v) => {\n        let output = \"\";\n        for (let i = 0; i < numSections; i++) {\n            output += split[i];\n            if (v[i] !== undefined) {\n                const type = types[i];\n                if (type === NUMBER_TOKEN) {\n                    output += sanitize(v[i]);\n                }\n                else if (type === COLOR_TOKEN) {\n                    output += color.transform(v[i]);\n                }\n                else {\n                    output += v[i];\n                }\n            }\n        }\n        return output;\n    };\n}\nconst convertNumbersToZero = (v) => typeof v === \"number\" ? 0 : v;\nfunction getAnimatableNone(v) {\n    const parsed = parseComplexValue(v);\n    const transformer = createTransformer(v);\n    return transformer(parsed.map(convertNumbersToZero));\n}\nconst complex = {\n    test,\n    parse: parseComplexValue,\n    createTransformer,\n    getAnimatableNone,\n};\n\nexport { analyseComplexValue, complex };\n","import { complex } from './index.mjs';\nimport { floatRegex } from '../utils.mjs';\n\n/**\n * Properties that should default to 1 or 100%\n */\nconst maxDefaults = new Set([\"brightness\", \"contrast\", \"saturate\", \"opacity\"]);\nfunction applyDefaultFilter(v) {\n    const [name, value] = v.slice(0, -1).split(\"(\");\n    if (name === \"drop-shadow\")\n        return v;\n    const [number] = value.match(floatRegex) || [];\n    if (!number)\n        return v;\n    const unit = value.replace(number, \"\");\n    let defaultValue = maxDefaults.has(name) ? 1 : 0;\n    if (number !== value)\n        defaultValue *= 100;\n    return name + \"(\" + defaultValue + unit + \")\";\n}\nconst functionRegex = /\\b([a-z-]*)\\(.*?\\)/gu;\nconst filter = {\n    ...complex,\n    getAnimatableNone: (v) => {\n        const functions = v.match(functionRegex);\n        return functions ? functions.map(applyDefaultFilter).join(\" \") : v;\n    },\n};\n\nexport { filter };\n","import { color } from '../../../value/types/color/index.mjs';\nimport { filter } from '../../../value/types/complex/filter.mjs';\nimport { numberValueTypes } from './number.mjs';\n\n/**\n * A map of default value types for common values\n */\nconst defaultValueTypes = {\n    ...numberValueTypes,\n    // Color props\n    color,\n    backgroundColor: color,\n    outlineColor: color,\n    fill: color,\n    stroke: color,\n    // Border props\n    borderColor: color,\n    borderTopColor: color,\n    borderRightColor: color,\n    borderBottomColor: color,\n    borderLeftColor: color,\n    filter,\n    WebkitFilter: filter,\n};\n/**\n * Gets the default ValueType for the provided value key\n */\nconst getDefaultValueType = (key) => defaultValueTypes[key];\n\nexport { defaultValueTypes, getDefaultValueType };\n","import { complex } from '../../../value/types/complex/index.mjs';\nimport { filter } from '../../../value/types/complex/filter.mjs';\nimport { getDefaultValueType } from './defaults.mjs';\n\nfunction getAnimatableNone(key, value) {\n    let defaultValueType = getDefaultValueType(key);\n    if (defaultValueType !== filter)\n        defaultValueType = complex;\n    // If value is not recognised as animatable, ie \"none\", create an animatable version origin based on the target\n    return defaultValueType.getAnimatableNone\n        ? defaultValueType.getAnimatableNone(value)\n        : undefined;\n}\n\nexport { getAnimatableNone };\n","import { analyseComplexValue } from '../../../value/types/complex/index.mjs';\nimport { getAnimatableNone } from '../../dom/value-types/animatable-none.mjs';\n\n/**\n * If we encounter keyframes like \"none\" or \"0\" and we also have keyframes like\n * \"#fff\" or \"200px 200px\" we want to find a keyframe to serve as a template for\n * the \"none\" keyframes. In this case \"#fff\" or \"200px 200px\" - then these get turned into\n * zero equivalents, i.e. \"#fff0\" or \"0px 0px\".\n */\nconst invalidTemplates = new Set([\"auto\", \"none\", \"0\"]);\nfunction makeNoneKeyframesAnimatable(unresolvedKeyframes, noneKeyframeIndexes, name) {\n    let i = 0;\n    let animatableTemplate = undefined;\n    while (i < unresolvedKeyframes.length && !animatableTemplate) {\n        const keyframe = unresolvedKeyframes[i];\n        if (typeof keyframe === \"string\" &&\n            !invalidTemplates.has(keyframe) &&\n            analyseComplexValue(keyframe).values.length) {\n            animatableTemplate = unresolvedKeyframes[i];\n        }\n        i++;\n    }\n    if (animatableTemplate && name) {\n        for (const noneIndex of noneKeyframeIndexes) {\n            unresolvedKeyframes[noneIndex] = getAnimatableNone(name, animatableTemplate);\n        }\n    }\n}\n\nexport { makeNoneKeyframesAnimatable };\n","import { isNone } from '../../animation/utils/is-none.mjs';\nimport { getVariableValue } from './utils/css-variables-conversion.mjs';\nimport { isCSSVariableToken } from './utils/is-css-variable.mjs';\nimport { positionalKeys, isNumOrPxType, positionalValues } from './utils/unit-conversion.mjs';\nimport { findDimensionValueType } from './value-types/dimensions.mjs';\nimport { KeyframeResolver } from '../utils/KeyframesResolver.mjs';\nimport { makeNoneKeyframesAnimatable } from '../html/utils/make-none-animatable.mjs';\n\nclass DOMKeyframesResolver extends KeyframeResolver {\n    constructor(unresolvedKeyframes, onComplete, name, motionValue) {\n        super(unresolvedKeyframes, onComplete, name, motionValue, motionValue === null || motionValue === void 0 ? void 0 : motionValue.owner, true);\n    }\n    readKeyframes() {\n        const { unresolvedKeyframes, element, name } = this;\n        if (!element.current)\n            return;\n        super.readKeyframes();\n        /**\n         * If any keyframe is a CSS variable, we need to find its value by sampling the element\n         */\n        for (let i = 0; i < unresolvedKeyframes.length; i++) {\n            let keyframe = unresolvedKeyframes[i];\n            if (typeof keyframe === \"string\") {\n                keyframe = keyframe.trim();\n                if (isCSSVariableToken(keyframe)) {\n                    const resolved = getVariableValue(keyframe, element.current);\n                    if (resolved !== undefined) {\n                        unresolvedKeyframes[i] = resolved;\n                    }\n                    if (i === unresolvedKeyframes.length - 1) {\n                        this.finalKeyframe = keyframe;\n                    }\n                }\n            }\n        }\n        /**\n         * Resolve \"none\" values. We do this potentially twice - once before and once after measuring keyframes.\n         * This could be seen as inefficient but it's a trade-off to avoid measurements in more situations, which\n         * have a far bigger performance impact.\n         */\n        this.resolveNoneKeyframes();\n        /**\n         * Check to see if unit type has changed. If so schedule jobs that will\n         * temporarily set styles to the destination keyframes.\n         * Skip if we have more than two keyframes or this isn't a positional value.\n         * TODO: We can throw if there are multiple keyframes and the value type changes.\n         */\n        if (!positionalKeys.has(name) || unresolvedKeyframes.length !== 2) {\n            return;\n        }\n        const [origin, target] = unresolvedKeyframes;\n        const originType = findDimensionValueType(origin);\n        const targetType = findDimensionValueType(target);\n        /**\n         * Either we don't recognise these value types or we can animate between them.\n         */\n        if (originType === targetType)\n            return;\n        /**\n         * If both values are numbers or pixels, we can animate between them by\n         * converting them to numbers.\n         */\n        if (isNumOrPxType(originType) && isNumOrPxType(targetType)) {\n            for (let i = 0; i < unresolvedKeyframes.length; i++) {\n                const value = unresolvedKeyframes[i];\n                if (typeof value === \"string\") {\n                    unresolvedKeyframes[i] = parseFloat(value);\n                }\n            }\n        }\n        else {\n            /**\n             * Else, the only way to resolve this is by measuring the element.\n             */\n            this.needsMeasurement = true;\n        }\n    }\n    resolveNoneKeyframes() {\n        const { unresolvedKeyframes, name } = this;\n        const noneKeyframeIndexes = [];\n        for (let i = 0; i < unresolvedKeyframes.length; i++) {\n            if (isNone(unresolvedKeyframes[i])) {\n                noneKeyframeIndexes.push(i);\n            }\n        }\n        if (noneKeyframeIndexes.length) {\n            makeNoneKeyframesAnimatable(unresolvedKeyframes, noneKeyframeIndexes, name);\n        }\n    }\n    measureInitialState() {\n        const { element, unresolvedKeyframes, name } = this;\n        if (!element.current)\n            return;\n        if (name === \"height\") {\n            this.suspendedScrollY = window.pageYOffset;\n        }\n        this.measuredOrigin = positionalValues[name](element.measureViewportBox(), window.getComputedStyle(element.current));\n        unresolvedKeyframes[0] = this.measuredOrigin;\n        // Set final key frame to measure after next render\n        const measureKeyframe = unresolvedKeyframes[unresolvedKeyframes.length - 1];\n        if (measureKeyframe !== undefined) {\n            element.getValue(name, measureKeyframe).jump(measureKeyframe, false);\n        }\n    }\n    measureEndState() {\n        var _a;\n        const { element, name, unresolvedKeyframes } = this;\n        if (!element.current)\n            return;\n        const value = element.getValue(name);\n        value && value.jump(this.measuredOrigin, false);\n        const finalKeyframeIndex = unresolvedKeyframes.length - 1;\n        const finalKeyframe = unresolvedKeyframes[finalKeyframeIndex];\n        unresolvedKeyframes[finalKeyframeIndex] = positionalValues[name](element.measureViewportBox(), window.getComputedStyle(element.current));\n        if (finalKeyframe !== null && this.finalKeyframe === undefined) {\n            this.finalKeyframe = finalKeyframe;\n        }\n        // If we removed transform values, reapply them before the next render\n        if ((_a = this.removedTransforms) === null || _a === void 0 ? void 0 : _a.length) {\n            this.removedTransforms.forEach(([unsetTransformName, unsetTransformValue]) => {\n                element\n                    .getValue(unsetTransformName)\n                    .set(unsetTransformValue);\n            });\n        }\n        this.resolveNoneKeyframes();\n    }\n}\n\nexport { DOMKeyframesResolver };\n","function memo(callback) {\n    let result;\n    return () => {\n        if (result === undefined)\n            result = callback();\n        return result;\n    };\n}\n\nexport { memo };\n","import { complex } from '../../value/types/complex/index.mjs';\n\n/**\n * Check if a value is animatable. Examples:\n *\n * ✅: 100, \"100px\", \"#fff\"\n * ❌: \"block\", \"url(2.jpg)\"\n * @param value\n *\n * @internal\n */\nconst isAnimatable = (value, name) => {\n    // If the list of keys tat might be non-animatable grows, replace with Set\n    if (name === \"zIndex\")\n        return false;\n    // If it's a number or a keyframes array, we can animate it. We might at some point\n    // need to do a deep isAnimatable check of keyframes, or let Popmotion handle this,\n    // but for now lets leave it like this for performance reasons\n    if (typeof value === \"number\" || Array.isArray(value))\n        return true;\n    if (typeof value === \"string\" && // It's animatable if we have a string\n        (complex.test(value) || value === \"0\") && // And it contains numbers and/or colors\n        !value.startsWith(\"url(\") // Unless it starts with \"url(\"\n    ) {\n        return true;\n    }\n    return false;\n};\n\nexport { isAnimatable };\n","import { warning } from '../../../utils/errors.mjs';\nimport { isAnimatable } from '../../utils/is-animatable.mjs';\n\nfunction hasKeyframesChanged(keyframes) {\n    const current = keyframes[0];\n    if (keyframes.length === 1)\n        return true;\n    for (let i = 0; i < keyframes.length; i++) {\n        if (keyframes[i] !== current)\n            return true;\n    }\n}\nfunction canAnimate(keyframes, name, type, velocity) {\n    /**\n     * Check if we're able to animate between the start and end keyframes,\n     * and throw a warning if we're attempting to animate between one that's\n     * animatable and another that isn't.\n     */\n    const originKeyframe = keyframes[0];\n    if (originKeyframe === null)\n        return false;\n    /**\n     * These aren't traditionally animatable but we do support them.\n     * In future we could look into making this more generic or replacing\n     * this function with mix() === mixImmediate\n     */\n    if (name === \"display\" || name === \"visibility\")\n        return true;\n    const targetKeyframe = keyframes[keyframes.length - 1];\n    const isOriginAnimatable = isAnimatable(originKeyframe, name);\n    const isTargetAnimatable = isAnimatable(targetKeyframe, name);\n    warning(isOriginAnimatable === isTargetAnimatable, `You are trying to animate ${name} from \"${originKeyframe}\" to \"${targetKeyframe}\". ${originKeyframe} is not an animatable value - to enable this animation set ${originKeyframe} to a value animatable to ${targetKeyframe} via the \\`style\\` property.`);\n    // Always skip if any of these are true\n    if (!isOriginAnimatable || !isTargetAnimatable) {\n        return false;\n    }\n    return hasKeyframesChanged(keyframes) || (type === \"spring\" && velocity);\n}\n\nexport { canAnimate };\n","import { flushKeyframeResolvers } from '../../render/utils/KeyframesResolver.mjs';\nimport { instantAnimationState } from '../../utils/use-instant-transition-state.mjs';\nimport { canAnimate } from './utils/can-animate.mjs';\nimport { getFinalKeyframe } from './waapi/utils/get-final-keyframe.mjs';\n\nclass BaseAnimation {\n    constructor({ autoplay = true, delay = 0, type = \"keyframes\", repeat = 0, repeatDelay = 0, repeatType = \"loop\", ...options }) {\n        // Track whether the animation has been stopped. Stopped animations won't restart.\n        this.isStopped = false;\n        this.hasAttemptedResolve = false;\n        this.options = {\n            autoplay,\n            delay,\n            type,\n            repeat,\n            repeatDelay,\n            repeatType,\n            ...options,\n        };\n        this.updateFinishedPromise();\n    }\n    /**\n     * A getter for resolved data. If keyframes are not yet resolved, accessing\n     * this.resolved will synchronously flush all pending keyframe resolvers.\n     * This is a deoptimisation, but at its worst still batches read/writes.\n     */\n    get resolved() {\n        if (!this._resolved && !this.hasAttemptedResolve) {\n            flushKeyframeResolvers();\n        }\n        return this._resolved;\n    }\n    /**\n     * A method to be called when the keyframes resolver completes. This method\n     * will check if its possible to run the animation and, if not, skip it.\n     * Otherwise, it will call initPlayback on the implementing class.\n     */\n    onKeyframesResolved(keyframes, finalKeyframe) {\n        this.hasAttemptedResolve = true;\n        const { name, type, velocity, delay, onComplete, onUpdate, isGenerator, } = this.options;\n        /**\n         * If we can't animate this value with the resolved keyframes\n         * then we should complete it immediately.\n         */\n        if (!isGenerator && !canAnimate(keyframes, name, type, velocity)) {\n            // Finish immediately\n            if (instantAnimationState.current || !delay) {\n                onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(getFinalKeyframe(keyframes, this.options, finalKeyframe));\n                onComplete === null || onComplete === void 0 ? void 0 : onComplete();\n                this.resolveFinishedPromise();\n                return;\n            }\n            // Finish after a delay\n            else {\n                this.options.duration = 0;\n            }\n        }\n        const resolvedAnimation = this.initPlayback(keyframes, finalKeyframe);\n        if (resolvedAnimation === false)\n            return;\n        this._resolved = {\n            keyframes,\n            finalKeyframe,\n            ...resolvedAnimation,\n        };\n        this.onPostResolved();\n    }\n    onPostResolved() { }\n    /**\n     * Allows the returned animation to be awaited or promise-chained. Currently\n     * resolves when the animation finishes at all but in a future update could/should\n     * reject if its cancels.\n     */\n    then(resolve, reject) {\n        return this.currentFinishedPromise.then(resolve, reject);\n    }\n    updateFinishedPromise() {\n        this.currentFinishedPromise = new Promise((resolve) => {\n            this.resolveFinishedPromise = resolve;\n        });\n    }\n}\n\nexport { BaseAnimation };\n","/*\n  Convert velocity into velocity per second\n\n  @param [number]: Unit per frame\n  @param [number]: Frame duration in ms\n*/\nfunction velocityPerSecond(velocity, frameDuration) {\n    return frameDuration ? velocity * (1000 / frameDuration) : 0;\n}\n\nexport { velocityPerSecond };\n","import { velocityPerSecond } from '../../../utils/velocity-per-second.mjs';\n\nconst velocitySampleDuration = 5; // ms\nfunction calcGeneratorVelocity(resolveValue, t, current) {\n    const prevT = Math.max(t - velocitySampleDuration, 0);\n    return velocityPerSecond(current - resolveValue(prevT), t - prevT);\n}\n\nexport { calcGeneratorVelocity };\n","import { warning } from '../../../utils/errors.mjs';\nimport { clamp } from '../../../utils/clamp.mjs';\nimport { secondsToMilliseconds, millisecondsToSeconds } from '../../../utils/time-conversion.mjs';\n\nconst safeMin = 0.001;\nconst minDuration = 0.01;\nconst maxDuration = 10.0;\nconst minDamping = 0.05;\nconst maxDamping = 1;\nfunction findSpring({ duration = 800, bounce = 0.25, velocity = 0, mass = 1, }) {\n    let envelope;\n    let derivative;\n    warning(duration <= secondsToMilliseconds(maxDuration), \"Spring duration must be 10 seconds or less\");\n    let dampingRatio = 1 - bounce;\n    /**\n     * Restrict dampingRatio and duration to within acceptable ranges.\n     */\n    dampingRatio = clamp(minDamping, maxDamping, dampingRatio);\n    duration = clamp(minDuration, maxDuration, millisecondsToSeconds(duration));\n    if (dampingRatio < 1) {\n        /**\n         * Underdamped spring\n         */\n        envelope = (undampedFreq) => {\n            const exponentialDecay = undampedFreq * dampingRatio;\n            const delta = exponentialDecay * duration;\n            const a = exponentialDecay - velocity;\n            const b = calcAngularFreq(undampedFreq, dampingRatio);\n            const c = Math.exp(-delta);\n            return safeMin - (a / b) * c;\n        };\n        derivative = (undampedFreq) => {\n            const exponentialDecay = undampedFreq * dampingRatio;\n            const delta = exponentialDecay * duration;\n            const d = delta * velocity + velocity;\n            const e = Math.pow(dampingRatio, 2) * Math.pow(undampedFreq, 2) * duration;\n            const f = Math.exp(-delta);\n            const g = calcAngularFreq(Math.pow(undampedFreq, 2), dampingRatio);\n            const factor = -envelope(undampedFreq) + safeMin > 0 ? -1 : 1;\n            return (factor * ((d - e) * f)) / g;\n        };\n    }\n    else {\n        /**\n         * Critically-damped spring\n         */\n        envelope = (undampedFreq) => {\n            const a = Math.exp(-undampedFreq * duration);\n            const b = (undampedFreq - velocity) * duration + 1;\n            return -safeMin + a * b;\n        };\n        derivative = (undampedFreq) => {\n            const a = Math.exp(-undampedFreq * duration);\n            const b = (velocity - undampedFreq) * (duration * duration);\n            return a * b;\n        };\n    }\n    const initialGuess = 5 / duration;\n    const undampedFreq = approximateRoot(envelope, derivative, initialGuess);\n    duration = secondsToMilliseconds(duration);\n    if (isNaN(undampedFreq)) {\n        return {\n            stiffness: 100,\n            damping: 10,\n            duration,\n        };\n    }\n    else {\n        const stiffness = Math.pow(undampedFreq, 2) * mass;\n        return {\n            stiffness,\n            damping: dampingRatio * 2 * Math.sqrt(mass * stiffness),\n            duration,\n        };\n    }\n}\nconst rootIterations = 12;\nfunction approximateRoot(envelope, derivative, initialGuess) {\n    let result = initialGuess;\n    for (let i = 1; i < rootIterations; i++) {\n        result = result - envelope(result) / derivative(result);\n    }\n    return result;\n}\nfunction calcAngularFreq(undampedFreq, dampingRatio) {\n    return undampedFreq * Math.sqrt(1 - dampingRatio * dampingRatio);\n}\n\nexport { calcAngularFreq, findSpring, maxDamping, maxDuration, minDamping, minDuration };\n","import { millisecondsToSeconds } from '../../../utils/time-conversion.mjs';\nimport { calcGeneratorVelocity } from '../utils/velocity.mjs';\nimport { findSpring, calcAngularFreq } from './find.mjs';\n\nconst durationKeys = [\"duration\", \"bounce\"];\nconst physicsKeys = [\"stiffness\", \"damping\", \"mass\"];\nfunction isSpringType(options, keys) {\n    return keys.some((key) => options[key] !== undefined);\n}\nfunction getSpringOptions(options) {\n    let springOptions = {\n        velocity: 0.0,\n        stiffness: 100,\n        damping: 10,\n        mass: 1.0,\n        isResolvedFromDuration: false,\n        ...options,\n    };\n    // stiffness/damping/mass overrides duration/bounce\n    if (!isSpringType(options, physicsKeys) &&\n        isSpringType(options, durationKeys)) {\n        const derived = findSpring(options);\n        springOptions = {\n            ...springOptions,\n            ...derived,\n            mass: 1.0,\n        };\n        springOptions.isResolvedFromDuration = true;\n    }\n    return springOptions;\n}\nfunction spring({ keyframes, restDelta, restSpeed, ...options }) {\n    const origin = keyframes[0];\n    const target = keyframes[keyframes.length - 1];\n    /**\n     * This is the Iterator-spec return value. We ensure it's mutable rather than using a generator\n     * to reduce GC during animation.\n     */\n    const state = { done: false, value: origin };\n    const { stiffness, damping, mass, duration, velocity, isResolvedFromDuration, } = getSpringOptions({\n        ...options,\n        velocity: -millisecondsToSeconds(options.velocity || 0),\n    });\n    const initialVelocity = velocity || 0.0;\n    const dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n    const initialDelta = target - origin;\n    const undampedAngularFreq = millisecondsToSeconds(Math.sqrt(stiffness / mass));\n    /**\n     * If we're working on a granular scale, use smaller defaults for determining\n     * when the spring is finished.\n     *\n     * These defaults have been selected emprically based on what strikes a good\n     * ratio between feeling good and finishing as soon as changes are imperceptible.\n     */\n    const isGranularScale = Math.abs(initialDelta) < 5;\n    restSpeed || (restSpeed = isGranularScale ? 0.01 : 2);\n    restDelta || (restDelta = isGranularScale ? 0.005 : 0.5);\n    let resolveSpring;\n    if (dampingRatio < 1) {\n        const angularFreq = calcAngularFreq(undampedAngularFreq, dampingRatio);\n        // Underdamped spring\n        resolveSpring = (t) => {\n            const envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n            return (target -\n                envelope *\n                    (((initialVelocity +\n                        dampingRatio * undampedAngularFreq * initialDelta) /\n                        angularFreq) *\n                        Math.sin(angularFreq * t) +\n                        initialDelta * Math.cos(angularFreq * t)));\n        };\n    }\n    else if (dampingRatio === 1) {\n        // Critically damped spring\n        resolveSpring = (t) => target -\n            Math.exp(-undampedAngularFreq * t) *\n                (initialDelta +\n                    (initialVelocity + undampedAngularFreq * initialDelta) * t);\n    }\n    else {\n        // Overdamped spring\n        const dampedAngularFreq = undampedAngularFreq * Math.sqrt(dampingRatio * dampingRatio - 1);\n        resolveSpring = (t) => {\n            const envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n            // When performing sinh or cosh values can hit Infinity so we cap them here\n            const freqForT = Math.min(dampedAngularFreq * t, 300);\n            return (target -\n                (envelope *\n                    ((initialVelocity +\n                        dampingRatio * undampedAngularFreq * initialDelta) *\n                        Math.sinh(freqForT) +\n                        dampedAngularFreq *\n                            initialDelta *\n                            Math.cosh(freqForT))) /\n                    dampedAngularFreq);\n        };\n    }\n    return {\n        calculatedDuration: isResolvedFromDuration ? duration || null : null,\n        next: (t) => {\n            const current = resolveSpring(t);\n            if (!isResolvedFromDuration) {\n                let currentVelocity = initialVelocity;\n                if (t !== 0) {\n                    /**\n                     * We only need to calculate velocity for under-damped springs\n                     * as over- and critically-damped springs can't overshoot, so\n                     * checking only for displacement is enough.\n                     */\n                    if (dampingRatio < 1) {\n                        currentVelocity = calcGeneratorVelocity(resolveSpring, t, current);\n                    }\n                    else {\n                        currentVelocity = 0;\n                    }\n                }\n                const isBelowVelocityThreshold = Math.abs(currentVelocity) <= restSpeed;\n                const isBelowDisplacementThreshold = Math.abs(target - current) <= restDelta;\n                state.done =\n                    isBelowVelocityThreshold && isBelowDisplacementThreshold;\n            }\n            else {\n                state.done = t >= duration;\n            }\n            state.value = state.done ? target : current;\n            return state;\n        },\n    };\n}\n\nexport { spring };\n","import { spring } from './spring/index.mjs';\nimport { calcGeneratorVelocity } from './utils/velocity.mjs';\n\nfunction inertia({ keyframes, velocity = 0.0, power = 0.8, timeConstant = 325, bounceDamping = 10, bounceStiffness = 500, modifyTarget, min, max, restDelta = 0.5, restSpeed, }) {\n    const origin = keyframes[0];\n    const state = {\n        done: false,\n        value: origin,\n    };\n    const isOutOfBounds = (v) => (min !== undefined && v < min) || (max !== undefined && v > max);\n    const nearestBoundary = (v) => {\n        if (min === undefined)\n            return max;\n        if (max === undefined)\n            return min;\n        return Math.abs(min - v) < Math.abs(max - v) ? min : max;\n    };\n    let amplitude = power * velocity;\n    const ideal = origin + amplitude;\n    const target = modifyTarget === undefined ? ideal : modifyTarget(ideal);\n    /**\n     * If the target has changed we need to re-calculate the amplitude, otherwise\n     * the animation will start from the wrong position.\n     */\n    if (target !== ideal)\n        amplitude = target - origin;\n    const calcDelta = (t) => -amplitude * Math.exp(-t / timeConstant);\n    const calcLatest = (t) => target + calcDelta(t);\n    const applyFriction = (t) => {\n        const delta = calcDelta(t);\n        const latest = calcLatest(t);\n        state.done = Math.abs(delta) <= restDelta;\n        state.value = state.done ? target : latest;\n    };\n    /**\n     * Ideally this would resolve for t in a stateless way, we could\n     * do that by always precalculating the animation but as we know\n     * this will be done anyway we can assume that spring will\n     * be discovered during that.\n     */\n    let timeReachedBoundary;\n    let spring$1;\n    const checkCatchBoundary = (t) => {\n        if (!isOutOfBounds(state.value))\n            return;\n        timeReachedBoundary = t;\n        spring$1 = spring({\n            keyframes: [state.value, nearestBoundary(state.value)],\n            velocity: calcGeneratorVelocity(calcLatest, t, state.value), // TODO: This should be passing * 1000\n            damping: bounceDamping,\n            stiffness: bounceStiffness,\n            restDelta,\n            restSpeed,\n        });\n    };\n    checkCatchBoundary(0);\n    return {\n        calculatedDuration: null,\n        next: (t) => {\n            /**\n             * We need to resolve the friction to figure out if we need a\n             * spring but we don't want to do this twice per frame. So here\n             * we flag if we updated for this frame and later if we did\n             * we can skip doing it again.\n             */\n            let hasUpdatedFrame = false;\n            if (!spring$1 && timeReachedBoundary === undefined) {\n                hasUpdatedFrame = true;\n                applyFriction(t);\n                checkCatchBoundary(t);\n            }\n            /**\n             * If we have a spring and the provided t is beyond the moment the friction\n             * animation crossed the min/max boundary, use the spring.\n             */\n            if (timeReachedBoundary !== undefined && t >= timeReachedBoundary) {\n                return spring$1.next(t - timeReachedBoundary);\n            }\n            else {\n                !hasUpdatedFrame && applyFriction(t);\n                return state;\n            }\n        },\n    };\n}\n\nexport { inertia };\n","import { noop } from '../utils/noop.mjs';\n\n/*\n  Bezier function generator\n  This has been modified from Gaëtan Renaudeau's BezierEasing\n  https://github.com/gre/bezier-easing/blob/master/src/index.js\n  https://github.com/gre/bezier-easing/blob/master/LICENSE\n  \n  I've removed the newtonRaphsonIterate algo because in benchmarking it\n  wasn't noticiably faster than binarySubdivision, indeed removing it\n  usually improved times, depending on the curve.\n  I also removed the lookup table, as for the added bundle size and loop we're\n  only cutting ~4 or so subdivision iterations. I bumped the max iterations up\n  to 12 to compensate and this still tended to be faster for no perceivable\n  loss in accuracy.\n  Usage\n    const easeOut = cubicBezier(.17,.67,.83,.67);\n    const x = easeOut(0.5); // returns 0.627...\n*/\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nconst calcBezier = (t, a1, a2) => (((1.0 - 3.0 * a2 + 3.0 * a1) * t + (3.0 * a2 - 6.0 * a1)) * t + 3.0 * a1) *\n    t;\nconst subdivisionPrecision = 0.0000001;\nconst subdivisionMaxIterations = 12;\nfunction binarySubdivide(x, lowerBound, upperBound, mX1, mX2) {\n    let currentX;\n    let currentT;\n    let i = 0;\n    do {\n        currentT = lowerBound + (upperBound - lowerBound) / 2.0;\n        currentX = calcBezier(currentT, mX1, mX2) - x;\n        if (currentX > 0.0) {\n            upperBound = currentT;\n        }\n        else {\n            lowerBound = currentT;\n        }\n    } while (Math.abs(currentX) > subdivisionPrecision &&\n        ++i < subdivisionMaxIterations);\n    return currentT;\n}\nfunction cubicBezier(mX1, mY1, mX2, mY2) {\n    // If this is a linear gradient, return linear easing\n    if (mX1 === mY1 && mX2 === mY2)\n        return noop;\n    const getTForX = (aX) => binarySubdivide(aX, 0, 1, mX1, mX2);\n    // If animation is at start/end, return t without easing\n    return (t) => t === 0 || t === 1 ? t : calcBezier(getTForX(t), mY1, mY2);\n}\n\nexport { cubicBezier };\n","import { cubicBezier } from './cubic-bezier.mjs';\n\nconst easeIn = cubicBezier(0.42, 0, 1, 1);\nconst easeOut = cubicBezier(0, 0, 0.58, 1);\nconst easeInOut = cubicBezier(0.42, 0, 0.58, 1);\n\nexport { easeIn, easeInOut, easeOut };\n","const isEasingArray = (ease) => {\n    return Array.isArray(ease) && typeof ease[0] !== \"number\";\n};\n\nexport { isEasingArray };\n","// Accepts an easing function and returns a new one that outputs mirrored values for\n// the second half of the animation. Turns easeIn into easeInOut.\nconst mirrorEasing = (easing) => (p) => p <= 0.5 ? easing(2 * p) / 2 : (2 - easing(2 * (1 - p))) / 2;\n\nexport { mirrorEasing };\n","// Accepts an easing function and returns a new one that outputs reversed values.\n// Turns easeIn into easeOut.\nconst reverseEasing = (easing) => (p) => 1 - easing(1 - p);\n\nexport { reverseEasing };\n","import { mirrorEasing } from './modifiers/mirror.mjs';\nimport { reverseEasing } from './modifiers/reverse.mjs';\n\nconst circIn = (p) => 1 - Math.sin(Math.acos(p));\nconst circOut = reverseEasing(circIn);\nconst circInOut = mirrorEasing(circIn);\n\nexport { circIn, circInOut, circOut };\n","import { cubicBezier } from './cubic-bezier.mjs';\nimport { mirrorEasing } from './modifiers/mirror.mjs';\nimport { reverseEasing } from './modifiers/reverse.mjs';\n\nconst backOut = cubicBezier(0.33, 1.53, 0.69, 0.99);\nconst backIn = reverseEasing(backOut);\nconst backInOut = mirrorEasing(backIn);\n\nexport { backIn, backInOut, backOut };\n","import { backIn } from './back.mjs';\n\nconst anticipate = (p) => (p *= 2) < 1 ? 0.5 * backIn(p) : 0.5 * (2 - Math.pow(2, -10 * (p - 1)));\n\nexport { anticipate };\n","import { invariant } from '../../utils/errors.mjs';\nimport { cubicBezier } from '../cubic-bezier.mjs';\nimport { noop } from '../../utils/noop.mjs';\nimport { easeIn, easeInOut, easeOut } from '../ease.mjs';\nimport { circIn, circInOut, circOut } from '../circ.mjs';\nimport { backIn, backInOut, backOut } from '../back.mjs';\nimport { anticipate } from '../anticipate.mjs';\n\nconst easingLookup = {\n    linear: noop,\n    easeIn,\n    easeInOut,\n    easeOut,\n    circIn,\n    circInOut,\n    circOut,\n    backIn,\n    backInOut,\n    backOut,\n    anticipate,\n};\nconst easingDefinitionToFunction = (definition) => {\n    if (Array.isArray(definition)) {\n        // If cubic bezier definition, create bezier curve\n        invariant(definition.length === 4, `Cubic bezier arrays must contain four numerical values.`);\n        const [x1, y1, x2, y2] = definition;\n        return cubicBezier(x1, y1, x2, y2);\n    }\n    else if (typeof definition === \"string\") {\n        // Else lookup from table\n        invariant(easingLookup[definition] !== undefined, `Invalid easing type '${definition}'`);\n        return easingLookup[definition];\n    }\n    return definition;\n};\n\nexport { easingDefinitionToFunction };\n","/*\n  Progress within given range\n\n  Given a lower limit and an upper limit, we return the progress\n  (expressed as a number 0-1) represented by the given value, and\n  limit that progress to within 0-1.\n\n  @param [number]: Lower limit\n  @param [number]: Upper limit\n  @param [number]: Value to find progress within given range\n  @return [number]: Progress of value within range as expressed 0-1\n*/\nconst progress = (from, to, value) => {\n    const toFromDifference = to - from;\n    return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;\n};\n\nexport { progress };\n","/*\n  Value in range from progress\n\n  Given a lower limit and an upper limit, we return the value within\n  that range as expressed by progress (usually a number from 0 to 1)\n\n  So progress = 0.5 would change\n\n  from -------- to\n\n  to\n\n  from ---- to\n\n  E.g. from = 10, to = 20, progress = 0.5 => 15\n\n  @param [number]: Lower limit of range\n  @param [number]: Upper limit of range\n  @param [number]: The progress between lower and upper limits expressed 0-1\n  @return [number]: Value as calculated from progress within range (not limited within range)\n*/\nconst mixNumber = (from, to, progress) => {\n    return from + (to - from) * progress;\n};\n\nexport { mixNumber };\n","// Adapted from https://gist.github.com/mjackson/5311256\nfunction hueToRgb(p, q, t) {\n    if (t < 0)\n        t += 1;\n    if (t > 1)\n        t -= 1;\n    if (t < 1 / 6)\n        return p + (q - p) * 6 * t;\n    if (t < 1 / 2)\n        return q;\n    if (t < 2 / 3)\n        return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n}\nfunction hslaToRgba({ hue, saturation, lightness, alpha }) {\n    hue /= 360;\n    saturation /= 100;\n    lightness /= 100;\n    let red = 0;\n    let green = 0;\n    let blue = 0;\n    if (!saturation) {\n        red = green = blue = lightness;\n    }\n    else {\n        const q = lightness < 0.5\n            ? lightness * (1 + saturation)\n            : lightness + saturation - lightness * saturation;\n        const p = 2 * lightness - q;\n        red = hueToRgb(p, q, hue + 1 / 3);\n        green = hueToRgb(p, q, hue);\n        blue = hueToRgb(p, q, hue - 1 / 3);\n    }\n    return {\n        red: Math.round(red * 255),\n        green: Math.round(green * 255),\n        blue: Math.round(blue * 255),\n        alpha,\n    };\n}\n\nexport { hslaToRgba };\n","function mixImmediate(a, b) {\n    return (p) => (p > 0 ? b : a);\n}\n\nexport { mixImmediate };\n","import { mixNumber } from './number.mjs';\nimport { warning } from '../errors.mjs';\nimport { hslaToRgba } from '../hsla-to-rgba.mjs';\nimport { hex } from '../../value/types/color/hex.mjs';\nimport { rgba } from '../../value/types/color/rgba.mjs';\nimport { hsla } from '../../value/types/color/hsla.mjs';\nimport { mixImmediate } from './immediate.mjs';\n\n// Linear color space blending\n// Explained https://www.youtube.com/watch?v=LKnqECcg6Gw\n// Demonstrated http://codepen.io/osublake/pen/xGVVaN\nconst mixLinearColor = (from, to, v) => {\n    const fromExpo = from * from;\n    const expo = v * (to * to - fromExpo) + fromExpo;\n    return expo < 0 ? 0 : Math.sqrt(expo);\n};\nconst colorTypes = [hex, rgba, hsla];\nconst getColorType = (v) => colorTypes.find((type) => type.test(v));\nfunction asRGBA(color) {\n    const type = getColorType(color);\n    warning(Boolean(type), `'${color}' is not an animatable color. Use the equivalent color code instead.`);\n    if (!Boolean(type))\n        return false;\n    let model = type.parse(color);\n    if (type === hsla) {\n        // TODO Remove this cast - needed since Framer Motion's stricter typing\n        model = hslaToRgba(model);\n    }\n    return model;\n}\nconst mixColor = (from, to) => {\n    const fromRGBA = asRGBA(from);\n    const toRGBA = asRGBA(to);\n    if (!fromRGBA || !toRGBA) {\n        return mixImmediate(from, to);\n    }\n    const blended = { ...fromRGBA };\n    return (v) => {\n        blended.red = mixLinearColor(fromRGBA.red, toRGBA.red, v);\n        blended.green = mixLinearColor(fromRGBA.green, toRGBA.green, v);\n        blended.blue = mixLinearColor(fromRGBA.blue, toRGBA.blue, v);\n        blended.alpha = mixNumber(fromRGBA.alpha, toRGBA.alpha, v);\n        return rgba.transform(blended);\n    };\n};\n\nexport { mixColor, mixLinearColor };\n","const invisibleValues = new Set([\"none\", \"hidden\"]);\n/**\n * Returns a function that, when provided a progress value between 0 and 1,\n * will return the \"none\" or \"hidden\" string only when the progress is that of\n * the origin or target.\n */\nfunction mixVisibility(origin, target) {\n    if (invisibleValues.has(origin)) {\n        return (p) => (p <= 0 ? origin : target);\n    }\n    else {\n        return (p) => (p >= 1 ? target : origin);\n    }\n}\n\nexport { invisibleValues, mixVisibility };\n","import { mixNumber as mixNumber$1 } from './number.mjs';\nimport { mixColor } from './color.mjs';\nimport { pipe } from '../pipe.mjs';\nimport { warning } from '../errors.mjs';\nimport { color } from '../../value/types/color/index.mjs';\nimport { complex, analyseComplexValue } from '../../value/types/complex/index.mjs';\nimport { isCSSVariableToken } from '../../render/dom/utils/is-css-variable.mjs';\nimport { invisibleValues, mixVisibility } from './visibility.mjs';\nimport { mixImmediate } from './immediate.mjs';\n\nfunction mixNumber(a, b) {\n    return (p) => mixNumber$1(a, b, p);\n}\nfunction getMixer(a) {\n    if (typeof a === \"number\") {\n        return mixNumber;\n    }\n    else if (typeof a === \"string\") {\n        return isCSSVariableToken(a)\n            ? mixImmediate\n            : color.test(a)\n                ? mixColor\n                : mixComplex;\n    }\n    else if (Array.isArray(a)) {\n        return mixArray;\n    }\n    else if (typeof a === \"object\") {\n        return color.test(a) ? mixColor : mixObject;\n    }\n    return mixImmediate;\n}\nfunction mixArray(a, b) {\n    const output = [...a];\n    const numValues = output.length;\n    const blendValue = a.map((v, i) => getMixer(v)(v, b[i]));\n    return (p) => {\n        for (let i = 0; i < numValues; i++) {\n            output[i] = blendValue[i](p);\n        }\n        return output;\n    };\n}\nfunction mixObject(a, b) {\n    const output = { ...a, ...b };\n    const blendValue = {};\n    for (const key in output) {\n        if (a[key] !== undefined && b[key] !== undefined) {\n            blendValue[key] = getMixer(a[key])(a[key], b[key]);\n        }\n    }\n    return (v) => {\n        for (const key in blendValue) {\n            output[key] = blendValue[key](v);\n        }\n        return output;\n    };\n}\nfunction matchOrder(origin, target) {\n    var _a;\n    const orderedOrigin = [];\n    const pointers = { color: 0, var: 0, number: 0 };\n    for (let i = 0; i < target.values.length; i++) {\n        const type = target.types[i];\n        const originIndex = origin.indexes[type][pointers[type]];\n        const originValue = (_a = origin.values[originIndex]) !== null && _a !== void 0 ? _a : 0;\n        orderedOrigin[i] = originValue;\n        pointers[type]++;\n    }\n    return orderedOrigin;\n}\nconst mixComplex = (origin, target) => {\n    const template = complex.createTransformer(target);\n    const originStats = analyseComplexValue(origin);\n    const targetStats = analyseComplexValue(target);\n    const canInterpolate = originStats.indexes.var.length === targetStats.indexes.var.length &&\n        originStats.indexes.color.length === targetStats.indexes.color.length &&\n        originStats.indexes.number.length >= targetStats.indexes.number.length;\n    if (canInterpolate) {\n        if ((invisibleValues.has(origin) &&\n            !targetStats.values.length) ||\n            (invisibleValues.has(target) &&\n                !originStats.values.length)) {\n            return mixVisibility(origin, target);\n        }\n        return pipe(mixArray(matchOrder(originStats, targetStats), targetStats.values), template);\n    }\n    else {\n        warning(true, `Complex values '${origin}' and '${target}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`);\n        return mixImmediate(origin, target);\n    }\n};\n\nexport { getMixer, mixArray, mixComplex, mixObject };\n","import { getMixer } from './complex.mjs';\nimport { mixNumber } from './number.mjs';\n\nfunction mix(from, to, p) {\n    if (typeof from === \"number\" &&\n        typeof to === \"number\" &&\n        typeof p === \"number\") {\n        return mixNumber(from, to, p);\n    }\n    const mixer = getMixer(from);\n    return mixer(from, to);\n}\n\nexport { mix };\n","import { invariant } from './errors.mjs';\nimport { clamp } from './clamp.mjs';\nimport { pipe } from './pipe.mjs';\nimport { progress } from './progress.mjs';\nimport { noop } from './noop.mjs';\nimport { mix } from './mix/index.mjs';\n\nfunction createMixers(output, ease, customMixer) {\n    const mixers = [];\n    const mixerFactory = customMixer || mix;\n    const numMixers = output.length - 1;\n    for (let i = 0; i < numMixers; i++) {\n        let mixer = mixerFactory(output[i], output[i + 1]);\n        if (ease) {\n            const easingFunction = Array.isArray(ease) ? ease[i] || noop : ease;\n            mixer = pipe(easingFunction, mixer);\n        }\n        mixers.push(mixer);\n    }\n    return mixers;\n}\n/**\n * Create a function that maps from a numerical input array to a generic output array.\n *\n * Accepts:\n *   - Numbers\n *   - Colors (hex, hsl, hsla, rgb, rgba)\n *   - Complex (combinations of one or more numbers or strings)\n *\n * ```jsx\n * const mixColor = interpolate([0, 1], ['#fff', '#000'])\n *\n * mixColor(0.5) // 'rgba(128, 128, 128, 1)'\n * ```\n *\n * TODO Revist this approach once we've moved to data models for values,\n * probably not needed to pregenerate mixer functions.\n *\n * @public\n */\nfunction interpolate(input, output, { clamp: isClamp = true, ease, mixer } = {}) {\n    const inputLength = input.length;\n    invariant(inputLength === output.length, \"Both input and output ranges must be the same length\");\n    /**\n     * If we're only provided a single input, we can just make a function\n     * that returns the output.\n     */\n    if (inputLength === 1)\n        return () => output[0];\n    if (inputLength === 2 && input[0] === input[1])\n        return () => output[1];\n    // If input runs highest -> lowest, reverse both arrays\n    if (input[0] > input[inputLength - 1]) {\n        input = [...input].reverse();\n        output = [...output].reverse();\n    }\n    const mixers = createMixers(output, ease, mixer);\n    const numMixers = mixers.length;\n    const interpolator = (v) => {\n        let i = 0;\n        if (numMixers > 1) {\n            for (; i < input.length - 2; i++) {\n                if (v < input[i + 1])\n                    break;\n            }\n        }\n        const progressInRange = progress(input[i], input[i + 1], v);\n        return mixers[i](progressInRange);\n    };\n    return isClamp\n        ? (v) => interpolator(clamp(input[0], input[inputLength - 1], v))\n        : interpolator;\n}\n\nexport { interpolate };\n","import { mixNumber } from '../mix/number.mjs';\nimport { progress } from '../progress.mjs';\n\nfunction fillOffset(offset, remaining) {\n    const min = offset[offset.length - 1];\n    for (let i = 1; i <= remaining; i++) {\n        const offsetProgress = progress(0, remaining, i);\n        offset.push(mixNumber(min, 1, offsetProgress));\n    }\n}\n\nexport { fillOffset };\n","import { fillOffset } from './fill.mjs';\n\nfunction defaultOffset(arr) {\n    const offset = [0];\n    fillOffset(offset, arr.length - 1);\n    return offset;\n}\n\nexport { defaultOffset };\n","function convertOffsetToTimes(offset, duration) {\n    return offset.map((o) => o * duration);\n}\n\nexport { convertOffsetToTimes };\n","import { easeInOut } from '../../easing/ease.mjs';\nimport { isEasingArray } from '../../easing/utils/is-easing-array.mjs';\nimport { easingDefinitionToFunction } from '../../easing/utils/map.mjs';\nimport { interpolate } from '../../utils/interpolate.mjs';\nimport { defaultOffset } from '../../utils/offsets/default.mjs';\nimport { convertOffsetToTimes } from '../../utils/offsets/time.mjs';\n\nfunction defaultEasing(values, easing) {\n    return values.map(() => easing || easeInOut).splice(0, values.length - 1);\n}\nfunction keyframes({ duration = 300, keyframes: keyframeValues, times, ease = \"easeInOut\", }) {\n    /**\n     * Easing functions can be externally defined as strings. Here we convert them\n     * into actual functions.\n     */\n    const easingFunctions = isEasingArray(ease)\n        ? ease.map(easingDefinitionToFunction)\n        : easingDefinitionToFunction(ease);\n    /**\n     * This is the Iterator-spec return value. We ensure it's mutable rather than using a generator\n     * to reduce GC during animation.\n     */\n    const state = {\n        done: false,\n        value: keyframeValues[0],\n    };\n    /**\n     * Create a times array based on the provided 0-1 offsets\n     */\n    const absoluteTimes = convertOffsetToTimes(\n    // Only use the provided offsets if they're the correct length\n    // TODO Maybe we should warn here if there's a length mismatch\n    times && times.length === keyframeValues.length\n        ? times\n        : defaultOffset(keyframeValues), duration);\n    const mapTimeToKeyframe = interpolate(absoluteTimes, keyframeValues, {\n        ease: Array.isArray(easingFunctions)\n            ? easingFunctions\n            : defaultEasing(keyframeValues, easingFunctions),\n    });\n    return {\n        calculatedDuration: duration,\n        next: (t) => {\n            state.value = mapTimeToKeyframe(t);\n            state.done = t >= duration;\n            return state;\n        },\n    };\n}\n\nexport { defaultEasing, keyframes };\n","/**\n * Implement a practical max duration for keyframe generation\n * to prevent infinite loops\n */\nconst maxGeneratorDuration = 20000;\nfunction calcGeneratorDuration(generator) {\n    let duration = 0;\n    const timeStep = 50;\n    let state = generator.next(duration);\n    while (!state.done && duration < maxGeneratorDuration) {\n        duration += timeStep;\n        state = generator.next(duration);\n    }\n    return duration >= maxGeneratorDuration ? Infinity : duration;\n}\n\nexport { calcGeneratorDuration, maxGeneratorDuration };\n","import { time } from '../../../frameloop/sync-time.mjs';\nimport { frame, cancelFrame, frameData } from '../../../frameloop/frame.mjs';\n\nconst frameloopDriver = (update) => {\n    const passTimestamp = ({ timestamp }) => update(timestamp);\n    return {\n        start: () => frame.update(passTimestamp, true),\n        stop: () => cancelFrame(passTimestamp),\n        /**\n         * If we're processing this frame we can use the\n         * framelocked timestamp to keep things in sync.\n         */\n        now: () => (frameData.isProcessing ? frameData.timestamp : time.now()),\n    };\n};\n\nexport { frameloopDriver };\n","import { KeyframeResolver } from '../../render/utils/KeyframesResolver.mjs';\nimport { spring } from '../generators/spring/index.mjs';\nimport { inertia } from '../generators/inertia.mjs';\nimport { keyframes } from '../generators/keyframes.mjs';\nimport { BaseAnimation } from './BaseAnimation.mjs';\nimport { pipe } from '../../utils/pipe.mjs';\nimport { mix } from '../../utils/mix/index.mjs';\nimport { calcGeneratorDuration } from '../generators/utils/calc-duration.mjs';\nimport { millisecondsToSeconds, secondsToMilliseconds } from '../../utils/time-conversion.mjs';\nimport { clamp } from '../../utils/clamp.mjs';\nimport { invariant } from '../../utils/errors.mjs';\nimport { frameloopDriver } from './drivers/driver-frameloop.mjs';\nimport { getFinalKeyframe } from './waapi/utils/get-final-keyframe.mjs';\n\nconst generators = {\n    decay: inertia,\n    inertia,\n    tween: keyframes,\n    keyframes: keyframes,\n    spring,\n};\nconst percentToProgress = (percent) => percent / 100;\n/**\n * Animation that runs on the main thread. Designed to be WAAPI-spec in the subset of\n * features we expose publically. Mostly the compatibility is to ensure visual identity\n * between both WAAPI and main thread animations.\n */\nclass MainThreadAnimation extends BaseAnimation {\n    constructor({ KeyframeResolver: KeyframeResolver$1 = KeyframeResolver, ...options }) {\n        super(options);\n        /**\n         * The time at which the animation was paused.\n         */\n        this.holdTime = null;\n        /**\n         * The time at which the animation was started.\n         */\n        this.startTime = null;\n        /**\n         * The time at which the animation was cancelled.\n         */\n        this.cancelTime = null;\n        /**\n         * The current time of the animation.\n         */\n        this.currentTime = 0;\n        /**\n         * Playback speed as a factor. 0 would be stopped, -1 reverse and 2 double speed.\n         */\n        this.playbackSpeed = 1;\n        /**\n         * The state of the animation to apply when the animation is resolved. This\n         * allows calls to the public API to control the animation before it is resolved,\n         * without us having to resolve it first.\n         */\n        this.pendingPlayState = \"running\";\n        this.state = \"idle\";\n        /**\n         * This method is bound to the instance to fix a pattern where\n         * animation.stop is returned as a reference from a useEffect.\n         */\n        this.stop = () => {\n            this.resolver.cancel();\n            this.isStopped = true;\n            if (this.state === \"idle\")\n                return;\n            this.teardown();\n            const { onStop } = this.options;\n            onStop && onStop();\n        };\n        const { name, motionValue, keyframes } = this.options;\n        const onResolved = (resolvedKeyframes, finalKeyframe) => this.onKeyframesResolved(resolvedKeyframes, finalKeyframe);\n        if (name && motionValue && motionValue.owner) {\n            this.resolver = motionValue.owner.resolveKeyframes(keyframes, onResolved, name, motionValue);\n        }\n        else {\n            this.resolver = new KeyframeResolver$1(keyframes, onResolved, name, motionValue);\n        }\n        this.resolver.scheduleResolve();\n    }\n    initPlayback(keyframes$1) {\n        const { type = \"keyframes\", repeat = 0, repeatDelay = 0, repeatType, velocity = 0, } = this.options;\n        const generatorFactory = generators[type] || keyframes;\n        /**\n         * If our generator doesn't support mixing numbers, we need to replace keyframes with\n         * [0, 100] and then make a function that maps that to the actual keyframes.\n         *\n         * 100 is chosen instead of 1 as it works nicer with spring animations.\n         */\n        let mapPercentToKeyframes;\n        let mirroredGenerator;\n        if (generatorFactory !== keyframes &&\n            typeof keyframes$1[0] !== \"number\") {\n            if (process.env.NODE_ENV !== \"production\") {\n                invariant(keyframes$1.length === 2, `Only two keyframes currently supported with spring and inertia animations. Trying to animate ${keyframes$1}`);\n            }\n            mapPercentToKeyframes = pipe(percentToProgress, mix(keyframes$1[0], keyframes$1[1]));\n            keyframes$1 = [0, 100];\n        }\n        const generator = generatorFactory({ ...this.options, keyframes: keyframes$1 });\n        /**\n         * If we have a mirror repeat type we need to create a second generator that outputs the\n         * mirrored (not reversed) animation and later ping pong between the two generators.\n         */\n        if (repeatType === \"mirror\") {\n            mirroredGenerator = generatorFactory({\n                ...this.options,\n                keyframes: [...keyframes$1].reverse(),\n                velocity: -velocity,\n            });\n        }\n        /**\n         * If duration is undefined and we have repeat options,\n         * we need to calculate a duration from the generator.\n         *\n         * We set it to the generator itself to cache the duration.\n         * Any timeline resolver will need to have already precalculated\n         * the duration by this step.\n         */\n        if (generator.calculatedDuration === null) {\n            generator.calculatedDuration = calcGeneratorDuration(generator);\n        }\n        const { calculatedDuration } = generator;\n        const resolvedDuration = calculatedDuration + repeatDelay;\n        const totalDuration = resolvedDuration * (repeat + 1) - repeatDelay;\n        return {\n            generator,\n            mirroredGenerator,\n            mapPercentToKeyframes,\n            calculatedDuration,\n            resolvedDuration,\n            totalDuration,\n        };\n    }\n    onPostResolved() {\n        const { autoplay = true } = this.options;\n        this.play();\n        if (this.pendingPlayState === \"paused\" || !autoplay) {\n            this.pause();\n        }\n        else {\n            this.state = this.pendingPlayState;\n        }\n    }\n    tick(timestamp, sample = false) {\n        const { resolved } = this;\n        // If the animations has failed to resolve, return the final keyframe.\n        if (!resolved) {\n            const { keyframes } = this.options;\n            return { done: true, value: keyframes[keyframes.length - 1] };\n        }\n        const { finalKeyframe, generator, mirroredGenerator, mapPercentToKeyframes, keyframes, calculatedDuration, totalDuration, resolvedDuration, } = resolved;\n        if (this.startTime === null)\n            return generator.next(0);\n        const { delay, repeat, repeatType, repeatDelay, onUpdate } = this.options;\n        /**\n         * requestAnimationFrame timestamps can come through as lower than\n         * the startTime as set by performance.now(). Here we prevent this,\n         * though in the future it could be possible to make setting startTime\n         * a pending operation that gets resolved here.\n         */\n        if (this.speed > 0) {\n            this.startTime = Math.min(this.startTime, timestamp);\n        }\n        else if (this.speed < 0) {\n            this.startTime = Math.min(timestamp - totalDuration / this.speed, this.startTime);\n        }\n        // Update currentTime\n        if (sample) {\n            this.currentTime = timestamp;\n        }\n        else if (this.holdTime !== null) {\n            this.currentTime = this.holdTime;\n        }\n        else {\n            // Rounding the time because floating point arithmetic is not always accurate, e.g. 3000.367 - 1000.367 =\n            // 2000.0000000000002. This is a problem when we are comparing the currentTime with the duration, for\n            // example.\n            this.currentTime =\n                Math.round(timestamp - this.startTime) * this.speed;\n        }\n        // Rebase on delay\n        const timeWithoutDelay = this.currentTime - delay * (this.speed >= 0 ? 1 : -1);\n        const isInDelayPhase = this.speed >= 0\n            ? timeWithoutDelay < 0\n            : timeWithoutDelay > totalDuration;\n        this.currentTime = Math.max(timeWithoutDelay, 0);\n        // If this animation has finished, set the current time  to the total duration.\n        if (this.state === \"finished\" && this.holdTime === null) {\n            this.currentTime = totalDuration;\n        }\n        let elapsed = this.currentTime;\n        let frameGenerator = generator;\n        if (repeat) {\n            /**\n             * Get the current progress (0-1) of the animation. If t is >\n             * than duration we'll get values like 2.5 (midway through the\n             * third iteration)\n             */\n            const progress = Math.min(this.currentTime, totalDuration) / resolvedDuration;\n            /**\n             * Get the current iteration (0 indexed). For instance the floor of\n             * 2.5 is 2.\n             */\n            let currentIteration = Math.floor(progress);\n            /**\n             * Get the current progress of the iteration by taking the remainder\n             * so 2.5 is 0.5 through iteration 2\n             */\n            let iterationProgress = progress % 1.0;\n            /**\n             * If iteration progress is 1 we count that as the end\n             * of the previous iteration.\n             */\n            if (!iterationProgress && progress >= 1) {\n                iterationProgress = 1;\n            }\n            iterationProgress === 1 && currentIteration--;\n            currentIteration = Math.min(currentIteration, repeat + 1);\n            /**\n             * Reverse progress if we're not running in \"normal\" direction\n             */\n            const isOddIteration = Boolean(currentIteration % 2);\n            if (isOddIteration) {\n                if (repeatType === \"reverse\") {\n                    iterationProgress = 1 - iterationProgress;\n                    if (repeatDelay) {\n                        iterationProgress -= repeatDelay / resolvedDuration;\n                    }\n                }\n                else if (repeatType === \"mirror\") {\n                    frameGenerator = mirroredGenerator;\n                }\n            }\n            elapsed = clamp(0, 1, iterationProgress) * resolvedDuration;\n        }\n        /**\n         * If we're in negative time, set state as the initial keyframe.\n         * This prevents delay: x, duration: 0 animations from finishing\n         * instantly.\n         */\n        const state = isInDelayPhase\n            ? { done: false, value: keyframes[0] }\n            : frameGenerator.next(elapsed);\n        if (mapPercentToKeyframes) {\n            state.value = mapPercentToKeyframes(state.value);\n        }\n        let { done } = state;\n        if (!isInDelayPhase && calculatedDuration !== null) {\n            done =\n                this.speed >= 0\n                    ? this.currentTime >= totalDuration\n                    : this.currentTime <= 0;\n        }\n        const isAnimationFinished = this.holdTime === null &&\n            (this.state === \"finished\" || (this.state === \"running\" && done));\n        if (isAnimationFinished && finalKeyframe !== undefined) {\n            state.value = getFinalKeyframe(keyframes, this.options, finalKeyframe);\n        }\n        if (onUpdate) {\n            onUpdate(state.value);\n        }\n        if (isAnimationFinished) {\n            this.finish();\n        }\n        return state;\n    }\n    get duration() {\n        const { resolved } = this;\n        return resolved ? millisecondsToSeconds(resolved.calculatedDuration) : 0;\n    }\n    get time() {\n        return millisecondsToSeconds(this.currentTime);\n    }\n    set time(newTime) {\n        newTime = secondsToMilliseconds(newTime);\n        this.currentTime = newTime;\n        if (this.holdTime !== null || this.speed === 0) {\n            this.holdTime = newTime;\n        }\n        else if (this.driver) {\n            this.startTime = this.driver.now() - newTime / this.speed;\n        }\n    }\n    get speed() {\n        return this.playbackSpeed;\n    }\n    set speed(newSpeed) {\n        const hasChanged = this.playbackSpeed !== newSpeed;\n        this.playbackSpeed = newSpeed;\n        if (hasChanged) {\n            this.time = millisecondsToSeconds(this.currentTime);\n        }\n    }\n    play() {\n        if (!this.resolver.isScheduled) {\n            this.resolver.resume();\n        }\n        if (!this._resolved) {\n            this.pendingPlayState = \"running\";\n            return;\n        }\n        if (this.isStopped)\n            return;\n        const { driver = frameloopDriver, onPlay } = this.options;\n        if (!this.driver) {\n            this.driver = driver((timestamp) => this.tick(timestamp));\n        }\n        onPlay && onPlay();\n        const now = this.driver.now();\n        if (this.holdTime !== null) {\n            this.startTime = now - this.holdTime;\n        }\n        else if (!this.startTime || this.state === \"finished\") {\n            this.startTime = now;\n        }\n        if (this.state === \"finished\") {\n            this.updateFinishedPromise();\n        }\n        this.cancelTime = this.startTime;\n        this.holdTime = null;\n        /**\n         * Set playState to running only after we've used it in\n         * the previous logic.\n         */\n        this.state = \"running\";\n        this.driver.start();\n    }\n    pause() {\n        var _a;\n        if (!this._resolved) {\n            this.pendingPlayState = \"paused\";\n            return;\n        }\n        this.state = \"paused\";\n        this.holdTime = (_a = this.currentTime) !== null && _a !== void 0 ? _a : 0;\n    }\n    complete() {\n        if (this.state !== \"running\") {\n            this.play();\n        }\n        this.pendingPlayState = this.state = \"finished\";\n        this.holdTime = null;\n    }\n    finish() {\n        this.teardown();\n        this.state = \"finished\";\n        const { onComplete } = this.options;\n        onComplete && onComplete();\n    }\n    cancel() {\n        if (this.cancelTime !== null) {\n            this.tick(this.cancelTime);\n        }\n        this.teardown();\n        this.updateFinishedPromise();\n    }\n    teardown() {\n        this.state = \"idle\";\n        this.stopDriver();\n        this.resolveFinishedPromise();\n        this.updateFinishedPromise();\n        this.startTime = this.cancelTime = null;\n        this.resolver.cancel();\n    }\n    stopDriver() {\n        if (!this.driver)\n            return;\n        this.driver.stop();\n        this.driver = undefined;\n    }\n    sample(time) {\n        this.startTime = 0;\n        return this.tick(time, true);\n    }\n}\n// Legacy interface\nfunction animateValue(options) {\n    return new MainThreadAnimation(options);\n}\n\nexport { MainThreadAnimation, animateValue };\n","const isBezierDefinition = (easing) => Array.isArray(easing) && typeof easing[0] === \"number\";\n\nexport { isBezierDefinition };\n","import { isBezierDefinition } from '../../../easing/utils/is-bezier-definition.mjs';\n\nfunction isWaapiSupportedEasing(easing) {\n    return Boolean(!easing ||\n        (typeof easing === \"string\" && easing in supportedWaapiEasing) ||\n        isBezierDefinition(easing) ||\n        (Array.isArray(easing) && easing.every(isWaapiSupportedEasing)));\n}\nconst cubicBezierAsString = ([a, b, c, d]) => `cubic-bezier(${a}, ${b}, ${c}, ${d})`;\nconst supportedWaapiEasing = {\n    linear: \"linear\",\n    ease: \"ease\",\n    easeIn: \"ease-in\",\n    easeOut: \"ease-out\",\n    easeInOut: \"ease-in-out\",\n    circIn: cubicBezierAsString([0, 0.65, 0.55, 1]),\n    circOut: cubicBezierAsString([0.55, 0, 1, 0.45]),\n    backIn: cubicBezierAsString([0.31, 0.01, 0.66, -0.59]),\n    backOut: cubicBezierAsString([0.33, 1.53, 0.69, 0.99]),\n};\nfunction mapEasingToNativeEasingWithDefault(easing) {\n    return (mapEasingToNativeEasing(easing) ||\n        supportedWaapiEasing.easeOut);\n}\nfunction mapEasingToNativeEasing(easing) {\n    if (!easing) {\n        return undefined;\n    }\n    else if (isBezierDefinition(easing)) {\n        return cubicBezierAsString(easing);\n    }\n    else if (Array.isArray(easing)) {\n        return easing.map(mapEasingToNativeEasingWithDefault);\n    }\n    else {\n        return supportedWaapiEasing[easing];\n    }\n}\n\nexport { cubicBezierAsString, isWaapiSupportedEasing, mapEasingToNativeEasing, supportedWaapiEasing };\n","import { mapEasingToNativeEasing } from './easing.mjs';\n\nfunction animateStyle(element, valueName, keyframes, { delay = 0, duration = 300, repeat = 0, repeatType = \"loop\", ease, times, } = {}) {\n    const keyframeOptions = { [valueName]: keyframes };\n    if (times)\n        keyframeOptions.offset = times;\n    const easing = mapEasingToNativeEasing(ease);\n    /**\n     * If this is an easing array, apply to keyframes, not animation as a whole\n     */\n    if (Array.isArray(easing))\n        keyframeOptions.easing = easing;\n    return element.animate(keyframeOptions, {\n        delay,\n        duration,\n        easing: !Array.isArray(easing) ? easing : \"linear\",\n        fill: \"both\",\n        iterations: repeat + 1,\n        direction: repeatType === \"reverse\" ? \"alternate\" : \"normal\",\n    });\n}\n\nexport { animateStyle };\n","import { time } from '../../frameloop/sync-time.mjs';\nimport { DOMKeyframesResolver } from '../../render/dom/DOMKeyframesResolver.mjs';\nimport { memo } from '../../utils/memo.mjs';\nimport { noop } from '../../utils/noop.mjs';\nimport { millisecondsToSeconds, secondsToMilliseconds } from '../../utils/time-conversion.mjs';\nimport { BaseAnimation } from './BaseAnimation.mjs';\nimport { MainThreadAnimation } from './MainThreadAnimation.mjs';\nimport { animateStyle } from './waapi/index.mjs';\nimport { isWaapiSupportedEasing } from './waapi/easing.mjs';\nimport { getFinalKeyframe } from './waapi/utils/get-final-keyframe.mjs';\n\nconst supportsWaapi = memo(() => Object.hasOwnProperty.call(Element.prototype, \"animate\"));\n/**\n * A list of values that can be hardware-accelerated.\n */\nconst acceleratedValues = new Set([\n    \"opacity\",\n    \"clipPath\",\n    \"filter\",\n    \"transform\",\n    // TODO: Can be accelerated but currently disabled until https://issues.chromium.org/issues/41491098 is resolved\n    // or until we implement support for linear() easing.\n    // \"background-color\"\n]);\n/**\n * 10ms is chosen here as it strikes a balance between smooth\n * results (more than one keyframe per frame at 60fps) and\n * keyframe quantity.\n */\nconst sampleDelta = 10; //ms\n/**\n * Implement a practical max duration for keyframe generation\n * to prevent infinite loops\n */\nconst maxDuration = 20000;\n/**\n * Check if an animation can run natively via WAAPI or requires pregenerated keyframes.\n * WAAPI doesn't support spring or function easings so we run these as JS animation before\n * handing off.\n */\nfunction requiresPregeneratedKeyframes(options) {\n    return (options.type === \"spring\" ||\n        options.name === \"backgroundColor\" ||\n        !isWaapiSupportedEasing(options.ease));\n}\nfunction pregenerateKeyframes(keyframes, options) {\n    /**\n     * Create a main-thread animation to pregenerate keyframes.\n     * We sample this at regular intervals to generate keyframes that we then\n     * linearly interpolate between.\n     */\n    const sampleAnimation = new MainThreadAnimation({\n        ...options,\n        keyframes,\n        repeat: 0,\n        delay: 0,\n        isGenerator: true,\n    });\n    let state = { done: false, value: keyframes[0] };\n    const pregeneratedKeyframes = [];\n    /**\n     * Bail after 20 seconds of pre-generated keyframes as it's likely\n     * we're heading for an infinite loop.\n     */\n    let t = 0;\n    while (!state.done && t < maxDuration) {\n        state = sampleAnimation.sample(t);\n        pregeneratedKeyframes.push(state.value);\n        t += sampleDelta;\n    }\n    return {\n        times: undefined,\n        keyframes: pregeneratedKeyframes,\n        duration: t - sampleDelta,\n        ease: \"linear\",\n    };\n}\nclass AcceleratedAnimation extends BaseAnimation {\n    constructor(options) {\n        super(options);\n        const { name, motionValue, keyframes } = this.options;\n        this.resolver = new DOMKeyframesResolver(keyframes, (resolvedKeyframes, finalKeyframe) => this.onKeyframesResolved(resolvedKeyframes, finalKeyframe), name, motionValue);\n        this.resolver.scheduleResolve();\n    }\n    initPlayback(keyframes, finalKeyframe) {\n        var _a;\n        let { duration = 300, times, ease, type, motionValue, name, } = this.options;\n        /**\n         * If element has since been unmounted, return false to indicate\n         * the animation failed to initialised.\n         */\n        if (!((_a = motionValue.owner) === null || _a === void 0 ? void 0 : _a.current)) {\n            return false;\n        }\n        /**\n         * If this animation needs pre-generated keyframes then generate.\n         */\n        if (requiresPregeneratedKeyframes(this.options)) {\n            const { onComplete, onUpdate, motionValue, ...options } = this.options;\n            const pregeneratedAnimation = pregenerateKeyframes(keyframes, options);\n            keyframes = pregeneratedAnimation.keyframes;\n            // If this is a very short animation, ensure we have\n            // at least two keyframes to animate between as older browsers\n            // can't animate between a single keyframe.\n            if (keyframes.length === 1) {\n                keyframes[1] = keyframes[0];\n            }\n            duration = pregeneratedAnimation.duration;\n            times = pregeneratedAnimation.times;\n            ease = pregeneratedAnimation.ease;\n            type = \"keyframes\";\n        }\n        const animation = animateStyle(motionValue.owner.current, name, keyframes, { ...this.options, duration, times, ease });\n        // Override the browser calculated startTime with one synchronised to other JS\n        // and WAAPI animations starting this event loop.\n        animation.startTime = time.now();\n        if (this.pendingTimeline) {\n            animation.timeline = this.pendingTimeline;\n            this.pendingTimeline = undefined;\n        }\n        else {\n            /**\n             * Prefer the `onfinish` prop as it's more widely supported than\n             * the `finished` promise.\n             *\n             * Here, we synchronously set the provided MotionValue to the end\n             * keyframe. If we didn't, when the WAAPI animation is finished it would\n             * be removed from the element which would then revert to its old styles.\n             */\n            animation.onfinish = () => {\n                const { onComplete } = this.options;\n                motionValue.set(getFinalKeyframe(keyframes, this.options, finalKeyframe));\n                onComplete && onComplete();\n                this.cancel();\n                this.resolveFinishedPromise();\n            };\n        }\n        return {\n            animation,\n            duration,\n            times,\n            type,\n            ease,\n            keyframes: keyframes,\n        };\n    }\n    get duration() {\n        const { resolved } = this;\n        if (!resolved)\n            return 0;\n        const { duration } = resolved;\n        return millisecondsToSeconds(duration);\n    }\n    get time() {\n        const { resolved } = this;\n        if (!resolved)\n            return 0;\n        const { animation } = resolved;\n        return millisecondsToSeconds(animation.currentTime || 0);\n    }\n    set time(newTime) {\n        const { resolved } = this;\n        if (!resolved)\n            return;\n        const { animation } = resolved;\n        animation.currentTime = secondsToMilliseconds(newTime);\n    }\n    get speed() {\n        const { resolved } = this;\n        if (!resolved)\n            return 1;\n        const { animation } = resolved;\n        return animation.playbackRate;\n    }\n    set speed(newSpeed) {\n        const { resolved } = this;\n        if (!resolved)\n            return;\n        const { animation } = resolved;\n        animation.playbackRate = newSpeed;\n    }\n    get state() {\n        const { resolved } = this;\n        if (!resolved)\n            return \"idle\";\n        const { animation } = resolved;\n        return animation.playState;\n    }\n    /**\n     * Replace the default DocumentTimeline with another AnimationTimeline.\n     * Currently used for scroll animations.\n     */\n    attachTimeline(timeline) {\n        if (!this._resolved) {\n            this.pendingTimeline = timeline;\n        }\n        else {\n            const { resolved } = this;\n            if (!resolved)\n                return noop;\n            const { animation } = resolved;\n            animation.timeline = timeline;\n            animation.onfinish = null;\n        }\n        return noop;\n    }\n    play() {\n        if (this.isStopped)\n            return;\n        const { resolved } = this;\n        if (!resolved)\n            return;\n        const { animation } = resolved;\n        if (animation.playState === \"finished\") {\n            this.updateFinishedPromise();\n        }\n        animation.play();\n    }\n    pause() {\n        const { resolved } = this;\n        if (!resolved)\n            return;\n        const { animation } = resolved;\n        animation.pause();\n    }\n    stop() {\n        this.resolver.cancel();\n        this.isStopped = true;\n        if (this.state === \"idle\")\n            return;\n        const { resolved } = this;\n        if (!resolved)\n            return;\n        const { animation, keyframes, duration, type, ease, times } = resolved;\n        if (animation.playState === \"idle\" ||\n            animation.playState === \"finished\") {\n            return;\n        }\n        /**\n         * WAAPI doesn't natively have any interruption capabilities.\n         *\n         * Rather than read commited styles back out of the DOM, we can\n         * create a renderless JS animation and sample it twice to calculate\n         * its current value, \"previous\" value, and therefore allow\n         * Motion to calculate velocity for any subsequent animation.\n         */\n        if (this.time) {\n            const { motionValue, onUpdate, onComplete, ...options } = this.options;\n            const sampleAnimation = new MainThreadAnimation({\n                ...options,\n                keyframes,\n                duration,\n                type,\n                ease,\n                times,\n                isGenerator: true,\n            });\n            const sampleTime = secondsToMilliseconds(this.time);\n            motionValue.setWithVelocity(sampleAnimation.sample(sampleTime - sampleDelta).value, sampleAnimation.sample(sampleTime).value, sampleDelta);\n        }\n        this.cancel();\n    }\n    complete() {\n        const { resolved } = this;\n        if (!resolved)\n            return;\n        resolved.animation.finish();\n    }\n    cancel() {\n        const { resolved } = this;\n        if (!resolved)\n            return;\n        resolved.animation.cancel();\n    }\n    static supports(options) {\n        const { motionValue, name, repeatDelay, repeatType, damping, type } = options;\n        return (supportsWaapi() &&\n            name &&\n            acceleratedValues.has(name) &&\n            motionValue &&\n            motionValue.owner &&\n            motionValue.owner.current instanceof HTMLElement &&\n            /**\n             * If we're outputting values to onUpdate then we can't use WAAPI as there's\n             * no way to read the value from WAAPI every frame.\n             */\n            !motionValue.owner.getProps().onUpdate &&\n            !repeatDelay &&\n            repeatType !== \"mirror\" &&\n            damping !== 0 &&\n            type !== \"inertia\");\n    }\n}\n\nexport { AcceleratedAnimation };\n","import { frame, cancelFrame } from '../../../frameloop/frame.mjs';\n\nfunction observeTimeline(update, timeline) {\n    let prevProgress;\n    const onFrame = () => {\n        const { currentTime } = timeline;\n        const percentage = currentTime === null ? 0 : currentTime.value;\n        const progress = percentage / 100;\n        if (prevProgress !== progress) {\n            update(progress);\n        }\n        prevProgress = progress;\n    };\n    frame.update(onFrame, true);\n    return () => cancelFrame(onFrame);\n}\n\nexport { observeTimeline };\n","import { memo } from '../../../utils/memo.mjs';\n\nconst supportsScrollTimeline = memo(() => window.ScrollTimeline !== undefined);\n\nexport { supportsScrollTimeline };\n","import { observeTimeline } from '../render/dom/scroll/observe.mjs';\nimport { supportsScrollTimeline } from '../render/dom/scroll/supports.mjs';\n\nclass GroupPlaybackControls {\n    constructor(animations) {\n        // Bound to accomodate common `return animation.stop` pattern\n        this.stop = () => this.runAll(\"stop\");\n        this.animations = animations.filter(Boolean);\n    }\n    then(onResolve, onReject) {\n        return Promise.all(this.animations).then(onResolve).catch(onReject);\n    }\n    /**\n     * TODO: Filter out cancelled or stopped animations before returning\n     */\n    getAll(propName) {\n        return this.animations[0][propName];\n    }\n    setAll(propName, newValue) {\n        for (let i = 0; i < this.animations.length; i++) {\n            this.animations[i][propName] = newValue;\n        }\n    }\n    attachTimeline(timeline) {\n        const cancelAll = this.animations.map((animation) => {\n            if (supportsScrollTimeline() && animation.attachTimeline) {\n                animation.attachTimeline(timeline);\n            }\n            else {\n                animation.pause();\n                return observeTimeline((progress) => {\n                    animation.time = animation.duration * progress;\n                }, timeline);\n            }\n        });\n        return () => {\n            cancelAll.forEach((cancelTimeline, i) => {\n                if (cancelTimeline)\n                    cancelTimeline();\n                this.animations[i].stop();\n            });\n        };\n    }\n    get time() {\n        return this.getAll(\"time\");\n    }\n    set time(time) {\n        this.setAll(\"time\", time);\n    }\n    get speed() {\n        return this.getAll(\"speed\");\n    }\n    set speed(speed) {\n        this.setAll(\"speed\", speed);\n    }\n    get duration() {\n        let max = 0;\n        for (let i = 0; i < this.animations.length; i++) {\n            max = Math.max(max, this.animations[i].duration);\n        }\n        return max;\n    }\n    runAll(methodName) {\n        this.animations.forEach((controls) => controls[methodName]());\n    }\n    play() {\n        this.runAll(\"play\");\n    }\n    pause() {\n        this.runAll(\"pause\");\n    }\n    cancel() {\n        this.runAll(\"cancel\");\n    }\n    complete() {\n        this.runAll(\"complete\");\n    }\n}\n\nexport { GroupPlaybackControls };\n","import { secondsToMilliseconds } from '../../utils/time-conversion.mjs';\nimport { getDefaultTransition } from '../utils/default-transitions.mjs';\nimport { getValueTransition, isTransitionDefined } from '../utils/transitions.mjs';\nimport { MotionGlobalConfig } from '../../utils/GlobalConfig.mjs';\nimport { instantAnimationState } from '../../utils/use-instant-transition-state.mjs';\nimport { getFinalKeyframe } from '../animators/waapi/utils/get-final-keyframe.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\nimport { AcceleratedAnimation } from '../animators/AcceleratedAnimation.mjs';\nimport { MainThreadAnimation } from '../animators/MainThreadAnimation.mjs';\nimport { GroupPlaybackControls } from '../GroupPlaybackControls.mjs';\n\nconst animateMotionValue = (name, value, target, transition = {}, element, isHandoff) => (onComplete) => {\n    const valueTransition = getValueTransition(transition, name) || {};\n    /**\n     * Most transition values are currently completely overwritten by value-specific\n     * transitions. In the future it'd be nicer to blend these transitions. But for now\n     * delay actually does inherit from the root transition if not value-specific.\n     */\n    const delay = valueTransition.delay || transition.delay || 0;\n    /**\n     * Elapsed isn't a public transition option but can be passed through from\n     * optimized appear effects in milliseconds.\n     */\n    let { elapsed = 0 } = transition;\n    elapsed = elapsed - secondsToMilliseconds(delay);\n    let options = {\n        keyframes: Array.isArray(target) ? target : [null, target],\n        ease: \"easeOut\",\n        velocity: value.getVelocity(),\n        ...valueTransition,\n        delay: -elapsed,\n        onUpdate: (v) => {\n            value.set(v);\n            valueTransition.onUpdate && valueTransition.onUpdate(v);\n        },\n        onComplete: () => {\n            onComplete();\n            valueTransition.onComplete && valueTransition.onComplete();\n        },\n        name,\n        motionValue: value,\n        element: isHandoff ? undefined : element,\n    };\n    /**\n     * If there's no transition defined for this value, we can generate\n     * unqiue transition settings for this value.\n     */\n    if (!isTransitionDefined(valueTransition)) {\n        options = {\n            ...options,\n            ...getDefaultTransition(name, options),\n        };\n    }\n    /**\n     * Both WAAPI and our internal animation functions use durations\n     * as defined by milliseconds, while our external API defines them\n     * as seconds.\n     */\n    if (options.duration) {\n        options.duration = secondsToMilliseconds(options.duration);\n    }\n    if (options.repeatDelay) {\n        options.repeatDelay = secondsToMilliseconds(options.repeatDelay);\n    }\n    if (options.from !== undefined) {\n        options.keyframes[0] = options.from;\n    }\n    let shouldSkip = false;\n    if (options.type === false ||\n        (options.duration === 0 && !options.repeatDelay)) {\n        options.duration = 0;\n        if (options.delay === 0) {\n            shouldSkip = true;\n        }\n    }\n    if (instantAnimationState.current ||\n        MotionGlobalConfig.skipAnimations) {\n        shouldSkip = true;\n        options.duration = 0;\n        options.delay = 0;\n    }\n    /**\n     * If we can or must skip creating the animation, and apply only\n     * the final keyframe, do so. We also check once keyframes are resolved but\n     * this early check prevents the need to create an animation at all.\n     */\n    if (shouldSkip && !isHandoff && value.get() !== undefined) {\n        const finalKeyframe = getFinalKeyframe(options.keyframes, valueTransition);\n        if (finalKeyframe !== undefined) {\n            frame.update(() => {\n                options.onUpdate(finalKeyframe);\n                options.onComplete();\n            });\n            // We still want to return some animation controls here rather\n            // than returning undefined\n            return new GroupPlaybackControls([]);\n        }\n    }\n    /**\n     * Animate via WAAPI if possible. If this is a handoff animation, the optimised animation will be running via\n     * WAAPI. Therefore, this animation must be JS to ensure it runs \"under\" the\n     * optimised animation.\n     */\n    if (!isHandoff && AcceleratedAnimation.supports(options)) {\n        return new AcceleratedAnimation(options);\n    }\n    else {\n        return new MainThreadAnimation(options);\n    }\n};\n\nexport { animateMotionValue };\n","import { isMotionValue } from '../utils/is-motion-value.mjs';\n\nfunction isWillChangeMotionValue(value) {\n    return Boolean(isMotionValue(value) && value.add);\n}\n\nexport { isWillChangeMotionValue };\n","function addUniqueItem(arr, item) {\n    if (arr.indexOf(item) === -1)\n        arr.push(item);\n}\nfunction removeItem(arr, item) {\n    const index = arr.indexOf(item);\n    if (index > -1)\n        arr.splice(index, 1);\n}\n// Adapted from array-move\nfunction moveItem([...arr], fromIndex, toIndex) {\n    const startIndex = fromIndex < 0 ? arr.length + fromIndex : fromIndex;\n    if (startIndex >= 0 && startIndex < arr.length) {\n        const endIndex = toIndex < 0 ? arr.length + toIndex : toIndex;\n        const [item] = arr.splice(fromIndex, 1);\n        arr.splice(endIndex, 0, item);\n    }\n    return arr;\n}\n\nexport { addUniqueItem, moveItem, removeItem };\n","import { addUniqueItem, removeItem } from './array.mjs';\n\nclass SubscriptionManager {\n    constructor() {\n        this.subscriptions = [];\n    }\n    add(handler) {\n        addUniqueItem(this.subscriptions, handler);\n        return () => removeItem(this.subscriptions, handler);\n    }\n    notify(a, b, c) {\n        const numSubscriptions = this.subscriptions.length;\n        if (!numSubscriptions)\n            return;\n        if (numSubscriptions === 1) {\n            /**\n             * If there's only a single handler we can just call it without invoking a loop.\n             */\n            this.subscriptions[0](a, b, c);\n        }\n        else {\n            for (let i = 0; i < numSubscriptions; i++) {\n                /**\n                 * Check whether the handler exists before firing as it's possible\n                 * the subscriptions were modified during this loop running.\n                 */\n                const handler = this.subscriptions[i];\n                handler && handler(a, b, c);\n            }\n        }\n    }\n    getSize() {\n        return this.subscriptions.length;\n    }\n    clear() {\n        this.subscriptions.length = 0;\n    }\n}\n\nexport { SubscriptionManager };\n","const warned = new Set();\nfunction warnOnce(condition, message, element) {\n    if (condition || warned.has(message))\n        return;\n    console.warn(message);\n    if (element)\n        console.warn(element);\n    warned.add(message);\n}\n\nexport { warnOnce };\n","import { SubscriptionManager } from '../utils/subscription-manager.mjs';\nimport { velocityPerSecond } from '../utils/velocity-per-second.mjs';\nimport { warnOnce } from '../utils/warn-once.mjs';\nimport { time } from '../frameloop/sync-time.mjs';\nimport { frame } from '../frameloop/frame.mjs';\n\n/**\n * Maximum time between the value of two frames, beyond which we\n * assume the velocity has since been 0.\n */\nconst MAX_VELOCITY_DELTA = 30;\nconst isFloat = (value) => {\n    return !isNaN(parseFloat(value));\n};\nconst collectMotionValues = {\n    current: undefined,\n};\n/**\n * `MotionValue` is used to track the state and velocity of motion values.\n *\n * @public\n */\nclass MotionValue {\n    /**\n     * @param init - The initiating value\n     * @param config - Optional configuration options\n     *\n     * -  `transformer`: A function to transform incoming values with.\n     *\n     * @internal\n     */\n    constructor(init, options = {}) {\n        /**\n         * This will be replaced by the build step with the latest version number.\n         * When MotionValues are provided to motion components, warn if versions are mixed.\n         */\n        this.version = \"11.2.12\";\n        /**\n         * Tracks whether this value can output a velocity. Currently this is only true\n         * if the value is numerical, but we might be able to widen the scope here and support\n         * other value types.\n         *\n         * @internal\n         */\n        this.canTrackVelocity = null;\n        /**\n         * An object containing a SubscriptionManager for each active event.\n         */\n        this.events = {};\n        this.updateAndNotify = (v, render = true) => {\n            const currentTime = time.now();\n            /**\n             * If we're updating the value during another frame or eventloop\n             * than the previous frame, then the we set the previous frame value\n             * to current.\n             */\n            if (this.updatedAt !== currentTime) {\n                this.setPrevFrameValue();\n            }\n            this.prev = this.current;\n            this.setCurrent(v);\n            // Update update subscribers\n            if (this.current !== this.prev && this.events.change) {\n                this.events.change.notify(this.current);\n            }\n            // Update render subscribers\n            if (render && this.events.renderRequest) {\n                this.events.renderRequest.notify(this.current);\n            }\n        };\n        this.hasAnimated = false;\n        this.setCurrent(init);\n        this.owner = options.owner;\n    }\n    setCurrent(current) {\n        this.current = current;\n        this.updatedAt = time.now();\n        if (this.canTrackVelocity === null && current !== undefined) {\n            this.canTrackVelocity = isFloat(this.current);\n        }\n    }\n    setPrevFrameValue(prevFrameValue = this.current) {\n        this.prevFrameValue = prevFrameValue;\n        this.prevUpdatedAt = this.updatedAt;\n    }\n    /**\n     * Adds a function that will be notified when the `MotionValue` is updated.\n     *\n     * It returns a function that, when called, will cancel the subscription.\n     *\n     * When calling `onChange` inside a React component, it should be wrapped with the\n     * `useEffect` hook. As it returns an unsubscribe function, this should be returned\n     * from the `useEffect` function to ensure you don't add duplicate subscribers..\n     *\n     * ```jsx\n     * export const MyComponent = () => {\n     *   const x = useMotionValue(0)\n     *   const y = useMotionValue(0)\n     *   const opacity = useMotionValue(1)\n     *\n     *   useEffect(() => {\n     *     function updateOpacity() {\n     *       const maxXY = Math.max(x.get(), y.get())\n     *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n     *       opacity.set(newOpacity)\n     *     }\n     *\n     *     const unsubscribeX = x.on(\"change\", updateOpacity)\n     *     const unsubscribeY = y.on(\"change\", updateOpacity)\n     *\n     *     return () => {\n     *       unsubscribeX()\n     *       unsubscribeY()\n     *     }\n     *   }, [])\n     *\n     *   return <motion.div style={{ x }} />\n     * }\n     * ```\n     *\n     * @param subscriber - A function that receives the latest value.\n     * @returns A function that, when called, will cancel this subscription.\n     *\n     * @deprecated\n     */\n    onChange(subscription) {\n        if (process.env.NODE_ENV !== \"production\") {\n            warnOnce(false, `value.onChange(callback) is deprecated. Switch to value.on(\"change\", callback).`);\n        }\n        return this.on(\"change\", subscription);\n    }\n    on(eventName, callback) {\n        if (!this.events[eventName]) {\n            this.events[eventName] = new SubscriptionManager();\n        }\n        const unsubscribe = this.events[eventName].add(callback);\n        if (eventName === \"change\") {\n            return () => {\n                unsubscribe();\n                /**\n                 * If we have no more change listeners by the start\n                 * of the next frame, stop active animations.\n                 */\n                frame.read(() => {\n                    if (!this.events.change.getSize()) {\n                        this.stop();\n                    }\n                });\n            };\n        }\n        return unsubscribe;\n    }\n    clearListeners() {\n        for (const eventManagers in this.events) {\n            this.events[eventManagers].clear();\n        }\n    }\n    /**\n     * Attaches a passive effect to the `MotionValue`.\n     *\n     * @internal\n     */\n    attach(passiveEffect, stopPassiveEffect) {\n        this.passiveEffect = passiveEffect;\n        this.stopPassiveEffect = stopPassiveEffect;\n    }\n    /**\n     * Sets the state of the `MotionValue`.\n     *\n     * @remarks\n     *\n     * ```jsx\n     * const x = useMotionValue(0)\n     * x.set(10)\n     * ```\n     *\n     * @param latest - Latest value to set.\n     * @param render - Whether to notify render subscribers. Defaults to `true`\n     *\n     * @public\n     */\n    set(v, render = true) {\n        if (!render || !this.passiveEffect) {\n            this.updateAndNotify(v, render);\n        }\n        else {\n            this.passiveEffect(v, this.updateAndNotify);\n        }\n    }\n    setWithVelocity(prev, current, delta) {\n        this.set(current);\n        this.prev = undefined;\n        this.prevFrameValue = prev;\n        this.prevUpdatedAt = this.updatedAt - delta;\n    }\n    /**\n     * Set the state of the `MotionValue`, stopping any active animations,\n     * effects, and resets velocity to `0`.\n     */\n    jump(v, endAnimation = true) {\n        this.updateAndNotify(v);\n        this.prev = v;\n        this.prevUpdatedAt = this.prevFrameValue = undefined;\n        endAnimation && this.stop();\n        if (this.stopPassiveEffect)\n            this.stopPassiveEffect();\n    }\n    /**\n     * Returns the latest state of `MotionValue`\n     *\n     * @returns - The latest state of `MotionValue`\n     *\n     * @public\n     */\n    get() {\n        if (collectMotionValues.current) {\n            collectMotionValues.current.push(this);\n        }\n        return this.current;\n    }\n    /**\n     * @public\n     */\n    getPrevious() {\n        return this.prev;\n    }\n    /**\n     * Returns the latest velocity of `MotionValue`\n     *\n     * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.\n     *\n     * @public\n     */\n    getVelocity() {\n        const currentTime = time.now();\n        if (!this.canTrackVelocity ||\n            this.prevFrameValue === undefined ||\n            currentTime - this.updatedAt > MAX_VELOCITY_DELTA) {\n            return 0;\n        }\n        const delta = Math.min(this.updatedAt - this.prevUpdatedAt, MAX_VELOCITY_DELTA);\n        // Casts because of parseFloat's poor typing\n        return velocityPerSecond(parseFloat(this.current) -\n            parseFloat(this.prevFrameValue), delta);\n    }\n    /**\n     * Registers a new animation to control this `MotionValue`. Only one\n     * animation can drive a `MotionValue` at one time.\n     *\n     * ```jsx\n     * value.start()\n     * ```\n     *\n     * @param animation - A function that starts the provided animation\n     *\n     * @internal\n     */\n    start(startAnimation) {\n        this.stop();\n        return new Promise((resolve) => {\n            this.hasAnimated = true;\n            this.animation = startAnimation(resolve);\n            if (this.events.animationStart) {\n                this.events.animationStart.notify();\n            }\n        }).then(() => {\n            if (this.events.animationComplete) {\n                this.events.animationComplete.notify();\n            }\n            this.clearAnimation();\n        });\n    }\n    /**\n     * Stop the currently active animation.\n     *\n     * @public\n     */\n    stop() {\n        if (this.animation) {\n            this.animation.stop();\n            if (this.events.animationCancel) {\n                this.events.animationCancel.notify();\n            }\n        }\n        this.clearAnimation();\n    }\n    /**\n     * Returns `true` if this value is currently animating.\n     *\n     * @public\n     */\n    isAnimating() {\n        return !!this.animation;\n    }\n    clearAnimation() {\n        delete this.animation;\n    }\n    /**\n     * Destroy and clean up subscribers to this `MotionValue`.\n     *\n     * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically\n     * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually\n     * created a `MotionValue` via the `motionValue` function.\n     *\n     * @public\n     */\n    destroy() {\n        this.clearListeners();\n        this.stop();\n        if (this.stopPassiveEffect) {\n            this.stopPassiveEffect();\n        }\n    }\n}\nfunction motionValue(init, options) {\n    return new MotionValue(init, options);\n}\n\nexport { MotionValue, collectMotionValues, motionValue };\n","import { resolveFinalValueInKeyframes } from '../../utils/resolve-value.mjs';\nimport { motionValue } from '../../value/index.mjs';\nimport { resolveVariant } from './resolve-dynamic-variants.mjs';\n\n/**\n * Set VisualElement's MotionValue, creating a new MotionValue for it if\n * it doesn't exist.\n */\nfunction setMotionValue(visualElement, key, value) {\n    if (visualElement.hasValue(key)) {\n        visualElement.getValue(key).set(value);\n    }\n    else {\n        visualElement.addValue(key, motionValue(value));\n    }\n}\nfunction setTarget(visualElement, definition) {\n    const resolved = resolveVariant(visualElement, definition);\n    let { transitionEnd = {}, transition = {}, ...target } = resolved || {};\n    target = { ...target, ...transitionEnd };\n    for (const key in target) {\n        const value = resolveFinalValueInKeyframes(target[key]);\n        setMotionValue(visualElement, key, value);\n    }\n}\n\nexport { setTarget };\n","import { optimizedAppearDataAttribute } from './data-id.mjs';\n\nfunction getOptimisedAppearId(visualElement) {\n    return visualElement.getProps()[optimizedAppearDataAttribute];\n}\n\nexport { getOptimisedAppearId };\n","import { transformProps } from '../../render/html/utils/transform.mjs';\nimport { animateMotionValue } from './motion-value.mjs';\nimport { isWillChangeMotionValue } from '../../value/use-will-change/is.mjs';\nimport { setTarget } from '../../render/utils/setters.mjs';\nimport { getValueTransition } from '../utils/transitions.mjs';\nimport { getOptimisedAppearId } from '../optimized-appear/get-appear-id.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\n\n/**\n * Decide whether we should block this animation. Previously, we achieved this\n * just by checking whether the key was listed in protectedKeys, but this\n * posed problems if an animation was triggered by afterChildren and protectedKeys\n * had been set to true in the meantime.\n */\nfunction shouldBlockAnimation({ protectedKeys, needsAnimating }, key) {\n    const shouldBlock = protectedKeys.hasOwnProperty(key) && needsAnimating[key] !== true;\n    needsAnimating[key] = false;\n    return shouldBlock;\n}\nfunction animateTarget(visualElement, targetAndTransition, { delay = 0, transitionOverride, type } = {}) {\n    var _a;\n    let { transition = visualElement.getDefaultTransition(), transitionEnd, ...target } = targetAndTransition;\n    const willChange = visualElement.getValue(\"willChange\");\n    if (transitionOverride)\n        transition = transitionOverride;\n    const animations = [];\n    const animationTypeState = type &&\n        visualElement.animationState &&\n        visualElement.animationState.getState()[type];\n    for (const key in target) {\n        const value = visualElement.getValue(key, (_a = visualElement.latestValues[key]) !== null && _a !== void 0 ? _a : null);\n        const valueTarget = target[key];\n        if (valueTarget === undefined ||\n            (animationTypeState &&\n                shouldBlockAnimation(animationTypeState, key))) {\n            continue;\n        }\n        const valueTransition = {\n            delay,\n            elapsed: 0,\n            ...getValueTransition(transition || {}, key),\n        };\n        /**\n         * If this is the first time a value is being animated, check\n         * to see if we're handling off from an existing animation.\n         */\n        let isHandoff = false;\n        if (window.HandoffAppearAnimations) {\n            const appearId = getOptimisedAppearId(visualElement);\n            if (appearId) {\n                const elapsed = window.HandoffAppearAnimations(appearId, key, value, frame);\n                if (elapsed !== null) {\n                    valueTransition.elapsed = elapsed;\n                    isHandoff = true;\n                }\n            }\n        }\n        value.start(animateMotionValue(key, value, valueTarget, visualElement.shouldReduceMotion && transformProps.has(key)\n            ? { type: false }\n            : valueTransition, visualElement, isHandoff));\n        const animation = value.animation;\n        if (animation) {\n            if (isWillChangeMotionValue(willChange)) {\n                willChange.add(key);\n                animation.then(() => willChange.remove(key));\n            }\n            animations.push(animation);\n        }\n    }\n    if (transitionEnd) {\n        Promise.all(animations).then(() => {\n            frame.update(() => {\n                transitionEnd && setTarget(visualElement, transitionEnd);\n            });\n        });\n    }\n    return animations;\n}\n\nexport { animateTarget };\n","import { resolveVariant } from '../../render/utils/resolve-dynamic-variants.mjs';\nimport { animateTarget } from './visual-element-target.mjs';\n\nfunction animateVariant(visualElement, variant, options = {}) {\n    var _a;\n    const resolved = resolveVariant(visualElement, variant, options.type === \"exit\"\n        ? (_a = visualElement.presenceContext) === null || _a === void 0 ? void 0 : _a.custom\n        : undefined);\n    let { transition = visualElement.getDefaultTransition() || {} } = resolved || {};\n    if (options.transitionOverride) {\n        transition = options.transitionOverride;\n    }\n    /**\n     * If we have a variant, create a callback that runs it as an animation.\n     * Otherwise, we resolve a Promise immediately for a composable no-op.\n     */\n    const getAnimation = resolved\n        ? () => Promise.all(animateTarget(visualElement, resolved, options))\n        : () => Promise.resolve();\n    /**\n     * If we have children, create a callback that runs all their animations.\n     * Otherwise, we resolve a Promise immediately for a composable no-op.\n     */\n    const getChildAnimations = visualElement.variantChildren && visualElement.variantChildren.size\n        ? (forwardDelay = 0) => {\n            const { delayChildren = 0, staggerChildren, staggerDirection, } = transition;\n            return animateChildren(visualElement, variant, delayChildren + forwardDelay, staggerChildren, staggerDirection, options);\n        }\n        : () => Promise.resolve();\n    /**\n     * If the transition explicitly defines a \"when\" option, we need to resolve either\n     * this animation or all children animations before playing the other.\n     */\n    const { when } = transition;\n    if (when) {\n        const [first, last] = when === \"beforeChildren\"\n            ? [getAnimation, getChildAnimations]\n            : [getChildAnimations, getAnimation];\n        return first().then(() => last());\n    }\n    else {\n        return Promise.all([getAnimation(), getChildAnimations(options.delay)]);\n    }\n}\nfunction animateChildren(visualElement, variant, delayChildren = 0, staggerChildren = 0, staggerDirection = 1, options) {\n    const animations = [];\n    const maxStaggerDuration = (visualElement.variantChildren.size - 1) * staggerChildren;\n    const generateStaggerDuration = staggerDirection === 1\n        ? (i = 0) => i * staggerChildren\n        : (i = 0) => maxStaggerDuration - i * staggerChildren;\n    Array.from(visualElement.variantChildren)\n        .sort(sortByTreeOrder)\n        .forEach((child, i) => {\n        child.notify(\"AnimationStart\", variant);\n        animations.push(animateVariant(child, variant, {\n            ...options,\n            delay: delayChildren + generateStaggerDuration(i),\n        }).then(() => child.notify(\"AnimationComplete\", variant)));\n    });\n    return Promise.all(animations);\n}\nfunction sortByTreeOrder(a, b) {\n    return a.sortNodePosition(b);\n}\n\nexport { animateVariant, sortByTreeOrder };\n","import { resolveVariant } from '../../render/utils/resolve-dynamic-variants.mjs';\nimport { animateTarget } from './visual-element-target.mjs';\nimport { animateVariant } from './visual-element-variant.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\n\nfunction animateVisualElement(visualElement, definition, options = {}) {\n    visualElement.notify(\"AnimationStart\", definition);\n    let animation;\n    if (Array.isArray(definition)) {\n        const animations = definition.map((variant) => animateVariant(visualElement, variant, options));\n        animation = Promise.all(animations);\n    }\n    else if (typeof definition === \"string\") {\n        animation = animateVariant(visualElement, definition, options);\n    }\n    else {\n        const resolvedDefinition = typeof definition === \"function\"\n            ? resolveVariant(visualElement, definition, options.custom)\n            : definition;\n        animation = Promise.all(animateTarget(visualElement, resolvedDefinition, options));\n    }\n    return animation.then(() => {\n        frame.postRender(() => {\n            visualElement.notify(\"AnimationComplete\", definition);\n        });\n    });\n}\n\nexport { animateVisualElement };\n","import { isAnimationControls } from '../../animation/utils/is-animation-controls.mjs';\nimport { isKeyframesTarget } from '../../animation/utils/is-keyframes-target.mjs';\nimport { shallowCompare } from '../../utils/shallow-compare.mjs';\nimport { isVariantLabel } from './is-variant-label.mjs';\nimport { resolveVariant } from './resolve-dynamic-variants.mjs';\nimport { variantPriorityOrder } from './variant-props.mjs';\nimport { animateVisualElement } from '../../animation/interfaces/visual-element.mjs';\n\nconst reversePriorityOrder = [...variantPriorityOrder].reverse();\nconst numAnimationTypes = variantPriorityOrder.length;\nfunction animateList(visualElement) {\n    return (animations) => Promise.all(animations.map(({ animation, options }) => animateVisualElement(visualElement, animation, options)));\n}\nfunction createAnimationState(visualElement) {\n    let animate = animateList(visualElement);\n    let state = createState();\n    let isInitialRender = true;\n    /**\n     * This function will be used to reduce the animation definitions for\n     * each active animation type into an object of resolved values for it.\n     */\n    const buildResolvedTypeValues = (type) => (acc, definition) => {\n        var _a;\n        const resolved = resolveVariant(visualElement, definition, type === \"exit\"\n            ? (_a = visualElement.presenceContext) === null || _a === void 0 ? void 0 : _a.custom\n            : undefined);\n        if (resolved) {\n            const { transition, transitionEnd, ...target } = resolved;\n            acc = { ...acc, ...target, ...transitionEnd };\n        }\n        return acc;\n    };\n    /**\n     * This just allows us to inject mocked animation functions\n     * @internal\n     */\n    function setAnimateFunction(makeAnimator) {\n        animate = makeAnimator(visualElement);\n    }\n    /**\n     * When we receive new props, we need to:\n     * 1. Create a list of protected keys for each type. This is a directory of\n     *    value keys that are currently being \"handled\" by types of a higher priority\n     *    so that whenever an animation is played of a given type, these values are\n     *    protected from being animated.\n     * 2. Determine if an animation type needs animating.\n     * 3. Determine if any values have been removed from a type and figure out\n     *    what to animate those to.\n     */\n    function animateChanges(changedActiveType) {\n        const props = visualElement.getProps();\n        const context = visualElement.getVariantContext(true) || {};\n        /**\n         * A list of animations that we'll build into as we iterate through the animation\n         * types. This will get executed at the end of the function.\n         */\n        const animations = [];\n        /**\n         * Keep track of which values have been removed. Then, as we hit lower priority\n         * animation types, we can check if they contain removed values and animate to that.\n         */\n        const removedKeys = new Set();\n        /**\n         * A dictionary of all encountered keys. This is an object to let us build into and\n         * copy it without iteration. Each time we hit an animation type we set its protected\n         * keys - the keys its not allowed to animate - to the latest version of this object.\n         */\n        let encounteredKeys = {};\n        /**\n         * If a variant has been removed at a given index, and this component is controlling\n         * variant animations, we want to ensure lower-priority variants are forced to animate.\n         */\n        let removedVariantIndex = Infinity;\n        /**\n         * Iterate through all animation types in reverse priority order. For each, we want to\n         * detect which values it's handling and whether or not they've changed (and therefore\n         * need to be animated). If any values have been removed, we want to detect those in\n         * lower priority props and flag for animation.\n         */\n        for (let i = 0; i < numAnimationTypes; i++) {\n            const type = reversePriorityOrder[i];\n            const typeState = state[type];\n            const prop = props[type] !== undefined\n                ? props[type]\n                : context[type];\n            const propIsVariant = isVariantLabel(prop);\n            /**\n             * If this type has *just* changed isActive status, set activeDelta\n             * to that status. Otherwise set to null.\n             */\n            const activeDelta = type === changedActiveType ? typeState.isActive : null;\n            if (activeDelta === false)\n                removedVariantIndex = i;\n            /**\n             * If this prop is an inherited variant, rather than been set directly on the\n             * component itself, we want to make sure we allow the parent to trigger animations.\n             *\n             * TODO: Can probably change this to a !isControllingVariants check\n             */\n            let isInherited = prop === context[type] &&\n                prop !== props[type] &&\n                propIsVariant;\n            /**\n             *\n             */\n            if (isInherited &&\n                isInitialRender &&\n                visualElement.manuallyAnimateOnMount) {\n                isInherited = false;\n            }\n            /**\n             * Set all encountered keys so far as the protected keys for this type. This will\n             * be any key that has been animated or otherwise handled by active, higher-priortiy types.\n             */\n            typeState.protectedKeys = { ...encounteredKeys };\n            // Check if we can skip analysing this prop early\n            if (\n            // If it isn't active and hasn't *just* been set as inactive\n            (!typeState.isActive && activeDelta === null) ||\n                // If we didn't and don't have any defined prop for this animation type\n                (!prop && !typeState.prevProp) ||\n                // Or if the prop doesn't define an animation\n                isAnimationControls(prop) ||\n                typeof prop === \"boolean\") {\n                continue;\n            }\n            /**\n             * As we go look through the values defined on this type, if we detect\n             * a changed value or a value that was removed in a higher priority, we set\n             * this to true and add this prop to the animation list.\n             */\n            const variantDidChange = checkVariantsDidChange(typeState.prevProp, prop);\n            let shouldAnimateType = variantDidChange ||\n                // If we're making this variant active, we want to always make it active\n                (type === changedActiveType &&\n                    typeState.isActive &&\n                    !isInherited &&\n                    propIsVariant) ||\n                // If we removed a higher-priority variant (i is in reverse order)\n                (i > removedVariantIndex && propIsVariant);\n            let handledRemovedValues = false;\n            /**\n             * As animations can be set as variant lists, variants or target objects, we\n             * coerce everything to an array if it isn't one already\n             */\n            const definitionList = Array.isArray(prop) ? prop : [prop];\n            /**\n             * Build an object of all the resolved values. We'll use this in the subsequent\n             * animateChanges calls to determine whether a value has changed.\n             */\n            let resolvedValues = definitionList.reduce(buildResolvedTypeValues(type), {});\n            if (activeDelta === false)\n                resolvedValues = {};\n            /**\n             * Now we need to loop through all the keys in the prev prop and this prop,\n             * and decide:\n             * 1. If the value has changed, and needs animating\n             * 2. If it has been removed, and needs adding to the removedKeys set\n             * 3. If it has been removed in a higher priority type and needs animating\n             * 4. If it hasn't been removed in a higher priority but hasn't changed, and\n             *    needs adding to the type's protectedKeys list.\n             */\n            const { prevResolvedValues = {} } = typeState;\n            const allKeys = {\n                ...prevResolvedValues,\n                ...resolvedValues,\n            };\n            const markToAnimate = (key) => {\n                shouldAnimateType = true;\n                if (removedKeys.has(key)) {\n                    handledRemovedValues = true;\n                    removedKeys.delete(key);\n                }\n                typeState.needsAnimating[key] = true;\n                const motionValue = visualElement.getValue(key);\n                if (motionValue)\n                    motionValue.liveStyle = false;\n            };\n            for (const key in allKeys) {\n                const next = resolvedValues[key];\n                const prev = prevResolvedValues[key];\n                // If we've already handled this we can just skip ahead\n                if (encounteredKeys.hasOwnProperty(key))\n                    continue;\n                /**\n                 * If the value has changed, we probably want to animate it.\n                 */\n                let valueHasChanged = false;\n                if (isKeyframesTarget(next) && isKeyframesTarget(prev)) {\n                    valueHasChanged = !shallowCompare(next, prev);\n                }\n                else {\n                    valueHasChanged = next !== prev;\n                }\n                if (valueHasChanged) {\n                    if (next !== undefined && next !== null) {\n                        // If next is defined and doesn't equal prev, it needs animating\n                        markToAnimate(key);\n                    }\n                    else {\n                        // If it's undefined, it's been removed.\n                        removedKeys.add(key);\n                    }\n                }\n                else if (next !== undefined && removedKeys.has(key)) {\n                    /**\n                     * If next hasn't changed and it isn't undefined, we want to check if it's\n                     * been removed by a higher priority\n                     */\n                    markToAnimate(key);\n                }\n                else {\n                    /**\n                     * If it hasn't changed, we add it to the list of protected values\n                     * to ensure it doesn't get animated.\n                     */\n                    typeState.protectedKeys[key] = true;\n                }\n            }\n            /**\n             * Update the typeState so next time animateChanges is called we can compare the\n             * latest prop and resolvedValues to these.\n             */\n            typeState.prevProp = prop;\n            typeState.prevResolvedValues = resolvedValues;\n            /**\n             *\n             */\n            if (typeState.isActive) {\n                encounteredKeys = { ...encounteredKeys, ...resolvedValues };\n            }\n            if (isInitialRender && visualElement.blockInitialAnimation) {\n                shouldAnimateType = false;\n            }\n            /**\n             * If this is an inherited prop we want to hard-block animations\n             */\n            if (shouldAnimateType && (!isInherited || handledRemovedValues)) {\n                animations.push(...definitionList.map((animation) => ({\n                    animation: animation,\n                    options: { type },\n                })));\n            }\n        }\n        /**\n         * If there are some removed value that haven't been dealt with,\n         * we need to create a new animation that falls back either to the value\n         * defined in the style prop, or the last read value.\n         */\n        if (removedKeys.size) {\n            const fallbackAnimation = {};\n            removedKeys.forEach((key) => {\n                const fallbackTarget = visualElement.getBaseTarget(key);\n                const motionValue = visualElement.getValue(key);\n                if (motionValue)\n                    motionValue.liveStyle = true;\n                // @ts-expect-error - @mattgperry to figure if we should do something here\n                fallbackAnimation[key] = fallbackTarget !== null && fallbackTarget !== void 0 ? fallbackTarget : null;\n            });\n            animations.push({ animation: fallbackAnimation });\n        }\n        let shouldAnimate = Boolean(animations.length);\n        if (isInitialRender &&\n            (props.initial === false || props.initial === props.animate) &&\n            !visualElement.manuallyAnimateOnMount) {\n            shouldAnimate = false;\n        }\n        isInitialRender = false;\n        return shouldAnimate ? animate(animations) : Promise.resolve();\n    }\n    /**\n     * Change whether a certain animation type is active.\n     */\n    function setActive(type, isActive) {\n        var _a;\n        // If the active state hasn't changed, we can safely do nothing here\n        if (state[type].isActive === isActive)\n            return Promise.resolve();\n        // Propagate active change to children\n        (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach((child) => { var _a; return (_a = child.animationState) === null || _a === void 0 ? void 0 : _a.setActive(type, isActive); });\n        state[type].isActive = isActive;\n        const animations = animateChanges(type);\n        for (const key in state) {\n            state[key].protectedKeys = {};\n        }\n        return animations;\n    }\n    return {\n        animateChanges,\n        setActive,\n        setAnimateFunction,\n        getState: () => state,\n        reset: () => {\n            state = createState();\n            isInitialRender = true;\n        },\n    };\n}\nfunction checkVariantsDidChange(prev, next) {\n    if (typeof next === \"string\") {\n        return next !== prev;\n    }\n    else if (Array.isArray(next)) {\n        return !shallowCompare(next, prev);\n    }\n    return false;\n}\nfunction createTypeState(isActive = false) {\n    return {\n        isActive,\n        protectedKeys: {},\n        needsAnimating: {},\n        prevResolvedValues: {},\n    };\n}\nfunction createState() {\n    return {\n        animate: createTypeState(true),\n        whileInView: createTypeState(),\n        whileHover: createTypeState(),\n        whileTap: createTypeState(),\n        whileDrag: createTypeState(),\n        whileFocus: createTypeState(),\n        exit: createTypeState(),\n    };\n}\n\nexport { checkVariantsDidChange, createAnimationState };\n","import { isAnimationControls } from '../../../animation/utils/is-animation-controls.mjs';\nimport { createAnimationState } from '../../../render/utils/animation-state.mjs';\nimport { Feature } from '../Feature.mjs';\n\nclass AnimationFeature extends Feature {\n    /**\n     * We dynamically generate the AnimationState manager as it contains a reference\n     * to the underlying animation library. We only want to load that if we load this,\n     * so people can optionally code split it out using the `m` component.\n     */\n    constructor(node) {\n        super(node);\n        node.animationState || (node.animationState = createAnimationState(node));\n    }\n    updateAnimationControlsSubscription() {\n        const { animate } = this.node.getProps();\n        if (isAnimationControls(animate)) {\n            this.unmountControls = animate.subscribe(this.node);\n        }\n    }\n    /**\n     * Subscribe any provided AnimationControls to the component's VisualElement\n     */\n    mount() {\n        this.updateAnimationControlsSubscription();\n    }\n    update() {\n        const { animate } = this.node.getProps();\n        const { animate: prevAnimate } = this.node.prevProps || {};\n        if (animate !== prevAnimate) {\n            this.updateAnimationControlsSubscription();\n        }\n    }\n    unmount() {\n        var _a;\n        this.node.animationState.reset();\n        (_a = this.unmountControls) === null || _a === void 0 ? void 0 : _a.call(this);\n    }\n}\n\nexport { AnimationFeature };\n","import { Feature } from '../Feature.mjs';\n\nlet id = 0;\nclass ExitAnimationFeature extends Feature {\n    constructor() {\n        super(...arguments);\n        this.id = id++;\n    }\n    update() {\n        if (!this.node.presenceContext)\n            return;\n        const { isPresent, onExitComplete } = this.node.presenceContext;\n        const { isPresent: prevIsPresent } = this.node.prevPresenceContext || {};\n        if (!this.node.animationState || isPresent === prevIsPresent) {\n            return;\n        }\n        const exitAnimation = this.node.animationState.setActive(\"exit\", !isPresent);\n        if (onExitComplete && !isPresent) {\n            exitAnimation.then(() => onExitComplete(this.id));\n        }\n    }\n    mount() {\n        const { register } = this.node.presenceContext || {};\n        if (register) {\n            this.unmount = register(this.id);\n        }\n    }\n    unmount() { }\n}\n\nexport { ExitAnimationFeature };\n","import { AnimationFeature } from './animation/index.mjs';\nimport { ExitAnimationFeature } from './animation/exit.mjs';\n\nconst animations = {\n    animation: {\n        Feature: AnimationFeature,\n    },\n    exit: {\n        Feature: ExitAnimationFeature,\n    },\n};\n\nexport { animations };\n","const distance = (a, b) => Math.abs(a - b);\nfunction distance2D(a, b) {\n    // Multi-dimensional\n    const xDelta = distance(a.x, b.x);\n    const yDelta = distance(a.y, b.y);\n    return Math.sqrt(xDelta ** 2 + yDelta ** 2);\n}\n\nexport { distance, distance2D };\n","import { extractEventInfo } from '../../events/event-info.mjs';\nimport { secondsToMilliseconds, millisecondsToSeconds } from '../../utils/time-conversion.mjs';\nimport { addPointerEvent } from '../../events/add-pointer-event.mjs';\nimport { pipe } from '../../utils/pipe.mjs';\nimport { distance2D } from '../../utils/distance.mjs';\nimport { isPrimaryPointer } from '../../events/utils/is-primary-pointer.mjs';\nimport { frame, cancelFrame, frameData } from '../../frameloop/frame.mjs';\n\n/**\n * @internal\n */\nclass PanSession {\n    constructor(event, handlers, { transformPagePoint, contextWindow, dragSnapToOrigin = false } = {}) {\n        /**\n         * @internal\n         */\n        this.startEvent = null;\n        /**\n         * @internal\n         */\n        this.lastMoveEvent = null;\n        /**\n         * @internal\n         */\n        this.lastMoveEventInfo = null;\n        /**\n         * @internal\n         */\n        this.handlers = {};\n        /**\n         * @internal\n         */\n        this.contextWindow = window;\n        this.updatePoint = () => {\n            if (!(this.lastMoveEvent && this.lastMoveEventInfo))\n                return;\n            const info = getPanInfo(this.lastMoveEventInfo, this.history);\n            const isPanStarted = this.startEvent !== null;\n            // Only start panning if the offset is larger than 3 pixels. If we make it\n            // any larger than this we'll want to reset the pointer history\n            // on the first update to avoid visual snapping to the cursoe.\n            const isDistancePastThreshold = distance2D(info.offset, { x: 0, y: 0 }) >= 3;\n            if (!isPanStarted && !isDistancePastThreshold)\n                return;\n            const { point } = info;\n            const { timestamp } = frameData;\n            this.history.push({ ...point, timestamp });\n            const { onStart, onMove } = this.handlers;\n            if (!isPanStarted) {\n                onStart && onStart(this.lastMoveEvent, info);\n                this.startEvent = this.lastMoveEvent;\n            }\n            onMove && onMove(this.lastMoveEvent, info);\n        };\n        this.handlePointerMove = (event, info) => {\n            this.lastMoveEvent = event;\n            this.lastMoveEventInfo = transformPoint(info, this.transformPagePoint);\n            // Throttle mouse move event to once per frame\n            frame.update(this.updatePoint, true);\n        };\n        this.handlePointerUp = (event, info) => {\n            this.end();\n            const { onEnd, onSessionEnd, resumeAnimation } = this.handlers;\n            if (this.dragSnapToOrigin)\n                resumeAnimation && resumeAnimation();\n            if (!(this.lastMoveEvent && this.lastMoveEventInfo))\n                return;\n            const panInfo = getPanInfo(event.type === \"pointercancel\"\n                ? this.lastMoveEventInfo\n                : transformPoint(info, this.transformPagePoint), this.history);\n            if (this.startEvent && onEnd) {\n                onEnd(event, panInfo);\n            }\n            onSessionEnd && onSessionEnd(event, panInfo);\n        };\n        // If we have more than one touch, don't start detecting this gesture\n        if (!isPrimaryPointer(event))\n            return;\n        this.dragSnapToOrigin = dragSnapToOrigin;\n        this.handlers = handlers;\n        this.transformPagePoint = transformPagePoint;\n        this.contextWindow = contextWindow || window;\n        const info = extractEventInfo(event);\n        const initialInfo = transformPoint(info, this.transformPagePoint);\n        const { point } = initialInfo;\n        const { timestamp } = frameData;\n        this.history = [{ ...point, timestamp }];\n        const { onSessionStart } = handlers;\n        onSessionStart &&\n            onSessionStart(event, getPanInfo(initialInfo, this.history));\n        this.removeListeners = pipe(addPointerEvent(this.contextWindow, \"pointermove\", this.handlePointerMove), addPointerEvent(this.contextWindow, \"pointerup\", this.handlePointerUp), addPointerEvent(this.contextWindow, \"pointercancel\", this.handlePointerUp));\n    }\n    updateHandlers(handlers) {\n        this.handlers = handlers;\n    }\n    end() {\n        this.removeListeners && this.removeListeners();\n        cancelFrame(this.updatePoint);\n    }\n}\nfunction transformPoint(info, transformPagePoint) {\n    return transformPagePoint ? { point: transformPagePoint(info.point) } : info;\n}\nfunction subtractPoint(a, b) {\n    return { x: a.x - b.x, y: a.y - b.y };\n}\nfunction getPanInfo({ point }, history) {\n    return {\n        point,\n        delta: subtractPoint(point, lastDevicePoint(history)),\n        offset: subtractPoint(point, startDevicePoint(history)),\n        velocity: getVelocity(history, 0.1),\n    };\n}\nfunction startDevicePoint(history) {\n    return history[0];\n}\nfunction lastDevicePoint(history) {\n    return history[history.length - 1];\n}\nfunction getVelocity(history, timeDelta) {\n    if (history.length < 2) {\n        return { x: 0, y: 0 };\n    }\n    let i = history.length - 1;\n    let timestampedPoint = null;\n    const lastPoint = lastDevicePoint(history);\n    while (i >= 0) {\n        timestampedPoint = history[i];\n        if (lastPoint.timestamp - timestampedPoint.timestamp >\n            secondsToMilliseconds(timeDelta)) {\n            break;\n        }\n        i--;\n    }\n    if (!timestampedPoint) {\n        return { x: 0, y: 0 };\n    }\n    const time = millisecondsToSeconds(lastPoint.timestamp - timestampedPoint.timestamp);\n    if (time === 0) {\n        return { x: 0, y: 0 };\n    }\n    const currentVelocity = {\n        x: (lastPoint.x - timestampedPoint.x) / time,\n        y: (lastPoint.y - timestampedPoint.y) / time,\n    };\n    if (currentVelocity.x === Infinity) {\n        currentVelocity.x = 0;\n    }\n    if (currentVelocity.y === Infinity) {\n        currentVelocity.y = 0;\n    }\n    return currentVelocity;\n}\n\nexport { PanSession };\n","import { mixNumber } from '../../utils/mix/number.mjs';\n\nfunction calcLength(axis) {\n    return axis.max - axis.min;\n}\nfunction isNear(value, target = 0, maxDistance = 0.01) {\n    return Math.abs(value - target) <= maxDistance;\n}\nfunction calcAxisDelta(delta, source, target, origin = 0.5) {\n    delta.origin = origin;\n    delta.originPoint = mixNumber(source.min, source.max, delta.origin);\n    delta.scale = calcLength(target) / calcLength(source);\n    if (isNear(delta.scale, 1, 0.0001) || isNaN(delta.scale))\n        delta.scale = 1;\n    delta.translate =\n        mixNumber(target.min, target.max, delta.origin) - delta.originPoint;\n    if (isNear(delta.translate) || isNaN(delta.translate))\n        delta.translate = 0;\n}\nfunction calcBoxDelta(delta, source, target, origin) {\n    calcAxisDelta(delta.x, source.x, target.x, origin ? origin.originX : undefined);\n    calcAxisDelta(delta.y, source.y, target.y, origin ? origin.originY : undefined);\n}\nfunction calcRelativeAxis(target, relative, parent) {\n    target.min = parent.min + relative.min;\n    target.max = target.min + calcLength(relative);\n}\nfunction calcRelativeBox(target, relative, parent) {\n    calcRelativeAxis(target.x, relative.x, parent.x);\n    calcRelativeAxis(target.y, relative.y, parent.y);\n}\nfunction calcRelativeAxisPosition(target, layout, parent) {\n    target.min = layout.min - parent.min;\n    target.max = target.min + calcLength(layout);\n}\nfunction calcRelativePosition(target, layout, parent) {\n    calcRelativeAxisPosition(target.x, layout.x, parent.x);\n    calcRelativeAxisPosition(target.y, layout.y, parent.y);\n}\n\nexport { calcAxisDelta, calcBoxDelta, calcLength, calcRelativeAxis, calcRelativeAxisPosition, calcRelativeBox, calcRelativePosition, isNear };\n","import { progress } from '../../../utils/progress.mjs';\nimport { calcLength } from '../../../projection/geometry/delta-calc.mjs';\nimport { clamp } from '../../../utils/clamp.mjs';\nimport { mixNumber } from '../../../utils/mix/number.mjs';\n\n/**\n * Apply constraints to a point. These constraints are both physical along an\n * axis, and an elastic factor that determines how much to constrain the point\n * by if it does lie outside the defined parameters.\n */\nfunction applyConstraints(point, { min, max }, elastic) {\n    if (min !== undefined && point < min) {\n        // If we have a min point defined, and this is outside of that, constrain\n        point = elastic\n            ? mixNumber(min, point, elastic.min)\n            : Math.max(point, min);\n    }\n    else if (max !== undefined && point > max) {\n        // If we have a max point defined, and this is outside of that, constrain\n        point = elastic\n            ? mixNumber(max, point, elastic.max)\n            : Math.min(point, max);\n    }\n    return point;\n}\n/**\n * Calculate constraints in terms of the viewport when defined relatively to the\n * measured axis. This is measured from the nearest edge, so a max constraint of 200\n * on an axis with a max value of 300 would return a constraint of 500 - axis length\n */\nfunction calcRelativeAxisConstraints(axis, min, max) {\n    return {\n        min: min !== undefined ? axis.min + min : undefined,\n        max: max !== undefined\n            ? axis.max + max - (axis.max - axis.min)\n            : undefined,\n    };\n}\n/**\n * Calculate constraints in terms of the viewport when\n * defined relatively to the measured bounding box.\n */\nfunction calcRelativeConstraints(layoutBox, { top, left, bottom, right }) {\n    return {\n        x: calcRelativeAxisConstraints(layoutBox.x, left, right),\n        y: calcRelativeAxisConstraints(layoutBox.y, top, bottom),\n    };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative axis\n */\nfunction calcViewportAxisConstraints(layoutAxis, constraintsAxis) {\n    let min = constraintsAxis.min - layoutAxis.min;\n    let max = constraintsAxis.max - layoutAxis.max;\n    // If the constraints axis is actually smaller than the layout axis then we can\n    // flip the constraints\n    if (constraintsAxis.max - constraintsAxis.min <\n        layoutAxis.max - layoutAxis.min) {\n        [min, max] = [max, min];\n    }\n    return { min, max };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative box\n */\nfunction calcViewportConstraints(layoutBox, constraintsBox) {\n    return {\n        x: calcViewportAxisConstraints(layoutBox.x, constraintsBox.x),\n        y: calcViewportAxisConstraints(layoutBox.y, constraintsBox.y),\n    };\n}\n/**\n * Calculate a transform origin relative to the source axis, between 0-1, that results\n * in an asthetically pleasing scale/transform needed to project from source to target.\n */\nfunction calcOrigin(source, target) {\n    let origin = 0.5;\n    const sourceLength = calcLength(source);\n    const targetLength = calcLength(target);\n    if (targetLength > sourceLength) {\n        origin = progress(target.min, target.max - sourceLength, source.min);\n    }\n    else if (sourceLength > targetLength) {\n        origin = progress(source.min, source.max - targetLength, target.min);\n    }\n    return clamp(0, 1, origin);\n}\n/**\n * Rebase the calculated viewport constraints relative to the layout.min point.\n */\nfunction rebaseAxisConstraints(layout, constraints) {\n    const relativeConstraints = {};\n    if (constraints.min !== undefined) {\n        relativeConstraints.min = constraints.min - layout.min;\n    }\n    if (constraints.max !== undefined) {\n        relativeConstraints.max = constraints.max - layout.min;\n    }\n    return relativeConstraints;\n}\nconst defaultElastic = 0.35;\n/**\n * Accepts a dragElastic prop and returns resolved elastic values for each axis.\n */\nfunction resolveDragElastic(dragElastic = defaultElastic) {\n    if (dragElastic === false) {\n        dragElastic = 0;\n    }\n    else if (dragElastic === true) {\n        dragElastic = defaultElastic;\n    }\n    return {\n        x: resolveAxisElastic(dragElastic, \"left\", \"right\"),\n        y: resolveAxisElastic(dragElastic, \"top\", \"bottom\"),\n    };\n}\nfunction resolveAxisElastic(dragElastic, minLabel, maxLabel) {\n    return {\n        min: resolvePointElastic(dragElastic, minLabel),\n        max: resolvePointElastic(dragElastic, maxLabel),\n    };\n}\nfunction resolvePointElastic(dragElastic, label) {\n    return typeof dragElastic === \"number\"\n        ? dragElastic\n        : dragElastic[label] || 0;\n}\n\nexport { applyConstraints, calcOrigin, calcRelativeAxisConstraints, calcRelativeConstraints, calcViewportAxisConstraints, calcViewportConstraints, defaultElastic, rebaseAxisConstraints, resolveAxisElastic, resolveDragElastic, resolvePointElastic };\n","const createAxisDelta = () => ({\n    translate: 0,\n    scale: 1,\n    origin: 0,\n    originPoint: 0,\n});\nconst createDelta = () => ({\n    x: createAxisDelta(),\n    y: createAxisDelta(),\n});\nconst createAxis = () => ({ min: 0, max: 0 });\nconst createBox = () => ({\n    x: createAxis(),\n    y: createAxis(),\n});\n\nexport { createAxis, createAxisDelta, createBox, createDelta };\n","function eachAxis(callback) {\n    return [callback(\"x\"), callback(\"y\")];\n}\n\nexport { eachAxis };\n","/**\n * Bounding boxes tend to be defined as top, left, right, bottom. For various operations\n * it's easier to consider each axis individually. This function returns a bounding box\n * as a map of single-axis min/max values.\n */\nfunction convertBoundingBoxToBox({ top, left, right, bottom, }) {\n    return {\n        x: { min: left, max: right },\n        y: { min: top, max: bottom },\n    };\n}\nfunction convertBoxToBoundingBox({ x, y }) {\n    return { top: y.min, right: x.max, bottom: y.max, left: x.min };\n}\n/**\n * Applies a TransformPoint function to a bounding box. TransformPoint is usually a function\n * provided by Framer to allow measured points to be corrected for device scaling. This is used\n * when measuring DOM elements and DOM event points.\n */\nfunction transformBoxPoints(point, transformPoint) {\n    if (!transformPoint)\n        return point;\n    const topLeft = transformPoint({ x: point.left, y: point.top });\n    const bottomRight = transformPoint({ x: point.right, y: point.bottom });\n    return {\n        top: topLeft.y,\n        left: topLeft.x,\n        bottom: bottomRight.y,\n        right: bottomRight.x,\n    };\n}\n\nexport { convertBoundingBoxToBox, convertBoxToBoundingBox, transformBoxPoints };\n","function isIdentityScale(scale) {\n    return scale === undefined || scale === 1;\n}\nfunction hasScale({ scale, scaleX, scaleY }) {\n    return (!isIdentityScale(scale) ||\n        !isIdentityScale(scaleX) ||\n        !isIdentityScale(scaleY));\n}\nfunction hasTransform(values) {\n    return (hasScale(values) ||\n        has2DTranslate(values) ||\n        values.z ||\n        values.rotate ||\n        values.rotateX ||\n        values.rotateY ||\n        values.skewX ||\n        values.skewY);\n}\nfunction has2DTranslate(values) {\n    return is2DTranslate(values.x) || is2DTranslate(values.y);\n}\nfunction is2DTranslate(value) {\n    return value && value !== \"0%\";\n}\n\nexport { has2DTranslate, hasScale, hasTransform };\n","import { mixNumber } from '../../utils/mix/number.mjs';\nimport { hasTransform } from '../utils/has-transform.mjs';\n\n/**\n * Scales a point based on a factor and an originPoint\n */\nfunction scalePoint(point, scale, originPoint) {\n    const distanceFromOrigin = point - originPoint;\n    const scaled = scale * distanceFromOrigin;\n    return originPoint + scaled;\n}\n/**\n * Applies a translate/scale delta to a point\n */\nfunction applyPointDelta(point, translate, scale, originPoint, boxScale) {\n    if (boxScale !== undefined) {\n        point = scalePoint(point, boxScale, originPoint);\n    }\n    return scalePoint(point, scale, originPoint) + translate;\n}\n/**\n * Applies a translate/scale delta to an axis\n */\nfunction applyAxisDelta(axis, translate = 0, scale = 1, originPoint, boxScale) {\n    axis.min = applyPointDelta(axis.min, translate, scale, originPoint, boxScale);\n    axis.max = applyPointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Applies a translate/scale delta to a box\n */\nfunction applyBoxDelta(box, { x, y }) {\n    applyAxisDelta(box.x, x.translate, x.scale, x.originPoint);\n    applyAxisDelta(box.y, y.translate, y.scale, y.originPoint);\n}\n/**\n * Apply a tree of deltas to a box. We do this to calculate the effect of all the transforms\n * in a tree upon our box before then calculating how to project it into our desired viewport-relative box\n *\n * This is the final nested loop within updateLayoutDelta for future refactoring\n */\nfunction applyTreeDeltas(box, treeScale, treePath, isSharedTransition = false) {\n    const treeLength = treePath.length;\n    if (!treeLength)\n        return;\n    // Reset the treeScale\n    treeScale.x = treeScale.y = 1;\n    let node;\n    let delta;\n    for (let i = 0; i < treeLength; i++) {\n        node = treePath[i];\n        delta = node.projectionDelta;\n        /**\n         * TODO: Prefer to remove this, but currently we have motion components with\n         * display: contents in Framer.\n         */\n        const instance = node.instance;\n        if (instance &&\n            instance.style &&\n            instance.style.display === \"contents\") {\n            continue;\n        }\n        if (isSharedTransition &&\n            node.options.layoutScroll &&\n            node.scroll &&\n            node !== node.root) {\n            transformBox(box, {\n                x: -node.scroll.offset.x,\n                y: -node.scroll.offset.y,\n            });\n        }\n        if (delta) {\n            // Incoporate each ancestor's scale into a culmulative treeScale for this component\n            treeScale.x *= delta.x.scale;\n            treeScale.y *= delta.y.scale;\n            // Apply each ancestor's calculated delta into this component's recorded layout box\n            applyBoxDelta(box, delta);\n        }\n        if (isSharedTransition && hasTransform(node.latestValues)) {\n            transformBox(box, node.latestValues);\n        }\n    }\n    /**\n     * Snap tree scale back to 1 if it's within a non-perceivable threshold.\n     * This will help reduce useless scales getting rendered.\n     */\n    treeScale.x = snapToDefault(treeScale.x);\n    treeScale.y = snapToDefault(treeScale.y);\n}\nfunction snapToDefault(scale) {\n    if (Number.isInteger(scale))\n        return scale;\n    return scale > 1.0000000000001 || scale < 0.999999999999 ? scale : 1;\n}\nfunction translateAxis(axis, distance) {\n    axis.min = axis.min + distance;\n    axis.max = axis.max + distance;\n}\n/**\n * Apply a transform to an axis from the latest resolved motion values.\n * This function basically acts as a bridge between a flat motion value map\n * and applyAxisDelta\n */\nfunction transformAxis(axis, transforms, [key, scaleKey, originKey]) {\n    const axisOrigin = transforms[originKey] !== undefined ? transforms[originKey] : 0.5;\n    const originPoint = mixNumber(axis.min, axis.max, axisOrigin);\n    // Apply the axis delta to the final axis\n    applyAxisDelta(axis, transforms[key], transforms[scaleKey], originPoint, transforms.scale);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\nconst xKeys = [\"x\", \"scaleX\", \"originX\"];\nconst yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Apply a transform to a box from the latest resolved motion values.\n */\nfunction transformBox(box, transform) {\n    transformAxis(box.x, transform, xKeys);\n    transformAxis(box.y, transform, yKeys);\n}\n\nexport { applyAxisDelta, applyBoxDelta, applyPointDelta, applyTreeDeltas, scalePoint, transformAxis, transformBox, translateAxis };\n","import { convertBoundingBoxToBox, transformBoxPoints } from '../geometry/conversion.mjs';\nimport { translateAxis } from '../geometry/delta-apply.mjs';\n\nfunction measureViewportBox(instance, transformPoint) {\n    return convertBoundingBoxToBox(transformBoxPoints(instance.getBoundingClientRect(), transformPoint));\n}\nfunction measurePageBox(element, rootProjectionNode, transformPagePoint) {\n    const viewportBox = measureViewportBox(element, transformPagePoint);\n    const { scroll } = rootProjectionNode;\n    if (scroll) {\n        translateAxis(viewportBox.x, scroll.offset.x);\n        translateAxis(viewportBox.y, scroll.offset.y);\n    }\n    return viewportBox;\n}\n\nexport { measurePageBox, measureViewportBox };\n","// Fixes https://github.com/framer/motion/issues/2270\nconst getContextWindow = ({ current }) => {\n    return current ? current.ownerDocument.defaultView : null;\n};\n\nexport { getContextWindow };\n","import { invariant } from '../../utils/errors.mjs';\nimport { PanSession } from '../pan/PanSession.mjs';\nimport { getGlobalLock } from './utils/lock.mjs';\nimport { isRefObject } from '../../utils/is-ref-object.mjs';\nimport { addPointerEvent } from '../../events/add-pointer-event.mjs';\nimport { applyConstraints, calcRelativeConstraints, resolveDragElastic, rebaseAxisConstraints, calcViewportConstraints, calcOrigin, defaultElastic } from './utils/constraints.mjs';\nimport { createBox } from '../../projection/geometry/models.mjs';\nimport { eachAxis } from '../../projection/utils/each-axis.mjs';\nimport { measurePageBox } from '../../projection/utils/measure.mjs';\nimport { extractEventInfo } from '../../events/event-info.mjs';\nimport { convertBoxToBoundingBox, convertBoundingBoxToBox } from '../../projection/geometry/conversion.mjs';\nimport { addDomEvent } from '../../events/add-dom-event.mjs';\nimport { calcLength } from '../../projection/geometry/delta-calc.mjs';\nimport { mixNumber } from '../../utils/mix/number.mjs';\nimport { percent } from '../../value/types/numbers/units.mjs';\nimport { animateMotionValue } from '../../animation/interfaces/motion-value.mjs';\nimport { getContextWindow } from '../../utils/get-context-window.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\n\nconst elementDragControls = new WeakMap();\n/**\n *\n */\n// let latestPointerEvent: PointerEvent\nclass VisualElementDragControls {\n    constructor(visualElement) {\n        // This is a reference to the global drag gesture lock, ensuring only one component\n        // can \"capture\" the drag of one or both axes.\n        // TODO: Look into moving this into pansession?\n        this.openGlobalLock = null;\n        this.isDragging = false;\n        this.currentDirection = null;\n        this.originPoint = { x: 0, y: 0 };\n        /**\n         * The permitted boundaries of travel, in pixels.\n         */\n        this.constraints = false;\n        this.hasMutatedConstraints = false;\n        /**\n         * The per-axis resolved elastic values.\n         */\n        this.elastic = createBox();\n        this.visualElement = visualElement;\n    }\n    start(originEvent, { snapToCursor = false } = {}) {\n        /**\n         * Don't start dragging if this component is exiting\n         */\n        const { presenceContext } = this.visualElement;\n        if (presenceContext && presenceContext.isPresent === false)\n            return;\n        const onSessionStart = (event) => {\n            const { dragSnapToOrigin } = this.getProps();\n            // Stop or pause any animations on both axis values immediately. This allows the user to throw and catch\n            // the component.\n            dragSnapToOrigin ? this.pauseAnimation() : this.stopAnimation();\n            if (snapToCursor) {\n                this.snapToCursor(extractEventInfo(event, \"page\").point);\n            }\n        };\n        const onStart = (event, info) => {\n            // Attempt to grab the global drag gesture lock - maybe make this part of PanSession\n            const { drag, dragPropagation, onDragStart } = this.getProps();\n            if (drag && !dragPropagation) {\n                if (this.openGlobalLock)\n                    this.openGlobalLock();\n                this.openGlobalLock = getGlobalLock(drag);\n                // If we don 't have the lock, don't start dragging\n                if (!this.openGlobalLock)\n                    return;\n            }\n            this.isDragging = true;\n            this.currentDirection = null;\n            this.resolveConstraints();\n            if (this.visualElement.projection) {\n                this.visualElement.projection.isAnimationBlocked = true;\n                this.visualElement.projection.target = undefined;\n            }\n            /**\n             * Record gesture origin\n             */\n            eachAxis((axis) => {\n                let current = this.getAxisMotionValue(axis).get() || 0;\n                /**\n                 * If the MotionValue is a percentage value convert to px\n                 */\n                if (percent.test(current)) {\n                    const { projection } = this.visualElement;\n                    if (projection && projection.layout) {\n                        const measuredAxis = projection.layout.layoutBox[axis];\n                        if (measuredAxis) {\n                            const length = calcLength(measuredAxis);\n                            current = length * (parseFloat(current) / 100);\n                        }\n                    }\n                }\n                this.originPoint[axis] = current;\n            });\n            // Fire onDragStart event\n            if (onDragStart) {\n                frame.postRender(() => onDragStart(event, info));\n            }\n            const { animationState } = this.visualElement;\n            animationState && animationState.setActive(\"whileDrag\", true);\n        };\n        const onMove = (event, info) => {\n            // latestPointerEvent = event\n            const { dragPropagation, dragDirectionLock, onDirectionLock, onDrag, } = this.getProps();\n            // If we didn't successfully receive the gesture lock, early return.\n            if (!dragPropagation && !this.openGlobalLock)\n                return;\n            const { offset } = info;\n            // Attempt to detect drag direction if directionLock is true\n            if (dragDirectionLock && this.currentDirection === null) {\n                this.currentDirection = getCurrentDirection(offset);\n                // If we've successfully set a direction, notify listener\n                if (this.currentDirection !== null) {\n                    onDirectionLock && onDirectionLock(this.currentDirection);\n                }\n                return;\n            }\n            // Update each point with the latest position\n            this.updateAxis(\"x\", info.point, offset);\n            this.updateAxis(\"y\", info.point, offset);\n            /**\n             * Ideally we would leave the renderer to fire naturally at the end of\n             * this frame but if the element is about to change layout as the result\n             * of a re-render we want to ensure the browser can read the latest\n             * bounding box to ensure the pointer and element don't fall out of sync.\n             */\n            this.visualElement.render();\n            /**\n             * This must fire after the render call as it might trigger a state\n             * change which itself might trigger a layout update.\n             */\n            onDrag && onDrag(event, info);\n        };\n        const onSessionEnd = (event, info) => this.stop(event, info);\n        const resumeAnimation = () => eachAxis((axis) => {\n            var _a;\n            return this.getAnimationState(axis) === \"paused\" &&\n                ((_a = this.getAxisMotionValue(axis).animation) === null || _a === void 0 ? void 0 : _a.play());\n        });\n        const { dragSnapToOrigin } = this.getProps();\n        this.panSession = new PanSession(originEvent, {\n            onSessionStart,\n            onStart,\n            onMove,\n            onSessionEnd,\n            resumeAnimation,\n        }, {\n            transformPagePoint: this.visualElement.getTransformPagePoint(),\n            dragSnapToOrigin,\n            contextWindow: getContextWindow(this.visualElement),\n        });\n    }\n    stop(event, info) {\n        const isDragging = this.isDragging;\n        this.cancel();\n        if (!isDragging)\n            return;\n        const { velocity } = info;\n        this.startAnimation(velocity);\n        const { onDragEnd } = this.getProps();\n        if (onDragEnd) {\n            frame.postRender(() => onDragEnd(event, info));\n        }\n    }\n    cancel() {\n        this.isDragging = false;\n        const { projection, animationState } = this.visualElement;\n        if (projection) {\n            projection.isAnimationBlocked = false;\n        }\n        this.panSession && this.panSession.end();\n        this.panSession = undefined;\n        const { dragPropagation } = this.getProps();\n        if (!dragPropagation && this.openGlobalLock) {\n            this.openGlobalLock();\n            this.openGlobalLock = null;\n        }\n        animationState && animationState.setActive(\"whileDrag\", false);\n    }\n    updateAxis(axis, _point, offset) {\n        const { drag } = this.getProps();\n        // If we're not dragging this axis, do an early return.\n        if (!offset || !shouldDrag(axis, drag, this.currentDirection))\n            return;\n        const axisValue = this.getAxisMotionValue(axis);\n        let next = this.originPoint[axis] + offset[axis];\n        // Apply constraints\n        if (this.constraints && this.constraints[axis]) {\n            next = applyConstraints(next, this.constraints[axis], this.elastic[axis]);\n        }\n        axisValue.set(next);\n    }\n    resolveConstraints() {\n        var _a;\n        const { dragConstraints, dragElastic } = this.getProps();\n        const layout = this.visualElement.projection &&\n            !this.visualElement.projection.layout\n            ? this.visualElement.projection.measure(false)\n            : (_a = this.visualElement.projection) === null || _a === void 0 ? void 0 : _a.layout;\n        const prevConstraints = this.constraints;\n        if (dragConstraints && isRefObject(dragConstraints)) {\n            if (!this.constraints) {\n                this.constraints = this.resolveRefConstraints();\n            }\n        }\n        else {\n            if (dragConstraints && layout) {\n                this.constraints = calcRelativeConstraints(layout.layoutBox, dragConstraints);\n            }\n            else {\n                this.constraints = false;\n            }\n        }\n        this.elastic = resolveDragElastic(dragElastic);\n        /**\n         * If we're outputting to external MotionValues, we want to rebase the measured constraints\n         * from viewport-relative to component-relative.\n         */\n        if (prevConstraints !== this.constraints &&\n            layout &&\n            this.constraints &&\n            !this.hasMutatedConstraints) {\n            eachAxis((axis) => {\n                if (this.constraints !== false &&\n                    this.getAxisMotionValue(axis)) {\n                    this.constraints[axis] = rebaseAxisConstraints(layout.layoutBox[axis], this.constraints[axis]);\n                }\n            });\n        }\n    }\n    resolveRefConstraints() {\n        const { dragConstraints: constraints, onMeasureDragConstraints } = this.getProps();\n        if (!constraints || !isRefObject(constraints))\n            return false;\n        const constraintsElement = constraints.current;\n        invariant(constraintsElement !== null, \"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.\");\n        const { projection } = this.visualElement;\n        // TODO\n        if (!projection || !projection.layout)\n            return false;\n        const constraintsBox = measurePageBox(constraintsElement, projection.root, this.visualElement.getTransformPagePoint());\n        let measuredConstraints = calcViewportConstraints(projection.layout.layoutBox, constraintsBox);\n        /**\n         * If there's an onMeasureDragConstraints listener we call it and\n         * if different constraints are returned, set constraints to that\n         */\n        if (onMeasureDragConstraints) {\n            const userConstraints = onMeasureDragConstraints(convertBoxToBoundingBox(measuredConstraints));\n            this.hasMutatedConstraints = !!userConstraints;\n            if (userConstraints) {\n                measuredConstraints = convertBoundingBoxToBox(userConstraints);\n            }\n        }\n        return measuredConstraints;\n    }\n    startAnimation(velocity) {\n        const { drag, dragMomentum, dragElastic, dragTransition, dragSnapToOrigin, onDragTransitionEnd, } = this.getProps();\n        const constraints = this.constraints || {};\n        const momentumAnimations = eachAxis((axis) => {\n            if (!shouldDrag(axis, drag, this.currentDirection)) {\n                return;\n            }\n            let transition = (constraints && constraints[axis]) || {};\n            if (dragSnapToOrigin)\n                transition = { min: 0, max: 0 };\n            /**\n             * Overdamp the boundary spring if `dragElastic` is disabled. There's still a frame\n             * of spring animations so we should look into adding a disable spring option to `inertia`.\n             * We could do something here where we affect the `bounceStiffness` and `bounceDamping`\n             * using the value of `dragElastic`.\n             */\n            const bounceStiffness = dragElastic ? 200 : 1000000;\n            const bounceDamping = dragElastic ? 40 : 10000000;\n            const inertia = {\n                type: \"inertia\",\n                velocity: dragMomentum ? velocity[axis] : 0,\n                bounceStiffness,\n                bounceDamping,\n                timeConstant: 750,\n                restDelta: 1,\n                restSpeed: 10,\n                ...dragTransition,\n                ...transition,\n            };\n            // If we're not animating on an externally-provided `MotionValue` we can use the\n            // component's animation controls which will handle interactions with whileHover (etc),\n            // otherwise we just have to animate the `MotionValue` itself.\n            return this.startAxisValueAnimation(axis, inertia);\n        });\n        // Run all animations and then resolve the new drag constraints.\n        return Promise.all(momentumAnimations).then(onDragTransitionEnd);\n    }\n    startAxisValueAnimation(axis, transition) {\n        const axisValue = this.getAxisMotionValue(axis);\n        return axisValue.start(animateMotionValue(axis, axisValue, 0, transition, this.visualElement));\n    }\n    stopAnimation() {\n        eachAxis((axis) => this.getAxisMotionValue(axis).stop());\n    }\n    pauseAnimation() {\n        eachAxis((axis) => { var _a; return (_a = this.getAxisMotionValue(axis).animation) === null || _a === void 0 ? void 0 : _a.pause(); });\n    }\n    getAnimationState(axis) {\n        var _a;\n        return (_a = this.getAxisMotionValue(axis).animation) === null || _a === void 0 ? void 0 : _a.state;\n    }\n    /**\n     * Drag works differently depending on which props are provided.\n     *\n     * - If _dragX and _dragY are provided, we output the gesture delta directly to those motion values.\n     * - Otherwise, we apply the delta to the x/y motion values.\n     */\n    getAxisMotionValue(axis) {\n        const dragKey = `_drag${axis.toUpperCase()}`;\n        const props = this.visualElement.getProps();\n        const externalMotionValue = props[dragKey];\n        return externalMotionValue\n            ? externalMotionValue\n            : this.visualElement.getValue(axis, (props.initial\n                ? props.initial[axis]\n                : undefined) || 0);\n    }\n    snapToCursor(point) {\n        eachAxis((axis) => {\n            const { drag } = this.getProps();\n            // If we're not dragging this axis, do an early return.\n            if (!shouldDrag(axis, drag, this.currentDirection))\n                return;\n            const { projection } = this.visualElement;\n            const axisValue = this.getAxisMotionValue(axis);\n            if (projection && projection.layout) {\n                const { min, max } = projection.layout.layoutBox[axis];\n                axisValue.set(point[axis] - mixNumber(min, max, 0.5));\n            }\n        });\n    }\n    /**\n     * When the viewport resizes we want to check if the measured constraints\n     * have changed and, if so, reposition the element within those new constraints\n     * relative to where it was before the resize.\n     */\n    scalePositionWithinConstraints() {\n        if (!this.visualElement.current)\n            return;\n        const { drag, dragConstraints } = this.getProps();\n        const { projection } = this.visualElement;\n        if (!isRefObject(dragConstraints) || !projection || !this.constraints)\n            return;\n        /**\n         * Stop current animations as there can be visual glitching if we try to do\n         * this mid-animation\n         */\n        this.stopAnimation();\n        /**\n         * Record the relative position of the dragged element relative to the\n         * constraints box and save as a progress value.\n         */\n        const boxProgress = { x: 0, y: 0 };\n        eachAxis((axis) => {\n            const axisValue = this.getAxisMotionValue(axis);\n            if (axisValue && this.constraints !== false) {\n                const latest = axisValue.get();\n                boxProgress[axis] = calcOrigin({ min: latest, max: latest }, this.constraints[axis]);\n            }\n        });\n        /**\n         * Update the layout of this element and resolve the latest drag constraints\n         */\n        const { transformTemplate } = this.visualElement.getProps();\n        this.visualElement.current.style.transform = transformTemplate\n            ? transformTemplate({}, \"\")\n            : \"none\";\n        projection.root && projection.root.updateScroll();\n        projection.updateLayout();\n        this.resolveConstraints();\n        /**\n         * For each axis, calculate the current progress of the layout axis\n         * within the new constraints.\n         */\n        eachAxis((axis) => {\n            if (!shouldDrag(axis, drag, null))\n                return;\n            /**\n             * Calculate a new transform based on the previous box progress\n             */\n            const axisValue = this.getAxisMotionValue(axis);\n            const { min, max } = this.constraints[axis];\n            axisValue.set(mixNumber(min, max, boxProgress[axis]));\n        });\n    }\n    addListeners() {\n        if (!this.visualElement.current)\n            return;\n        elementDragControls.set(this.visualElement, this);\n        const element = this.visualElement.current;\n        /**\n         * Attach a pointerdown event listener on this DOM element to initiate drag tracking.\n         */\n        const stopPointerListener = addPointerEvent(element, \"pointerdown\", (event) => {\n            const { drag, dragListener = true } = this.getProps();\n            drag && dragListener && this.start(event);\n        });\n        const measureDragConstraints = () => {\n            const { dragConstraints } = this.getProps();\n            if (isRefObject(dragConstraints) && dragConstraints.current) {\n                this.constraints = this.resolveRefConstraints();\n            }\n        };\n        const { projection } = this.visualElement;\n        const stopMeasureLayoutListener = projection.addEventListener(\"measure\", measureDragConstraints);\n        if (projection && !projection.layout) {\n            projection.root && projection.root.updateScroll();\n            projection.updateLayout();\n        }\n        frame.read(measureDragConstraints);\n        /**\n         * Attach a window resize listener to scale the draggable target within its defined\n         * constraints as the window resizes.\n         */\n        const stopResizeListener = addDomEvent(window, \"resize\", () => this.scalePositionWithinConstraints());\n        /**\n         * If the element's layout changes, calculate the delta and apply that to\n         * the drag gesture's origin point.\n         */\n        const stopLayoutUpdateListener = projection.addEventListener(\"didUpdate\", (({ delta, hasLayoutChanged }) => {\n            if (this.isDragging && hasLayoutChanged) {\n                eachAxis((axis) => {\n                    const motionValue = this.getAxisMotionValue(axis);\n                    if (!motionValue)\n                        return;\n                    this.originPoint[axis] += delta[axis].translate;\n                    motionValue.set(motionValue.get() + delta[axis].translate);\n                });\n                this.visualElement.render();\n            }\n        }));\n        return () => {\n            stopResizeListener();\n            stopPointerListener();\n            stopMeasureLayoutListener();\n            stopLayoutUpdateListener && stopLayoutUpdateListener();\n        };\n    }\n    getProps() {\n        const props = this.visualElement.getProps();\n        const { drag = false, dragDirectionLock = false, dragPropagation = false, dragConstraints = false, dragElastic = defaultElastic, dragMomentum = true, } = props;\n        return {\n            ...props,\n            drag,\n            dragDirectionLock,\n            dragPropagation,\n            dragConstraints,\n            dragElastic,\n            dragMomentum,\n        };\n    }\n}\nfunction shouldDrag(direction, drag, currentDirection) {\n    return ((drag === true || drag === direction) &&\n        (currentDirection === null || currentDirection === direction));\n}\n/**\n * Based on an x/y offset determine the current drag direction. If both axis' offsets are lower\n * than the provided threshold, return `null`.\n *\n * @param offset - The x/y offset from origin.\n * @param lockThreshold - (Optional) - the minimum absolute offset before we can determine a drag direction.\n */\nfunction getCurrentDirection(offset, lockThreshold = 10) {\n    let direction = null;\n    if (Math.abs(offset.y) > lockThreshold) {\n        direction = \"y\";\n    }\n    else if (Math.abs(offset.x) > lockThreshold) {\n        direction = \"x\";\n    }\n    return direction;\n}\n\nexport { VisualElementDragControls, elementDragControls };\n","import { Feature } from '../../motion/features/Feature.mjs';\nimport { noop } from '../../utils/noop.mjs';\nimport { VisualElementDragControls } from './VisualElementDragControls.mjs';\n\nclass DragGesture extends Feature {\n    constructor(node) {\n        super(node);\n        this.removeGroupControls = noop;\n        this.removeListeners = noop;\n        this.controls = new VisualElementDragControls(node);\n    }\n    mount() {\n        // If we've been provided a DragControls for manual control over the drag gesture,\n        // subscribe this component to it on mount.\n        const { dragControls } = this.node.getProps();\n        if (dragControls) {\n            this.removeGroupControls = dragControls.subscribe(this.controls);\n        }\n        this.removeListeners = this.controls.addListeners() || noop;\n    }\n    unmount() {\n        this.removeGroupControls();\n        this.removeListeners();\n    }\n}\n\nexport { DragGesture };\n","import { PanSession } from './PanSession.mjs';\nimport { addPointerEvent } from '../../events/add-pointer-event.mjs';\nimport { Feature } from '../../motion/features/Feature.mjs';\nimport { noop } from '../../utils/noop.mjs';\nimport { getContextWindow } from '../../utils/get-context-window.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\n\nconst asyncHandler = (handler) => (event, info) => {\n    if (handler) {\n        frame.postRender(() => handler(event, info));\n    }\n};\nclass PanGesture extends Feature {\n    constructor() {\n        super(...arguments);\n        this.removePointerDownListener = noop;\n    }\n    onPointerDown(pointerDownEvent) {\n        this.session = new PanSession(pointerDownEvent, this.createPanHandlers(), {\n            transformPagePoint: this.node.getTransformPagePoint(),\n            contextWindow: getContextWindow(this.node),\n        });\n    }\n    createPanHandlers() {\n        const { onPanSessionStart, onPanStart, onPan, onPanEnd } = this.node.getProps();\n        return {\n            onSessionStart: asyncHandler(onPanSessionStart),\n            onStart: asyncHandler(onPanStart),\n            onMove: onPan,\n            onEnd: (event, info) => {\n                delete this.session;\n                if (onPanEnd) {\n                    frame.postRender(() => onPanEnd(event, info));\n                }\n            },\n        };\n    }\n    mount() {\n        this.removePointerDownListener = addPointerEvent(this.node.current, \"pointerdown\", (event) => this.onPointerDown(event));\n    }\n    update() {\n        this.session && this.session.updateHandlers(this.createPanHandlers());\n    }\n    unmount() {\n        this.removePointerDownListener();\n        this.session && this.session.end();\n    }\n}\n\nexport { PanGesture };\n","import { useContext, useId, useEffect } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\n\n/**\n * When a component is the child of `AnimatePresence`, it can use `usePresence`\n * to access information about whether it's still present in the React tree.\n *\n * ```jsx\n * import { usePresence } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const [isPresent, safeToRemove] = usePresence()\n *\n *   useEffect(() => {\n *     !isPresent && setTimeout(safeToRemove, 1000)\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * If `isPresent` is `false`, it means that a component has been removed the tree, but\n * `AnimatePresence` won't really remove it until `safeToRemove` has been called.\n *\n * @public\n */\nfunction usePresence() {\n    const context = useContext(PresenceContext);\n    if (context === null)\n        return [true, null];\n    const { isPresent, onExitComplete, register } = context;\n    // It's safe to call the following hooks conditionally (after an early return) because the context will always\n    // either be null or non-null for the lifespan of the component.\n    const id = useId();\n    useEffect(() => register(id), []);\n    const safeToRemove = () => onExitComplete && onExitComplete(id);\n    return !isPresent && onExitComplete ? [false, safeToRemove] : [true];\n}\n/**\n * Similar to `usePresence`, except `useIsPresent` simply returns whether or not the component is present.\n * There is no `safeToRemove` function.\n *\n * ```jsx\n * import { useIsPresent } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const isPresent = useIsPresent()\n *\n *   useEffect(() => {\n *     !isPresent && console.log(\"I've been removed!\")\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * @public\n */\nfunction useIsPresent() {\n    return isPresent(useContext(PresenceContext));\n}\nfunction isPresent(context) {\n    return context === null ? true : context.isPresent;\n}\n\nexport { isPresent, useIsPresent, usePresence };\n","/**\n * This should only ever be modified on the client otherwise it'll\n * persist through server requests. If we need instanced states we\n * could lazy-init via root.\n */\nconst globalProjectionState = {\n    /**\n     * Global flag as to whether the tree has animated since the last time\n     * we resized the window\n     */\n    hasAnimatedSinceResize: true,\n    /**\n     * We set this to true once, on the first update. Any nodes added to the tree beyond that\n     * update will be given a `data-projection-id` attribute.\n     */\n    hasEverUpdated: false,\n};\n\nexport { globalProjectionState };\n","import { px } from '../../value/types/numbers/units.mjs';\n\nfunction pixelsToPercent(pixels, axis) {\n    if (axis.max === axis.min)\n        return 0;\n    return (pixels / (axis.max - axis.min)) * 100;\n}\n/**\n * We always correct borderRadius as a percentage rather than pixels to reduce paints.\n * For example, if you are projecting a box that is 100px wide with a 10px borderRadius\n * into a box that is 200px wide with a 20px borderRadius, that is actually a 10%\n * borderRadius in both states. If we animate between the two in pixels that will trigger\n * a paint each time. If we animate between the two in percentage we'll avoid a paint.\n */\nconst correctBorderRadius = {\n    correct: (latest, node) => {\n        if (!node.target)\n            return latest;\n        /**\n         * If latest is a string, if it's a percentage we can return immediately as it's\n         * going to be stretched appropriately. Otherwise, if it's a pixel, convert it to a number.\n         */\n        if (typeof latest === \"string\") {\n            if (px.test(latest)) {\n                latest = parseFloat(latest);\n            }\n            else {\n                return latest;\n            }\n        }\n        /**\n         * If latest is a number, it's a pixel value. We use the current viewportBox to calculate that\n         * pixel value as a percentage of each axis\n         */\n        const x = pixelsToPercent(latest, node.target.x);\n        const y = pixelsToPercent(latest, node.target.y);\n        return `${x}% ${y}%`;\n    },\n};\n\nexport { correctBorderRadius, pixelsToPercent };\n","import { mixNumber } from '../../utils/mix/number.mjs';\nimport { complex } from '../../value/types/complex/index.mjs';\n\nconst correctBoxShadow = {\n    correct: (latest, { treeScale, projectionDelta }) => {\n        const original = latest;\n        const shadow = complex.parse(latest);\n        // TODO: Doesn't support multiple shadows\n        if (shadow.length > 5)\n            return original;\n        const template = complex.createTransformer(latest);\n        const offset = typeof shadow[0] !== \"number\" ? 1 : 0;\n        // Calculate the overall context scale\n        const xScale = projectionDelta.x.scale * treeScale.x;\n        const yScale = projectionDelta.y.scale * treeScale.y;\n        shadow[0 + offset] /= xScale;\n        shadow[1 + offset] /= yScale;\n        /**\n         * Ideally we'd correct x and y scales individually, but because blur and\n         * spread apply to both we have to take a scale average and apply that instead.\n         * We could potentially improve the outcome of this by incorporating the ratio between\n         * the two scales.\n         */\n        const averageScale = mixNumber(xScale, yScale, 0.5);\n        // Blur\n        if (typeof shadow[2 + offset] === \"number\")\n            shadow[2 + offset] /= averageScale;\n        // Spread\n        if (typeof shadow[3 + offset] === \"number\")\n            shadow[3 + offset] /= averageScale;\n        return template(shadow);\n    },\n};\n\nexport { correctBoxShadow };\n","import { jsx } from 'react/jsx-runtime';\nimport { useContext, Component } from 'react';\nimport { usePresence } from '../../../components/AnimatePresence/use-presence.mjs';\nimport { LayoutGroupContext } from '../../../context/LayoutGroupContext.mjs';\nimport { SwitchLayoutGroupContext } from '../../../context/SwitchLayoutGroupContext.mjs';\nimport { globalProjectionState } from '../../../projection/node/state.mjs';\nimport { correctBorderRadius } from '../../../projection/styles/scale-border-radius.mjs';\nimport { correctBoxShadow } from '../../../projection/styles/scale-box-shadow.mjs';\nimport { addScaleCorrector } from '../../../projection/styles/scale-correction.mjs';\nimport { microtask } from '../../../frameloop/microtask.mjs';\nimport { frame } from '../../../frameloop/frame.mjs';\n\nclass MeasureLayoutWithContext extends Component {\n    /**\n     * This only mounts projection nodes for components that\n     * need measuring, we might want to do it for all components\n     * in order to incorporate transforms\n     */\n    componentDidMount() {\n        const { visualElement, layoutGroup, switchLayoutGroup, layoutId } = this.props;\n        const { projection } = visualElement;\n        addScaleCorrector(defaultScaleCorrectors);\n        if (projection) {\n            if (layoutGroup.group)\n                layoutGroup.group.add(projection);\n            if (switchLayoutGroup && switchLayoutGroup.register && layoutId) {\n                switchLayoutGroup.register(projection);\n            }\n            projection.root.didUpdate();\n            projection.addEventListener(\"animationComplete\", () => {\n                this.safeToRemove();\n            });\n            projection.setOptions({\n                ...projection.options,\n                onExitComplete: () => this.safeToRemove(),\n            });\n        }\n        globalProjectionState.hasEverUpdated = true;\n    }\n    getSnapshotBeforeUpdate(prevProps) {\n        const { layoutDependency, visualElement, drag, isPresent } = this.props;\n        const projection = visualElement.projection;\n        if (!projection)\n            return null;\n        /**\n         * TODO: We use this data in relegate to determine whether to\n         * promote a previous element. There's no guarantee its presence data\n         * will have updated by this point - if a bug like this arises it will\n         * have to be that we markForRelegation and then find a new lead some other way,\n         * perhaps in didUpdate\n         */\n        projection.isPresent = isPresent;\n        if (drag ||\n            prevProps.layoutDependency !== layoutDependency ||\n            layoutDependency === undefined) {\n            projection.willUpdate();\n        }\n        else {\n            this.safeToRemove();\n        }\n        if (prevProps.isPresent !== isPresent) {\n            if (isPresent) {\n                projection.promote();\n            }\n            else if (!projection.relegate()) {\n                /**\n                 * If there's another stack member taking over from this one,\n                 * it's in charge of the exit animation and therefore should\n                 * be in charge of the safe to remove. Otherwise we call it here.\n                 */\n                frame.postRender(() => {\n                    const stack = projection.getStack();\n                    if (!stack || !stack.members.length) {\n                        this.safeToRemove();\n                    }\n                });\n            }\n        }\n        return null;\n    }\n    componentDidUpdate() {\n        const { projection } = this.props.visualElement;\n        if (projection) {\n            projection.root.didUpdate();\n            microtask.postRender(() => {\n                if (!projection.currentAnimation && projection.isLead()) {\n                    this.safeToRemove();\n                }\n            });\n        }\n    }\n    componentWillUnmount() {\n        const { visualElement, layoutGroup, switchLayoutGroup: promoteContext, } = this.props;\n        const { projection } = visualElement;\n        if (projection) {\n            projection.scheduleCheckAfterUnmount();\n            if (layoutGroup && layoutGroup.group)\n                layoutGroup.group.remove(projection);\n            if (promoteContext && promoteContext.deregister)\n                promoteContext.deregister(projection);\n        }\n    }\n    safeToRemove() {\n        const { safeToRemove } = this.props;\n        safeToRemove && safeToRemove();\n    }\n    render() {\n        return null;\n    }\n}\nfunction MeasureLayout(props) {\n    const [isPresent, safeToRemove] = usePresence();\n    const layoutGroup = useContext(LayoutGroupContext);\n    return (jsx(MeasureLayoutWithContext, { ...props, layoutGroup: layoutGroup, switchLayoutGroup: useContext(SwitchLayoutGroupContext), isPresent: isPresent, safeToRemove: safeToRemove }));\n}\nconst defaultScaleCorrectors = {\n    borderRadius: {\n        ...correctBorderRadius,\n        applyTo: [\n            \"borderTopLeftRadius\",\n            \"borderTopRightRadius\",\n            \"borderBottomLeftRadius\",\n            \"borderBottomRightRadius\",\n        ],\n    },\n    borderTopLeftRadius: correctBorderRadius,\n    borderTopRightRadius: correctBorderRadius,\n    borderBottomLeftRadius: correctBorderRadius,\n    borderBottomRightRadius: correctBorderRadius,\n    boxShadow: correctBoxShadow,\n};\n\nexport { MeasureLayout };\n","import { circOut } from '../../easing/circ.mjs';\nimport { progress } from '../../utils/progress.mjs';\nimport { mixNumber } from '../../utils/mix/number.mjs';\nimport { noop } from '../../utils/noop.mjs';\nimport { percent, px } from '../../value/types/numbers/units.mjs';\n\nconst borders = [\"TopLeft\", \"TopRight\", \"BottomLeft\", \"BottomRight\"];\nconst numBorders = borders.length;\nconst asNumber = (value) => typeof value === \"string\" ? parseFloat(value) : value;\nconst isPx = (value) => typeof value === \"number\" || px.test(value);\nfunction mixValues(target, follow, lead, progress, shouldCrossfadeOpacity, isOnlyMember) {\n    if (shouldCrossfadeOpacity) {\n        target.opacity = mixNumber(0, \n        // TODO Reinstate this if only child\n        lead.opacity !== undefined ? lead.opacity : 1, easeCrossfadeIn(progress));\n        target.opacityExit = mixNumber(follow.opacity !== undefined ? follow.opacity : 1, 0, easeCrossfadeOut(progress));\n    }\n    else if (isOnlyMember) {\n        target.opacity = mixNumber(follow.opacity !== undefined ? follow.opacity : 1, lead.opacity !== undefined ? lead.opacity : 1, progress);\n    }\n    /**\n     * Mix border radius\n     */\n    for (let i = 0; i < numBorders; i++) {\n        const borderLabel = `border${borders[i]}Radius`;\n        let followRadius = getRadius(follow, borderLabel);\n        let leadRadius = getRadius(lead, borderLabel);\n        if (followRadius === undefined && leadRadius === undefined)\n            continue;\n        followRadius || (followRadius = 0);\n        leadRadius || (leadRadius = 0);\n        const canMix = followRadius === 0 ||\n            leadRadius === 0 ||\n            isPx(followRadius) === isPx(leadRadius);\n        if (canMix) {\n            target[borderLabel] = Math.max(mixNumber(asNumber(followRadius), asNumber(leadRadius), progress), 0);\n            if (percent.test(leadRadius) || percent.test(followRadius)) {\n                target[borderLabel] += \"%\";\n            }\n        }\n        else {\n            target[borderLabel] = leadRadius;\n        }\n    }\n    /**\n     * Mix rotation\n     */\n    if (follow.rotate || lead.rotate) {\n        target.rotate = mixNumber(follow.rotate || 0, lead.rotate || 0, progress);\n    }\n}\nfunction getRadius(values, radiusName) {\n    return values[radiusName] !== undefined\n        ? values[radiusName]\n        : values.borderRadius;\n}\n// /**\n//  * We only want to mix the background color if there's a follow element\n//  * that we're not crossfading opacity between. For instance with switch\n//  * AnimateSharedLayout animations, this helps the illusion of a continuous\n//  * element being animated but also cuts down on the number of paints triggered\n//  * for elements where opacity is doing that work for us.\n//  */\n// if (\n//     !hasFollowElement &&\n//     latestLeadValues.backgroundColor &&\n//     latestFollowValues.backgroundColor\n// ) {\n//     /**\n//      * This isn't ideal performance-wise as mixColor is creating a new function every frame.\n//      * We could probably create a mixer that runs at the start of the animation but\n//      * the idea behind the crossfader is that it runs dynamically between two potentially\n//      * changing targets (ie opacity or borderRadius may be animating independently via variants)\n//      */\n//     leadState.backgroundColor = followState.backgroundColor = mixColor(\n//         latestFollowValues.backgroundColor as string,\n//         latestLeadValues.backgroundColor as string\n//     )(p)\n// }\nconst easeCrossfadeIn = compress(0, 0.5, circOut);\nconst easeCrossfadeOut = compress(0.5, 0.95, noop);\nfunction compress(min, max, easing) {\n    return (p) => {\n        // Could replace ifs with clamp\n        if (p < min)\n            return 0;\n        if (p > max)\n            return 1;\n        return easing(progress(min, max, p));\n    };\n}\n\nexport { mixValues };\n","/**\n * Reset an axis to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction copyAxisInto(axis, originAxis) {\n    axis.min = originAxis.min;\n    axis.max = originAxis.max;\n}\n/**\n * Reset a box to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction copyBoxInto(box, originBox) {\n    copyAxisInto(box.x, originBox.x);\n    copyAxisInto(box.y, originBox.y);\n}\n\nexport { copyAxisInto, copyBoxInto };\n","import { mixNumber } from '../../utils/mix/number.mjs';\nimport { percent } from '../../value/types/numbers/units.mjs';\nimport { scalePoint } from './delta-apply.mjs';\n\n/**\n * Remove a delta from a point. This is essentially the steps of applyPointDelta in reverse\n */\nfunction removePointDelta(point, translate, scale, originPoint, boxScale) {\n    point -= translate;\n    point = scalePoint(point, 1 / scale, originPoint);\n    if (boxScale !== undefined) {\n        point = scalePoint(point, 1 / boxScale, originPoint);\n    }\n    return point;\n}\n/**\n * Remove a delta from an axis. This is essentially the steps of applyAxisDelta in reverse\n */\nfunction removeAxisDelta(axis, translate = 0, scale = 1, origin = 0.5, boxScale, originAxis = axis, sourceAxis = axis) {\n    if (percent.test(translate)) {\n        translate = parseFloat(translate);\n        const relativeProgress = mixNumber(sourceAxis.min, sourceAxis.max, translate / 100);\n        translate = relativeProgress - sourceAxis.min;\n    }\n    if (typeof translate !== \"number\")\n        return;\n    let originPoint = mixNumber(originAxis.min, originAxis.max, origin);\n    if (axis === originAxis)\n        originPoint -= translate;\n    axis.min = removePointDelta(axis.min, translate, scale, originPoint, boxScale);\n    axis.max = removePointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Remove a transforms from an axis. This is essentially the steps of applyAxisTransforms in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeAxisTransforms(axis, transforms, [key, scaleKey, originKey], origin, sourceAxis) {\n    removeAxisDelta(axis, transforms[key], transforms[scaleKey], transforms[originKey], transforms.scale, origin, sourceAxis);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\nconst xKeys = [\"x\", \"scaleX\", \"originX\"];\nconst yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Remove a transforms from an box. This is essentially the steps of applyAxisBox in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeBoxTransforms(box, transforms, originBox, sourceBox) {\n    removeAxisTransforms(box.x, transforms, xKeys, originBox ? originBox.x : undefined, sourceBox ? sourceBox.x : undefined);\n    removeAxisTransforms(box.y, transforms, yKeys, originBox ? originBox.y : undefined, sourceBox ? sourceBox.y : undefined);\n}\n\nexport { removeAxisDelta, removeAxisTransforms, removeBoxTransforms, removePointDelta };\n","import { calcLength } from './delta-calc.mjs';\n\nfunction isAxisDeltaZero(delta) {\n    return delta.translate === 0 && delta.scale === 1;\n}\nfunction isDeltaZero(delta) {\n    return isAxisDeltaZero(delta.x) && isAxisDeltaZero(delta.y);\n}\nfunction boxEquals(a, b) {\n    return (a.x.min === b.x.min &&\n        a.x.max === b.x.max &&\n        a.y.min === b.y.min &&\n        a.y.max === b.y.max);\n}\nfunction boxEqualsRounded(a, b) {\n    return (Math.round(a.x.min) === Math.round(b.x.min) &&\n        Math.round(a.x.max) === Math.round(b.x.max) &&\n        Math.round(a.y.min) === Math.round(b.y.min) &&\n        Math.round(a.y.max) === Math.round(b.y.max));\n}\nfunction aspectRatio(box) {\n    return calcLength(box.x) / calcLength(box.y);\n}\n\nexport { aspectRatio, boxEquals, boxEqualsRounded, isDeltaZero };\n","import { addUniqueItem, removeItem } from '../../utils/array.mjs';\n\nclass NodeStack {\n    constructor() {\n        this.members = [];\n    }\n    add(node) {\n        addUniqueItem(this.members, node);\n        node.scheduleRender();\n    }\n    remove(node) {\n        removeItem(this.members, node);\n        if (node === this.prevLead) {\n            this.prevLead = undefined;\n        }\n        if (node === this.lead) {\n            const prevLead = this.members[this.members.length - 1];\n            if (prevLead) {\n                this.promote(prevLead);\n            }\n        }\n    }\n    relegate(node) {\n        const indexOfNode = this.members.findIndex((member) => node === member);\n        if (indexOfNode === 0)\n            return false;\n        /**\n         * Find the next projection node that is present\n         */\n        let prevLead;\n        for (let i = indexOfNode; i >= 0; i--) {\n            const member = this.members[i];\n            if (member.isPresent !== false) {\n                prevLead = member;\n                break;\n            }\n        }\n        if (prevLead) {\n            this.promote(prevLead);\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    promote(node, preserveFollowOpacity) {\n        const prevLead = this.lead;\n        if (node === prevLead)\n            return;\n        this.prevLead = prevLead;\n        this.lead = node;\n        node.show();\n        if (prevLead) {\n            prevLead.instance && prevLead.scheduleRender();\n            node.scheduleRender();\n            node.resumeFrom = prevLead;\n            if (preserveFollowOpacity) {\n                node.resumeFrom.preserveOpacity = true;\n            }\n            if (prevLead.snapshot) {\n                node.snapshot = prevLead.snapshot;\n                node.snapshot.latestValues =\n                    prevLead.animationValues || prevLead.latestValues;\n            }\n            if (node.root && node.root.isUpdating) {\n                node.isLayoutDirty = true;\n            }\n            const { crossfade } = node.options;\n            if (crossfade === false) {\n                prevLead.hide();\n            }\n            /**\n             * TODO:\n             *   - Test border radius when previous node was deleted\n             *   - boxShadow mixing\n             *   - Shared between element A in scrolled container and element B (scroll stays the same or changes)\n             *   - Shared between element A in transformed container and element B (transform stays the same or changes)\n             *   - Shared between element A in scrolled page and element B (scroll stays the same or changes)\n             * ---\n             *   - Crossfade opacity of root nodes\n             *   - layoutId changes after animation\n             *   - layoutId changes mid animation\n             */\n        }\n    }\n    exitAnimationComplete() {\n        this.members.forEach((node) => {\n            const { options, resumingFrom } = node;\n            options.onExitComplete && options.onExitComplete();\n            if (resumingFrom) {\n                resumingFrom.options.onExitComplete &&\n                    resumingFrom.options.onExitComplete();\n            }\n        });\n    }\n    scheduleRender() {\n        this.members.forEach((node) => {\n            node.instance && node.scheduleRender(false);\n        });\n    }\n    /**\n     * Clear any leads that have been removed this render to prevent them from being\n     * used in future animations and to prevent memory leaks\n     */\n    removeLeadSnapshot() {\n        if (this.lead && this.lead.snapshot) {\n            this.lead.snapshot = undefined;\n        }\n    }\n}\n\nexport { NodeStack };\n","function buildProjectionTransform(delta, treeScale, latestTransform) {\n    let transform = \"\";\n    /**\n     * The translations we use to calculate are always relative to the viewport coordinate space.\n     * But when we apply scales, we also scale the coordinate space of an element and its children.\n     * For instance if we have a treeScale (the culmination of all parent scales) of 0.5 and we need\n     * to move an element 100 pixels, we actually need to move it 200 in within that scaled space.\n     */\n    const xTranslate = delta.x.translate / treeScale.x;\n    const yTranslate = delta.y.translate / treeScale.y;\n    const zTranslate = (latestTransform === null || latestTransform === void 0 ? void 0 : latestTransform.z) || 0;\n    if (xTranslate || yTranslate || zTranslate) {\n        transform = `translate3d(${xTranslate}px, ${yTranslate}px, ${zTranslate}px) `;\n    }\n    /**\n     * Apply scale correction for the tree transform.\n     * This will apply scale to the screen-orientated axes.\n     */\n    if (treeScale.x !== 1 || treeScale.y !== 1) {\n        transform += `scale(${1 / treeScale.x}, ${1 / treeScale.y}) `;\n    }\n    if (latestTransform) {\n        const { transformPerspective, rotate, rotateX, rotateY, skewX, skewY } = latestTransform;\n        if (transformPerspective)\n            transform = `perspective(${transformPerspective}px) ${transform}`;\n        if (rotate)\n            transform += `rotate(${rotate}deg) `;\n        if (rotateX)\n            transform += `rotateX(${rotateX}deg) `;\n        if (rotateY)\n            transform += `rotateY(${rotateY}deg) `;\n        if (skewX)\n            transform += `skewX(${skewX}deg) `;\n        if (skewY)\n            transform += `skewY(${skewY}deg) `;\n    }\n    /**\n     * Apply scale to match the size of the element to the size we want it.\n     * This will apply scale to the element-orientated axes.\n     */\n    const elementScaleX = delta.x.scale * treeScale.x;\n    const elementScaleY = delta.y.scale * treeScale.y;\n    if (elementScaleX !== 1 || elementScaleY !== 1) {\n        transform += `scale(${elementScaleX}, ${elementScaleY})`;\n    }\n    return transform || \"none\";\n}\n\nexport { buildProjectionTransform };\n","const compareByDepth = (a, b) => a.depth - b.depth;\n\nexport { compareByDepth };\n","import { addUniqueItem, removeItem } from '../../utils/array.mjs';\nimport { compareByDepth } from './compare-by-depth.mjs';\n\nclass FlatTree {\n    constructor() {\n        this.children = [];\n        this.isDirty = false;\n    }\n    add(child) {\n        addUniqueItem(this.children, child);\n        this.isDirty = true;\n    }\n    remove(child) {\n        removeItem(this.children, child);\n        this.isDirty = true;\n    }\n    forEach(callback) {\n        this.isDirty && this.children.sort(compareByDepth);\n        this.isDirty = false;\n        this.children.forEach(callback);\n    }\n}\n\nexport { FlatTree };\n","import { time } from '../frameloop/sync-time.mjs';\nimport { frame, cancelFrame } from '../frameloop/frame.mjs';\n\n/**\n * Timeout defined in ms\n */\nfunction delay(callback, timeout) {\n    const start = time.now();\n    const checkElapsed = ({ timestamp }) => {\n        const elapsed = timestamp - start;\n        if (elapsed >= timeout) {\n            cancelFrame(checkElapsed);\n            callback(elapsed - timeout);\n        }\n    };\n    frame.read(checkElapsed, true);\n    return () => cancelFrame(checkElapsed);\n}\n\nexport { delay };\n","function record(data) {\n    if (window.MotionDebug) {\n        window.MotionDebug.record(data);\n    }\n}\n\nexport { record };\n","function isSVGElement(element) {\n    return element instanceof SVGElement && element.tagName !== \"svg\";\n}\n\nexport { isSVGElement };\n","import { animateMotionValue } from './motion-value.mjs';\nimport { motionValue } from '../../value/index.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\n\nfunction animateSingleValue(value, keyframes, options) {\n    const motionValue$1 = isMotionValue(value) ? value : motionValue(value);\n    motionValue$1.start(animateMotionValue(\"\", motionValue$1, keyframes, options));\n    return motionValue$1.animation;\n}\n\nexport { animateSingleValue };\n","import { SubscriptionManager } from '../../utils/subscription-manager.mjs';\nimport { mixValues } from '../animation/mix-values.mjs';\nimport { copyBoxInto } from '../geometry/copy.mjs';\nimport { translateAxis, transformBox, applyBoxDelta, applyTreeDeltas } from '../geometry/delta-apply.mjs';\nimport { calcRelativePosition, calcRelativeBox, calcBoxDelta, calcLength, isNear } from '../geometry/delta-calc.mjs';\nimport { removeBoxTransforms } from '../geometry/delta-remove.mjs';\nimport { createBox, createDelta } from '../geometry/models.mjs';\nimport { getValueTransition } from '../../animation/utils/transitions.mjs';\nimport { boxEqualsRounded, isDeltaZero, aspectRatio, boxEquals } from '../geometry/utils.mjs';\nimport { NodeStack } from '../shared/stack.mjs';\nimport { scaleCorrectors } from '../styles/scale-correction.mjs';\nimport { buildProjectionTransform } from '../styles/transform.mjs';\nimport { eachAxis } from '../utils/each-axis.mjs';\nimport { hasTransform, hasScale, has2DTranslate } from '../utils/has-transform.mjs';\nimport { FlatTree } from '../../render/utils/flat-tree.mjs';\nimport { resolveMotionValue } from '../../value/utils/resolve-motion-value.mjs';\nimport { globalProjectionState } from './state.mjs';\nimport { delay } from '../../utils/delay.mjs';\nimport { mixNumber } from '../../utils/mix/number.mjs';\nimport { record } from '../../debug/record.mjs';\nimport { isSVGElement } from '../../render/dom/utils/is-svg-element.mjs';\nimport { animateSingleValue } from '../../animation/interfaces/single-value.mjs';\nimport { clamp } from '../../utils/clamp.mjs';\nimport { cancelFrame, frameData, steps, frame } from '../../frameloop/frame.mjs';\nimport { noop } from '../../utils/noop.mjs';\nimport { time } from '../../frameloop/sync-time.mjs';\nimport { microtask } from '../../frameloop/microtask.mjs';\nimport { getOptimisedAppearId } from '../../animation/optimized-appear/get-appear-id.mjs';\n\nconst transformAxes = [\"\", \"X\", \"Y\", \"Z\"];\nconst hiddenVisibility = { visibility: \"hidden\" };\n/**\n * We use 1000 as the animation target as 0-1000 maps better to pixels than 0-1\n * which has a noticeable difference in spring animations\n */\nconst animationTarget = 1000;\nlet id = 0;\n/**\n * Use a mutable data object for debug data so as to not create a new\n * object every frame.\n */\nconst projectionFrameData = {\n    type: \"projectionFrame\",\n    totalNodes: 0,\n    resolvedTargetDeltas: 0,\n    recalculatedProjection: 0,\n};\nfunction resetDistortingTransform(key, visualElement, values, sharedAnimationValues) {\n    const { latestValues } = visualElement;\n    // Record the distorting transform and then temporarily set it to 0\n    if (latestValues[key]) {\n        values[key] = latestValues[key];\n        visualElement.setStaticValue(key, 0);\n        if (sharedAnimationValues) {\n            sharedAnimationValues[key] = 0;\n        }\n    }\n}\nfunction isOptimisedAppearTree(projectionNode) {\n    projectionNode.hasCheckedOptimisedAppear = true;\n    if (projectionNode.root === projectionNode)\n        return false;\n    const { visualElement } = projectionNode.options;\n    if (!visualElement) {\n        return false;\n    }\n    else if (getOptimisedAppearId(visualElement)) {\n        return true;\n    }\n    else if (projectionNode.parent &&\n        !projectionNode.parent.hasCheckedOptimisedAppear) {\n        return isOptimisedAppearTree(projectionNode.parent);\n    }\n    else {\n        return false;\n    }\n}\nfunction createProjectionNode({ attachResizeListener, defaultParent, measureScroll, checkIsScrollRoot, resetTransform, }) {\n    return class ProjectionNode {\n        constructor(latestValues = {}, parent = defaultParent === null || defaultParent === void 0 ? void 0 : defaultParent()) {\n            /**\n             * A unique ID generated for every projection node.\n             */\n            this.id = id++;\n            /**\n             * An id that represents a unique session instigated by startUpdate.\n             */\n            this.animationId = 0;\n            /**\n             * A Set containing all this component's children. This is used to iterate\n             * through the children.\n             *\n             * TODO: This could be faster to iterate as a flat array stored on the root node.\n             */\n            this.children = new Set();\n            /**\n             * Options for the node. We use this to configure what kind of layout animations\n             * we should perform (if any).\n             */\n            this.options = {};\n            /**\n             * We use this to detect when its safe to shut down part of a projection tree.\n             * We have to keep projecting children for scale correction and relative projection\n             * until all their parents stop performing layout animations.\n             */\n            this.isTreeAnimating = false;\n            this.isAnimationBlocked = false;\n            /**\n             * Flag to true if we think this layout has been changed. We can't always know this,\n             * currently we set it to true every time a component renders, or if it has a layoutDependency\n             * if that has changed between renders. Additionally, components can be grouped by LayoutGroup\n             * and if one node is dirtied, they all are.\n             */\n            this.isLayoutDirty = false;\n            /**\n             * Flag to true if we think the projection calculations for this node needs\n             * recalculating as a result of an updated transform or layout animation.\n             */\n            this.isProjectionDirty = false;\n            /**\n             * Flag to true if the layout *or* transform has changed. This then gets propagated\n             * throughout the projection tree, forcing any element below to recalculate on the next frame.\n             */\n            this.isSharedProjectionDirty = false;\n            /**\n             * Flag transform dirty. This gets propagated throughout the whole tree but is only\n             * respected by shared nodes.\n             */\n            this.isTransformDirty = false;\n            /**\n             * Block layout updates for instant layout transitions throughout the tree.\n             */\n            this.updateManuallyBlocked = false;\n            this.updateBlockedByResize = false;\n            /**\n             * Set to true between the start of the first `willUpdate` call and the end of the `didUpdate`\n             * call.\n             */\n            this.isUpdating = false;\n            /**\n             * If this is an SVG element we currently disable projection transforms\n             */\n            this.isSVG = false;\n            /**\n             * Flag to true (during promotion) if a node doing an instant layout transition needs to reset\n             * its projection styles.\n             */\n            this.needsReset = false;\n            /**\n             * Flags whether this node should have its transform reset prior to measuring.\n             */\n            this.shouldResetTransform = false;\n            /**\n             * Store whether this node has been checked for optimised appear animations. As\n             * effects fire bottom-up, and we want to look up the tree for appear animations,\n             * this makes sure we only check each path once, stopping at nodes that\n             * have already been checked.\n             */\n            this.hasCheckedOptimisedAppear = false;\n            /**\n             * An object representing the calculated contextual/accumulated/tree scale.\n             * This will be used to scale calculcated projection transforms, as these are\n             * calculated in screen-space but need to be scaled for elements to layoutly\n             * make it to their calculated destinations.\n             *\n             * TODO: Lazy-init\n             */\n            this.treeScale = { x: 1, y: 1 };\n            /**\n             *\n             */\n            this.eventHandlers = new Map();\n            this.hasTreeAnimated = false;\n            // Note: Currently only running on root node\n            this.updateScheduled = false;\n            this.scheduleUpdate = () => this.update();\n            this.projectionUpdateScheduled = false;\n            this.checkUpdateFailed = () => {\n                if (this.isUpdating) {\n                    this.isUpdating = false;\n                    this.clearAllSnapshots();\n                }\n            };\n            /**\n             * This is a multi-step process as shared nodes might be of different depths. Nodes\n             * are sorted by depth order, so we need to resolve the entire tree before moving to\n             * the next step.\n             */\n            this.updateProjection = () => {\n                this.projectionUpdateScheduled = false;\n                /**\n                 * Reset debug counts. Manually resetting rather than creating a new\n                 * object each frame.\n                 */\n                projectionFrameData.totalNodes =\n                    projectionFrameData.resolvedTargetDeltas =\n                        projectionFrameData.recalculatedProjection =\n                            0;\n                this.nodes.forEach(propagateDirtyNodes);\n                this.nodes.forEach(resolveTargetDelta);\n                this.nodes.forEach(calcProjection);\n                this.nodes.forEach(cleanDirtyNodes);\n                record(projectionFrameData);\n            };\n            this.hasProjected = false;\n            this.isVisible = true;\n            this.animationProgress = 0;\n            /**\n             * Shared layout\n             */\n            // TODO Only running on root node\n            this.sharedNodes = new Map();\n            this.latestValues = latestValues;\n            this.root = parent ? parent.root || parent : this;\n            this.path = parent ? [...parent.path, parent] : [];\n            this.parent = parent;\n            this.depth = parent ? parent.depth + 1 : 0;\n            for (let i = 0; i < this.path.length; i++) {\n                this.path[i].shouldResetTransform = true;\n            }\n            if (this.root === this)\n                this.nodes = new FlatTree();\n        }\n        addEventListener(name, handler) {\n            if (!this.eventHandlers.has(name)) {\n                this.eventHandlers.set(name, new SubscriptionManager());\n            }\n            return this.eventHandlers.get(name).add(handler);\n        }\n        notifyListeners(name, ...args) {\n            const subscriptionManager = this.eventHandlers.get(name);\n            subscriptionManager && subscriptionManager.notify(...args);\n        }\n        hasListeners(name) {\n            return this.eventHandlers.has(name);\n        }\n        /**\n         * Lifecycles\n         */\n        mount(instance, isLayoutDirty = this.root.hasTreeAnimated) {\n            if (this.instance)\n                return;\n            this.isSVG = isSVGElement(instance);\n            this.instance = instance;\n            const { layoutId, layout, visualElement } = this.options;\n            if (visualElement && !visualElement.current) {\n                visualElement.mount(instance);\n            }\n            this.root.nodes.add(this);\n            this.parent && this.parent.children.add(this);\n            if (isLayoutDirty && (layout || layoutId)) {\n                this.isLayoutDirty = true;\n            }\n            if (attachResizeListener) {\n                let cancelDelay;\n                const resizeUnblockUpdate = () => (this.root.updateBlockedByResize = false);\n                attachResizeListener(instance, () => {\n                    this.root.updateBlockedByResize = true;\n                    cancelDelay && cancelDelay();\n                    cancelDelay = delay(resizeUnblockUpdate, 250);\n                    if (globalProjectionState.hasAnimatedSinceResize) {\n                        globalProjectionState.hasAnimatedSinceResize = false;\n                        this.nodes.forEach(finishAnimation);\n                    }\n                });\n            }\n            if (layoutId) {\n                this.root.registerSharedNode(layoutId, this);\n            }\n            // Only register the handler if it requires layout animation\n            if (this.options.animate !== false &&\n                visualElement &&\n                (layoutId || layout)) {\n                this.addEventListener(\"didUpdate\", ({ delta, hasLayoutChanged, hasRelativeTargetChanged, layout: newLayout, }) => {\n                    if (this.isTreeAnimationBlocked()) {\n                        this.target = undefined;\n                        this.relativeTarget = undefined;\n                        return;\n                    }\n                    // TODO: Check here if an animation exists\n                    const layoutTransition = this.options.transition ||\n                        visualElement.getDefaultTransition() ||\n                        defaultLayoutTransition;\n                    const { onLayoutAnimationStart, onLayoutAnimationComplete, } = visualElement.getProps();\n                    /**\n                     * The target layout of the element might stay the same,\n                     * but its position relative to its parent has changed.\n                     */\n                    const targetChanged = !this.targetLayout ||\n                        !boxEqualsRounded(this.targetLayout, newLayout) ||\n                        hasRelativeTargetChanged;\n                    /**\n                     * If the layout hasn't seemed to have changed, it might be that the\n                     * element is visually in the same place in the document but its position\n                     * relative to its parent has indeed changed. So here we check for that.\n                     */\n                    const hasOnlyRelativeTargetChanged = !hasLayoutChanged && hasRelativeTargetChanged;\n                    if (this.options.layoutRoot ||\n                        (this.resumeFrom && this.resumeFrom.instance) ||\n                        hasOnlyRelativeTargetChanged ||\n                        (hasLayoutChanged &&\n                            (targetChanged || !this.currentAnimation))) {\n                        if (this.resumeFrom) {\n                            this.resumingFrom = this.resumeFrom;\n                            this.resumingFrom.resumingFrom = undefined;\n                        }\n                        this.setAnimationOrigin(delta, hasOnlyRelativeTargetChanged);\n                        const animationOptions = {\n                            ...getValueTransition(layoutTransition, \"layout\"),\n                            onPlay: onLayoutAnimationStart,\n                            onComplete: onLayoutAnimationComplete,\n                        };\n                        if (visualElement.shouldReduceMotion ||\n                            this.options.layoutRoot) {\n                            animationOptions.delay = 0;\n                            animationOptions.type = false;\n                        }\n                        this.startAnimation(animationOptions);\n                    }\n                    else {\n                        /**\n                         * If the layout hasn't changed and we have an animation that hasn't started yet,\n                         * finish it immediately. Otherwise it will be animating from a location\n                         * that was probably never commited to screen and look like a jumpy box.\n                         */\n                        if (!hasLayoutChanged) {\n                            finishAnimation(this);\n                        }\n                        if (this.isLead() && this.options.onExitComplete) {\n                            this.options.onExitComplete();\n                        }\n                    }\n                    this.targetLayout = newLayout;\n                });\n            }\n        }\n        unmount() {\n            this.options.layoutId && this.willUpdate();\n            this.root.nodes.remove(this);\n            const stack = this.getStack();\n            stack && stack.remove(this);\n            this.parent && this.parent.children.delete(this);\n            this.instance = undefined;\n            cancelFrame(this.updateProjection);\n        }\n        // only on the root\n        blockUpdate() {\n            this.updateManuallyBlocked = true;\n        }\n        unblockUpdate() {\n            this.updateManuallyBlocked = false;\n        }\n        isUpdateBlocked() {\n            return this.updateManuallyBlocked || this.updateBlockedByResize;\n        }\n        isTreeAnimationBlocked() {\n            return (this.isAnimationBlocked ||\n                (this.parent && this.parent.isTreeAnimationBlocked()) ||\n                false);\n        }\n        // Note: currently only running on root node\n        startUpdate() {\n            if (this.isUpdateBlocked())\n                return;\n            this.isUpdating = true;\n            this.nodes && this.nodes.forEach(resetSkewAndRotation);\n            this.animationId++;\n        }\n        getTransformTemplate() {\n            const { visualElement } = this.options;\n            return visualElement && visualElement.getProps().transformTemplate;\n        }\n        willUpdate(shouldNotifyListeners = true) {\n            this.root.hasTreeAnimated = true;\n            if (this.root.isUpdateBlocked()) {\n                this.options.onExitComplete && this.options.onExitComplete();\n                return;\n            }\n            /**\n             * If we're running optimised appear animations then these must be\n             * cancelled before measuring the DOM. This is so we can measure\n             * the true layout of the element rather than the WAAPI animation\n             * which will be unaffected by the resetSkewAndRotate step.\n             *\n             * Note: This is a DOM write. Worst case scenario is this is sandwiched\n             * between other snapshot reads which will cause unnecessary style recalculations.\n             * This has to happen here though, as we don't yet know which nodes will need\n             * snapshots in startUpdate(), but we only want to cancel optimised animations\n             * if a layout animation measurement is actually going to be affected by them.\n             */\n            if (window.HandoffCancelAllAnimations &&\n                isOptimisedAppearTree(this)) {\n                window.HandoffCancelAllAnimations();\n            }\n            !this.root.isUpdating && this.root.startUpdate();\n            if (this.isLayoutDirty)\n                return;\n            this.isLayoutDirty = true;\n            for (let i = 0; i < this.path.length; i++) {\n                const node = this.path[i];\n                node.shouldResetTransform = true;\n                node.updateScroll(\"snapshot\");\n                if (node.options.layoutRoot) {\n                    node.willUpdate(false);\n                }\n            }\n            const { layoutId, layout } = this.options;\n            if (layoutId === undefined && !layout)\n                return;\n            const transformTemplate = this.getTransformTemplate();\n            this.prevTransformTemplateValue = transformTemplate\n                ? transformTemplate(this.latestValues, \"\")\n                : undefined;\n            this.updateSnapshot();\n            shouldNotifyListeners && this.notifyListeners(\"willUpdate\");\n        }\n        update() {\n            this.updateScheduled = false;\n            const updateWasBlocked = this.isUpdateBlocked();\n            // When doing an instant transition, we skip the layout update,\n            // but should still clean up the measurements so that the next\n            // snapshot could be taken correctly.\n            if (updateWasBlocked) {\n                this.unblockUpdate();\n                this.clearAllSnapshots();\n                this.nodes.forEach(clearMeasurements);\n                return;\n            }\n            if (!this.isUpdating) {\n                this.nodes.forEach(clearIsLayoutDirty);\n            }\n            this.isUpdating = false;\n            /**\n             * Write\n             */\n            this.nodes.forEach(resetTransformStyle);\n            /**\n             * Read ==================\n             */\n            // Update layout measurements of updated children\n            this.nodes.forEach(updateLayout);\n            /**\n             * Write\n             */\n            // Notify listeners that the layout is updated\n            this.nodes.forEach(notifyLayoutUpdate);\n            this.clearAllSnapshots();\n            /**\n             * Manually flush any pending updates. Ideally\n             * we could leave this to the following requestAnimationFrame but this seems\n             * to leave a flash of incorrectly styled content.\n             */\n            const now = time.now();\n            frameData.delta = clamp(0, 1000 / 60, now - frameData.timestamp);\n            frameData.timestamp = now;\n            frameData.isProcessing = true;\n            steps.update.process(frameData);\n            steps.preRender.process(frameData);\n            steps.render.process(frameData);\n            frameData.isProcessing = false;\n        }\n        didUpdate() {\n            if (!this.updateScheduled) {\n                this.updateScheduled = true;\n                microtask.read(this.scheduleUpdate);\n            }\n        }\n        clearAllSnapshots() {\n            this.nodes.forEach(clearSnapshot);\n            this.sharedNodes.forEach(removeLeadSnapshots);\n        }\n        scheduleUpdateProjection() {\n            if (!this.projectionUpdateScheduled) {\n                this.projectionUpdateScheduled = true;\n                frame.preRender(this.updateProjection, false, true);\n            }\n        }\n        scheduleCheckAfterUnmount() {\n            /**\n             * If the unmounting node is in a layoutGroup and did trigger a willUpdate,\n             * we manually call didUpdate to give a chance to the siblings to animate.\n             * Otherwise, cleanup all snapshots to prevents future nodes from reusing them.\n             */\n            frame.postRender(() => {\n                if (this.isLayoutDirty) {\n                    this.root.didUpdate();\n                }\n                else {\n                    this.root.checkUpdateFailed();\n                }\n            });\n        }\n        /**\n         * Update measurements\n         */\n        updateSnapshot() {\n            if (this.snapshot || !this.instance)\n                return;\n            this.snapshot = this.measure();\n        }\n        updateLayout() {\n            if (!this.instance)\n                return;\n            // TODO: Incorporate into a forwarded scroll offset\n            this.updateScroll();\n            if (!(this.options.alwaysMeasureLayout && this.isLead()) &&\n                !this.isLayoutDirty) {\n                return;\n            }\n            /**\n             * When a node is mounted, it simply resumes from the prevLead's\n             * snapshot instead of taking a new one, but the ancestors scroll\n             * might have updated while the prevLead is unmounted. We need to\n             * update the scroll again to make sure the layout we measure is\n             * up to date.\n             */\n            if (this.resumeFrom && !this.resumeFrom.instance) {\n                for (let i = 0; i < this.path.length; i++) {\n                    const node = this.path[i];\n                    node.updateScroll();\n                }\n            }\n            const prevLayout = this.layout;\n            this.layout = this.measure(false);\n            this.layoutCorrected = createBox();\n            this.isLayoutDirty = false;\n            this.projectionDelta = undefined;\n            this.notifyListeners(\"measure\", this.layout.layoutBox);\n            const { visualElement } = this.options;\n            visualElement &&\n                visualElement.notify(\"LayoutMeasure\", this.layout.layoutBox, prevLayout ? prevLayout.layoutBox : undefined);\n        }\n        updateScroll(phase = \"measure\") {\n            let needsMeasurement = Boolean(this.options.layoutScroll && this.instance);\n            if (this.scroll &&\n                this.scroll.animationId === this.root.animationId &&\n                this.scroll.phase === phase) {\n                needsMeasurement = false;\n            }\n            if (needsMeasurement) {\n                this.scroll = {\n                    animationId: this.root.animationId,\n                    phase,\n                    isRoot: checkIsScrollRoot(this.instance),\n                    offset: measureScroll(this.instance),\n                };\n            }\n        }\n        resetTransform() {\n            if (!resetTransform)\n                return;\n            const isResetRequested = this.isLayoutDirty ||\n                this.shouldResetTransform ||\n                this.options.alwaysMeasureLayout;\n            const hasProjection = this.projectionDelta && !isDeltaZero(this.projectionDelta);\n            const transformTemplate = this.getTransformTemplate();\n            const transformTemplateValue = transformTemplate\n                ? transformTemplate(this.latestValues, \"\")\n                : undefined;\n            const transformTemplateHasChanged = transformTemplateValue !== this.prevTransformTemplateValue;\n            if (isResetRequested &&\n                (hasProjection ||\n                    hasTransform(this.latestValues) ||\n                    transformTemplateHasChanged)) {\n                resetTransform(this.instance, transformTemplateValue);\n                this.shouldResetTransform = false;\n                this.scheduleRender();\n            }\n        }\n        measure(removeTransform = true) {\n            const pageBox = this.measurePageBox();\n            let layoutBox = this.removeElementScroll(pageBox);\n            /**\n             * Measurements taken during the pre-render stage\n             * still have transforms applied so we remove them\n             * via calculation.\n             */\n            if (removeTransform) {\n                layoutBox = this.removeTransform(layoutBox);\n            }\n            roundBox(layoutBox);\n            return {\n                animationId: this.root.animationId,\n                measuredBox: pageBox,\n                layoutBox,\n                latestValues: {},\n                source: this.id,\n            };\n        }\n        measurePageBox() {\n            const { visualElement } = this.options;\n            if (!visualElement)\n                return createBox();\n            const box = visualElement.measureViewportBox();\n            // Remove viewport scroll to give page-relative coordinates\n            const { scroll } = this.root;\n            if (scroll) {\n                translateAxis(box.x, scroll.offset.x);\n                translateAxis(box.y, scroll.offset.y);\n            }\n            return box;\n        }\n        removeElementScroll(box) {\n            const boxWithoutScroll = createBox();\n            copyBoxInto(boxWithoutScroll, box);\n            /**\n             * Performance TODO: Keep a cumulative scroll offset down the tree\n             * rather than loop back up the path.\n             */\n            for (let i = 0; i < this.path.length; i++) {\n                const node = this.path[i];\n                const { scroll, options } = node;\n                if (node !== this.root && scroll && options.layoutScroll) {\n                    /**\n                     * If this is a new scroll root, we want to remove all previous scrolls\n                     * from the viewport box.\n                     */\n                    if (scroll.isRoot) {\n                        copyBoxInto(boxWithoutScroll, box);\n                        const { scroll: rootScroll } = this.root;\n                        /**\n                         * Undo the application of page scroll that was originally added\n                         * to the measured bounding box.\n                         */\n                        if (rootScroll) {\n                            translateAxis(boxWithoutScroll.x, -rootScroll.offset.x);\n                            translateAxis(boxWithoutScroll.y, -rootScroll.offset.y);\n                        }\n                    }\n                    translateAxis(boxWithoutScroll.x, scroll.offset.x);\n                    translateAxis(boxWithoutScroll.y, scroll.offset.y);\n                }\n            }\n            return boxWithoutScroll;\n        }\n        applyTransform(box, transformOnly = false) {\n            const withTransforms = createBox();\n            copyBoxInto(withTransforms, box);\n            for (let i = 0; i < this.path.length; i++) {\n                const node = this.path[i];\n                if (!transformOnly &&\n                    node.options.layoutScroll &&\n                    node.scroll &&\n                    node !== node.root) {\n                    transformBox(withTransforms, {\n                        x: -node.scroll.offset.x,\n                        y: -node.scroll.offset.y,\n                    });\n                }\n                if (!hasTransform(node.latestValues))\n                    continue;\n                transformBox(withTransforms, node.latestValues);\n            }\n            if (hasTransform(this.latestValues)) {\n                transformBox(withTransforms, this.latestValues);\n            }\n            return withTransforms;\n        }\n        removeTransform(box) {\n            const boxWithoutTransform = createBox();\n            copyBoxInto(boxWithoutTransform, box);\n            for (let i = 0; i < this.path.length; i++) {\n                const node = this.path[i];\n                if (!node.instance)\n                    continue;\n                if (!hasTransform(node.latestValues))\n                    continue;\n                hasScale(node.latestValues) && node.updateSnapshot();\n                const sourceBox = createBox();\n                const nodeBox = node.measurePageBox();\n                copyBoxInto(sourceBox, nodeBox);\n                removeBoxTransforms(boxWithoutTransform, node.latestValues, node.snapshot ? node.snapshot.layoutBox : undefined, sourceBox);\n            }\n            if (hasTransform(this.latestValues)) {\n                removeBoxTransforms(boxWithoutTransform, this.latestValues);\n            }\n            return boxWithoutTransform;\n        }\n        setTargetDelta(delta) {\n            this.targetDelta = delta;\n            this.root.scheduleUpdateProjection();\n            this.isProjectionDirty = true;\n        }\n        setOptions(options) {\n            this.options = {\n                ...this.options,\n                ...options,\n                crossfade: options.crossfade !== undefined ? options.crossfade : true,\n            };\n        }\n        clearMeasurements() {\n            this.scroll = undefined;\n            this.layout = undefined;\n            this.snapshot = undefined;\n            this.prevTransformTemplateValue = undefined;\n            this.targetDelta = undefined;\n            this.target = undefined;\n            this.isLayoutDirty = false;\n        }\n        forceRelativeParentToResolveTarget() {\n            if (!this.relativeParent)\n                return;\n            /**\n             * If the parent target isn't up-to-date, force it to update.\n             * This is an unfortunate de-optimisation as it means any updating relative\n             * projection will cause all the relative parents to recalculate back\n             * up the tree.\n             */\n            if (this.relativeParent.resolvedRelativeTargetAt !==\n                frameData.timestamp) {\n                this.relativeParent.resolveTargetDelta(true);\n            }\n        }\n        resolveTargetDelta(forceRecalculation = false) {\n            var _a;\n            /**\n             * Once the dirty status of nodes has been spread through the tree, we also\n             * need to check if we have a shared node of a different depth that has itself\n             * been dirtied.\n             */\n            const lead = this.getLead();\n            this.isProjectionDirty || (this.isProjectionDirty = lead.isProjectionDirty);\n            this.isTransformDirty || (this.isTransformDirty = lead.isTransformDirty);\n            this.isSharedProjectionDirty || (this.isSharedProjectionDirty = lead.isSharedProjectionDirty);\n            const isShared = Boolean(this.resumingFrom) || this !== lead;\n            /**\n             * We don't use transform for this step of processing so we don't\n             * need to check whether any nodes have changed transform.\n             */\n            const canSkip = !(forceRecalculation ||\n                (isShared && this.isSharedProjectionDirty) ||\n                this.isProjectionDirty ||\n                ((_a = this.parent) === null || _a === void 0 ? void 0 : _a.isProjectionDirty) ||\n                this.attemptToResolveRelativeTarget);\n            if (canSkip)\n                return;\n            const { layout, layoutId } = this.options;\n            /**\n             * If we have no layout, we can't perform projection, so early return\n             */\n            if (!this.layout || !(layout || layoutId))\n                return;\n            this.resolvedRelativeTargetAt = frameData.timestamp;\n            /**\n             * If we don't have a targetDelta but do have a layout, we can attempt to resolve\n             * a relativeParent. This will allow a component to perform scale correction\n             * even if no animation has started.\n             */\n            if (!this.targetDelta && !this.relativeTarget) {\n                const relativeParent = this.getClosestProjectingParent();\n                if (relativeParent &&\n                    relativeParent.layout &&\n                    this.animationProgress !== 1) {\n                    this.relativeParent = relativeParent;\n                    this.forceRelativeParentToResolveTarget();\n                    this.relativeTarget = createBox();\n                    this.relativeTargetOrigin = createBox();\n                    calcRelativePosition(this.relativeTargetOrigin, this.layout.layoutBox, relativeParent.layout.layoutBox);\n                    copyBoxInto(this.relativeTarget, this.relativeTargetOrigin);\n                }\n                else {\n                    this.relativeParent = this.relativeTarget = undefined;\n                }\n            }\n            /**\n             * If we have no relative target or no target delta our target isn't valid\n             * for this frame.\n             */\n            if (!this.relativeTarget && !this.targetDelta)\n                return;\n            /**\n             * Lazy-init target data structure\n             */\n            if (!this.target) {\n                this.target = createBox();\n                this.targetWithTransforms = createBox();\n            }\n            /**\n             * If we've got a relative box for this component, resolve it into a target relative to the parent.\n             */\n            if (this.relativeTarget &&\n                this.relativeTargetOrigin &&\n                this.relativeParent &&\n                this.relativeParent.target) {\n                this.forceRelativeParentToResolveTarget();\n                calcRelativeBox(this.target, this.relativeTarget, this.relativeParent.target);\n                /**\n                 * If we've only got a targetDelta, resolve it into a target\n                 */\n            }\n            else if (this.targetDelta) {\n                if (Boolean(this.resumingFrom)) {\n                    // TODO: This is creating a new object every frame\n                    this.target = this.applyTransform(this.layout.layoutBox);\n                }\n                else {\n                    copyBoxInto(this.target, this.layout.layoutBox);\n                }\n                applyBoxDelta(this.target, this.targetDelta);\n            }\n            else {\n                /**\n                 * If no target, use own layout as target\n                 */\n                copyBoxInto(this.target, this.layout.layoutBox);\n            }\n            /**\n             * If we've been told to attempt to resolve a relative target, do so.\n             */\n            if (this.attemptToResolveRelativeTarget) {\n                this.attemptToResolveRelativeTarget = false;\n                const relativeParent = this.getClosestProjectingParent();\n                if (relativeParent &&\n                    Boolean(relativeParent.resumingFrom) ===\n                        Boolean(this.resumingFrom) &&\n                    !relativeParent.options.layoutScroll &&\n                    relativeParent.target &&\n                    this.animationProgress !== 1) {\n                    this.relativeParent = relativeParent;\n                    this.forceRelativeParentToResolveTarget();\n                    this.relativeTarget = createBox();\n                    this.relativeTargetOrigin = createBox();\n                    calcRelativePosition(this.relativeTargetOrigin, this.target, relativeParent.target);\n                    copyBoxInto(this.relativeTarget, this.relativeTargetOrigin);\n                }\n                else {\n                    this.relativeParent = this.relativeTarget = undefined;\n                }\n            }\n            /**\n             * Increase debug counter for resolved target deltas\n             */\n            projectionFrameData.resolvedTargetDeltas++;\n        }\n        getClosestProjectingParent() {\n            if (!this.parent ||\n                hasScale(this.parent.latestValues) ||\n                has2DTranslate(this.parent.latestValues)) {\n                return undefined;\n            }\n            if (this.parent.isProjecting()) {\n                return this.parent;\n            }\n            else {\n                return this.parent.getClosestProjectingParent();\n            }\n        }\n        isProjecting() {\n            return Boolean((this.relativeTarget ||\n                this.targetDelta ||\n                this.options.layoutRoot) &&\n                this.layout);\n        }\n        calcProjection() {\n            var _a;\n            const lead = this.getLead();\n            const isShared = Boolean(this.resumingFrom) || this !== lead;\n            let canSkip = true;\n            /**\n             * If this is a normal layout animation and neither this node nor its nearest projecting\n             * is dirty then we can't skip.\n             */\n            if (this.isProjectionDirty || ((_a = this.parent) === null || _a === void 0 ? void 0 : _a.isProjectionDirty)) {\n                canSkip = false;\n            }\n            /**\n             * If this is a shared layout animation and this node's shared projection is dirty then\n             * we can't skip.\n             */\n            if (isShared &&\n                (this.isSharedProjectionDirty || this.isTransformDirty)) {\n                canSkip = false;\n            }\n            /**\n             * If we have resolved the target this frame we must recalculate the\n             * projection to ensure it visually represents the internal calculations.\n             */\n            if (this.resolvedRelativeTargetAt === frameData.timestamp) {\n                canSkip = false;\n            }\n            if (canSkip)\n                return;\n            const { layout, layoutId } = this.options;\n            /**\n             * If this section of the tree isn't animating we can\n             * delete our target sources for the following frame.\n             */\n            this.isTreeAnimating = Boolean((this.parent && this.parent.isTreeAnimating) ||\n                this.currentAnimation ||\n                this.pendingAnimation);\n            if (!this.isTreeAnimating) {\n                this.targetDelta = this.relativeTarget = undefined;\n            }\n            if (!this.layout || !(layout || layoutId))\n                return;\n            /**\n             * Reset the corrected box with the latest values from box, as we're then going\n             * to perform mutative operations on it.\n             */\n            copyBoxInto(this.layoutCorrected, this.layout.layoutBox);\n            /**\n             * Record previous tree scales before updating.\n             */\n            const prevTreeScaleX = this.treeScale.x;\n            const prevTreeScaleY = this.treeScale.y;\n            /**\n             * Apply all the parent deltas to this box to produce the corrected box. This\n             * is the layout box, as it will appear on screen as a result of the transforms of its parents.\n             */\n            applyTreeDeltas(this.layoutCorrected, this.treeScale, this.path, isShared);\n            /**\n             * If this layer needs to perform scale correction but doesn't have a target,\n             * use the layout as the target.\n             */\n            if (lead.layout &&\n                !lead.target &&\n                (this.treeScale.x !== 1 || this.treeScale.y !== 1)) {\n                lead.target = lead.layout.layoutBox;\n                lead.targetWithTransforms = createBox();\n            }\n            const { target } = lead;\n            if (!target) {\n                /**\n                 * If we don't have a target to project into, but we were previously\n                 * projecting, we want to remove the stored transform and schedule\n                 * a render to ensure the elements reflect the removed transform.\n                 */\n                if (this.projectionTransform) {\n                    this.projectionDelta = createDelta();\n                    this.projectionTransform = \"none\";\n                    this.scheduleRender();\n                }\n                return;\n            }\n            if (!this.projectionDelta) {\n                this.projectionDelta = createDelta();\n                this.projectionDeltaWithTransform = createDelta();\n            }\n            const prevProjectionTransform = this.projectionTransform;\n            /**\n             * Update the delta between the corrected box and the target box before user-set transforms were applied.\n             * This will allow us to calculate the corrected borderRadius and boxShadow to compensate\n             * for our layout reprojection, but still allow them to be scaled correctly by the user.\n             * It might be that to simplify this we may want to accept that user-set scale is also corrected\n             * and we wouldn't have to keep and calc both deltas, OR we could support a user setting\n             * to allow people to choose whether these styles are corrected based on just the\n             * layout reprojection or the final bounding box.\n             */\n            calcBoxDelta(this.projectionDelta, this.layoutCorrected, target, this.latestValues);\n            this.projectionTransform = buildProjectionTransform(this.projectionDelta, this.treeScale);\n            if (this.projectionTransform !== prevProjectionTransform ||\n                this.treeScale.x !== prevTreeScaleX ||\n                this.treeScale.y !== prevTreeScaleY) {\n                this.hasProjected = true;\n                this.scheduleRender();\n                this.notifyListeners(\"projectionUpdate\", target);\n            }\n            /**\n             * Increase debug counter for recalculated projections\n             */\n            projectionFrameData.recalculatedProjection++;\n        }\n        hide() {\n            this.isVisible = false;\n            // TODO: Schedule render\n        }\n        show() {\n            this.isVisible = true;\n            // TODO: Schedule render\n        }\n        scheduleRender(notifyAll = true) {\n            this.options.scheduleRender && this.options.scheduleRender();\n            if (notifyAll) {\n                const stack = this.getStack();\n                stack && stack.scheduleRender();\n            }\n            if (this.resumingFrom && !this.resumingFrom.instance) {\n                this.resumingFrom = undefined;\n            }\n        }\n        setAnimationOrigin(delta, hasOnlyRelativeTargetChanged = false) {\n            const snapshot = this.snapshot;\n            const snapshotLatestValues = snapshot\n                ? snapshot.latestValues\n                : {};\n            const mixedValues = { ...this.latestValues };\n            const targetDelta = createDelta();\n            if (!this.relativeParent ||\n                !this.relativeParent.options.layoutRoot) {\n                this.relativeTarget = this.relativeTargetOrigin = undefined;\n            }\n            this.attemptToResolveRelativeTarget = !hasOnlyRelativeTargetChanged;\n            const relativeLayout = createBox();\n            const snapshotSource = snapshot ? snapshot.source : undefined;\n            const layoutSource = this.layout ? this.layout.source : undefined;\n            const isSharedLayoutAnimation = snapshotSource !== layoutSource;\n            const stack = this.getStack();\n            const isOnlyMember = !stack || stack.members.length <= 1;\n            const shouldCrossfadeOpacity = Boolean(isSharedLayoutAnimation &&\n                !isOnlyMember &&\n                this.options.crossfade === true &&\n                !this.path.some(hasOpacityCrossfade));\n            this.animationProgress = 0;\n            let prevRelativeTarget;\n            this.mixTargetDelta = (latest) => {\n                const progress = latest / 1000;\n                mixAxisDelta(targetDelta.x, delta.x, progress);\n                mixAxisDelta(targetDelta.y, delta.y, progress);\n                this.setTargetDelta(targetDelta);\n                if (this.relativeTarget &&\n                    this.relativeTargetOrigin &&\n                    this.layout &&\n                    this.relativeParent &&\n                    this.relativeParent.layout) {\n                    calcRelativePosition(relativeLayout, this.layout.layoutBox, this.relativeParent.layout.layoutBox);\n                    mixBox(this.relativeTarget, this.relativeTargetOrigin, relativeLayout, progress);\n                    /**\n                     * If this is an unchanged relative target we can consider the\n                     * projection not dirty.\n                     */\n                    if (prevRelativeTarget &&\n                        boxEquals(this.relativeTarget, prevRelativeTarget)) {\n                        this.isProjectionDirty = false;\n                    }\n                    if (!prevRelativeTarget)\n                        prevRelativeTarget = createBox();\n                    copyBoxInto(prevRelativeTarget, this.relativeTarget);\n                }\n                if (isSharedLayoutAnimation) {\n                    this.animationValues = mixedValues;\n                    mixValues(mixedValues, snapshotLatestValues, this.latestValues, progress, shouldCrossfadeOpacity, isOnlyMember);\n                }\n                this.root.scheduleUpdateProjection();\n                this.scheduleRender();\n                this.animationProgress = progress;\n            };\n            this.mixTargetDelta(this.options.layoutRoot ? 1000 : 0);\n        }\n        startAnimation(options) {\n            this.notifyListeners(\"animationStart\");\n            this.currentAnimation && this.currentAnimation.stop();\n            if (this.resumingFrom && this.resumingFrom.currentAnimation) {\n                this.resumingFrom.currentAnimation.stop();\n            }\n            if (this.pendingAnimation) {\n                cancelFrame(this.pendingAnimation);\n                this.pendingAnimation = undefined;\n            }\n            /**\n             * Start the animation in the next frame to have a frame with progress 0,\n             * where the target is the same as when the animation started, so we can\n             * calculate the relative positions correctly for instant transitions.\n             */\n            this.pendingAnimation = frame.update(() => {\n                globalProjectionState.hasAnimatedSinceResize = true;\n                this.currentAnimation = animateSingleValue(0, animationTarget, {\n                    ...options,\n                    onUpdate: (latest) => {\n                        this.mixTargetDelta(latest);\n                        options.onUpdate && options.onUpdate(latest);\n                    },\n                    onComplete: () => {\n                        options.onComplete && options.onComplete();\n                        this.completeAnimation();\n                    },\n                });\n                if (this.resumingFrom) {\n                    this.resumingFrom.currentAnimation = this.currentAnimation;\n                }\n                this.pendingAnimation = undefined;\n            });\n        }\n        completeAnimation() {\n            if (this.resumingFrom) {\n                this.resumingFrom.currentAnimation = undefined;\n                this.resumingFrom.preserveOpacity = undefined;\n            }\n            const stack = this.getStack();\n            stack && stack.exitAnimationComplete();\n            this.resumingFrom =\n                this.currentAnimation =\n                    this.animationValues =\n                        undefined;\n            this.notifyListeners(\"animationComplete\");\n        }\n        finishAnimation() {\n            if (this.currentAnimation) {\n                this.mixTargetDelta && this.mixTargetDelta(animationTarget);\n                this.currentAnimation.stop();\n            }\n            this.completeAnimation();\n        }\n        applyTransformsToTarget() {\n            const lead = this.getLead();\n            let { targetWithTransforms, target, layout, latestValues } = lead;\n            if (!targetWithTransforms || !target || !layout)\n                return;\n            /**\n             * If we're only animating position, and this element isn't the lead element,\n             * then instead of projecting into the lead box we instead want to calculate\n             * a new target that aligns the two boxes but maintains the layout shape.\n             */\n            if (this !== lead &&\n                this.layout &&\n                layout &&\n                shouldAnimatePositionOnly(this.options.animationType, this.layout.layoutBox, layout.layoutBox)) {\n                target = this.target || createBox();\n                const xLength = calcLength(this.layout.layoutBox.x);\n                target.x.min = lead.target.x.min;\n                target.x.max = target.x.min + xLength;\n                const yLength = calcLength(this.layout.layoutBox.y);\n                target.y.min = lead.target.y.min;\n                target.y.max = target.y.min + yLength;\n            }\n            copyBoxInto(targetWithTransforms, target);\n            /**\n             * Apply the latest user-set transforms to the targetBox to produce the targetBoxFinal.\n             * This is the final box that we will then project into by calculating a transform delta and\n             * applying it to the corrected box.\n             */\n            transformBox(targetWithTransforms, latestValues);\n            /**\n             * Update the delta between the corrected box and the final target box, after\n             * user-set transforms are applied to it. This will be used by the renderer to\n             * create a transform style that will reproject the element from its layout layout\n             * into the desired bounding box.\n             */\n            calcBoxDelta(this.projectionDeltaWithTransform, this.layoutCorrected, targetWithTransforms, latestValues);\n        }\n        registerSharedNode(layoutId, node) {\n            if (!this.sharedNodes.has(layoutId)) {\n                this.sharedNodes.set(layoutId, new NodeStack());\n            }\n            const stack = this.sharedNodes.get(layoutId);\n            stack.add(node);\n            const config = node.options.initialPromotionConfig;\n            node.promote({\n                transition: config ? config.transition : undefined,\n                preserveFollowOpacity: config && config.shouldPreserveFollowOpacity\n                    ? config.shouldPreserveFollowOpacity(node)\n                    : undefined,\n            });\n        }\n        isLead() {\n            const stack = this.getStack();\n            return stack ? stack.lead === this : true;\n        }\n        getLead() {\n            var _a;\n            const { layoutId } = this.options;\n            return layoutId ? ((_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.lead) || this : this;\n        }\n        getPrevLead() {\n            var _a;\n            const { layoutId } = this.options;\n            return layoutId ? (_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.prevLead : undefined;\n        }\n        getStack() {\n            const { layoutId } = this.options;\n            if (layoutId)\n                return this.root.sharedNodes.get(layoutId);\n        }\n        promote({ needsReset, transition, preserveFollowOpacity, } = {}) {\n            const stack = this.getStack();\n            if (stack)\n                stack.promote(this, preserveFollowOpacity);\n            if (needsReset) {\n                this.projectionDelta = undefined;\n                this.needsReset = true;\n            }\n            if (transition)\n                this.setOptions({ transition });\n        }\n        relegate() {\n            const stack = this.getStack();\n            if (stack) {\n                return stack.relegate(this);\n            }\n            else {\n                return false;\n            }\n        }\n        resetSkewAndRotation() {\n            const { visualElement } = this.options;\n            if (!visualElement)\n                return;\n            // If there's no detected skew or rotation values, we can early return without a forced render.\n            let hasDistortingTransform = false;\n            /**\n             * An unrolled check for rotation values. Most elements don't have any rotation and\n             * skipping the nested loop and new object creation is 50% faster.\n             */\n            const { latestValues } = visualElement;\n            if (latestValues.z ||\n                latestValues.rotate ||\n                latestValues.rotateX ||\n                latestValues.rotateY ||\n                latestValues.rotateZ ||\n                latestValues.skewX ||\n                latestValues.skewY) {\n                hasDistortingTransform = true;\n            }\n            // If there's no distorting values, we don't need to do any more.\n            if (!hasDistortingTransform)\n                return;\n            const resetValues = {};\n            if (latestValues.z) {\n                resetDistortingTransform(\"z\", visualElement, resetValues, this.animationValues);\n            }\n            // Check the skew and rotate value of all axes and reset to 0\n            for (let i = 0; i < transformAxes.length; i++) {\n                resetDistortingTransform(`rotate${transformAxes[i]}`, visualElement, resetValues, this.animationValues);\n                resetDistortingTransform(`skew${transformAxes[i]}`, visualElement, resetValues, this.animationValues);\n            }\n            // Force a render of this element to apply the transform with all skews and rotations\n            // set to 0.\n            visualElement.render();\n            // Put back all the values we reset\n            for (const key in resetValues) {\n                visualElement.setStaticValue(key, resetValues[key]);\n                if (this.animationValues) {\n                    this.animationValues[key] = resetValues[key];\n                }\n            }\n            // Schedule a render for the next frame. This ensures we won't visually\n            // see the element with the reset rotate value applied.\n            visualElement.scheduleRender();\n        }\n        getProjectionStyles(styleProp) {\n            var _a, _b;\n            if (!this.instance || this.isSVG)\n                return undefined;\n            if (!this.isVisible) {\n                return hiddenVisibility;\n            }\n            const styles = {\n                visibility: \"\",\n            };\n            const transformTemplate = this.getTransformTemplate();\n            if (this.needsReset) {\n                this.needsReset = false;\n                styles.opacity = \"\";\n                styles.pointerEvents =\n                    resolveMotionValue(styleProp === null || styleProp === void 0 ? void 0 : styleProp.pointerEvents) || \"\";\n                styles.transform = transformTemplate\n                    ? transformTemplate(this.latestValues, \"\")\n                    : \"none\";\n                return styles;\n            }\n            const lead = this.getLead();\n            if (!this.projectionDelta || !this.layout || !lead.target) {\n                const emptyStyles = {};\n                if (this.options.layoutId) {\n                    emptyStyles.opacity =\n                        this.latestValues.opacity !== undefined\n                            ? this.latestValues.opacity\n                            : 1;\n                    emptyStyles.pointerEvents =\n                        resolveMotionValue(styleProp === null || styleProp === void 0 ? void 0 : styleProp.pointerEvents) || \"\";\n                }\n                if (this.hasProjected && !hasTransform(this.latestValues)) {\n                    emptyStyles.transform = transformTemplate\n                        ? transformTemplate({}, \"\")\n                        : \"none\";\n                    this.hasProjected = false;\n                }\n                return emptyStyles;\n            }\n            const valuesToRender = lead.animationValues || lead.latestValues;\n            this.applyTransformsToTarget();\n            styles.transform = buildProjectionTransform(this.projectionDeltaWithTransform, this.treeScale, valuesToRender);\n            if (transformTemplate) {\n                styles.transform = transformTemplate(valuesToRender, styles.transform);\n            }\n            const { x, y } = this.projectionDelta;\n            styles.transformOrigin = `${x.origin * 100}% ${y.origin * 100}% 0`;\n            if (lead.animationValues) {\n                /**\n                 * If the lead component is animating, assign this either the entering/leaving\n                 * opacity\n                 */\n                styles.opacity =\n                    lead === this\n                        ? (_b = (_a = valuesToRender.opacity) !== null && _a !== void 0 ? _a : this.latestValues.opacity) !== null && _b !== void 0 ? _b : 1\n                        : this.preserveOpacity\n                            ? this.latestValues.opacity\n                            : valuesToRender.opacityExit;\n            }\n            else {\n                /**\n                 * Or we're not animating at all, set the lead component to its layout\n                 * opacity and other components to hidden.\n                 */\n                styles.opacity =\n                    lead === this\n                        ? valuesToRender.opacity !== undefined\n                            ? valuesToRender.opacity\n                            : \"\"\n                        : valuesToRender.opacityExit !== undefined\n                            ? valuesToRender.opacityExit\n                            : 0;\n            }\n            /**\n             * Apply scale correction\n             */\n            for (const key in scaleCorrectors) {\n                if (valuesToRender[key] === undefined)\n                    continue;\n                const { correct, applyTo } = scaleCorrectors[key];\n                /**\n                 * Only apply scale correction to the value if we have an\n                 * active projection transform. Otherwise these values become\n                 * vulnerable to distortion if the element changes size without\n                 * a corresponding layout animation.\n                 */\n                const corrected = styles.transform === \"none\"\n                    ? valuesToRender[key]\n                    : correct(valuesToRender[key], lead);\n                if (applyTo) {\n                    const num = applyTo.length;\n                    for (let i = 0; i < num; i++) {\n                        styles[applyTo[i]] = corrected;\n                    }\n                }\n                else {\n                    styles[key] = corrected;\n                }\n            }\n            /**\n             * Disable pointer events on follow components. This is to ensure\n             * that if a follow component covers a lead component it doesn't block\n             * pointer events on the lead.\n             */\n            if (this.options.layoutId) {\n                styles.pointerEvents =\n                    lead === this\n                        ? resolveMotionValue(styleProp === null || styleProp === void 0 ? void 0 : styleProp.pointerEvents) || \"\"\n                        : \"none\";\n            }\n            return styles;\n        }\n        clearSnapshot() {\n            this.resumeFrom = this.snapshot = undefined;\n        }\n        // Only run on root\n        resetTree() {\n            this.root.nodes.forEach((node) => { var _a; return (_a = node.currentAnimation) === null || _a === void 0 ? void 0 : _a.stop(); });\n            this.root.nodes.forEach(clearMeasurements);\n            this.root.sharedNodes.clear();\n        }\n    };\n}\nfunction updateLayout(node) {\n    node.updateLayout();\n}\nfunction notifyLayoutUpdate(node) {\n    var _a;\n    const snapshot = ((_a = node.resumeFrom) === null || _a === void 0 ? void 0 : _a.snapshot) || node.snapshot;\n    if (node.isLead() &&\n        node.layout &&\n        snapshot &&\n        node.hasListeners(\"didUpdate\")) {\n        const { layoutBox: layout, measuredBox: measuredLayout } = node.layout;\n        const { animationType } = node.options;\n        const isShared = snapshot.source !== node.layout.source;\n        // TODO Maybe we want to also resize the layout snapshot so we don't trigger\n        // animations for instance if layout=\"size\" and an element has only changed position\n        if (animationType === \"size\") {\n            eachAxis((axis) => {\n                const axisSnapshot = isShared\n                    ? snapshot.measuredBox[axis]\n                    : snapshot.layoutBox[axis];\n                const length = calcLength(axisSnapshot);\n                axisSnapshot.min = layout[axis].min;\n                axisSnapshot.max = axisSnapshot.min + length;\n            });\n        }\n        else if (shouldAnimatePositionOnly(animationType, snapshot.layoutBox, layout)) {\n            eachAxis((axis) => {\n                const axisSnapshot = isShared\n                    ? snapshot.measuredBox[axis]\n                    : snapshot.layoutBox[axis];\n                const length = calcLength(layout[axis]);\n                axisSnapshot.max = axisSnapshot.min + length;\n                /**\n                 * Ensure relative target gets resized and rerendererd\n                 */\n                if (node.relativeTarget && !node.currentAnimation) {\n                    node.isProjectionDirty = true;\n                    node.relativeTarget[axis].max =\n                        node.relativeTarget[axis].min + length;\n                }\n            });\n        }\n        const layoutDelta = createDelta();\n        calcBoxDelta(layoutDelta, layout, snapshot.layoutBox);\n        const visualDelta = createDelta();\n        if (isShared) {\n            calcBoxDelta(visualDelta, node.applyTransform(measuredLayout, true), snapshot.measuredBox);\n        }\n        else {\n            calcBoxDelta(visualDelta, layout, snapshot.layoutBox);\n        }\n        const hasLayoutChanged = !isDeltaZero(layoutDelta);\n        let hasRelativeTargetChanged = false;\n        if (!node.resumeFrom) {\n            const relativeParent = node.getClosestProjectingParent();\n            /**\n             * If the relativeParent is itself resuming from a different element then\n             * the relative snapshot is not relavent\n             */\n            if (relativeParent && !relativeParent.resumeFrom) {\n                const { snapshot: parentSnapshot, layout: parentLayout } = relativeParent;\n                if (parentSnapshot && parentLayout) {\n                    const relativeSnapshot = createBox();\n                    calcRelativePosition(relativeSnapshot, snapshot.layoutBox, parentSnapshot.layoutBox);\n                    const relativeLayout = createBox();\n                    calcRelativePosition(relativeLayout, layout, parentLayout.layoutBox);\n                    if (!boxEqualsRounded(relativeSnapshot, relativeLayout)) {\n                        hasRelativeTargetChanged = true;\n                    }\n                    if (relativeParent.options.layoutRoot) {\n                        node.relativeTarget = relativeLayout;\n                        node.relativeTargetOrigin = relativeSnapshot;\n                        node.relativeParent = relativeParent;\n                    }\n                }\n            }\n        }\n        node.notifyListeners(\"didUpdate\", {\n            layout,\n            snapshot,\n            delta: visualDelta,\n            layoutDelta,\n            hasLayoutChanged,\n            hasRelativeTargetChanged,\n        });\n    }\n    else if (node.isLead()) {\n        const { onExitComplete } = node.options;\n        onExitComplete && onExitComplete();\n    }\n    /**\n     * Clearing transition\n     * TODO: Investigate why this transition is being passed in as {type: false } from Framer\n     * and why we need it at all\n     */\n    node.options.transition = undefined;\n}\nfunction propagateDirtyNodes(node) {\n    /**\n     * Increase debug counter for nodes encountered this frame\n     */\n    projectionFrameData.totalNodes++;\n    if (!node.parent)\n        return;\n    /**\n     * If this node isn't projecting, propagate isProjectionDirty. It will have\n     * no performance impact but it will allow the next child that *is* projecting\n     * but *isn't* dirty to just check its parent to see if *any* ancestor needs\n     * correcting.\n     */\n    if (!node.isProjecting()) {\n        node.isProjectionDirty = node.parent.isProjectionDirty;\n    }\n    /**\n     * Propagate isSharedProjectionDirty and isTransformDirty\n     * throughout the whole tree. A future revision can take another look at\n     * this but for safety we still recalcualte shared nodes.\n     */\n    node.isSharedProjectionDirty || (node.isSharedProjectionDirty = Boolean(node.isProjectionDirty ||\n        node.parent.isProjectionDirty ||\n        node.parent.isSharedProjectionDirty));\n    node.isTransformDirty || (node.isTransformDirty = node.parent.isTransformDirty);\n}\nfunction cleanDirtyNodes(node) {\n    node.isProjectionDirty =\n        node.isSharedProjectionDirty =\n            node.isTransformDirty =\n                false;\n}\nfunction clearSnapshot(node) {\n    node.clearSnapshot();\n}\nfunction clearMeasurements(node) {\n    node.clearMeasurements();\n}\nfunction clearIsLayoutDirty(node) {\n    node.isLayoutDirty = false;\n}\nfunction resetTransformStyle(node) {\n    const { visualElement } = node.options;\n    if (visualElement && visualElement.getProps().onBeforeLayoutMeasure) {\n        visualElement.notify(\"BeforeLayoutMeasure\");\n    }\n    node.resetTransform();\n}\nfunction finishAnimation(node) {\n    node.finishAnimation();\n    node.targetDelta = node.relativeTarget = node.target = undefined;\n    node.isProjectionDirty = true;\n}\nfunction resolveTargetDelta(node) {\n    node.resolveTargetDelta();\n}\nfunction calcProjection(node) {\n    node.calcProjection();\n}\nfunction resetSkewAndRotation(node) {\n    node.resetSkewAndRotation();\n}\nfunction removeLeadSnapshots(stack) {\n    stack.removeLeadSnapshot();\n}\nfunction mixAxisDelta(output, delta, p) {\n    output.translate = mixNumber(delta.translate, 0, p);\n    output.scale = mixNumber(delta.scale, 1, p);\n    output.origin = delta.origin;\n    output.originPoint = delta.originPoint;\n}\nfunction mixAxis(output, from, to, p) {\n    output.min = mixNumber(from.min, to.min, p);\n    output.max = mixNumber(from.max, to.max, p);\n}\nfunction mixBox(output, from, to, p) {\n    mixAxis(output.x, from.x, to.x, p);\n    mixAxis(output.y, from.y, to.y, p);\n}\nfunction hasOpacityCrossfade(node) {\n    return (node.animationValues && node.animationValues.opacityExit !== undefined);\n}\nconst defaultLayoutTransition = {\n    duration: 0.45,\n    ease: [0.4, 0, 0.1, 1],\n};\nconst userAgentContains = (string) => typeof navigator !== \"undefined\" &&\n    navigator.userAgent &&\n    navigator.userAgent.toLowerCase().includes(string);\n/**\n * Measured bounding boxes must be rounded in Safari and\n * left untouched in Chrome, otherwise non-integer layouts within scaled-up elements\n * can appear to jump.\n */\nconst roundPoint = userAgentContains(\"applewebkit/\") && !userAgentContains(\"chrome/\")\n    ? Math.round\n    : noop;\nfunction roundAxis(axis) {\n    // Round to the nearest .5 pixels to support subpixel layouts\n    axis.min = roundPoint(axis.min);\n    axis.max = roundPoint(axis.max);\n}\nfunction roundBox(box) {\n    roundAxis(box.x);\n    roundAxis(box.y);\n}\nfunction shouldAnimatePositionOnly(animationType, snapshot, layout) {\n    return (animationType === \"position\" ||\n        (animationType === \"preserve-aspect\" &&\n            !isNear(aspectRatio(snapshot), aspectRatio(layout), 0.2)));\n}\n\nexport { cleanDirtyNodes, createProjectionNode, mixAxis, mixAxisDelta, mixBox, propagateDirtyNodes };\n","import { createProjectionNode } from './create-projection-node.mjs';\nimport { addDomEvent } from '../../events/add-dom-event.mjs';\n\nconst DocumentProjectionNode = createProjectionNode({\n    attachResizeListener: (ref, notify) => addDomEvent(ref, \"resize\", notify),\n    measureScroll: () => ({\n        x: document.documentElement.scrollLeft || document.body.scrollLeft,\n        y: document.documentElement.scrollTop || document.body.scrollTop,\n    }),\n    checkIsScrollRoot: () => true,\n});\n\nexport { DocumentProjectionNode };\n","import { createProjectionNode } from './create-projection-node.mjs';\nimport { DocumentProjectionNode } from './DocumentProjectionNode.mjs';\n\nconst rootProjectionNode = {\n    current: undefined,\n};\nconst HTMLProjectionNode = createProjectionNode({\n    measureScroll: (instance) => ({\n        x: instance.scrollLeft,\n        y: instance.scrollTop,\n    }),\n    defaultParent: () => {\n        if (!rootProjectionNode.current) {\n            const documentNode = new DocumentProjectionNode({});\n            documentNode.mount(window);\n            documentNode.setOptions({ layoutScroll: true });\n            rootProjectionNode.current = documentNode;\n        }\n        return rootProjectionNode.current;\n    },\n    resetTransform: (instance, value) => {\n        instance.style.transform = value !== undefined ? value : \"none\";\n    },\n    checkIsScrollRoot: (instance) => Boolean(window.getComputedStyle(instance).position === \"fixed\"),\n});\n\nexport { HTMLProjectionNode, rootProjectionNode };\n","import { DragGesture } from '../../gestures/drag/index.mjs';\nimport { PanGesture } from '../../gestures/pan/index.mjs';\nimport { MeasureLayout } from './layout/MeasureLayout.mjs';\nimport { HTMLProjectionNode } from '../../projection/node/HTMLProjectionNode.mjs';\n\nconst drag = {\n    pan: {\n        Feature: PanGesture,\n    },\n    drag: {\n        Feature: DragGesture,\n        ProjectionNode: HTMLProjectionNode,\n        MeasureLayout,\n    },\n};\n\nexport { drag };\n","// Does this device prefer reduced motion? Returns `null` server-side.\nconst prefersReducedMotion = { current: null };\nconst hasReducedMotionListener = { current: false };\n\nexport { hasReducedMotionListener, prefersReducedMotion };\n","import { isBrowser } from '../is-browser.mjs';\nimport { hasReducedMotionListener, prefersReducedMotion } from './state.mjs';\n\nfunction initPrefersReducedMotion() {\n    hasReducedMotionListener.current = true;\n    if (!isBrowser)\n        return;\n    if (window.matchMedia) {\n        const motionMediaQuery = window.matchMedia(\"(prefers-reduced-motion)\");\n        const setReducedMotionPreferences = () => (prefersReducedMotion.current = motionMediaQuery.matches);\n        motionMediaQuery.addListener(setReducedMotionPreferences);\n        setReducedMotionPreferences();\n    }\n    else {\n        prefersReducedMotion.current = false;\n    }\n}\n\nexport { initPrefersReducedMotion };\n","import { isWillChangeMotionValue } from '../../value/use-will-change/is.mjs';\nimport { warnOnce } from '../../utils/warn-once.mjs';\nimport { motionValue } from '../../value/index.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\n\nfunction updateMotionValuesFromProps(element, next, prev) {\n    const { willChange } = next;\n    for (const key in next) {\n        const nextValue = next[key];\n        const prevValue = prev[key];\n        if (isMotionValue(nextValue)) {\n            /**\n             * If this is a motion value found in props or style, we want to add it\n             * to our visual element's motion value map.\n             */\n            element.addValue(key, nextValue);\n            if (isWillChangeMotionValue(willChange)) {\n                willChange.add(key);\n            }\n            /**\n             * Check the version of the incoming motion value with this version\n             * and warn against mismatches.\n             */\n            if (process.env.NODE_ENV === \"development\") {\n                warnOnce(nextValue.version === \"11.2.12\", `Attempting to mix Framer Motion versions ${nextValue.version} with 11.2.12 may not work as expected.`);\n            }\n        }\n        else if (isMotionValue(prevValue)) {\n            /**\n             * If we're swapping from a motion value to a static value,\n             * create a new motion value from that\n             */\n            element.addValue(key, motionValue(nextValue, { owner: element }));\n            if (isWillChangeMotionValue(willChange)) {\n                willChange.remove(key);\n            }\n        }\n        else if (prevValue !== nextValue) {\n            /**\n             * If this is a flat value that has changed, update the motion value\n             * or create one if it doesn't exist. We only want to do this if we're\n             * not handling the value with our animation state.\n             */\n            if (element.hasValue(key)) {\n                const existingValue = element.getValue(key);\n                if (existingValue.liveStyle === true) {\n                    existingValue.jump(nextValue);\n                }\n                else if (!existingValue.hasAnimated) {\n                    existingValue.set(nextValue);\n                }\n            }\n            else {\n                const latestValue = element.getStaticValue(key);\n                element.addValue(key, motionValue(latestValue !== undefined ? latestValue : nextValue, { owner: element }));\n            }\n        }\n    }\n    // Handle removed values\n    for (const key in prev) {\n        if (next[key] === undefined)\n            element.removeValue(key);\n    }\n    return next;\n}\n\nexport { updateMotionValuesFromProps };\n","const visualElementStore = new WeakMap();\n\nexport { visualElementStore };\n","import { color } from '../../../value/types/color/index.mjs';\nimport { complex } from '../../../value/types/complex/index.mjs';\nimport { dimensionValueTypes } from './dimensions.mjs';\nimport { testValueType } from './test.mjs';\n\n/**\n * A list of all ValueTypes\n */\nconst valueTypes = [...dimensionValueTypes, color, complex];\n/**\n * Tests a value against the list of ValueTypes\n */\nconst findValueType = (v) => valueTypes.find(testValueType(v));\n\nexport { findValueType };\n","import { createBox } from '../projection/geometry/models.mjs';\nimport { initPrefersReducedMotion } from '../utils/reduced-motion/index.mjs';\nimport { hasReducedMotionListener, prefersReducedMotion } from '../utils/reduced-motion/state.mjs';\nimport { SubscriptionManager } from '../utils/subscription-manager.mjs';\nimport { motionValue } from '../value/index.mjs';\nimport { isWillChangeMotionValue } from '../value/use-will-change/is.mjs';\nimport { isMotionValue } from '../value/utils/is-motion-value.mjs';\nimport { transformProps } from './html/utils/transform.mjs';\nimport { isControllingVariants, isVariantNode } from './utils/is-controlling-variants.mjs';\nimport { isVariantLabel } from './utils/is-variant-label.mjs';\nimport { updateMotionValuesFromProps } from './utils/motion-values.mjs';\nimport { resolveVariantFromProps } from './utils/resolve-variants.mjs';\nimport { warnOnce } from '../utils/warn-once.mjs';\nimport { featureDefinitions } from '../motion/features/definitions.mjs';\nimport { variantProps } from './utils/variant-props.mjs';\nimport { visualElementStore } from './store.mjs';\nimport { KeyframeResolver } from './utils/KeyframesResolver.mjs';\nimport { isNumericalString } from '../utils/is-numerical-string.mjs';\nimport { isZeroValueString } from '../utils/is-zero-value-string.mjs';\nimport { findValueType } from './dom/value-types/find.mjs';\nimport { complex } from '../value/types/complex/index.mjs';\nimport { getAnimatableNone } from './dom/value-types/animatable-none.mjs';\nimport { frame, cancelFrame } from '../frameloop/frame.mjs';\n\nconst propEventHandlers = [\n    \"AnimationStart\",\n    \"AnimationComplete\",\n    \"Update\",\n    \"BeforeLayoutMeasure\",\n    \"LayoutMeasure\",\n    \"LayoutAnimationStart\",\n    \"LayoutAnimationComplete\",\n];\nconst numVariantProps = variantProps.length;\n/**\n * A VisualElement is an imperative abstraction around UI elements such as\n * HTMLElement, SVGElement, Three.Object3D etc.\n */\nclass VisualElement {\n    /**\n     * This method takes React props and returns found MotionValues. For example, HTML\n     * MotionValues will be found within the style prop, whereas for Three.js within attribute arrays.\n     *\n     * This isn't an abstract method as it needs calling in the constructor, but it is\n     * intended to be one.\n     */\n    scrapeMotionValuesFromProps(_props, _prevProps, _visualElement) {\n        return {};\n    }\n    constructor({ parent, props, presenceContext, reducedMotionConfig, blockInitialAnimation, visualState, }, options = {}) {\n        this.resolveKeyframes = (keyframes, \n        // We use an onComplete callback here rather than a Promise as a Promise\n        // resolution is a microtask and we want to retain the ability to force\n        // the resolution of keyframes synchronously.\n        onComplete, name, value) => {\n            return new this.KeyframeResolver(keyframes, onComplete, name, value, this);\n        };\n        /**\n         * A reference to the current underlying Instance, e.g. a HTMLElement\n         * or Three.Mesh etc.\n         */\n        this.current = null;\n        /**\n         * A set containing references to this VisualElement's children.\n         */\n        this.children = new Set();\n        /**\n         * Determine what role this visual element should take in the variant tree.\n         */\n        this.isVariantNode = false;\n        this.isControllingVariants = false;\n        /**\n         * Decides whether this VisualElement should animate in reduced motion\n         * mode.\n         *\n         * TODO: This is currently set on every individual VisualElement but feels\n         * like it could be set globally.\n         */\n        this.shouldReduceMotion = null;\n        /**\n         * A map of all motion values attached to this visual element. Motion\n         * values are source of truth for any given animated value. A motion\n         * value might be provided externally by the component via props.\n         */\n        this.values = new Map();\n        this.KeyframeResolver = KeyframeResolver;\n        /**\n         * Cleanup functions for active features (hover/tap/exit etc)\n         */\n        this.features = {};\n        /**\n         * A map of every subscription that binds the provided or generated\n         * motion values onChange listeners to this visual element.\n         */\n        this.valueSubscriptions = new Map();\n        /**\n         * A reference to the previously-provided motion values as returned\n         * from scrapeMotionValuesFromProps. We use the keys in here to determine\n         * if any motion values need to be removed after props are updated.\n         */\n        this.prevMotionValues = {};\n        /**\n         * An object containing a SubscriptionManager for each active event.\n         */\n        this.events = {};\n        /**\n         * An object containing an unsubscribe function for each prop event subscription.\n         * For example, every \"Update\" event can have multiple subscribers via\n         * VisualElement.on(), but only one of those can be defined via the onUpdate prop.\n         */\n        this.propEventSubscriptions = {};\n        this.notifyUpdate = () => this.notify(\"Update\", this.latestValues);\n        this.render = () => {\n            if (!this.current)\n                return;\n            this.triggerBuild();\n            this.renderInstance(this.current, this.renderState, this.props.style, this.projection);\n        };\n        this.scheduleRender = () => frame.render(this.render, false, true);\n        const { latestValues, renderState } = visualState;\n        this.latestValues = latestValues;\n        this.baseTarget = { ...latestValues };\n        this.initialValues = props.initial ? { ...latestValues } : {};\n        this.renderState = renderState;\n        this.parent = parent;\n        this.props = props;\n        this.presenceContext = presenceContext;\n        this.depth = parent ? parent.depth + 1 : 0;\n        this.reducedMotionConfig = reducedMotionConfig;\n        this.options = options;\n        this.blockInitialAnimation = Boolean(blockInitialAnimation);\n        this.isControllingVariants = isControllingVariants(props);\n        this.isVariantNode = isVariantNode(props);\n        if (this.isVariantNode) {\n            this.variantChildren = new Set();\n        }\n        this.manuallyAnimateOnMount = Boolean(parent && parent.current);\n        /**\n         * Any motion values that are provided to the element when created\n         * aren't yet bound to the element, as this would technically be impure.\n         * However, we iterate through the motion values and set them to the\n         * initial values for this component.\n         *\n         * TODO: This is impure and we should look at changing this to run on mount.\n         * Doing so will break some tests but this isn't neccessarily a breaking change,\n         * more a reflection of the test.\n         */\n        const { willChange, ...initialMotionValues } = this.scrapeMotionValuesFromProps(props, {}, this);\n        for (const key in initialMotionValues) {\n            const value = initialMotionValues[key];\n            if (latestValues[key] !== undefined && isMotionValue(value)) {\n                value.set(latestValues[key], false);\n                if (isWillChangeMotionValue(willChange)) {\n                    willChange.add(key);\n                }\n            }\n        }\n    }\n    mount(instance) {\n        this.current = instance;\n        visualElementStore.set(instance, this);\n        if (this.projection && !this.projection.instance) {\n            this.projection.mount(instance);\n        }\n        if (this.parent && this.isVariantNode && !this.isControllingVariants) {\n            this.removeFromVariantTree = this.parent.addVariantChild(this);\n        }\n        this.values.forEach((value, key) => this.bindToMotionValue(key, value));\n        if (!hasReducedMotionListener.current) {\n            initPrefersReducedMotion();\n        }\n        this.shouldReduceMotion =\n            this.reducedMotionConfig === \"never\"\n                ? false\n                : this.reducedMotionConfig === \"always\"\n                    ? true\n                    : prefersReducedMotion.current;\n        if (process.env.NODE_ENV !== \"production\") {\n            warnOnce(this.shouldReduceMotion !== true, \"You have Reduced Motion enabled on your device. Animations may not appear as expected.\");\n        }\n        if (this.parent)\n            this.parent.children.add(this);\n        this.update(this.props, this.presenceContext);\n    }\n    unmount() {\n        visualElementStore.delete(this.current);\n        this.projection && this.projection.unmount();\n        cancelFrame(this.notifyUpdate);\n        cancelFrame(this.render);\n        this.valueSubscriptions.forEach((remove) => remove());\n        this.removeFromVariantTree && this.removeFromVariantTree();\n        this.parent && this.parent.children.delete(this);\n        for (const key in this.events) {\n            this.events[key].clear();\n        }\n        for (const key in this.features) {\n            const feature = this.features[key];\n            if (feature) {\n                feature.unmount();\n                feature.isMounted = false;\n            }\n        }\n        this.current = null;\n    }\n    bindToMotionValue(key, value) {\n        const valueIsTransform = transformProps.has(key);\n        const removeOnChange = value.on(\"change\", (latestValue) => {\n            this.latestValues[key] = latestValue;\n            this.props.onUpdate && frame.preRender(this.notifyUpdate);\n            if (valueIsTransform && this.projection) {\n                this.projection.isTransformDirty = true;\n            }\n        });\n        const removeOnRenderRequest = value.on(\"renderRequest\", this.scheduleRender);\n        this.valueSubscriptions.set(key, () => {\n            removeOnChange();\n            removeOnRenderRequest();\n            if (value.owner)\n                value.stop();\n        });\n    }\n    sortNodePosition(other) {\n        /**\n         * If these nodes aren't even of the same type we can't compare their depth.\n         */\n        if (!this.current ||\n            !this.sortInstanceNodePosition ||\n            this.type !== other.type) {\n            return 0;\n        }\n        return this.sortInstanceNodePosition(this.current, other.current);\n    }\n    updateFeatures() {\n        let key = \"animation\";\n        for (key in featureDefinitions) {\n            const featureDefinition = featureDefinitions[key];\n            if (!featureDefinition)\n                continue;\n            const { isEnabled, Feature: FeatureConstructor } = featureDefinition;\n            /**\n             * If this feature is enabled but not active, make a new instance.\n             */\n            if (!this.features[key] &&\n                FeatureConstructor &&\n                isEnabled(this.props)) {\n                this.features[key] = new FeatureConstructor(this);\n            }\n            /**\n             * If we have a feature, mount or update it.\n             */\n            if (this.features[key]) {\n                const feature = this.features[key];\n                if (feature.isMounted) {\n                    feature.update();\n                }\n                else {\n                    feature.mount();\n                    feature.isMounted = true;\n                }\n            }\n        }\n    }\n    triggerBuild() {\n        this.build(this.renderState, this.latestValues, this.options, this.props);\n    }\n    /**\n     * Measure the current viewport box with or without transforms.\n     * Only measures axis-aligned boxes, rotate and skew must be manually\n     * removed with a re-render to work.\n     */\n    measureViewportBox() {\n        return this.current\n            ? this.measureInstanceViewportBox(this.current, this.props)\n            : createBox();\n    }\n    getStaticValue(key) {\n        return this.latestValues[key];\n    }\n    setStaticValue(key, value) {\n        this.latestValues[key] = value;\n    }\n    /**\n     * Update the provided props. Ensure any newly-added motion values are\n     * added to our map, old ones removed, and listeners updated.\n     */\n    update(props, presenceContext) {\n        if (props.transformTemplate || this.props.transformTemplate) {\n            this.scheduleRender();\n        }\n        this.prevProps = this.props;\n        this.props = props;\n        this.prevPresenceContext = this.presenceContext;\n        this.presenceContext = presenceContext;\n        /**\n         * Update prop event handlers ie onAnimationStart, onAnimationComplete\n         */\n        for (let i = 0; i < propEventHandlers.length; i++) {\n            const key = propEventHandlers[i];\n            if (this.propEventSubscriptions[key]) {\n                this.propEventSubscriptions[key]();\n                delete this.propEventSubscriptions[key];\n            }\n            const listenerName = (\"on\" + key);\n            const listener = props[listenerName];\n            if (listener) {\n                this.propEventSubscriptions[key] = this.on(key, listener);\n            }\n        }\n        this.prevMotionValues = updateMotionValuesFromProps(this, this.scrapeMotionValuesFromProps(props, this.prevProps, this), this.prevMotionValues);\n        if (this.handleChildMotionValue) {\n            this.handleChildMotionValue();\n        }\n    }\n    getProps() {\n        return this.props;\n    }\n    /**\n     * Returns the variant definition with a given name.\n     */\n    getVariant(name) {\n        return this.props.variants ? this.props.variants[name] : undefined;\n    }\n    /**\n     * Returns the defined default transition on this component.\n     */\n    getDefaultTransition() {\n        return this.props.transition;\n    }\n    getTransformPagePoint() {\n        return this.props.transformPagePoint;\n    }\n    getClosestVariantNode() {\n        return this.isVariantNode\n            ? this\n            : this.parent\n                ? this.parent.getClosestVariantNode()\n                : undefined;\n    }\n    getVariantContext(startAtParent = false) {\n        if (startAtParent) {\n            return this.parent ? this.parent.getVariantContext() : undefined;\n        }\n        if (!this.isControllingVariants) {\n            const context = this.parent\n                ? this.parent.getVariantContext() || {}\n                : {};\n            if (this.props.initial !== undefined) {\n                context.initial = this.props.initial;\n            }\n            return context;\n        }\n        const context = {};\n        for (let i = 0; i < numVariantProps; i++) {\n            const name = variantProps[i];\n            const prop = this.props[name];\n            if (isVariantLabel(prop) || prop === false) {\n                context[name] = prop;\n            }\n        }\n        return context;\n    }\n    /**\n     * Add a child visual element to our set of children.\n     */\n    addVariantChild(child) {\n        const closestVariantNode = this.getClosestVariantNode();\n        if (closestVariantNode) {\n            closestVariantNode.variantChildren &&\n                closestVariantNode.variantChildren.add(child);\n            return () => closestVariantNode.variantChildren.delete(child);\n        }\n    }\n    /**\n     * Add a motion value and bind it to this visual element.\n     */\n    addValue(key, value) {\n        // Remove existing value if it exists\n        const existingValue = this.values.get(key);\n        if (value !== existingValue) {\n            if (existingValue)\n                this.removeValue(key);\n            this.bindToMotionValue(key, value);\n            this.values.set(key, value);\n            this.latestValues[key] = value.get();\n        }\n    }\n    /**\n     * Remove a motion value and unbind any active subscriptions.\n     */\n    removeValue(key) {\n        this.values.delete(key);\n        const unsubscribe = this.valueSubscriptions.get(key);\n        if (unsubscribe) {\n            unsubscribe();\n            this.valueSubscriptions.delete(key);\n        }\n        delete this.latestValues[key];\n        this.removeValueFromRenderState(key, this.renderState);\n    }\n    /**\n     * Check whether we have a motion value for this key\n     */\n    hasValue(key) {\n        return this.values.has(key);\n    }\n    getValue(key, defaultValue) {\n        if (this.props.values && this.props.values[key]) {\n            return this.props.values[key];\n        }\n        let value = this.values.get(key);\n        if (value === undefined && defaultValue !== undefined) {\n            value = motionValue(defaultValue === null ? undefined : defaultValue, { owner: this });\n            this.addValue(key, value);\n        }\n        return value;\n    }\n    /**\n     * If we're trying to animate to a previously unencountered value,\n     * we need to check for it in our state and as a last resort read it\n     * directly from the instance (which might have performance implications).\n     */\n    readValue(key, target) {\n        var _a;\n        let value = this.latestValues[key] !== undefined || !this.current\n            ? this.latestValues[key]\n            : (_a = this.getBaseTargetFromProps(this.props, key)) !== null && _a !== void 0 ? _a : this.readValueFromInstance(this.current, key, this.options);\n        if (value !== undefined && value !== null) {\n            if (typeof value === \"string\" &&\n                (isNumericalString(value) || isZeroValueString(value))) {\n                // If this is a number read as a string, ie \"0\" or \"200\", convert it to a number\n                value = parseFloat(value);\n            }\n            else if (!findValueType(value) && complex.test(target)) {\n                value = getAnimatableNone(key, target);\n            }\n            this.setBaseTarget(key, isMotionValue(value) ? value.get() : value);\n        }\n        return isMotionValue(value) ? value.get() : value;\n    }\n    /**\n     * Set the base target to later animate back to. This is currently\n     * only hydrated on creation and when we first read a value.\n     */\n    setBaseTarget(key, value) {\n        this.baseTarget[key] = value;\n    }\n    /**\n     * Find the base target for a value thats been removed from all animation\n     * props.\n     */\n    getBaseTarget(key) {\n        var _a;\n        const { initial } = this.props;\n        let valueFromInitial;\n        if (typeof initial === \"string\" || typeof initial === \"object\") {\n            const variant = resolveVariantFromProps(this.props, initial, (_a = this.presenceContext) === null || _a === void 0 ? void 0 : _a.custom);\n            if (variant) {\n                valueFromInitial = variant[key];\n            }\n        }\n        /**\n         * If this value still exists in the current initial variant, read that.\n         */\n        if (initial && valueFromInitial !== undefined) {\n            return valueFromInitial;\n        }\n        /**\n         * Alternatively, if this VisualElement config has defined a getBaseTarget\n         * so we can read the value from an alternative source, try that.\n         */\n        const target = this.getBaseTargetFromProps(this.props, key);\n        if (target !== undefined && !isMotionValue(target))\n            return target;\n        /**\n         * If the value was initially defined on initial, but it doesn't any more,\n         * return undefined. Otherwise return the value as initially read from the DOM.\n         */\n        return this.initialValues[key] !== undefined &&\n            valueFromInitial === undefined\n            ? undefined\n            : this.baseTarget[key];\n    }\n    on(eventName, callback) {\n        if (!this.events[eventName]) {\n            this.events[eventName] = new SubscriptionManager();\n        }\n        return this.events[eventName].add(callback);\n    }\n    notify(eventName, ...args) {\n        if (this.events[eventName]) {\n            this.events[eventName].notify(...args);\n        }\n    }\n}\n\nexport { VisualElement };\n","import { VisualElement } from '../VisualElement.mjs';\nimport { DOMKeyframesResolver } from './DOMKeyframesResolver.mjs';\n\nclass DOMVisualElement extends VisualElement {\n    constructor() {\n        super(...arguments);\n        this.KeyframeResolver = DOMKeyframesResolver;\n    }\n    sortInstanceNodePosition(a, b) {\n        /**\n         * compareDocumentPosition returns a bitmask, by using the bitwise &\n         * we're returning true if 2 in that bitmask is set to true. 2 is set\n         * to true if b preceeds a.\n         */\n        return a.compareDocumentPosition(b) & 2 ? 1 : -1;\n    }\n    getBaseTargetFromProps(props, key) {\n        return props.style\n            ? props.style[key]\n            : undefined;\n    }\n    removeValueFromRenderState(key, { vars, style }) {\n        delete vars[key];\n        delete style[key];\n    }\n}\n\nexport { DOMVisualElement };\n","import { buildHTMLStyles } from './utils/build-styles.mjs';\nimport { isCSSVariableName } from '../dom/utils/is-css-variable.mjs';\nimport { transformProps } from './utils/transform.mjs';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\nimport { renderHTML } from './utils/render.mjs';\nimport { getDefaultValueType } from '../dom/value-types/defaults.mjs';\nimport { measureViewportBox } from '../../projection/utils/measure.mjs';\nimport { DOMVisualElement } from '../dom/DOMVisualElement.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\n\nfunction getComputedStyle(element) {\n    return window.getComputedStyle(element);\n}\nclass HTMLVisualElement extends DOMVisualElement {\n    constructor() {\n        super(...arguments);\n        this.type = \"html\";\n    }\n    readValueFromInstance(instance, key) {\n        if (transformProps.has(key)) {\n            const defaultType = getDefaultValueType(key);\n            return defaultType ? defaultType.default || 0 : 0;\n        }\n        else {\n            const computedStyle = getComputedStyle(instance);\n            const value = (isCSSVariableName(key)\n                ? computedStyle.getPropertyValue(key)\n                : computedStyle[key]) || 0;\n            return typeof value === \"string\" ? value.trim() : value;\n        }\n    }\n    measureInstanceViewportBox(instance, { transformPagePoint }) {\n        return measureViewportBox(instance, transformPagePoint);\n    }\n    build(renderState, latestValues, options, props) {\n        buildHTMLStyles(renderState, latestValues, options, props.transformTemplate);\n    }\n    scrapeMotionValuesFromProps(props, prevProps, visualElement) {\n        return scrapeMotionValuesFromProps(props, prevProps, visualElement);\n    }\n    handleChildMotionValue() {\n        if (this.childSubscription) {\n            this.childSubscription();\n            delete this.childSubscription;\n        }\n        const { children } = this.props;\n        if (isMotionValue(children)) {\n            this.childSubscription = children.on(\"change\", (latest) => {\n                if (this.current)\n                    this.current.textContent = `${latest}`;\n            });\n        }\n    }\n    renderInstance(instance, renderState, styleProp, projection) {\n        renderHTML(instance, renderState, styleProp, projection);\n    }\n}\n\nexport { HTMLVisualElement, getComputedStyle };\n","import { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\nimport { DOMVisualElement } from '../dom/DOMVisualElement.mjs';\nimport { buildSVGAttrs } from './utils/build-attrs.mjs';\nimport { camelToDash } from '../dom/utils/camel-to-dash.mjs';\nimport { camelCaseAttributes } from './utils/camel-case-attrs.mjs';\nimport { transformProps } from '../html/utils/transform.mjs';\nimport { renderSVG } from './utils/render.mjs';\nimport { getDefaultValueType } from '../dom/value-types/defaults.mjs';\nimport { createBox } from '../../projection/geometry/models.mjs';\nimport { isSVGTag } from './utils/is-svg-tag.mjs';\n\nclass SVGVisualElement extends DOMVisualElement {\n    constructor() {\n        super(...arguments);\n        this.type = \"svg\";\n        this.isSVGTag = false;\n    }\n    getBaseTargetFromProps(props, key) {\n        return props[key];\n    }\n    readValueFromInstance(instance, key) {\n        if (transformProps.has(key)) {\n            const defaultType = getDefaultValueType(key);\n            return defaultType ? defaultType.default || 0 : 0;\n        }\n        key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n        return instance.getAttribute(key);\n    }\n    measureInstanceViewportBox() {\n        return createBox();\n    }\n    scrapeMotionValuesFromProps(props, prevProps, visualElement) {\n        return scrapeMotionValuesFromProps(props, prevProps, visualElement);\n    }\n    build(renderState, latestValues, options, props) {\n        buildSVGAttrs(renderState, latestValues, options, this.isSVGTag, props.transformTemplate);\n    }\n    renderInstance(instance, renderState, styleProp, projection) {\n        renderSVG(instance, renderState, styleProp, projection);\n    }\n    mount(instance) {\n        this.isSVGTag = isSVGTag(instance.tagName);\n        super.mount(instance);\n    }\n}\n\nexport { SVGVisualElement };\n","import { Fragment } from 'react';\nimport { HTMLVisualElement } from '../html/HTMLVisualElement.mjs';\nimport { SVGVisualElement } from '../svg/SVGVisualElement.mjs';\nimport { isSVGComponent } from './utils/is-svg-component.mjs';\n\nconst createDomVisualElement = (Component, options) => {\n    return isSVGComponent(Component)\n        ? new SVGVisualElement(options, { enableHardwareAcceleration: false })\n        : new HTMLVisualElement(options, {\n            allowProjection: Component !== Fragment,\n            enableHardwareAcceleration: true,\n        });\n};\n\nexport { createDomVisualElement };\n","import { HTMLProjectionNode } from '../../projection/node/HTMLProjectionNode.mjs';\nimport { MeasureLayout } from './layout/MeasureLayout.mjs';\n\nconst layout = {\n    layout: {\n        ProjectionNode: HTMLProjectionNode,\n        MeasureLayout,\n    },\n};\n\nexport { layout };\n","import { createMotionComponent } from '../../motion/index.mjs';\nimport { createMotionProxy } from './motion-proxy.mjs';\nimport { createDomMotionConfig } from './utils/create-config.mjs';\nimport { gestureAnimations } from '../../motion/features/gestures.mjs';\nimport { animations } from '../../motion/features/animations.mjs';\nimport { drag } from '../../motion/features/drag.mjs';\nimport { createDomVisualElement } from './create-visual-element.mjs';\nimport { layout } from '../../motion/features/layout.mjs';\n\nconst preloadedFeatures = {\n    ...animations,\n    ...gestureAnimations,\n    ...drag,\n    ...layout,\n};\n/**\n * HTML & SVG components, optimised for use with gestures and animation. These can be used as\n * drop-in replacements for any HTML & SVG component, all CSS & SVG properties are supported.\n *\n * @public\n */\nconst motion = /*@__PURE__*/ createMotionProxy((Component, config) => createDomMotionConfig(Component, config, preloadedFeatures, createDomVisualElement));\n/**\n * Create a DOM `motion` component with the provided string. This is primarily intended\n * as a full alternative to `motion` for consumers who have to support environments that don't\n * support `Proxy`.\n *\n * ```javascript\n * import { createDomMotionComponent } from \"framer-motion\"\n *\n * const motion = {\n *   div: createDomMotionComponent('div')\n * }\n * ```\n *\n * @public\n */\nfunction createDomMotionComponent(key) {\n    return createMotionComponent(createDomMotionConfig(key, { forwardMotionProps: false }, preloadedFeatures, createDomVisualElement));\n}\n\nexport { createDomMotionComponent, motion };\n","import { useRef } from 'react';\nimport { useIsomorphicLayoutEffect } from './use-isomorphic-effect.mjs';\n\nfunction useIsMounted() {\n    const isMounted = useRef(false);\n    useIsomorphicLayoutEffect(() => {\n        isMounted.current = true;\n        return () => {\n            isMounted.current = false;\n        };\n    }, []);\n    return isMounted;\n}\n\nexport { useIsMounted };\n","import { useState, useCallback } from 'react';\nimport { useIsMounted } from './use-is-mounted.mjs';\nimport { frame } from '../frameloop/frame.mjs';\n\nfunction useForceUpdate() {\n    const isMounted = useIsMounted();\n    const [forcedRenderCount, setForcedRenderCount] = useState(0);\n    const forceRender = useCallback(() => {\n        isMounted.current && setForcedRenderCount(forcedRenderCount + 1);\n    }, [forcedRenderCount]);\n    /**\n     * Defer this to the end of the next animation frame in case there are multiple\n     * synchronous calls.\n     */\n    const deferredForceRender = useCallback(() => frame.postRender(forceRender), [forceRender]);\n    return [deferredForceRender, forcedRenderCount];\n}\n\nexport { useForceUpdate };\n","import { jsx } from 'react/jsx-runtime';\nimport * as React from 'react';\nimport { useId, useRef, useContext, useInsertionEffect } from 'react';\nimport { MotionConfigContext } from '../../context/MotionConfigContext.mjs';\n\n/**\n * Measurement functionality has to be within a separate component\n * to leverage snapshot lifecycle.\n */\nclass PopChildMeasure extends React.Component {\n    getSnapshotBeforeUpdate(prevProps) {\n        const element = this.props.childRef.current;\n        if (element && prevProps.isPresent && !this.props.isPresent) {\n            const size = this.props.sizeRef.current;\n            size.height = element.offsetHeight || 0;\n            size.width = element.offsetWidth || 0;\n            size.top = element.offsetTop;\n            size.left = element.offsetLeft;\n        }\n        return null;\n    }\n    /**\n     * Required with getSnapshotBeforeUpdate to stop React complaining.\n     */\n    componentDidUpdate() { }\n    render() {\n        return this.props.children;\n    }\n}\nfunction PopChild({ children, isPresent }) {\n    const id = useId();\n    const ref = useRef(null);\n    const size = useRef({\n        width: 0,\n        height: 0,\n        top: 0,\n        left: 0,\n    });\n    const { nonce } = useContext(MotionConfigContext);\n    /**\n     * We create and inject a style block so we can apply this explicit\n     * sizing in a non-destructive manner by just deleting the style block.\n     *\n     * We can't apply size via render as the measurement happens\n     * in getSnapshotBeforeUpdate (post-render), likewise if we apply the\n     * styles directly on the DOM node, we might be overwriting\n     * styles set via the style prop.\n     */\n    useInsertionEffect(() => {\n        const { width, height, top, left } = size.current;\n        if (isPresent || !ref.current || !width || !height)\n            return;\n        ref.current.dataset.motionPopId = id;\n        const style = document.createElement(\"style\");\n        if (nonce)\n            style.nonce = nonce;\n        document.head.appendChild(style);\n        if (style.sheet) {\n            style.sheet.insertRule(`\n          [data-motion-pop-id=\"${id}\"] {\n            position: absolute !important;\n            width: ${width}px !important;\n            height: ${height}px !important;\n            top: ${top}px !important;\n            left: ${left}px !important;\n          }\n        `);\n        }\n        return () => {\n            document.head.removeChild(style);\n        };\n    }, [isPresent]);\n    return (jsx(PopChildMeasure, { isPresent: isPresent, childRef: ref, sizeRef: size, children: React.cloneElement(children, { ref }) }));\n}\n\nexport { PopChild };\n","import { jsx } from 'react/jsx-runtime';\nimport * as React from 'react';\nimport { useId, useMemo } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\nimport { PopChild } from './PopChild.mjs';\n\nconst PresenceChild = ({ children, initial, isPresent, onExitComplete, custom, presenceAffectsLayout, mode, }) => {\n    const presenceChildren = useConstant(newChildrenMap);\n    const id = useId();\n    const context = useMemo(() => ({\n        id,\n        initial,\n        isPresent,\n        custom,\n        onExitComplete: (childId) => {\n            presenceChildren.set(childId, true);\n            for (const isComplete of presenceChildren.values()) {\n                if (!isComplete)\n                    return; // can stop searching when any is incomplete\n            }\n            onExitComplete && onExitComplete();\n        },\n        register: (childId) => {\n            presenceChildren.set(childId, false);\n            return () => presenceChildren.delete(childId);\n        },\n    }), \n    /**\n     * If the presence of a child affects the layout of the components around it,\n     * we want to make a new context value to ensure they get re-rendered\n     * so they can detect that layout change.\n     */\n    presenceAffectsLayout ? [Math.random()] : [isPresent]);\n    useMemo(() => {\n        presenceChildren.forEach((_, key) => presenceChildren.set(key, false));\n    }, [isPresent]);\n    /**\n     * If there's no `motion` components to fire exit animations, we want to remove this\n     * component immediately.\n     */\n    React.useEffect(() => {\n        !isPresent &&\n            !presenceChildren.size &&\n            onExitComplete &&\n            onExitComplete();\n    }, [isPresent]);\n    if (mode === \"popLayout\") {\n        children = jsx(PopChild, { isPresent: isPresent, children: children });\n    }\n    return (jsx(PresenceContext.Provider, { value: context, children: children }));\n};\nfunction newChildrenMap() {\n    return new Map();\n}\n\nexport { PresenceChild };\n","import { useEffect } from 'react';\n\nfunction useUnmountEffect(callback) {\n    return useEffect(() => () => callback(), []);\n}\n\nexport { useUnmountEffect };\n","import { jsx, Fragment } from 'react/jsx-runtime';\nimport { useContext, useRef, cloneElement, Children, isValidElement } from 'react';\nimport { useForceUpdate } from '../../utils/use-force-update.mjs';\nimport { useIsMounted } from '../../utils/use-is-mounted.mjs';\nimport { PresenceChild } from './PresenceChild.mjs';\nimport { LayoutGroupContext } from '../../context/LayoutGroupContext.mjs';\nimport { useIsomorphicLayoutEffect } from '../../utils/use-isomorphic-effect.mjs';\nimport { useUnmountEffect } from '../../utils/use-unmount-effect.mjs';\nimport { invariant } from '../../utils/errors.mjs';\n\nconst getChildKey = (child) => child.key || \"\";\nfunction updateChildLookup(children, allChildren) {\n    children.forEach((child) => {\n        const key = getChildKey(child);\n        allChildren.set(key, child);\n    });\n}\nfunction onlyElements(children) {\n    const filtered = [];\n    // We use forEach here instead of map as map mutates the component key by preprending `.$`\n    Children.forEach(children, (child) => {\n        if (isValidElement(child))\n            filtered.push(child);\n    });\n    return filtered;\n}\n/**\n * `AnimatePresence` enables the animation of components that have been removed from the tree.\n *\n * When adding/removing more than a single child, every child **must** be given a unique `key` prop.\n *\n * Any `motion` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { motion, AnimatePresence } from 'framer-motion'\n *\n * export const Items = ({ items }) => (\n *   <AnimatePresence>\n *     {items.map(item => (\n *       <motion.div\n *         key={item.id}\n *         initial={{ opacity: 0 }}\n *         animate={{ opacity: 1 }}\n *         exit={{ opacity: 0 }}\n *       />\n *     ))}\n *   </AnimatePresence>\n * )\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * If a child contains multiple `motion` components with `exit` props, it will only unmount the child\n * once all `motion` components have finished animating out. Likewise, any components using\n * `usePresence` all need to call `safeToRemove`.\n *\n * @public\n */\nconst AnimatePresence = ({ children, custom, initial = true, onExitComplete, exitBeforeEnter, presenceAffectsLayout = true, mode = \"sync\", }) => {\n    invariant(!exitBeforeEnter, \"Replace exitBeforeEnter with mode='wait'\");\n    // We want to force a re-render once all exiting animations have finished. We\n    // either use a local forceRender function, or one from a parent context if it exists.\n    const forceRender = useContext(LayoutGroupContext).forceRender || useForceUpdate()[0];\n    const isMounted = useIsMounted();\n    // Filter out any children that aren't ReactElements. We can only track ReactElements with a props.key\n    const filteredChildren = onlyElements(children);\n    let childrenToRender = filteredChildren;\n    const exitingChildren = useRef(new Map()).current;\n    // Keep a living record of the children we're actually rendering so we\n    // can diff to figure out which are entering and exiting\n    const presentChildren = useRef(childrenToRender);\n    // A lookup table to quickly reference components by key\n    const allChildren = useRef(new Map()).current;\n    // If this is the initial component render, just deal with logic surrounding whether\n    // we play onMount animations or not.\n    const isInitialRender = useRef(true);\n    useIsomorphicLayoutEffect(() => {\n        isInitialRender.current = false;\n        updateChildLookup(filteredChildren, allChildren);\n        presentChildren.current = childrenToRender;\n    });\n    useUnmountEffect(() => {\n        isInitialRender.current = true;\n        allChildren.clear();\n        exitingChildren.clear();\n    });\n    if (isInitialRender.current) {\n        return (jsx(Fragment, { children: childrenToRender.map((child) => (jsx(PresenceChild, { isPresent: true, initial: initial ? undefined : false, presenceAffectsLayout: presenceAffectsLayout, mode: mode, children: child }, getChildKey(child)))) }));\n    }\n    // If this is a subsequent render, deal with entering and exiting children\n    childrenToRender = [...childrenToRender];\n    // Diff the keys of the currently-present and target children to update our\n    // exiting list.\n    const presentKeys = presentChildren.current.map(getChildKey);\n    const targetKeys = filteredChildren.map(getChildKey);\n    // Diff the present children with our target children and mark those that are exiting\n    const numPresent = presentKeys.length;\n    for (let i = 0; i < numPresent; i++) {\n        const key = presentKeys[i];\n        if (targetKeys.indexOf(key) === -1 && !exitingChildren.has(key)) {\n            exitingChildren.set(key, undefined);\n        }\n    }\n    // If we currently have exiting children, and we're deferring rendering incoming children\n    // until after all current children have exiting, empty the childrenToRender array\n    if (mode === \"wait\" && exitingChildren.size) {\n        childrenToRender = [];\n    }\n    // Loop through all currently exiting components and clone them to overwrite `animate`\n    // with any `exit` prop they might have defined.\n    exitingChildren.forEach((component, key) => {\n        // If this component is actually entering again, early return\n        if (targetKeys.indexOf(key) !== -1)\n            return;\n        const child = allChildren.get(key);\n        if (!child)\n            return;\n        const insertionIndex = presentKeys.indexOf(key);\n        let exitingComponent = component;\n        if (!exitingComponent) {\n            const onExit = () => {\n                // clean up the exiting children map\n                exitingChildren.delete(key);\n                // compute the keys of children that were rendered once but are no longer present\n                // this could happen in case of too many fast consequent renderings\n                // @link https://github.com/framer/motion/issues/2023\n                const leftOverKeys = Array.from(allChildren.keys()).filter((childKey) => !targetKeys.includes(childKey));\n                // clean up the all children map\n                leftOverKeys.forEach((leftOverKey) => allChildren.delete(leftOverKey));\n                // make sure to render only the children that are actually visible\n                presentChildren.current = filteredChildren.filter((presentChild) => {\n                    const presentChildKey = getChildKey(presentChild);\n                    return (\n                    // filter out the node exiting\n                    presentChildKey === key ||\n                        // filter out the leftover children\n                        leftOverKeys.includes(presentChildKey));\n                });\n                // Defer re-rendering until all exiting children have indeed left\n                if (!exitingChildren.size) {\n                    if (isMounted.current === false)\n                        return;\n                    forceRender();\n                    onExitComplete && onExitComplete();\n                }\n            };\n            exitingComponent = (jsx(PresenceChild, { isPresent: false, onExitComplete: onExit, custom: custom, presenceAffectsLayout: presenceAffectsLayout, mode: mode, children: child }, getChildKey(child)));\n            exitingChildren.set(key, exitingComponent);\n        }\n        childrenToRender.splice(insertionIndex, 0, exitingComponent);\n    });\n    // Add `MotionContext` even to children that don't need it to ensure we're rendering\n    // the same tree between renders\n    childrenToRender = childrenToRender.map((child) => {\n        const key = child.key;\n        return exitingChildren.has(key) ? (child) : (jsx(PresenceChild, { isPresent: true, presenceAffectsLayout: presenceAffectsLayout, mode: mode, children: child }, getChildKey(child)));\n    });\n    if (process.env.NODE_ENV !== \"production\" &&\n        mode === \"wait\" &&\n        childrenToRender.length > 1) {\n        console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to \"wait\". This will lead to odd visual behaviour.`);\n    }\n    return (jsx(Fragment, { children: exitingChildren.size\n            ? childrenToRender\n            : childrenToRender.map((child) => cloneElement(child)) }));\n};\n\nexport { AnimatePresence };\n","import { useContext, useState, useEffect } from 'react';\nimport { motionValue } from './index.mjs';\nimport { MotionConfigContext } from '../context/MotionConfigContext.mjs';\nimport { useConstant } from '../utils/use-constant.mjs';\n\n/**\n * Creates a `MotionValue` to track the state and velocity of a value.\n *\n * Usually, these are created automatically. For advanced use-cases, like use with `useTransform`, you can create `MotionValue`s externally and pass them into the animated component via the `style` prop.\n *\n * ```jsx\n * export const MyComponent = () => {\n *   const scale = useMotionValue(1)\n *\n *   return <motion.div style={{ scale }} />\n * }\n * ```\n *\n * @param initial - The initial state.\n *\n * @public\n */\nfunction useMotionValue(initial) {\n    const value = useConstant(() => motionValue(initial));\n    /**\n     * If this motion value is being used in static mode, like on\n     * the Framer canvas, force components to rerender when the motion\n     * value is updated.\n     */\n    const { isStatic } = useContext(MotionConfigContext);\n    if (isStatic) {\n        const [, setLatest] = useState(initial);\n        useEffect(() => value.on(\"change\", setLatest), []);\n    }\n    return value;\n}\n\nexport { useMotionValue };\n","import { interpolate } from './interpolate.mjs';\n\nconst isCustomValueType = (v) => {\n    return v && typeof v === \"object\" && v.mix;\n};\nconst getMixer = (v) => (isCustomValueType(v) ? v.mix : undefined);\nfunction transform(...args) {\n    const useImmediate = !Array.isArray(args[0]);\n    const argOffset = useImmediate ? 0 : -1;\n    const inputValue = args[0 + argOffset];\n    const inputRange = args[1 + argOffset];\n    const outputRange = args[2 + argOffset];\n    const options = args[3 + argOffset];\n    const interpolator = interpolate(inputRange, outputRange, {\n        mixer: getMixer(outputRange[0]),\n        ...options,\n    });\n    return useImmediate ? interpolator(inputValue) : interpolator;\n}\n\nexport { transform };\n","import { useMotionValue } from './use-motion-value.mjs';\nimport { useIsomorphicLayoutEffect } from '../utils/use-isomorphic-effect.mjs';\nimport { cancelFrame, frame } from '../frameloop/frame.mjs';\n\nfunction useCombineMotionValues(values, combineValues) {\n    /**\n     * Initialise the returned motion value. This remains the same between renders.\n     */\n    const value = useMotionValue(combineValues());\n    /**\n     * Create a function that will update the template motion value with the latest values.\n     * This is pre-bound so whenever a motion value updates it can schedule its\n     * execution in Framesync. If it's already been scheduled it won't be fired twice\n     * in a single frame.\n     */\n    const updateValue = () => value.set(combineValues());\n    /**\n     * Synchronously update the motion value with the latest values during the render.\n     * This ensures that within a React render, the styles applied to the DOM are up-to-date.\n     */\n    updateValue();\n    /**\n     * Subscribe to all motion values found within the template. Whenever any of them change,\n     * schedule an update.\n     */\n    useIsomorphicLayoutEffect(() => {\n        const scheduleUpdate = () => frame.preRender(updateValue, false, true);\n        const subscriptions = values.map((v) => v.on(\"change\", scheduleUpdate));\n        return () => {\n            subscriptions.forEach((unsubscribe) => unsubscribe());\n            cancelFrame(updateValue);\n        };\n    });\n    return value;\n}\n\nexport { useCombineMotionValues };\n","import { collectMotionValues } from './index.mjs';\nimport { useCombineMotionValues } from './use-combine-values.mjs';\n\nfunction useComputed(compute) {\n    /**\n     * Open session of collectMotionValues. Any MotionValue that calls get()\n     * will be saved into this array.\n     */\n    collectMotionValues.current = [];\n    compute();\n    const value = useCombineMotionValues(collectMotionValues.current, compute);\n    /**\n     * Synchronously close session of collectMotionValues.\n     */\n    collectMotionValues.current = undefined;\n    return value;\n}\n\nexport { useComputed };\n","import { transform } from '../utils/transform.mjs';\nimport { useCombineMotionValues } from './use-combine-values.mjs';\nimport { useConstant } from '../utils/use-constant.mjs';\nimport { useComputed } from './use-computed.mjs';\n\nfunction useTransform(input, inputRangeOrTransformer, outputRange, options) {\n    if (typeof input === \"function\") {\n        return useComputed(input);\n    }\n    const transformer = typeof inputRangeOrTransformer === \"function\"\n        ? inputRangeOrTransformer\n        : transform(inputRangeOrTransformer, outputRange, options);\n    return Array.isArray(input)\n        ? useListTransform(input, transformer)\n        : useListTransform([input], ([latest]) => transformer(latest));\n}\nfunction useListTransform(values, transformer) {\n    const latest = useConstant(() => []);\n    return useCombineMotionValues(values, () => {\n        latest.length = 0;\n        const numValues = values.length;\n        for (let i = 0; i < numValues; i++) {\n            latest[i] = values[i].get();\n        }\n        return transformer(latest);\n    });\n}\n\nexport { useTransform };\n","import { invariant } from '../../../utils/errors.mjs';\n\nfunction resolveElements(elements, scope, selectorCache) {\n    var _a;\n    if (typeof elements === \"string\") {\n        let root = document;\n        if (scope) {\n            invariant(Boolean(scope.current), \"Scope provided, but no element detected.\");\n            root = scope.current;\n        }\n        if (selectorCache) {\n            (_a = selectorCache[elements]) !== null && _a !== void 0 ? _a : (selectorCache[elements] = root.querySelectorAll(elements));\n            elements = selectorCache[elements];\n        }\n        else {\n            elements = root.querySelectorAll(elements);\n        }\n    }\n    else if (elements instanceof Element) {\n        elements = [elements];\n    }\n    /**\n     * Return an empty array\n     */\n    return Array.from(elements || []);\n}\n\nexport { resolveElements };\n","import { useState } from 'react';\nimport { initPrefersReducedMotion } from './index.mjs';\nimport { warnOnce } from '../warn-once.mjs';\nimport { hasReducedMotionListener, prefersReducedMotion } from './state.mjs';\n\n/**\n * A hook that returns `true` if we should be using reduced motion based on the current device's Reduced Motion setting.\n *\n * This can be used to implement changes to your UI based on Reduced Motion. For instance, replacing motion-sickness inducing\n * `x`/`y` animations with `opacity`, disabling the autoplay of background videos, or turning off parallax motion.\n *\n * It will actively respond to changes and re-render your components with the latest setting.\n *\n * ```jsx\n * export function Sidebar({ isOpen }) {\n *   const shouldReduceMotion = useReducedMotion()\n *   const closedX = shouldReduceMotion ? 0 : \"-100%\"\n *\n *   return (\n *     <motion.div animate={{\n *       opacity: isOpen ? 1 : 0,\n *       x: isOpen ? 0 : closedX\n *     }} />\n *   )\n * }\n * ```\n *\n * @return boolean\n *\n * @public\n */\nfunction useReducedMotion() {\n    /**\n     * Lazy initialisation of prefersReducedMotion\n     */\n    !hasReducedMotionListener.current && initPrefersReducedMotion();\n    const [shouldReduceMotion] = useState(prefersReducedMotion.current);\n    if (process.env.NODE_ENV !== \"production\") {\n        warnOnce(shouldReduceMotion !== true, \"You have Reduced Motion enabled on your device. Animations may not appear as expected.\");\n    }\n    /**\n     * TODO See if people miss automatically updating shouldReduceMotion setting\n     */\n    return shouldReduceMotion;\n}\n\nexport { useReducedMotion };\n","function isDOMKeyframes(keyframes) {\n    return typeof keyframes === \"object\" && !Array.isArray(keyframes);\n}\n\nexport { isDOMKeyframes };\n","import { isSVGElement } from '../../render/dom/utils/is-svg-element.mjs';\nimport { SVGVisualElement } from '../../render/svg/SVGVisualElement.mjs';\nimport { HTMLVisualElement } from '../../render/html/HTMLVisualElement.mjs';\nimport { visualElementStore } from '../../render/store.mjs';\n\nfunction createVisualElement(element) {\n    const options = {\n        presenceContext: null,\n        props: {},\n        visualState: {\n            renderState: {\n                transform: {},\n                transformOrigin: {},\n                style: {},\n                vars: {},\n                attrs: {},\n            },\n            latestValues: {},\n        },\n    };\n    const node = isSVGElement(element)\n        ? new SVGVisualElement(options, {\n            enableHardwareAcceleration: false,\n        })\n        : new HTMLVisualElement(options, {\n            enableHardwareAcceleration: true,\n        });\n    node.mount(element);\n    visualElementStore.set(element, node);\n}\n\nexport { createVisualElement };\n","import { spring } from '../../animation/generators/spring/index.mjs';\nimport { calcGeneratorDuration, maxGeneratorDuration } from '../../animation/generators/utils/calc-duration.mjs';\nimport { millisecondsToSeconds } from '../../utils/time-conversion.mjs';\n\n/**\n * Create a progress => progress easing function from a generator.\n */\nfunction createGeneratorEasing(options, scale = 100) {\n    const generator = spring({ keyframes: [0, scale], ...options });\n    const duration = Math.min(calcGeneratorDuration(generator), maxGeneratorDuration);\n    return {\n        type: \"keyframes\",\n        ease: (progress) => generator.next(duration * progress).value / scale,\n        duration: millisecondsToSeconds(duration),\n    };\n}\n\nexport { createGeneratorEasing };\n","/**\n * Given a absolute or relative time definition and current/prev time state of the sequence,\n * calculate an absolute time for the next keyframes.\n */\nfunction calcNextTime(current, next, prev, labels) {\n    var _a;\n    if (typeof next === \"number\") {\n        return next;\n    }\n    else if (next.startsWith(\"-\") || next.startsWith(\"+\")) {\n        return Math.max(0, current + parseFloat(next));\n    }\n    else if (next === \"<\") {\n        return prev;\n    }\n    else {\n        return (_a = labels.get(next)) !== null && _a !== void 0 ? _a : current;\n    }\n}\n\nexport { calcNextTime };\n","const wrap = (min, max, v) => {\n    const rangeSize = max - min;\n    return ((((v - min) % rangeSize) + rangeSize) % rangeSize) + min;\n};\n\nexport { wrap };\n","import { wrap } from '../../utils/wrap.mjs';\nimport { isEasingArray } from './is-easing-array.mjs';\n\nfunction getEasingForSegment(easing, i) {\n    return isEasingArray(easing) ? easing[wrap(0, easing.length, i)] : easing;\n}\n\nexport { getEasingForSegment };\n","import { getEasingForSegment } from '../../../easing/utils/get-easing-for-segment.mjs';\nimport { removeItem } from '../../../utils/array.mjs';\nimport { mixNumber } from '../../../utils/mix/number.mjs';\n\nfunction eraseKeyframes(sequence, startTime, endTime) {\n    for (let i = 0; i < sequence.length; i++) {\n        const keyframe = sequence[i];\n        if (keyframe.at > startTime && keyframe.at < endTime) {\n            removeItem(sequence, keyframe);\n            // If we remove this item we have to push the pointer back one\n            i--;\n        }\n    }\n}\nfunction addKeyframes(sequence, keyframes, easing, offset, startTime, endTime) {\n    /**\n     * Erase every existing value between currentTime and targetTime,\n     * this will essentially splice this timeline into any currently\n     * defined ones.\n     */\n    eraseKeyframes(sequence, startTime, endTime);\n    for (let i = 0; i < keyframes.length; i++) {\n        sequence.push({\n            value: keyframes[i],\n            at: mixNumber(startTime, endTime, offset[i]),\n            easing: getEasingForSegment(easing, i),\n        });\n    }\n}\n\nexport { addKeyframes, eraseKeyframes };\n","function compareByTime(a, b) {\n    if (a.at === b.at) {\n        if (a.value === null)\n            return 1;\n        if (b.value === null)\n            return -1;\n        return 0;\n    }\n    else {\n        return a.at - b.at;\n    }\n}\n\nexport { compareByTime };\n","import { createGeneratorEasing } from '../../easing/utils/create-generator-easing.mjs';\nimport { resolveElements } from '../../render/dom/utils/resolve-element.mjs';\nimport { defaultOffset } from '../../utils/offsets/default.mjs';\nimport { fillOffset } from '../../utils/offsets/fill.mjs';\nimport { progress } from '../../utils/progress.mjs';\nimport { secondsToMilliseconds } from '../../utils/time-conversion.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\nimport { calcNextTime } from './utils/calc-time.mjs';\nimport { addKeyframes } from './utils/edit.mjs';\nimport { compareByTime } from './utils/sort.mjs';\n\nconst defaultSegmentEasing = \"easeInOut\";\nfunction createAnimationsFromSequence(sequence, { defaultTransition = {}, ...sequenceTransition } = {}, scope) {\n    const defaultDuration = defaultTransition.duration || 0.3;\n    const animationDefinitions = new Map();\n    const sequences = new Map();\n    const elementCache = {};\n    const timeLabels = new Map();\n    let prevTime = 0;\n    let currentTime = 0;\n    let totalDuration = 0;\n    /**\n     * Build the timeline by mapping over the sequence array and converting\n     * the definitions into keyframes and offsets with absolute time values.\n     * These will later get converted into relative offsets in a second pass.\n     */\n    for (let i = 0; i < sequence.length; i++) {\n        const segment = sequence[i];\n        /**\n         * If this is a timeline label, mark it and skip the rest of this iteration.\n         */\n        if (typeof segment === \"string\") {\n            timeLabels.set(segment, currentTime);\n            continue;\n        }\n        else if (!Array.isArray(segment)) {\n            timeLabels.set(segment.name, calcNextTime(currentTime, segment.at, prevTime, timeLabels));\n            continue;\n        }\n        let [subject, keyframes, transition = {}] = segment;\n        /**\n         * If a relative or absolute time value has been specified we need to resolve\n         * it in relation to the currentTime.\n         */\n        if (transition.at !== undefined) {\n            currentTime = calcNextTime(currentTime, transition.at, prevTime, timeLabels);\n        }\n        /**\n         * Keep track of the maximum duration in this definition. This will be\n         * applied to currentTime once the definition has been parsed.\n         */\n        let maxDuration = 0;\n        const resolveValueSequence = (valueKeyframes, valueTransition, valueSequence, elementIndex = 0, numElements = 0) => {\n            const valueKeyframesAsList = keyframesAsList(valueKeyframes);\n            const { delay = 0, times = defaultOffset(valueKeyframesAsList), type = \"keyframes\", ...remainingTransition } = valueTransition;\n            let { ease = defaultTransition.ease || \"easeOut\", duration } = valueTransition;\n            /**\n             * Resolve stagger() if defined.\n             */\n            const calculatedDelay = typeof delay === \"function\"\n                ? delay(elementIndex, numElements)\n                : delay;\n            /**\n             * If this animation should and can use a spring, generate a spring easing function.\n             */\n            const numKeyframes = valueKeyframesAsList.length;\n            if (numKeyframes <= 2 && type === \"spring\") {\n                /**\n                 * As we're creating an easing function from a spring,\n                 * ideally we want to generate it using the real distance\n                 * between the two keyframes. However this isn't always\n                 * possible - in these situations we use 0-100.\n                 */\n                let absoluteDelta = 100;\n                if (numKeyframes === 2 &&\n                    isNumberKeyframesArray(valueKeyframesAsList)) {\n                    const delta = valueKeyframesAsList[1] - valueKeyframesAsList[0];\n                    absoluteDelta = Math.abs(delta);\n                }\n                const springTransition = { ...remainingTransition };\n                if (duration !== undefined) {\n                    springTransition.duration = secondsToMilliseconds(duration);\n                }\n                const springEasing = createGeneratorEasing(springTransition, absoluteDelta);\n                ease = springEasing.ease;\n                duration = springEasing.duration;\n            }\n            duration !== null && duration !== void 0 ? duration : (duration = defaultDuration);\n            const startTime = currentTime + calculatedDelay;\n            const targetTime = startTime + duration;\n            /**\n             * If there's only one time offset of 0, fill in a second with length 1\n             */\n            if (times.length === 1 && times[0] === 0) {\n                times[1] = 1;\n            }\n            /**\n             * Fill out if offset if fewer offsets than keyframes\n             */\n            const remainder = times.length - valueKeyframesAsList.length;\n            remainder > 0 && fillOffset(times, remainder);\n            /**\n             * If only one value has been set, ie [1], push a null to the start of\n             * the keyframe array. This will let us mark a keyframe at this point\n             * that will later be hydrated with the previous value.\n             */\n            valueKeyframesAsList.length === 1 &&\n                valueKeyframesAsList.unshift(null);\n            /**\n             * Add keyframes, mapping offsets to absolute time.\n             */\n            addKeyframes(valueSequence, valueKeyframesAsList, ease, times, startTime, targetTime);\n            maxDuration = Math.max(calculatedDelay + duration, maxDuration);\n            totalDuration = Math.max(targetTime, totalDuration);\n        };\n        if (isMotionValue(subject)) {\n            const subjectSequence = getSubjectSequence(subject, sequences);\n            resolveValueSequence(keyframes, transition, getValueSequence(\"default\", subjectSequence));\n        }\n        else {\n            /**\n             * Find all the elements specified in the definition and parse value\n             * keyframes from their timeline definitions.\n             */\n            const elements = resolveElements(subject, scope, elementCache);\n            const numElements = elements.length;\n            /**\n             * For every element in this segment, process the defined values.\n             */\n            for (let elementIndex = 0; elementIndex < numElements; elementIndex++) {\n                /**\n                 * Cast necessary, but we know these are of this type\n                 */\n                keyframes = keyframes;\n                transition = transition;\n                const element = elements[elementIndex];\n                const subjectSequence = getSubjectSequence(element, sequences);\n                for (const key in keyframes) {\n                    resolveValueSequence(keyframes[key], getValueTransition(transition, key), getValueSequence(key, subjectSequence), elementIndex, numElements);\n                }\n            }\n        }\n        prevTime = currentTime;\n        currentTime += maxDuration;\n    }\n    /**\n     * For every element and value combination create a new animation.\n     */\n    sequences.forEach((valueSequences, element) => {\n        for (const key in valueSequences) {\n            const valueSequence = valueSequences[key];\n            /**\n             * Arrange all the keyframes in ascending time order.\n             */\n            valueSequence.sort(compareByTime);\n            const keyframes = [];\n            const valueOffset = [];\n            const valueEasing = [];\n            /**\n             * For each keyframe, translate absolute times into\n             * relative offsets based on the total duration of the timeline.\n             */\n            for (let i = 0; i < valueSequence.length; i++) {\n                const { at, value, easing } = valueSequence[i];\n                keyframes.push(value);\n                valueOffset.push(progress(0, totalDuration, at));\n                valueEasing.push(easing || \"easeOut\");\n            }\n            /**\n             * If the first keyframe doesn't land on offset: 0\n             * provide one by duplicating the initial keyframe. This ensures\n             * it snaps to the first keyframe when the animation starts.\n             */\n            if (valueOffset[0] !== 0) {\n                valueOffset.unshift(0);\n                keyframes.unshift(keyframes[0]);\n                valueEasing.unshift(defaultSegmentEasing);\n            }\n            /**\n             * If the last keyframe doesn't land on offset: 1\n             * provide one with a null wildcard value. This will ensure it\n             * stays static until the end of the animation.\n             */\n            if (valueOffset[valueOffset.length - 1] !== 1) {\n                valueOffset.push(1);\n                keyframes.push(null);\n            }\n            if (!animationDefinitions.has(element)) {\n                animationDefinitions.set(element, {\n                    keyframes: {},\n                    transition: {},\n                });\n            }\n            const definition = animationDefinitions.get(element);\n            definition.keyframes[key] = keyframes;\n            definition.transition[key] = {\n                ...defaultTransition,\n                duration: totalDuration,\n                ease: valueEasing,\n                times: valueOffset,\n                ...sequenceTransition,\n            };\n        }\n    });\n    return animationDefinitions;\n}\nfunction getSubjectSequence(subject, sequences) {\n    !sequences.has(subject) && sequences.set(subject, {});\n    return sequences.get(subject);\n}\nfunction getValueSequence(name, sequences) {\n    if (!sequences[name])\n        sequences[name] = [];\n    return sequences[name];\n}\nfunction keyframesAsList(keyframes) {\n    return Array.isArray(keyframes) ? keyframes : [keyframes];\n}\nfunction getValueTransition(transition, key) {\n    return transition[key]\n        ? {\n            ...transition,\n            ...transition[key],\n        }\n        : { ...transition };\n}\nconst isNumber = (keyframe) => typeof keyframe === \"number\";\nconst isNumberKeyframesArray = (keyframes) => keyframes.every(isNumber);\n\nexport { createAnimationsFromSequence, getValueTransition };\n","import { resolveElements } from '../render/dom/utils/resolve-element.mjs';\nimport { visualElementStore } from '../render/store.mjs';\nimport { invariant } from '../utils/errors.mjs';\nimport { GroupPlaybackControls } from './GroupPlaybackControls.mjs';\nimport { isDOMKeyframes } from './utils/is-dom-keyframes.mjs';\nimport { animateTarget } from './interfaces/visual-element-target.mjs';\nimport { createVisualElement } from './utils/create-visual-element.mjs';\nimport { animateSingleValue } from './interfaces/single-value.mjs';\nimport { createAnimationsFromSequence } from './sequence/create.mjs';\nimport { isMotionValue } from '../value/utils/is-motion-value.mjs';\n\nfunction animateElements(elementOrSelector, keyframes, options, scope) {\n    const elements = resolveElements(elementOrSelector, scope);\n    const numElements = elements.length;\n    invariant(Boolean(numElements), \"No valid element provided.\");\n    const animations = [];\n    for (let i = 0; i < numElements; i++) {\n        const element = elements[i];\n        /**\n         * Check each element for an associated VisualElement. If none exists,\n         * we need to create one.\n         */\n        if (!visualElementStore.has(element)) {\n            /**\n             * TODO: We only need render-specific parts of the VisualElement.\n             * With some additional work the size of the animate() function\n             * could be reduced significantly.\n             */\n            createVisualElement(element);\n        }\n        const visualElement = visualElementStore.get(element);\n        const transition = { ...options };\n        /**\n         * Resolve stagger function if provided.\n         */\n        if (typeof transition.delay === \"function\") {\n            transition.delay = transition.delay(i, numElements);\n        }\n        animations.push(...animateTarget(visualElement, { ...keyframes, transition }, {}));\n    }\n    return new GroupPlaybackControls(animations);\n}\nconst isSequence = (value) => Array.isArray(value) && Array.isArray(value[0]);\nfunction animateSequence(sequence, options, scope) {\n    const animations = [];\n    const animationDefinitions = createAnimationsFromSequence(sequence, options, scope);\n    animationDefinitions.forEach(({ keyframes, transition }, subject) => {\n        let animation;\n        if (isMotionValue(subject)) {\n            animation = animateSingleValue(subject, keyframes.default, transition.default);\n        }\n        else {\n            animation = animateElements(subject, keyframes, transition);\n        }\n        animations.push(animation);\n    });\n    return new GroupPlaybackControls(animations);\n}\nconst createScopedAnimate = (scope) => {\n    /**\n     * Implementation\n     */\n    function scopedAnimate(valueOrElementOrSequence, keyframes, options) {\n        let animation;\n        if (isSequence(valueOrElementOrSequence)) {\n            animation = animateSequence(valueOrElementOrSequence, keyframes, scope);\n        }\n        else if (isDOMKeyframes(keyframes)) {\n            animation = animateElements(valueOrElementOrSequence, keyframes, options, scope);\n        }\n        else {\n            animation = animateSingleValue(valueOrElementOrSequence, keyframes, options);\n        }\n        if (scope) {\n            scope.animations.push(animation);\n        }\n        return animation;\n    }\n    return scopedAnimate;\n};\nconst animate = createScopedAnimate();\n\nexport { animate, createScopedAnimate };\n","import $HgANd$react from \"react\";\n\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ \nconst $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c = typeof document !== \"undefined\" ? (0, $HgANd$react).useLayoutEffect : ()=>{};\n\n\nexport {$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c as useLayoutEffect};\n//# sourceMappingURL=useLayoutEffect.mjs.map\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ /**\n * Calls all functions in the order they were chained with the same arguments.\n */ function $ff5963eb1fccf552$export$e08e3b67e392101e(...callbacks) {\n    return (...args)=>{\n        for (let callback of callbacks)if (typeof callback === \"function\") callback(...args);\n    };\n}\n\n\nexport {$ff5963eb1fccf552$export$e08e3b67e392101e as chain};\n//# sourceMappingURL=chain.mjs.map\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ function $c87311424ea30a05$var$testUserAgent(re) {\n    var _window_navigator_userAgentData;\n    if (typeof window === \"undefined\" || window.navigator == null) return false;\n    return ((_window_navigator_userAgentData = window.navigator[\"userAgentData\"]) === null || _window_navigator_userAgentData === void 0 ? void 0 : _window_navigator_userAgentData.brands.some((brand)=>re.test(brand.brand))) || re.test(window.navigator.userAgent);\n}\nfunction $c87311424ea30a05$var$testPlatform(re) {\n    var _window_navigator_userAgentData;\n    return typeof window !== \"undefined\" && window.navigator != null ? re.test(((_window_navigator_userAgentData = window.navigator[\"userAgentData\"]) === null || _window_navigator_userAgentData === void 0 ? void 0 : _window_navigator_userAgentData.platform) || window.navigator.platform) : false;\n}\nfunction $c87311424ea30a05$export$9ac100e40613ea10() {\n    return $c87311424ea30a05$var$testPlatform(/^Mac/i);\n}\nfunction $c87311424ea30a05$export$186c6964ca17d99() {\n    return $c87311424ea30a05$var$testPlatform(/^iPhone/i);\n}\nfunction $c87311424ea30a05$export$7bef049ce92e4224() {\n    return $c87311424ea30a05$var$testPlatform(/^iPad/i) || // iPadOS 13 lies and says it's a Mac, but we can distinguish by detecting touch support.\n    $c87311424ea30a05$export$9ac100e40613ea10() && navigator.maxTouchPoints > 1;\n}\nfunction $c87311424ea30a05$export$fedb369cb70207f1() {\n    return $c87311424ea30a05$export$186c6964ca17d99() || $c87311424ea30a05$export$7bef049ce92e4224();\n}\nfunction $c87311424ea30a05$export$e1865c3bedcd822b() {\n    return $c87311424ea30a05$export$9ac100e40613ea10() || $c87311424ea30a05$export$fedb369cb70207f1();\n}\nfunction $c87311424ea30a05$export$78551043582a6a98() {\n    return $c87311424ea30a05$var$testUserAgent(/AppleWebKit/i) && !$c87311424ea30a05$export$6446a186d09e379e();\n}\nfunction $c87311424ea30a05$export$6446a186d09e379e() {\n    return $c87311424ea30a05$var$testUserAgent(/Chrome/i);\n}\nfunction $c87311424ea30a05$export$a11b0059900ceec8() {\n    return $c87311424ea30a05$var$testUserAgent(/Android/i);\n}\nfunction $c87311424ea30a05$export$b7d78993b74f766d() {\n    return $c87311424ea30a05$var$testUserAgent(/Firefox/i);\n}\n\n\nexport {$c87311424ea30a05$export$9ac100e40613ea10 as isMac, $c87311424ea30a05$export$186c6964ca17d99 as isIPhone, $c87311424ea30a05$export$7bef049ce92e4224 as isIPad, $c87311424ea30a05$export$fedb369cb70207f1 as isIOS, $c87311424ea30a05$export$e1865c3bedcd822b as isAppleDevice, $c87311424ea30a05$export$78551043582a6a98 as isWebKit, $c87311424ea30a05$export$6446a186d09e379e as isChrome, $c87311424ea30a05$export$a11b0059900ceec8 as isAndroid, $c87311424ea30a05$export$b7d78993b74f766d as isFirefox};\n//# sourceMappingURL=platform.mjs.map\n","/*\n * Copyright 2024 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ function $cc38e7bd3fc7b213$export$2bb74740c4e19def(node, checkForOverflow) {\n    let style = window.getComputedStyle(node);\n    let isScrollable = /(auto|scroll)/.test(style.overflow + style.overflowX + style.overflowY);\n    if (isScrollable && checkForOverflow) isScrollable = node.scrollHeight !== node.clientHeight || node.scrollWidth !== node.clientWidth;\n    return isScrollable;\n}\n\n\nexport {$cc38e7bd3fc7b213$export$2bb74740c4e19def as isScrollable};\n//# sourceMappingURL=isScrollable.mjs.map\n","import {isScrollable as $cc38e7bd3fc7b213$export$2bb74740c4e19def} from \"./isScrollable.mjs\";\n\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ \nfunction $62d8ded9296f3872$export$cfa2225e87938781(node, checkForOverflow) {\n    let scrollableNode = node;\n    if ((0, $cc38e7bd3fc7b213$export$2bb74740c4e19def)(scrollableNode, checkForOverflow)) scrollableNode = scrollableNode.parentElement;\n    while(scrollableNode && !(0, $cc38e7bd3fc7b213$export$2bb74740c4e19def)(scrollableNode, checkForOverflow))scrollableNode = scrollableNode.parentElement;\n    return scrollableNode || document.scrollingElement || document.documentElement;\n}\n\n\nexport {$62d8ded9296f3872$export$cfa2225e87938781 as getScrollParent};\n//# sourceMappingURL=getScrollParent.mjs.map\n","import React2, { createContext, forwardRef, useRef, useEffect, useImperativeHandle, useMemo, Children, cloneElement, useLayoutEffect, useCallback, useState, useContext } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useMotionValue, useReducedMotion, useTransform, animate, motion, AnimatePresence } from 'framer-motion';\nimport { useLayoutEffect as useLayoutEffect$1, isIOS, chain, getScrollParent } from '@react-aria/utils';\n\n// src/sheet.tsx\n\n// src/constants.ts\nvar MAX_HEIGHT = \"calc(100% - env(safe-area-inset-top) - 34px)\";\nvar IS_SSR = typeof window === \"undefined\";\nvar DEFAULT_TWEEN_CONFIG = {\n  ease: \"easeOut\",\n  duration: 0.2\n};\nvar REDUCED_MOTION_TWEEN_CONFIG = {\n  ease: \"linear\",\n  duration: 0.01\n};\nvar DRAG_CLOSE_THRESHOLD = 0.6;\nvar DRAG_VELOCITY_THRESHOLD = 500;\n\n// src/utils.ts\nfunction getClosest(nums, goal) {\n  let closest = nums[0];\n  let minDifference = Math.abs(nums[0] - goal);\n  for (let i = 1; i < nums.length; i++) {\n    const difference = Math.abs(nums[i] - goal);\n    if (difference < minDifference) {\n      closest = nums[i];\n      minDifference = difference;\n    }\n  }\n  return closest;\n}\nfunction applyRootStyles(rootId) {\n  const body = document.querySelector(\"body\");\n  const root = document.querySelector(`#${rootId}`);\n  if (root) {\n    const p = 24;\n    const h = window.innerHeight;\n    const s = (h - p) / h;\n    body.style.backgroundColor = \"#000\";\n    root.style.overflow = \"hidden\";\n    root.style.willChange = \"transform\";\n    root.style.transition = \"transform 200ms ease-in-out, border-radius 200ms linear\";\n    root.style.transform = `translateY(calc(env(safe-area-inset-top) + ${p / 2}px)) scale(${s})`;\n    root.style.borderTopRightRadius = \"10px\";\n    root.style.borderTopLeftRadius = \"10px\";\n  }\n}\nfunction cleanupRootStyles(rootId) {\n  const body = document.querySelector(\"body\");\n  const root = document.getElementById(rootId);\n  function onTransitionEnd() {\n    root.style.removeProperty(\"overflow\");\n    root.style.removeProperty(\"will-change\");\n    root.style.removeProperty(\"transition\");\n    body.style.removeProperty(\"background-color\");\n    root.removeEventListener(\"transitionend\", onTransitionEnd);\n  }\n  if (root) {\n    root.style.removeProperty(\"border-top-right-radius\");\n    root.style.removeProperty(\"border-top-left-radius\");\n    root.style.removeProperty(\"transform\");\n    root.addEventListener(\"transitionend\", onTransitionEnd);\n  }\n}\nfunction inDescendingOrder(arr) {\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i + 1] > arr[i])\n      return false;\n  }\n  return true;\n}\nfunction validateSnapTo({\n  snapTo,\n  sheetHeight\n}) {\n  if (snapTo < 0) {\n    console.warn(\n      `Snap point is out of bounds. Sheet height is ${sheetHeight} but snap point is ${sheetHeight + Math.abs(snapTo)}.`\n    );\n  }\n  return Math.max(Math.round(snapTo), 0);\n}\nfunction mergeRefs(refs) {\n  return (value) => {\n    refs.forEach((ref) => {\n      if (typeof ref === \"function\") {\n        ref(value);\n      } else if (ref) {\n        ref.current = value;\n      }\n    });\n  };\n}\nfunction isTouchDevice() {\n  if (typeof window === \"undefined\")\n    return false;\n  return \"ontouchstart\" in window || navigator.maxTouchPoints > 0;\n}\n\n// src/hooks.tsx\nvar useIsomorphicLayoutEffect = IS_SSR ? useEffect : useLayoutEffect;\nfunction useModalEffect(isOpen, rootId) {\n  const prevOpen = usePrevious(isOpen);\n  useEffect(() => {\n    if (rootId && !prevOpen && isOpen) {\n      applyRootStyles(rootId);\n    } else if (rootId && !isOpen && prevOpen) {\n      cleanupRootStyles(rootId);\n    }\n  }, [isOpen, prevOpen]);\n  useEffect(() => {\n    return () => {\n      if (rootId && isOpen)\n        cleanupRootStyles(rootId);\n    };\n  }, [isOpen]);\n}\nfunction useEventCallbacks(isOpen, callbacks) {\n  const prevOpen = usePrevious(isOpen);\n  const didOpen = useRef(false);\n  const handleAnimationComplete = useCallback(() => {\n    var _a, _b, _c, _d;\n    if (!didOpen.current) {\n      (_b = (_a = callbacks.current).onOpenEnd) == null ? void 0 : _b.call(_a);\n      didOpen.current = true;\n    } else {\n      (_d = (_c = callbacks.current).onCloseEnd) == null ? void 0 : _d.call(_c);\n      didOpen.current = false;\n    }\n  }, [isOpen, prevOpen]);\n  useEffect(() => {\n    var _a, _b, _c, _d;\n    if (!prevOpen && isOpen) {\n      (_b = (_a = callbacks.current).onOpenStart) == null ? void 0 : _b.call(_a);\n    } else if (!isOpen && prevOpen) {\n      (_d = (_c = callbacks.current).onCloseStart) == null ? void 0 : _d.call(_c);\n    }\n  }, [isOpen, prevOpen]);\n  return { handleAnimationComplete };\n}\nfunction useDimensions() {\n  const [dimensions, setDimensions] = useState({ height: 0, width: 0 });\n  useIsomorphicLayoutEffect(() => {\n    function handler() {\n      setDimensions({\n        height: window.innerHeight,\n        width: window.innerWidth\n      });\n    }\n    handler();\n    window.addEventListener(\"resize\", handler);\n    return () => {\n      window.removeEventListener(\"resize\", handler);\n    };\n  }, []);\n  return dimensions;\n}\nfunction usePrevious(state) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = state;\n  });\n  return ref.current;\n}\nfunction useEffectEvent(handler) {\n  const handlerRef = useRef();\n  useIsomorphicLayoutEffect(() => {\n    handlerRef.current = handler;\n  });\n  return useCallback((...args) => {\n    const fn = handlerRef.current;\n    return fn == null ? void 0 : fn(...args);\n  }, []);\n}\nvar constraints = { bottom: 0, top: 0, left: 0, right: 0 };\nfunction useDragConstraints() {\n  const constraintsRef = useRef(null);\n  const onMeasureDragConstraints = useCallback(() => constraints, []);\n  return { constraintsRef, onMeasureDragConstraints };\n}\nvar SheetContext = createContext(\n  void 0\n);\nvar useSheetContext = () => {\n  const context = useContext(SheetContext);\n  if (!context)\n    throw Error(\"Sheet context error\");\n  return context;\n};\nvar SheetScrollerContext = createContext(void 0);\nfunction SheetScrollerContextProvider({\n  children\n}) {\n  const sheetContext = useSheetContext();\n  const [disableDrag, setDisableDrag] = useState(!!sheetContext.disableDrag);\n  function setDragEnabled() {\n    if (!sheetContext.disableDrag)\n      setDisableDrag(false);\n  }\n  function setDragDisabled() {\n    if (!disableDrag)\n      setDisableDrag(true);\n  }\n  return /* @__PURE__ */ React2.createElement(\n    SheetScrollerContext.Provider,\n    {\n      value: { disableDrag, setDragEnabled, setDragDisabled }\n    },\n    children\n  );\n}\nvar useSheetScrollerContext = () => {\n  const context = useContext(SheetScrollerContext);\n  if (!context)\n    throw Error(\"Sheet scroller context error\");\n  return context;\n};\nvar visualViewport = typeof window !== \"undefined\" ? window.visualViewport : void 0;\nvar nonTextInputTypes = /* @__PURE__ */ new Set([\n  \"checkbox\",\n  \"radio\",\n  \"range\",\n  \"color\",\n  \"file\",\n  \"image\",\n  \"button\",\n  \"submit\",\n  \"reset\"\n]);\nvar preventScrollCount = 0;\nvar restore;\nfunction usePreventScroll(options = {}) {\n  const { isDisabled } = options;\n  useLayoutEffect$1(() => {\n    if (isDisabled) {\n      return;\n    }\n    preventScrollCount++;\n    if (preventScrollCount === 1) {\n      if (isIOS()) {\n        restore = preventScrollMobileSafari();\n      } else {\n        restore = preventScrollStandard();\n      }\n    }\n    return () => {\n      preventScrollCount--;\n      if (preventScrollCount === 0) {\n        restore();\n      }\n    };\n  }, [isDisabled]);\n}\nfunction preventScrollStandard() {\n  return chain(\n    setStyle(\n      document.documentElement,\n      \"paddingRight\",\n      `${window.innerWidth - document.documentElement.clientWidth}px`\n    ),\n    setStyle(document.documentElement, \"overflow\", \"hidden\")\n  );\n}\nfunction preventScrollMobileSafari() {\n  let scrollable;\n  let lastY = 0;\n  const onTouchStart = (e) => {\n    scrollable = getScrollParent(e.target);\n    if (scrollable === document.documentElement && scrollable === document.body) {\n      return;\n    }\n    lastY = e.changedTouches[0].pageY;\n  };\n  const onTouchMove = (e) => {\n    if (scrollable === void 0) {\n      return;\n    }\n    if (scrollable === document.documentElement || scrollable === document.body) {\n      e.preventDefault();\n      return;\n    }\n    const y = e.changedTouches[0].pageY;\n    const scrollTop = scrollable.scrollTop;\n    const bottom = scrollable.scrollHeight - scrollable.clientHeight;\n    if (bottom === 0) {\n      return;\n    }\n    if (scrollTop <= 0 && y > lastY || scrollTop >= bottom && y < lastY) {\n      e.preventDefault();\n    }\n    lastY = y;\n  };\n  const onTouchEnd = (e) => {\n    const target = e.target;\n    if (willOpenKeyboard(target) && target !== document.activeElement) {\n      e.preventDefault();\n      target.style.transform = \"translateY(-2000px)\";\n      target.focus();\n      requestAnimationFrame(() => {\n        target.style.transform = \"\";\n      });\n    }\n  };\n  const onFocus = (e) => {\n    const target = e.target;\n    if (willOpenKeyboard(target)) {\n      target.style.transform = \"translateY(-2000px)\";\n      requestAnimationFrame(() => {\n        target.style.transform = \"\";\n        if (visualViewport) {\n          if (visualViewport.height < window.innerHeight) {\n            requestAnimationFrame(() => {\n              scrollIntoView(target);\n            });\n          } else {\n            visualViewport.addEventListener(\n              \"resize\",\n              () => {\n                scrollIntoView(target);\n              },\n              { once: true }\n            );\n          }\n        }\n      });\n    }\n  };\n  const onWindowScroll = () => {\n    window.scrollTo(0, 0);\n  };\n  const scrollX = window.pageXOffset;\n  const scrollY = window.pageYOffset;\n  const restoreStyles = chain(\n    setStyle(\n      document.documentElement,\n      \"paddingRight\",\n      `${window.innerWidth - document.documentElement.clientWidth}px`\n    ),\n    setStyle(document.documentElement, \"overflow\", \"hidden\"),\n    setStyle(document.body, \"marginTop\", `-${scrollY}px`)\n  );\n  window.scrollTo(0, 0);\n  const removeEvents = chain(\n    addEvent(document, \"touchstart\", onTouchStart, {\n      passive: false,\n      capture: true\n    }),\n    addEvent(document, \"touchmove\", onTouchMove, {\n      passive: false,\n      capture: true\n    }),\n    addEvent(document, \"touchend\", onTouchEnd, {\n      passive: false,\n      capture: true\n    }),\n    addEvent(document, \"focus\", onFocus, true),\n    addEvent(window, \"scroll\", onWindowScroll)\n  );\n  return () => {\n    restoreStyles();\n    removeEvents();\n    window.scrollTo(scrollX, scrollY);\n  };\n}\nfunction setStyle(element, style, value) {\n  const cur = element.style[style];\n  element.style[style] = value;\n  return () => {\n    element.style[style] = cur;\n  };\n}\nfunction addEvent(target, event, handler, options) {\n  target.addEventListener(event, handler, options);\n  return () => {\n    target.removeEventListener(event, handler, options);\n  };\n}\nfunction scrollIntoView(target) {\n  const root = document.scrollingElement || document.documentElement;\n  while (target && target !== root) {\n    const scrollable = getScrollParent(target);\n    if (scrollable !== document.documentElement && scrollable !== document.body && scrollable !== target) {\n      const scrollableTop = scrollable.getBoundingClientRect().top;\n      const targetTop = target.getBoundingClientRect().top;\n      if (targetTop > scrollableTop + target.clientHeight) {\n        scrollable.scrollTop += targetTop - scrollableTop;\n      }\n    }\n    target = scrollable.parentElement;\n  }\n}\nfunction willOpenKeyboard(target) {\n  return target instanceof HTMLInputElement && !nonTextInputTypes.has(target.type) || target instanceof HTMLTextAreaElement || target instanceof HTMLElement && target.isContentEditable;\n}\n\n// src/styles.ts\nvar styles = {\n  wrapper: {\n    position: \"fixed\",\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    overflow: \"hidden\",\n    pointerEvents: \"none\"\n  },\n  backdrop: {\n    zIndex: 1,\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    width: \"100%\",\n    height: \"100%\",\n    backgroundColor: \"rgba(0, 0, 0, 0.2)\",\n    touchAction: \"none\",\n    // Disable iOS body scrolling\n    border: \"none\"\n  },\n  container: {\n    zIndex: 2,\n    position: \"absolute\",\n    left: 0,\n    bottom: 0,\n    width: \"100%\",\n    backgroundColor: \"#fff\",\n    borderTopRightRadius: \"8px\",\n    borderTopLeftRadius: \"8px\",\n    boxShadow: \"0px -2px 16px rgba(0, 0, 0, 0.3)\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    pointerEvents: \"auto\"\n  },\n  headerWrapper: {\n    width: \"100%\"\n  },\n  header: {\n    height: \"40px\",\n    width: \"100%\",\n    position: \"relative\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  indicator: {\n    width: \"18px\",\n    height: \"4px\",\n    borderRadius: \"99px\",\n    backgroundColor: \"#ddd\"\n  },\n  content: {\n    flexGrow: 1,\n    display: \"flex\",\n    flexDirection: \"column\",\n    minHeight: \"0px\",\n    position: \"relative\"\n  },\n  scroller: {\n    height: \"100%\",\n    overflowY: \"auto\"\n  }\n};\nvar styles_default = styles;\n\n// src/sheet.tsx\nvar Sheet = forwardRef(\n  ({\n    onOpenStart,\n    onOpenEnd,\n    onClose,\n    onCloseStart,\n    onCloseEnd,\n    onSnap,\n    children,\n    disableScrollLocking = false,\n    isOpen,\n    snapPoints,\n    rootId,\n    mountPoint,\n    style,\n    detent = \"full-height\",\n    initialSnap = 0,\n    disableDrag = false,\n    prefersReducedMotion = false,\n    tweenConfig = DEFAULT_TWEEN_CONFIG,\n    ...rest\n  }, ref) => {\n    const sheetRef = useRef(null);\n    const indicatorRotation = useMotionValue(0);\n    const { height: windowHeight } = useDimensions();\n    const shouldReduceMotion = useReducedMotion();\n    const reduceMotion = Boolean(prefersReducedMotion || shouldReduceMotion);\n    const animationOptions = {\n      type: \"tween\",\n      ...reduceMotion ? REDUCED_MOTION_TWEEN_CONFIG : tweenConfig\n    };\n    const y = useMotionValue(0);\n    const zIndex = useTransform(\n      y,\n      (value) => value + 2 >= windowHeight ? -1 : 9999999\n    );\n    const visibility = useTransform(\n      y,\n      (value) => value + 2 >= windowHeight ? \"hidden\" : \"visible\"\n    );\n    const callbacks = useRef({\n      onOpenStart,\n      onOpenEnd,\n      onCloseStart,\n      onCloseEnd\n    });\n    useIsomorphicLayoutEffect(() => {\n      callbacks.current = {\n        onOpenStart,\n        onOpenEnd,\n        onCloseStart,\n        onCloseEnd\n      };\n    });\n    if (snapPoints) {\n      snapPoints = snapPoints.map((point) => {\n        if (point > 0 && point <= 1)\n          return Math.round(point * windowHeight);\n        return point < 0 ? windowHeight + point : point;\n      });\n      console.assert(\n        inDescendingOrder(snapPoints) || windowHeight === 0,\n        `Snap points need to be in descending order got: [${snapPoints.join(\n          \", \"\n        )}]`\n      );\n    }\n    const onDrag = useEffectEvent((_, { delta }) => {\n      const velocity = y.getVelocity();\n      if (velocity > 0)\n        indicatorRotation.set(10);\n      if (velocity < 0)\n        indicatorRotation.set(-10);\n      y.set(Math.max(y.get() + delta.y, 0));\n    });\n    const onDragStart = useEffectEvent(() => {\n      const focusedElement = document.activeElement;\n      if (!focusedElement || !sheetRef.current)\n        return;\n      const isInput = focusedElement.tagName === \"INPUT\" || focusedElement.tagName === \"TEXTAREA\";\n      if (isInput && sheetRef.current.contains(focusedElement)) {\n        focusedElement.blur();\n      }\n    });\n    const onDragEnd = useEffectEvent((_, { velocity }) => {\n      if (velocity.y > DRAG_VELOCITY_THRESHOLD) {\n        onClose();\n      } else {\n        const sheetHeight = sheetRef.current.getBoundingClientRect().height;\n        const currentY = y.get();\n        let snapTo = 0;\n        if (snapPoints) {\n          const snapToValues = snapPoints.map(\n            (p) => sheetHeight - Math.min(p, sheetHeight)\n          );\n          if (detent === \"content-height\" && !snapToValues.includes(0)) {\n            snapToValues.unshift(0);\n          }\n          snapTo = getClosest(snapToValues, currentY);\n        } else if (currentY / sheetHeight > DRAG_CLOSE_THRESHOLD) {\n          snapTo = sheetHeight;\n        }\n        snapTo = validateSnapTo({ snapTo, sheetHeight });\n        void animate(y, snapTo, animationOptions);\n        if (snapPoints && onSnap) {\n          const snapValue = Math.abs(Math.round(snapPoints[0] - snapTo));\n          const snapIndex = snapPoints.indexOf(getClosest(snapPoints, snapValue));\n          onSnap(snapIndex);\n        }\n        const roundedSheetHeight = Math.round(sheetHeight);\n        const shouldClose = snapTo + 2 >= roundedSheetHeight;\n        if (shouldClose)\n          onClose();\n      }\n      indicatorRotation.set(0);\n    });\n    useEffect(() => {\n      if (!snapPoints || !onSnap)\n        return;\n      const snapIndex = isOpen ? initialSnap : snapPoints.length - 1;\n      onSnap(snapIndex);\n    }, [isOpen]);\n    useImperativeHandle(ref, () => ({\n      y,\n      snapTo: (snapIndex) => {\n        const sheetEl = sheetRef.current;\n        if ((snapPoints == null ? void 0 : snapPoints[snapIndex]) !== void 0 && sheetEl) {\n          const sheetHeight = sheetEl.getBoundingClientRect().height;\n          const snapPoint = snapPoints[snapIndex];\n          const snapTo = validateSnapTo({\n            snapTo: sheetHeight - snapPoint,\n            sheetHeight\n          });\n          void animate(y, snapTo, animationOptions);\n          if (onSnap)\n            onSnap(snapIndex);\n          if (snapTo >= sheetHeight)\n            onClose();\n        }\n      }\n    }));\n    useModalEffect(isOpen, rootId);\n    usePreventScroll({ isDisabled: disableScrollLocking || !isOpen });\n    const dragProps = useMemo(() => {\n      const dragProps2 = {\n        drag: \"y\",\n        dragElastic: 0,\n        dragMomentum: false,\n        dragPropagation: false,\n        onDrag,\n        onDragStart,\n        onDragEnd\n      };\n      return disableDrag ? void 0 : dragProps2;\n    }, [disableDrag, windowHeight]);\n    const context = {\n      y,\n      sheetRef,\n      isOpen,\n      initialSnap,\n      snapPoints,\n      detent,\n      indicatorRotation,\n      callbacks,\n      dragProps,\n      windowHeight,\n      animationOptions,\n      reduceMotion,\n      disableDrag\n    };\n    const sheet = /* @__PURE__ */ React2.createElement(SheetContext.Provider, { value: context }, /* @__PURE__ */ React2.createElement(\n      motion.div,\n      {\n        ...rest,\n        ref,\n        style: { ...styles_default.wrapper, zIndex, visibility, ...style }\n      },\n      /* @__PURE__ */ React2.createElement(AnimatePresence, null, isOpen ? /* @__PURE__ */ React2.createElement(SheetScrollerContextProvider, null, Children.map(\n        children,\n        (child, i) => cloneElement(child, { key: `sheet-child-${i}` })\n      )) : null)\n    ));\n    if (IS_SSR)\n      return sheet;\n    return createPortal(sheet, mountPoint ?? document.body);\n  }\n);\nSheet.displayName = \"Sheet\";\nvar sheet_default = Sheet;\nvar SheetContainer = forwardRef(\n  ({ children, style = {}, className = \"\", ...rest }, ref) => {\n    const {\n      y,\n      isOpen,\n      callbacks,\n      snapPoints,\n      initialSnap = 0,\n      sheetRef,\n      windowHeight,\n      detent,\n      animationOptions,\n      reduceMotion\n    } = useSheetContext();\n    const { handleAnimationComplete } = useEventCallbacks(isOpen, callbacks);\n    const initialY = snapPoints ? snapPoints[0] - snapPoints[initialSnap] : 0;\n    const maxSnapHeight = snapPoints ? snapPoints[0] : null;\n    const height = maxSnapHeight !== null ? `min(${maxSnapHeight}px, ${MAX_HEIGHT})` : MAX_HEIGHT;\n    return /* @__PURE__ */ React2.createElement(\n      motion.div,\n      {\n        ...rest,\n        ref: mergeRefs([sheetRef, ref]),\n        className: `react-modal-sheet-container ${className}`,\n        style: {\n          ...styles_default.container,\n          ...style,\n          ...detent === \"full-height\" && { height },\n          ...detent === \"content-height\" && { maxHeight: height },\n          y\n        },\n        initial: reduceMotion ? false : { y: windowHeight },\n        animate: { y: initialY, transition: animationOptions },\n        exit: { y: windowHeight, transition: animationOptions },\n        onAnimationComplete: handleAnimationComplete\n      },\n      children\n    );\n  }\n);\nSheetContainer.displayName = \"SheetContainer\";\nvar SheetContainer_default = SheetContainer;\nvar SheetContent = forwardRef(\n  ({ children, style, disableDrag, className = \"\", ...rest }, ref) => {\n    const sheetContext = useSheetContext();\n    const sheetScrollerContext = useSheetScrollerContext();\n    const { constraintsRef, onMeasureDragConstraints } = useDragConstraints();\n    const dragProps = disableDrag || sheetScrollerContext.disableDrag ? void 0 : sheetContext.dragProps;\n    return /* @__PURE__ */ React2.createElement(\n      motion.div,\n      {\n        ...rest,\n        ref: mergeRefs([ref, constraintsRef]),\n        className: `react-modal-sheet-content ${className}`,\n        style: { ...styles_default.content, ...style },\n        ...dragProps,\n        dragConstraints: constraintsRef,\n        onMeasureDragConstraints\n      },\n      children\n    );\n  }\n);\nSheetContent.displayName = \"SheetContent\";\nvar SheetContent_default = SheetContent;\nvar SheetHeader = forwardRef(\n  ({ children, style, disableDrag, ...rest }, ref) => {\n    const { indicatorRotation, dragProps } = useSheetContext();\n    const { constraintsRef, onMeasureDragConstraints } = useDragConstraints();\n    const _dragProps = disableDrag ? void 0 : dragProps;\n    const indicator1Transform = useTransform(\n      indicatorRotation,\n      (r) => `translateX(2px) rotate(${r}deg)`\n    );\n    const indicator2Transform = useTransform(\n      indicatorRotation,\n      (r) => `translateX(-2px) rotate(${-1 * r}deg)`\n    );\n    return /* @__PURE__ */ React2.createElement(\n      motion.div,\n      {\n        ...rest,\n        ref: mergeRefs([ref, constraintsRef]),\n        style: { ...styles_default.headerWrapper, ...style },\n        ..._dragProps,\n        dragConstraints: constraintsRef,\n        onMeasureDragConstraints\n      },\n      children || /* @__PURE__ */ React2.createElement(\"div\", { className: \"react-modal-sheet-header\", style: styles_default.header }, /* @__PURE__ */ React2.createElement(\n        motion.span,\n        {\n          className: \"react-modal-sheet-drag-indicator\",\n          style: { ...styles_default.indicator, transform: indicator1Transform }\n        }\n      ), /* @__PURE__ */ React2.createElement(\n        motion.span,\n        {\n          className: \"react-modal-sheet-drag-indicator\",\n          style: { ...styles_default.indicator, transform: indicator2Transform }\n        }\n      ))\n    );\n  }\n);\nSheetHeader.displayName = \"SheetHeader\";\nvar SheetHeader_default = SheetHeader;\nvar isClickable = (props) => !!props.onClick || !!props.onTap;\nvar SheetBackdrop = forwardRef(\n  ({ style = {}, className = \"\", ...rest }, ref) => {\n    const Comp = isClickable(rest) ? motion.button : motion.div;\n    const pointerEvents = isClickable(rest) ? \"auto\" : \"none\";\n    return /* @__PURE__ */ React2.createElement(\n      Comp,\n      {\n        ...rest,\n        ref,\n        className: `react-modal-sheet-backdrop ${className}`,\n        style: { ...styles_default.backdrop, ...style, pointerEvents },\n        initial: { opacity: 0 },\n        animate: { opacity: 1 },\n        exit: { opacity: 0 }\n      }\n    );\n  }\n);\nSheetBackdrop.displayName = \"SheetBackdrop\";\nvar SheetBackdrop_default = SheetBackdrop;\nvar SheetScroller = forwardRef(\n  ({ draggableAt = \"top\", children, style, className = \"\", ...rest }, ref) => {\n    const sheetScrollerContext = useSheetScrollerContext();\n    function determineDragState(element) {\n      const { scrollTop, scrollHeight, clientHeight } = element;\n      const isScrollable = scrollHeight > clientHeight;\n      if (!isScrollable)\n        return;\n      const isAtTop = scrollTop <= 0;\n      const isAtBottom = scrollHeight - scrollTop === clientHeight;\n      const shouldEnable = draggableAt === \"top\" && isAtTop || draggableAt === \"bottom\" && isAtBottom || draggableAt === \"both\" && (isAtTop || isAtBottom);\n      if (shouldEnable) {\n        sheetScrollerContext.setDragEnabled();\n      } else {\n        sheetScrollerContext.setDragDisabled();\n      }\n    }\n    function onScroll(e) {\n      determineDragState(e.currentTarget);\n    }\n    function onTouchStart(e) {\n      determineDragState(e.currentTarget);\n    }\n    const scrollProps = isTouchDevice() ? { onScroll, onTouchStart } : void 0;\n    return /* @__PURE__ */ React2.createElement(\n      \"div\",\n      {\n        ...rest,\n        ref,\n        className: `react-modal-sheet-scroller ${className}`,\n        style: { ...styles_default.scroller, ...style },\n        ...scrollProps\n      },\n      children\n    );\n  }\n);\nSheetScroller.displayName = \"SheetScroller\";\nvar SheetScroller_default = SheetScroller;\n\n// src/index.tsx\nvar _SheetCompound = sheet_default;\n_SheetCompound.Container = SheetContainer_default;\n_SheetCompound.Header = SheetHeader_default;\n_SheetCompound.Content = SheetContent_default;\n_SheetCompound.Backdrop = SheetBackdrop_default;\n_SheetCompound.Scroller = SheetScroller_default;\nvar Sheet2 = _SheetCompound;\n\nexport { Sheet2 as Sheet };\n//# sourceMappingURL=out.js.map\n//# sourceMappingURL=index.mjs.map","import { useEffect, useState } from \"react\";\n\nfunction getWindowDimensions() {\n    const { innerWidth: width, innerHeight: height } = window;\n    return {\n        width,\n        height,\n    };\n}\n\nexport default function useWindowDimensions() {\n    const [windowDimensions, setWindowDimensions] = useState(\n        getWindowDimensions(),\n    );\n\n    useEffect(() => {\n        function handleResize() {\n            setWindowDimensions(getWindowDimensions());\n        }\n\n        window.addEventListener(\"resize\", handleResize);\n        return () => window.removeEventListener(\"resize\", handleResize);\n    }, []);\n\n    return windowDimensions;\n}\n","import { FC, PropsWithChildren } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styles from \"./styles.module.css\";\nimport { Sheet } from \"react-modal-sheet\";\nimport useWindowDimensions from \"../../hooks/useWindowDimensions\";\n\ninterface Props extends PropsWithChildren {\n    isVisible: boolean;\n    onClose: () => void;\n}\n\nexport const Modal: FC<Props> = ({ isVisible, onClose, children }) => {\n    const { width } = useWindowDimensions();\n\n    if (width < 640) {\n        return (\n            <Sheet isOpen={isVisible} onClose={onClose} detent='content-height'>\n                <Sheet.Container>\n                    <Sheet.Header />\n                    <Sheet.Content>{children}</Sheet.Content>\n                </Sheet.Container>\n                <Sheet.Backdrop onTap={onClose} />\n            </Sheet>\n        );\n    }\n\n    if (!isVisible) return null;\n\n    return createPortal(\n        <div\n            className={styles.modal}\n            onMouseDown={(e) => {\n                if (e.target === e.currentTarget) {\n                    onClose();\n                }\n            }}\n        >\n            {children}\n        </div>,\n        document.body,\n    );\n};\n","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAu3SURBVHgBrVp7jBZXFT/nft+3uyxtQdliujUFKVCKEXlFSGMEDJGAQYkBbY1WKiRN6rakhv7hI8Y0pjGxNZWi8VGgtokUGsUGMcbWdEmKSizUahoEVihGljTVsEV2u7vfzD2e+z4zO7vsUobe3vvNzD33/M7rnnNnEa7RRcfWzIasuRJqajFonM+3ZgCoaYB0HT/ln9jP/Vs8OAeIJyDPjgPVDuPyF07DNbgQ3sVFRz/xAajpLzPjnwWl5gLW+K5iqkwWlViCwgz+z4y16zX3kJ/i8X6oZT/HJd09cJXXVQGhv6xexN23mPFPc0MLQHGLQDyYEeTJNQvAgMm5y0PPN/Lf8NxHcOnvj8IErwkBoVfW3MSLPgZQuxNUHbmBbVgTTTmyYwEx2iAPxPYZAwmNAVH2LAzjQ/jRF3phnNe4gdDR1XeDwh2gGlO4QQJRTwAsCOWpqmrqFMBo0TKvlQCmaVofaNqGy158ejz8XREI/XZtK3QM7QRsbHXMt7BCGiNBqAAiaAJHoR40EloutCOA5E3XU/Nn0K8fwFXdg3C1QOjVlVOhWTvADK90AFocAAOkrInoFyWy5h4JENb3yQcy7y9RM7nUiAczbO69BC3XfwYX/bpvwkAsiCH1B2Z6sQMQNNGAEc6tcAzmwyP0ZuUBxYVEJNMCDHkg+bADQ8PHec2P49IX367iV1WCOLuyDYbgVyz9xc4fpDkJAMF8SEjZXJqg6NjBJyiBCHNQAA1h267hhRaFxwLNsgPW1McLBHrpCTadVQ6E8AcIQIQGgjRDk6GVwr0w9n18J5gWCdWh87egdRWBmHurYMrlneMCQkfu+CLT2sqicMwr6QsYBZ3s2ktcU2LcMkuJaakR6RMWvNxbBCArLK/9wIMRJKitzOMXynwXfIReXtQJNOl1qLdOhdoknsdarLd4qYhduzBNRCcpWOvMfkBQ3ODLHFCYHN6XITpPvpINcc/BKxvsAxqajx87dqFaI1njUSY2NW1s3g9AakJIN0YaXdJGhXmVe/lugZ5O4KNwsBQZmUeNj5Xl4d5/afFyfvEIa0JBo4212ia0Uff7hNgfqIrKqOIe+6LRbnqTCyE5G3YaaVqtEKjhJbjitVcBpEY0fc172UjOpA8UpCgkW9nyMZ5JGjkUAoadVw4EUji2IWSc74m7QL9bPBvq+UnWgoI6a6LRCnEDrNWrN7zxJDchrErnoStoSD7XlASVZ85Pgq9kXiuabsU1fzvrNIJDm3ktVYjxti/vuvnYWignhVpIN9CAK2gRCApZcSHyScfxzpM3t5iBA5Lnm+KGFsNpkIQnmtJt3yqYCO9EU6HSO3JjrJqvE225HgW6Yb7HYc2dNllEdHDWHHboUy7UtqaQa8wKhVmFNARFih53ZGlLJEywyr4hPaOSSQVByhCsAYp52LBz+mhePK5lc5hTWpGkEZphhnvMXWJnxjqACAyVfquS/2CJ6cIeAcVeWkIESemZ1J6mIp/m3rBeUecfS0ARFHZjY042GeTfjakAH+Ttpf0W6OrqgkOHDkHVtX79etixYwfAO+cATn+TaQ1AcbPUrleTAeZ+B6BtnPQG3gB4fTuH3EsjzTr5zhLFTN8OuXDMYJ82SnDferMFYa6+vlGzaLh48aIbTJrB4DtZ5b62CHQMTXOv5WYLYtz02mfynPc7GrkXsgw8tqDM5zMQuiWpKthh7iY0edwfswBYuHDhqAsXng30egCh8mum3wO9E6fX3+uEkGdFrfgeSc9QvNCNSQu++ZKTzMT//ZvbGUtv8+bN0NnZOWJRc888s9flMw581kwa8RGNzL3L5/n5G+Ond+mfbk6W+Ip8BkvKqUOxX0x2P0aCQWaCjFZO7bI0Ozo6YP/+/bBu3TqYPHkytLe3w9q1a+29adOm2Xfo9G5mmOcF8wxaDmPDUM+eEfQMrUBv3759kR6c/KkxHZ84So0I8yLdjvSL6dqeiJgdvC6KGRN6Cfkd9tYmO9SC7YCz74KxLjqzD+DEDwBbOemsK9dqrHR2SDSBJONFm2zTzRxw3oMAszaNSQ96ngX6+/fsiRPUfPS02h12wLJoslT79oZJD3FkaYl7g90ilaiXyKgO4PzLbN//AZy2AGwaIy+OKPTXxwH+8aSbb6KdIh+hGYRP/iiYAgOBXqbX/1+m96GR9IaZ3vHvc7T6sQ/ljhkMG6PVcFNs1rof6an3noVabSY3p4l63WqFwNcfOVPKlQOUEZ9ycp3yvmWAU2azwvhZXw/Am39mhplwQ7nWoqJGrDT9xkZeIxz3o2YAGcR0Q2+WFST1sU9cOMIvD7JRKCcYW08xENQpeGQeiDO3s0h73tPNSe8KWzhZMP6UxBZSNdZkAINWMxRTAy895XZ9ZOuMQBp+bA4hFcYNj4xmjZk2PZDMm1vu9zCAlNzaahdtkRjMCtFrIPeBJAu/88PMtT7B0lpRIGLXJa9ScV5lmDILhl3c5c6uCjWLqpARuCwXNYIskNCAAU+X30WWMikBwFeK6WgspSsYcjidjXR6ohN1lsaxcgpkS2Vytk4gzq1Y+nY9rWO+ZQtJa4W5A8j3UVaVkq51Gg/W5No1SgmkMyz3U3kQocXaprTPxTQFjtVZkoetqsv5nTcHROP4NcGAMBf02lHoHdsBscrUGDVWOLQw05gOecbtOzXHsPmX8k+XPWP5wFtuiHnI0PGwW+on153kmXNNqHSMKecvKpyesK/IGt4nhK+da8IfTwyyeVhZcl7pmKcKhQAIXB6UikInuGNeG3x4ZoswJUuR52go1EM6lBYUcq1TeO/l2+p2Ba2fY3LfcERqXgLOtCwg42geFFnDcWXMvT96Ey6946SbQxK6a2UYDko0f/uPvGgQnu5W8Kfv3iRMjRwI5wNFLWiRBQM9BxAKq6yxy3q3JmF/vrepRkoPkNxxJjHry25vgaaZbpa208mSoZial1t6buCb9zMylAg+Mq/BjDtqbo1M+INIS2KeZZsGXX8qattq/IeTDnC3wUUnFzrjWGF0dndfiZoDU0RDaUNjXMJf4vGqVYTTRCymcp20EZ5brbjnRHhQdQ18ypCpR+I5Psyi4C9QNi+BVCyRM/oYPTAdtihMYHKoqBgBREFS6BIoSgWU9uNk/6JGks/sWOMwPFJexdF8om0vE7wzSlhBikpKaMG0mix7obS3YIVWsAgmakQnzUTGKd2L/gAShHm6Fx8Y/HygXi+slamv8sfNdTy6wS2GIcSDHYTSljcyyDAxbzdKFOZGUCx1IQGQ41iXU/pd7s36OUChFCbs4zW3S9KFI1N8cOAC+9v9ifkUYyyjMYmEYgSJJYAWlZxOm1YcizIhPMuk81Ji3ppa0LIP/RTTnW14/0Dh+2KlW9Lj7U/ynrLFSjqaUJjhpRgwxl3O/w9hdGev9A9Iuz5BmhzeJUwm5cDuwm0DW8ukq7+PqIGvMPPdPo+A+HFHiXGUkGyQ0n5d0aj8W2gcRGSMnxLkF2ObJnXDDdO7qlgeNVDSnplTYfBt/vRmvlpJrXiGUCcbL3gvVVANTJdWJak+63wJUMpew25+HPT1q/G+f12EiQBxYKby8X0rf4LjL0VKpRnlE0MQvU2iCCo39rhiBfMBAPp7IcjZOig/DPXBDXhP38Q/hiYwM9u4eN/JqcqWBIZGgolRRWiHqtOUwidsFRjHBCKw5fxiN9zYuA/X9QyNxecVgURAz9x6NzRqXJCbD0EIhaPNePisBQBpbqXlwt+pyD/1kOZkN1h9ic23C+/qeQbGcY0biOVv722d0Kg/yrb9OZvfIxUZL/QAydTA9wGISG3QB4q4X9q0dx8MNLfjl06dh3FeEwISAf1ywXK2gK+zGXzSAYKSGY2SjsRVS1mAfU8bAM/zHvUwbnRfoSZyXRWQcNHz/IGI9D3sPxuZiblFRwahCagAFQICmb/X2g/DajdufOUMXOX1roDIiw4unMPHJ+ZkfylvovOYyRmspQ5e4jrzmFcyp9pv8b1z3PM5AR7n4NGN649ekz88+z9ntxaF4ZgE6gAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import terrible from \"../../assets/terrible.png\";\nimport bad from \"../../assets/bad.png\";\nimport neutral from \"../../assets/neutral.png\";\nimport good from \"../../assets/good.png\";\nimport excelent from \"../../assets/excelent.png\";\nimport { Stages } from \"../types\";\n\nexport const GREEN_COLOR = \"#66B22C\";\n\nexport const MASK_PLACEHOLDER = '+7 (___) ___-__-__';\n\nexport const RATES = [\n    {\n        id: 1,\n        value: 1,\n        image: terrible,\n        text: \"Ужасно\",\n    },\n    {\n        id: 2,\n        value: 2,\n        image: bad,\n        text: \"Плохо\",\n    },\n    {\n        id: 3,\n        value: 3,\n        image: neutral,\n        text: \"Нейтрально\",\n    },\n    {\n        id: 4,\n        value: 4,\n        image: good,\n        text: \"Хорошо\",\n    },\n    {\n        id: 5,\n        value: 5,\n        image: excelent,\n        text: \"Отлично\",\n    },\n];\n\nexport const STAGES: Stages[] = [\n    {\n        id: \"1\",\n        title: \"Насколько легко пользоваться нашим сайтом?\",\n        text: \"Оцените наш сайт, чтобы помочь нам сделать сервис еще лучше\",\n        button: null,\n        placeholder: null,\n        borderColor: \"#66B22C\",\n        buttonColor: \"#66B22C\",\n    },\n    {\n        id: \"2\",\n        title: \"Что нужно сделать лучше?\",\n        text: null,\n        button: \"оставить обратную связь\",\n        placeholder: \"Мне бы хотелось, чтобы\",\n        borderColor: \"#66B22C\",\n        buttonColor: \"#66B22C\",\n    },\n    {\n        id: \"3\",\n        title: \"Спасибо за отзыв\",\n        text: \"Если хотите получить обратную связь по вашему отклику, пожалуйста оставьте свой номер телефона\",\n        button: \"получить обратную связь\",\n        placeholder: \"+7 (___) ___-__-__\",\n        borderColor: \"#66B22C\",\n        buttonColor: \"#66B22C\",\n    },\n];\n","import { ComponentProps, forwardRef } from \"react\";\nimport { GREEN_COLOR } from \"../../constants\";\n\ninterface InputProps extends ComponentProps<\"input\"> {\n    borderColor?: string;\n}\n\nexport const Input = forwardRef<HTMLInputElement, InputProps>(\n    ({ borderColor = GREEN_COLOR, readOnly, className, ...props }, ref) => {\n        return (\n            <input\n                {...props}\n                ref={ref}\n                className={`border-2 border-[${borderColor}] border-solid h-10 rounded-xl py-3 px-4 outline-none ${\n                    readOnly && \"cursor-default\"\n                } ${className}`}\n            />\n        );\n    },\n);\n","/** Checks if value is string */\nfunction isString(str) {\n  return typeof str === 'string' || str instanceof String;\n}\n\n/** Checks if value is object */\nfunction isObject(obj) {\n  var _obj$constructor;\n  return typeof obj === 'object' && obj != null && (obj == null || (_obj$constructor = obj.constructor) == null ? void 0 : _obj$constructor.name) === 'Object';\n}\nfunction pick(obj, keys) {\n  if (Array.isArray(keys)) return pick(obj, (_, k) => keys.includes(k));\n  return Object.entries(obj).reduce((acc, _ref) => {\n    let [k, v] = _ref;\n    if (keys(v, k)) acc[k] = v;\n    return acc;\n  }, {});\n}\n\n/** Direction */\nconst DIRECTION = {\n  NONE: 'NONE',\n  LEFT: 'LEFT',\n  FORCE_LEFT: 'FORCE_LEFT',\n  RIGHT: 'RIGHT',\n  FORCE_RIGHT: 'FORCE_RIGHT'\n};\n\n/** Direction */\n\nfunction forceDirection(direction) {\n  switch (direction) {\n    case DIRECTION.LEFT:\n      return DIRECTION.FORCE_LEFT;\n    case DIRECTION.RIGHT:\n      return DIRECTION.FORCE_RIGHT;\n    default:\n      return direction;\n  }\n}\n\n/** Escapes regular expression control chars */\nfunction escapeRegExp(str) {\n  return str.replace(/([.*+?^=!:${}()|[\\]/\\\\])/g, '\\\\$1');\n}\n\n// cloned from https://github.com/epoberezkin/fast-deep-equal with small changes\nfunction objectIncludes(b, a) {\n  if (a === b) return true;\n  const arrA = Array.isArray(a),\n    arrB = Array.isArray(b);\n  let i;\n  if (arrA && arrB) {\n    if (a.length != b.length) return false;\n    for (i = 0; i < a.length; i++) if (!objectIncludes(a[i], b[i])) return false;\n    return true;\n  }\n  if (arrA != arrB) return false;\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\n    const dateA = a instanceof Date,\n      dateB = b instanceof Date;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n    if (dateA != dateB) return false;\n    const regexpA = a instanceof RegExp,\n      regexpB = b instanceof RegExp;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n    if (regexpA != regexpB) return false;\n    const keys = Object.keys(a);\n    // if (keys.length !== Object.keys(b).length) return false;\n\n    for (i = 0; i < keys.length; i++) if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    for (i = 0; i < keys.length; i++) if (!objectIncludes(b[keys[i]], a[keys[i]])) return false;\n    return true;\n  } else if (a && b && typeof a === 'function' && typeof b === 'function') {\n    return a.toString() === b.toString();\n  }\n  return false;\n}\n\n/** Selection range */\n\nexport { DIRECTION, escapeRegExp, forceDirection, isObject, isString, objectIncludes, pick };\n","import { DIRECTION } from './utils.js';\n\n/** Provides details of changing input */\nclass ActionDetails {\n  /** Current input value */\n\n  /** Current cursor position */\n\n  /** Old input value */\n\n  /** Old selection */\n\n  constructor(opts) {\n    Object.assign(this, opts);\n\n    // double check if left part was changed (autofilling, other non-standard input triggers)\n    while (this.value.slice(0, this.startChangePos) !== this.oldValue.slice(0, this.startChangePos)) {\n      --this.oldSelection.start;\n    }\n    if (this.insertedCount) {\n      // double check right part\n      while (this.value.slice(this.cursorPos) !== this.oldValue.slice(this.oldSelection.end)) {\n        if (this.value.length - this.cursorPos < this.oldValue.length - this.oldSelection.end) ++this.oldSelection.end;else ++this.cursorPos;\n      }\n    }\n  }\n\n  /** Start changing position */\n  get startChangePos() {\n    return Math.min(this.cursorPos, this.oldSelection.start);\n  }\n\n  /** Inserted symbols count */\n  get insertedCount() {\n    return this.cursorPos - this.startChangePos;\n  }\n\n  /** Inserted symbols */\n  get inserted() {\n    return this.value.substr(this.startChangePos, this.insertedCount);\n  }\n\n  /** Removed symbols count */\n  get removedCount() {\n    // Math.max for opposite operation\n    return Math.max(this.oldSelection.end - this.startChangePos ||\n    // for Delete\n    this.oldValue.length - this.value.length, 0);\n  }\n\n  /** Removed symbols */\n  get removed() {\n    return this.oldValue.substr(this.startChangePos, this.removedCount);\n  }\n\n  /** Unchanged head symbols */\n  get head() {\n    return this.value.substring(0, this.startChangePos);\n  }\n\n  /** Unchanged tail symbols */\n  get tail() {\n    return this.value.substring(this.startChangePos + this.insertedCount);\n  }\n\n  /** Remove direction */\n  get removeDirection() {\n    if (!this.removedCount || this.insertedCount) return DIRECTION.NONE;\n\n    // align right if delete at right\n    return (this.oldSelection.end === this.cursorPos || this.oldSelection.start === this.cursorPos) &&\n    // if not range removed (event with backspace)\n    this.oldSelection.end === this.oldSelection.start ? DIRECTION.RIGHT : DIRECTION.LEFT;\n  }\n}\n\nexport { ActionDetails as default };\n","/** Applies mask on element */\nfunction IMask(el, opts) {\n  // currently available only for input-like elements\n  return new IMask.InputMask(el, opts);\n}\n\nexport { IMask as default };\n","import { isString, isObject, pick } from '../core/utils.js';\nimport IMask from '../core/holder.js';\n\n// TODO can't use overloads here because of https://github.com/microsoft/TypeScript/issues/50754\n// export function maskedClass(mask: string): typeof MaskedPattern;\n// export function maskedClass(mask: DateConstructor): typeof MaskedDate;\n// export function maskedClass(mask: NumberConstructor): typeof MaskedNumber;\n// export function maskedClass(mask: Array<any> | ArrayConstructor): typeof MaskedDynamic;\n// export function maskedClass(mask: MaskedDate): typeof MaskedDate;\n// export function maskedClass(mask: MaskedNumber): typeof MaskedNumber;\n// export function maskedClass(mask: MaskedEnum): typeof MaskedEnum;\n// export function maskedClass(mask: MaskedRange): typeof MaskedRange;\n// export function maskedClass(mask: MaskedRegExp): typeof MaskedRegExp;\n// export function maskedClass(mask: MaskedFunction): typeof MaskedFunction;\n// export function maskedClass(mask: MaskedPattern): typeof MaskedPattern;\n// export function maskedClass(mask: MaskedDynamic): typeof MaskedDynamic;\n// export function maskedClass(mask: Masked): typeof Masked;\n// export function maskedClass(mask: typeof Masked): typeof Masked;\n// export function maskedClass(mask: typeof MaskedDate): typeof MaskedDate;\n// export function maskedClass(mask: typeof MaskedNumber): typeof MaskedNumber;\n// export function maskedClass(mask: typeof MaskedEnum): typeof MaskedEnum;\n// export function maskedClass(mask: typeof MaskedRange): typeof MaskedRange;\n// export function maskedClass(mask: typeof MaskedRegExp): typeof MaskedRegExp;\n// export function maskedClass(mask: typeof MaskedFunction): typeof MaskedFunction;\n// export function maskedClass(mask: typeof MaskedPattern): typeof MaskedPattern;\n// export function maskedClass(mask: typeof MaskedDynamic): typeof MaskedDynamic;\n// export function maskedClass<Mask extends typeof Masked> (mask: Mask): Mask;\n// export function maskedClass(mask: RegExp): typeof MaskedRegExp;\n// export function maskedClass(mask: (value: string, ...args: any[]) => boolean): typeof MaskedFunction;\n\n/** Get Masked class by mask type */\nfunction maskedClass(mask) /* TODO */{\n  if (mask == null) throw new Error('mask property should be defined');\n  if (mask instanceof RegExp) return IMask.MaskedRegExp;\n  if (isString(mask)) return IMask.MaskedPattern;\n  if (mask === Date) return IMask.MaskedDate;\n  if (mask === Number) return IMask.MaskedNumber;\n  if (Array.isArray(mask) || mask === Array) return IMask.MaskedDynamic;\n  if (IMask.Masked && mask.prototype instanceof IMask.Masked) return mask;\n  if (IMask.Masked && mask instanceof IMask.Masked) return mask.constructor;\n  if (mask instanceof Function) return IMask.MaskedFunction;\n  console.warn('Mask not found for mask', mask); // eslint-disable-line no-console\n  return IMask.Masked;\n}\nfunction normalizeOpts(opts) {\n  if (!opts) throw new Error('Options in not defined');\n  if (IMask.Masked) {\n    if (opts.prototype instanceof IMask.Masked) return {\n      mask: opts\n    };\n\n    /*\n      handle cases like:\n      1) opts = Masked\n      2) opts = { mask: Masked, ...instanceOpts }\n    */\n    const {\n      mask = undefined,\n      ...instanceOpts\n    } = opts instanceof IMask.Masked ? {\n      mask: opts\n    } : isObject(opts) && opts.mask instanceof IMask.Masked ? opts : {};\n    if (mask) {\n      const _mask = mask.mask;\n      return {\n        ...pick(mask, (_, k) => !k.startsWith('_')),\n        mask: mask.constructor,\n        _mask,\n        ...instanceOpts\n      };\n    }\n  }\n  if (!isObject(opts)) return {\n    mask: opts\n  };\n  return {\n    ...opts\n  };\n}\n\n// TODO can't use overloads here because of https://github.com/microsoft/TypeScript/issues/50754\n\n// From masked\n// export default function createMask<Opts extends Masked, ReturnMasked=Opts> (opts: Opts): ReturnMasked;\n// // From masked class\n// export default function createMask<Opts extends MaskedOptions<typeof Masked>, ReturnMasked extends Masked=InstanceType<Opts['mask']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedDate>, ReturnMasked extends MaskedDate=MaskedDate<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedNumber>, ReturnMasked extends MaskedNumber=MaskedNumber<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedEnum>, ReturnMasked extends MaskedEnum=MaskedEnum<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedRange>, ReturnMasked extends MaskedRange=MaskedRange<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedRegExp>, ReturnMasked extends MaskedRegExp=MaskedRegExp<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedFunction>, ReturnMasked extends MaskedFunction=MaskedFunction<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedPattern>, ReturnMasked extends MaskedPattern=MaskedPattern<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedDynamic>, ReturnMasked extends MaskedDynamic=MaskedDynamic<Opts['parent']>> (opts: Opts): ReturnMasked;\n// // From mask opts\n// export default function createMask<Opts extends MaskedOptions<Masked>, ReturnMasked=Opts extends MaskedOptions<infer M> ? M : never> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedNumberOptions, ReturnMasked extends MaskedNumber=MaskedNumber<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedDateFactoryOptions, ReturnMasked extends MaskedDate=MaskedDate<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedEnumOptions, ReturnMasked extends MaskedEnum=MaskedEnum<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedRangeOptions, ReturnMasked extends MaskedRange=MaskedRange<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedPatternOptions, ReturnMasked extends MaskedPattern=MaskedPattern<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedDynamicOptions, ReturnMasked extends MaskedDynamic=MaskedDynamic<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<RegExp>, ReturnMasked extends MaskedRegExp=MaskedRegExp<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<Function>, ReturnMasked extends MaskedFunction=MaskedFunction<Opts['parent']>> (opts: Opts): ReturnMasked;\n\n/** Creates new {@link Masked} depending on mask type */\nfunction createMask(opts) {\n  if (IMask.Masked && opts instanceof IMask.Masked) return opts;\n  const nOpts = normalizeOpts(opts);\n  const MaskedClass = maskedClass(nOpts.mask);\n  if (!MaskedClass) throw new Error(\"Masked class is not found for provided mask \" + nOpts.mask + \", appropriate module needs to be imported manually before creating mask.\");\n  if (nOpts.mask === MaskedClass) delete nOpts.mask;\n  if (nOpts._mask) {\n    nOpts.mask = nOpts._mask;\n    delete nOpts._mask;\n  }\n  return new MaskedClass(nOpts);\n}\nIMask.createMask = createMask;\n\nexport { createMask as default, maskedClass, normalizeOpts };\n","import IMask from '../core/holder.js';\n\n/**  Generic element API to use with mask */\nclass MaskElement {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** Safely returns selection start */\n  get selectionStart() {\n    let start;\n    try {\n      start = this._unsafeSelectionStart;\n    } catch {}\n    return start != null ? start : this.value.length;\n  }\n\n  /** Safely returns selection end */\n  get selectionEnd() {\n    let end;\n    try {\n      end = this._unsafeSelectionEnd;\n    } catch {}\n    return end != null ? end : this.value.length;\n  }\n\n  /** Safely sets element selection */\n  select(start, end) {\n    if (start == null || end == null || start === this.selectionStart && end === this.selectionEnd) return;\n    try {\n      this._unsafeSelect(start, end);\n    } catch {}\n  }\n\n  /** */\n  get isActive() {\n    return false;\n  }\n  /** */\n\n  /** */\n\n  /** */\n}\nIMask.MaskElement = MaskElement;\n\nexport { MaskElement as default };\n","import MaskElement from './mask-element.js';\nimport IMask from '../core/holder.js';\n\nconst KEY_Z = 90;\nconst KEY_Y = 89;\n\n/** Bridge between HTMLElement and {@link Masked} */\nclass HTMLMaskElement extends MaskElement {\n  /** HTMLElement to use mask on */\n\n  constructor(input) {\n    super();\n    this.input = input;\n    this._onKeydown = this._onKeydown.bind(this);\n    this._onInput = this._onInput.bind(this);\n    this._onBeforeinput = this._onBeforeinput.bind(this);\n    this._onCompositionEnd = this._onCompositionEnd.bind(this);\n  }\n  get rootElement() {\n    var _this$input$getRootNo, _this$input$getRootNo2, _this$input;\n    return (_this$input$getRootNo = (_this$input$getRootNo2 = (_this$input = this.input).getRootNode) == null ? void 0 : _this$input$getRootNo2.call(_this$input)) != null ? _this$input$getRootNo : document;\n  }\n\n  /** Is element in focus */\n  get isActive() {\n    return this.input === this.rootElement.activeElement;\n  }\n\n  /** Binds HTMLElement events to mask internal events */\n  bindEvents(handlers) {\n    this.input.addEventListener('keydown', this._onKeydown);\n    this.input.addEventListener('input', this._onInput);\n    this.input.addEventListener('beforeinput', this._onBeforeinput);\n    this.input.addEventListener('compositionend', this._onCompositionEnd);\n    this.input.addEventListener('drop', handlers.drop);\n    this.input.addEventListener('click', handlers.click);\n    this.input.addEventListener('focus', handlers.focus);\n    this.input.addEventListener('blur', handlers.commit);\n    this._handlers = handlers;\n  }\n  _onKeydown(e) {\n    if (this._handlers.redo && (e.keyCode === KEY_Z && e.shiftKey && (e.metaKey || e.ctrlKey) || e.keyCode === KEY_Y && e.ctrlKey)) {\n      e.preventDefault();\n      return this._handlers.redo(e);\n    }\n    if (this._handlers.undo && e.keyCode === KEY_Z && (e.metaKey || e.ctrlKey)) {\n      e.preventDefault();\n      return this._handlers.undo(e);\n    }\n    if (!e.isComposing) this._handlers.selectionChange(e);\n  }\n  _onBeforeinput(e) {\n    if (e.inputType === 'historyUndo' && this._handlers.undo) {\n      e.preventDefault();\n      return this._handlers.undo(e);\n    }\n    if (e.inputType === 'historyRedo' && this._handlers.redo) {\n      e.preventDefault();\n      return this._handlers.redo(e);\n    }\n  }\n  _onCompositionEnd(e) {\n    this._handlers.input(e);\n  }\n  _onInput(e) {\n    if (!e.isComposing) this._handlers.input(e);\n  }\n\n  /** Unbinds HTMLElement events to mask internal events */\n  unbindEvents() {\n    this.input.removeEventListener('keydown', this._onKeydown);\n    this.input.removeEventListener('input', this._onInput);\n    this.input.removeEventListener('beforeinput', this._onBeforeinput);\n    this.input.removeEventListener('compositionend', this._onCompositionEnd);\n    this.input.removeEventListener('drop', this._handlers.drop);\n    this.input.removeEventListener('click', this._handlers.click);\n    this.input.removeEventListener('focus', this._handlers.focus);\n    this.input.removeEventListener('blur', this._handlers.commit);\n    this._handlers = {};\n  }\n}\nIMask.HTMLMaskElement = HTMLMaskElement;\n\nexport { HTMLMaskElement as default };\n","import HTMLMaskElement from './html-mask-element.js';\nimport IMask from '../core/holder.js';\nimport './mask-element.js';\n\n/** Bridge between InputElement and {@link Masked} */\nclass HTMLInputMaskElement extends HTMLMaskElement {\n  /** InputElement to use mask on */\n\n  constructor(input) {\n    super(input);\n    this.input = input;\n  }\n\n  /** Returns InputElement selection start */\n  get _unsafeSelectionStart() {\n    return this.input.selectionStart != null ? this.input.selectionStart : this.value.length;\n  }\n\n  /** Returns InputElement selection end */\n  get _unsafeSelectionEnd() {\n    return this.input.selectionEnd;\n  }\n\n  /** Sets InputElement selection */\n  _unsafeSelect(start, end) {\n    this.input.setSelectionRange(start, end);\n  }\n  get value() {\n    return this.input.value;\n  }\n  set value(value) {\n    this.input.value = value;\n  }\n}\nIMask.HTMLMaskElement = HTMLMaskElement;\n\nexport { HTMLInputMaskElement as default };\n","import HTMLMaskElement from './html-mask-element.js';\nimport IMask from '../core/holder.js';\nimport './mask-element.js';\n\nclass HTMLContenteditableMaskElement extends HTMLMaskElement {\n  /** Returns HTMLElement selection start */\n  get _unsafeSelectionStart() {\n    const root = this.rootElement;\n    const selection = root.getSelection && root.getSelection();\n    const anchorOffset = selection && selection.anchorOffset;\n    const focusOffset = selection && selection.focusOffset;\n    if (focusOffset == null || anchorOffset == null || anchorOffset < focusOffset) {\n      return anchorOffset;\n    }\n    return focusOffset;\n  }\n\n  /** Returns HTMLElement selection end */\n  get _unsafeSelectionEnd() {\n    const root = this.rootElement;\n    const selection = root.getSelection && root.getSelection();\n    const anchorOffset = selection && selection.anchorOffset;\n    const focusOffset = selection && selection.focusOffset;\n    if (focusOffset == null || anchorOffset == null || anchorOffset > focusOffset) {\n      return anchorOffset;\n    }\n    return focusOffset;\n  }\n\n  /** Sets HTMLElement selection */\n  _unsafeSelect(start, end) {\n    if (!this.rootElement.createRange) return;\n    const range = this.rootElement.createRange();\n    range.setStart(this.input.firstChild || this.input, start);\n    range.setEnd(this.input.lastChild || this.input, end);\n    const root = this.rootElement;\n    const selection = root.getSelection && root.getSelection();\n    if (selection) {\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n  }\n\n  /** HTMLElement value */\n  get value() {\n    return this.input.textContent || '';\n  }\n  set value(value) {\n    this.input.textContent = value;\n  }\n}\nIMask.HTMLContenteditableMaskElement = HTMLContenteditableMaskElement;\n\nexport { HTMLContenteditableMaskElement as default };\n","class InputHistory {\n  constructor() {\n    this.states = [];\n    this.currentIndex = 0;\n  }\n  get currentState() {\n    return this.states[this.currentIndex];\n  }\n  get isEmpty() {\n    return this.states.length === 0;\n  }\n  push(state) {\n    // if current index points before the last element then remove the future\n    if (this.currentIndex < this.states.length - 1) this.states.length = this.currentIndex + 1;\n    this.states.push(state);\n    if (this.states.length > InputHistory.MAX_LENGTH) this.states.shift();\n    this.currentIndex = this.states.length - 1;\n  }\n  go(steps) {\n    this.currentIndex = Math.min(Math.max(this.currentIndex + steps, 0), this.states.length - 1);\n    return this.currentState;\n  }\n  undo() {\n    return this.go(-1);\n  }\n  redo() {\n    return this.go(+1);\n  }\n  clear() {\n    this.states.length = 0;\n    this.currentIndex = 0;\n  }\n}\nInputHistory.MAX_LENGTH = 100;\n\nexport { InputHistory as default };\n","import { DIRECTION } from '../core/utils.js';\nimport ActionDetails from '../core/action-details.js';\nimport createMask, { maskedClass } from '../masked/factory.js';\nimport MaskElement from './mask-element.js';\nimport HTMLInputMaskElement from './html-input-mask-element.js';\nimport HTMLContenteditableMaskElement from './html-contenteditable-mask-element.js';\nimport IMask from '../core/holder.js';\nimport InputHistory from './input-history.js';\nimport './html-mask-element.js';\n\n/** Listens to element events and controls changes between element and {@link Masked} */\nclass InputMask {\n  /**\n    View element\n  */\n\n  /** Internal {@link Masked} model */\n\n  constructor(el, opts) {\n    this.el = el instanceof MaskElement ? el : el.isContentEditable && el.tagName !== 'INPUT' && el.tagName !== 'TEXTAREA' ? new HTMLContenteditableMaskElement(el) : new HTMLInputMaskElement(el);\n    this.masked = createMask(opts);\n    this._listeners = {};\n    this._value = '';\n    this._unmaskedValue = '';\n    this._rawInputValue = '';\n    this.history = new InputHistory();\n    this._saveSelection = this._saveSelection.bind(this);\n    this._onInput = this._onInput.bind(this);\n    this._onChange = this._onChange.bind(this);\n    this._onDrop = this._onDrop.bind(this);\n    this._onFocus = this._onFocus.bind(this);\n    this._onClick = this._onClick.bind(this);\n    this._onUndo = this._onUndo.bind(this);\n    this._onRedo = this._onRedo.bind(this);\n    this.alignCursor = this.alignCursor.bind(this);\n    this.alignCursorFriendly = this.alignCursorFriendly.bind(this);\n    this._bindEvents();\n\n    // refresh\n    this.updateValue();\n    this._onChange();\n  }\n  maskEquals(mask) {\n    var _this$masked;\n    return mask == null || ((_this$masked = this.masked) == null ? void 0 : _this$masked.maskEquals(mask));\n  }\n\n  /** Masked */\n  get mask() {\n    return this.masked.mask;\n  }\n  set mask(mask) {\n    if (this.maskEquals(mask)) return;\n    if (!(mask instanceof IMask.Masked) && this.masked.constructor === maskedClass(mask)) {\n      // TODO \"any\" no idea\n      this.masked.updateOptions({\n        mask\n      });\n      return;\n    }\n    const masked = mask instanceof IMask.Masked ? mask : createMask({\n      mask\n    });\n    masked.unmaskedValue = this.masked.unmaskedValue;\n    this.masked = masked;\n  }\n\n  /** Raw value */\n  get value() {\n    return this._value;\n  }\n  set value(str) {\n    if (this.value === str) return;\n    this.masked.value = str;\n    this.updateControl('auto');\n  }\n\n  /** Unmasked value */\n  get unmaskedValue() {\n    return this._unmaskedValue;\n  }\n  set unmaskedValue(str) {\n    if (this.unmaskedValue === str) return;\n    this.masked.unmaskedValue = str;\n    this.updateControl('auto');\n  }\n\n  /** Raw input value */\n  get rawInputValue() {\n    return this._rawInputValue;\n  }\n  set rawInputValue(str) {\n    if (this.rawInputValue === str) return;\n    this.masked.rawInputValue = str;\n    this.updateControl();\n    this.alignCursor();\n  }\n\n  /** Typed unmasked value */\n  get typedValue() {\n    return this.masked.typedValue;\n  }\n  set typedValue(val) {\n    if (this.masked.typedValueEquals(val)) return;\n    this.masked.typedValue = val;\n    this.updateControl('auto');\n  }\n\n  /** Display value */\n  get displayValue() {\n    return this.masked.displayValue;\n  }\n\n  /** Starts listening to element events */\n  _bindEvents() {\n    this.el.bindEvents({\n      selectionChange: this._saveSelection,\n      input: this._onInput,\n      drop: this._onDrop,\n      click: this._onClick,\n      focus: this._onFocus,\n      commit: this._onChange,\n      undo: this._onUndo,\n      redo: this._onRedo\n    });\n  }\n\n  /** Stops listening to element events */\n  _unbindEvents() {\n    if (this.el) this.el.unbindEvents();\n  }\n\n  /** Fires custom event */\n  _fireEvent(ev, e) {\n    const listeners = this._listeners[ev];\n    if (!listeners) return;\n    listeners.forEach(l => l(e));\n  }\n\n  /** Current selection start */\n  get selectionStart() {\n    return this._cursorChanging ? this._changingCursorPos : this.el.selectionStart;\n  }\n\n  /** Current cursor position */\n  get cursorPos() {\n    return this._cursorChanging ? this._changingCursorPos : this.el.selectionEnd;\n  }\n  set cursorPos(pos) {\n    if (!this.el || !this.el.isActive) return;\n    this.el.select(pos, pos);\n    this._saveSelection();\n  }\n\n  /** Stores current selection */\n  _saveSelection( /* ev */\n  ) {\n    if (this.displayValue !== this.el.value) {\n      console.warn('Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly.'); // eslint-disable-line no-console\n    }\n    this._selection = {\n      start: this.selectionStart,\n      end: this.cursorPos\n    };\n  }\n\n  /** Syncronizes model value from view */\n  updateValue() {\n    this.masked.value = this.el.value;\n    this._value = this.masked.value;\n    this._unmaskedValue = this.masked.unmaskedValue;\n    this._rawInputValue = this.masked.rawInputValue;\n  }\n\n  /** Syncronizes view from model value, fires change events */\n  updateControl(cursorPos) {\n    const newUnmaskedValue = this.masked.unmaskedValue;\n    const newValue = this.masked.value;\n    const newRawInputValue = this.masked.rawInputValue;\n    const newDisplayValue = this.displayValue;\n    const isChanged = this.unmaskedValue !== newUnmaskedValue || this.value !== newValue || this._rawInputValue !== newRawInputValue;\n    this._unmaskedValue = newUnmaskedValue;\n    this._value = newValue;\n    this._rawInputValue = newRawInputValue;\n    if (this.el.value !== newDisplayValue) this.el.value = newDisplayValue;\n    if (cursorPos === 'auto') this.alignCursor();else if (cursorPos != null) this.cursorPos = cursorPos;\n    if (isChanged) this._fireChangeEvents();\n    if (!this._historyChanging && (isChanged || this.history.isEmpty)) this.history.push({\n      unmaskedValue: newUnmaskedValue,\n      selection: {\n        start: this.selectionStart,\n        end: this.cursorPos\n      }\n    });\n  }\n\n  /** Updates options with deep equal check, recreates {@link Masked} model if mask type changes */\n  updateOptions(opts) {\n    const {\n      mask,\n      ...restOpts\n    } = opts; // TODO types, yes, mask is optional\n\n    const updateMask = !this.maskEquals(mask);\n    const updateOpts = this.masked.optionsIsChanged(restOpts);\n    if (updateMask) this.mask = mask;\n    if (updateOpts) this.masked.updateOptions(restOpts); // TODO\n\n    if (updateMask || updateOpts) this.updateControl();\n  }\n\n  /** Updates cursor */\n  updateCursor(cursorPos) {\n    if (cursorPos == null) return;\n    this.cursorPos = cursorPos;\n\n    // also queue change cursor for mobile browsers\n    this._delayUpdateCursor(cursorPos);\n  }\n\n  /** Delays cursor update to support mobile browsers */\n  _delayUpdateCursor(cursorPos) {\n    this._abortUpdateCursor();\n    this._changingCursorPos = cursorPos;\n    this._cursorChanging = setTimeout(() => {\n      if (!this.el) return; // if was destroyed\n      this.cursorPos = this._changingCursorPos;\n      this._abortUpdateCursor();\n    }, 10);\n  }\n\n  /** Fires custom events */\n  _fireChangeEvents() {\n    this._fireEvent('accept', this._inputEvent);\n    if (this.masked.isComplete) this._fireEvent('complete', this._inputEvent);\n  }\n\n  /** Aborts delayed cursor update */\n  _abortUpdateCursor() {\n    if (this._cursorChanging) {\n      clearTimeout(this._cursorChanging);\n      delete this._cursorChanging;\n    }\n  }\n\n  /** Aligns cursor to nearest available position */\n  alignCursor() {\n    this.cursorPos = this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos, DIRECTION.LEFT));\n  }\n\n  /** Aligns cursor only if selection is empty */\n  alignCursorFriendly() {\n    if (this.selectionStart !== this.cursorPos) return; // skip if range is selected\n    this.alignCursor();\n  }\n\n  /** Adds listener on custom event */\n  on(ev, handler) {\n    if (!this._listeners[ev]) this._listeners[ev] = [];\n    this._listeners[ev].push(handler);\n    return this;\n  }\n\n  /** Removes custom event listener */\n  off(ev, handler) {\n    if (!this._listeners[ev]) return this;\n    if (!handler) {\n      delete this._listeners[ev];\n      return this;\n    }\n    const hIndex = this._listeners[ev].indexOf(handler);\n    if (hIndex >= 0) this._listeners[ev].splice(hIndex, 1);\n    return this;\n  }\n\n  /** Handles view input event */\n  _onInput(e) {\n    this._inputEvent = e;\n    this._abortUpdateCursor();\n    const details = new ActionDetails({\n      // new state\n      value: this.el.value,\n      cursorPos: this.cursorPos,\n      // old state\n      oldValue: this.displayValue,\n      oldSelection: this._selection\n    });\n    const oldRawValue = this.masked.rawInputValue;\n    const offset = this.masked.splice(details.startChangePos, details.removed.length, details.inserted, details.removeDirection, {\n      input: true,\n      raw: true\n    }).offset;\n\n    // force align in remove direction only if no input chars were removed\n    // otherwise we still need to align with NONE (to get out from fixed symbols for instance)\n    const removeDirection = oldRawValue === this.masked.rawInputValue ? details.removeDirection : DIRECTION.NONE;\n    let cursorPos = this.masked.nearestInputPos(details.startChangePos + offset, removeDirection);\n    if (removeDirection !== DIRECTION.NONE) cursorPos = this.masked.nearestInputPos(cursorPos, DIRECTION.NONE);\n    this.updateControl(cursorPos);\n    delete this._inputEvent;\n  }\n\n  /** Handles view change event and commits model value */\n  _onChange() {\n    if (this.displayValue !== this.el.value) this.updateValue();\n    this.masked.doCommit();\n    this.updateControl();\n    this._saveSelection();\n  }\n\n  /** Handles view drop event, prevents by default */\n  _onDrop(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n  }\n\n  /** Restore last selection on focus */\n  _onFocus(ev) {\n    this.alignCursorFriendly();\n  }\n\n  /** Restore last selection on focus */\n  _onClick(ev) {\n    this.alignCursorFriendly();\n  }\n  _onUndo() {\n    this._applyHistoryState(this.history.undo());\n  }\n  _onRedo() {\n    this._applyHistoryState(this.history.redo());\n  }\n  _applyHistoryState(state) {\n    if (!state) return;\n    this._historyChanging = true;\n    this.unmaskedValue = state.unmaskedValue;\n    this.el.select(state.selection.start, state.selection.end);\n    this._saveSelection();\n    this._historyChanging = false;\n  }\n\n  /** Unbind view events and removes element reference */\n  destroy() {\n    this._unbindEvents();\n    this._listeners.length = 0;\n    delete this.el;\n  }\n}\nIMask.InputMask = InputMask;\n\nexport { InputMask as default };\n","import IMask from './holder.js';\n\n/** Provides details of changing model value */\nclass ChangeDetails {\n  /** Inserted symbols */\n\n  /** Additional offset if any changes occurred before tail */\n\n  /** Raw inserted is used by dynamic mask */\n\n  /** Can skip chars */\n\n  static normalize(prep) {\n    return Array.isArray(prep) ? prep : [prep, new ChangeDetails()];\n  }\n  constructor(details) {\n    Object.assign(this, {\n      inserted: '',\n      rawInserted: '',\n      tailShift: 0,\n      skip: false\n    }, details);\n  }\n\n  /** Aggregate changes */\n  aggregate(details) {\n    this.inserted += details.inserted;\n    this.rawInserted += details.rawInserted;\n    this.tailShift += details.tailShift;\n    this.skip = this.skip || details.skip;\n    return this;\n  }\n\n  /** Total offset considering all changes */\n  get offset() {\n    return this.tailShift + this.inserted.length;\n  }\n  get consumed() {\n    return Boolean(this.rawInserted) || this.skip;\n  }\n  equals(details) {\n    return this.inserted === details.inserted && this.tailShift === details.tailShift && this.rawInserted === details.rawInserted && this.skip === details.skip;\n  }\n}\nIMask.ChangeDetails = ChangeDetails;\n\nexport { ChangeDetails as default };\n","/** Provides details of continuous extracted tail */\nclass ContinuousTailDetails {\n  /** Tail value as string */\n\n  /** Tail start position */\n\n  /** Start position */\n\n  constructor(value, from, stop) {\n    if (value === void 0) {\n      value = '';\n    }\n    if (from === void 0) {\n      from = 0;\n    }\n    this.value = value;\n    this.from = from;\n    this.stop = stop;\n  }\n  toString() {\n    return this.value;\n  }\n  extend(tail) {\n    this.value += String(tail);\n  }\n  appendTo(masked) {\n    return masked.append(this.toString(), {\n      tail: true\n    }).aggregate(masked._appendPlaceholder());\n  }\n  get state() {\n    return {\n      value: this.value,\n      from: this.from,\n      stop: this.stop\n    };\n  }\n  set state(state) {\n    Object.assign(this, state);\n  }\n  unshift(beforePos) {\n    if (!this.value.length || beforePos != null && this.from >= beforePos) return '';\n    const shiftChar = this.value[0];\n    this.value = this.value.slice(1);\n    return shiftChar;\n  }\n  shift() {\n    if (!this.value.length) return '';\n    const shiftChar = this.value[this.value.length - 1];\n    this.value = this.value.slice(0, -1);\n    return shiftChar;\n  }\n}\n\nexport { ContinuousTailDetails as default };\n","import ChangeDetails from '../core/change-details.js';\nimport ContinuousTailDetails from '../core/continuous-tail-details.js';\nimport { isString, DIRECTION, objectIncludes, forceDirection } from '../core/utils.js';\nimport IMask from '../core/holder.js';\n\n/** Append flags */\n\n/** Extract flags */\n\n// see https://github.com/microsoft/TypeScript/issues/6223\n\n/** Provides common masking stuff */\nclass Masked {\n  /** */\n\n  /** */\n\n  /** Transforms value before mask processing */\n\n  /** Transforms each char before mask processing */\n\n  /** Validates if value is acceptable */\n\n  /** Does additional processing at the end of editing */\n\n  /** Format typed value to string */\n\n  /** Parse string to get typed value */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    this._value = '';\n    this._update({\n      ...Masked.DEFAULTS,\n      ...opts\n    });\n    this._initialized = true;\n  }\n\n  /** Sets and applies new options */\n  updateOptions(opts) {\n    if (!this.optionsIsChanged(opts)) return;\n    this.withValueRefresh(this._update.bind(this, opts));\n  }\n\n  /** Sets new options */\n  _update(opts) {\n    Object.assign(this, opts);\n  }\n\n  /** Mask state */\n  get state() {\n    return {\n      _value: this.value,\n      _rawInputValue: this.rawInputValue\n    };\n  }\n  set state(state) {\n    this._value = state._value;\n  }\n\n  /** Resets value */\n  reset() {\n    this._value = '';\n  }\n  get value() {\n    return this._value;\n  }\n  set value(value) {\n    this.resolve(value, {\n      input: true\n    });\n  }\n\n  /** Resolve new value */\n  resolve(value, flags) {\n    if (flags === void 0) {\n      flags = {\n        input: true\n      };\n    }\n    this.reset();\n    this.append(value, flags, '');\n    this.doCommit();\n  }\n  get unmaskedValue() {\n    return this.value;\n  }\n  set unmaskedValue(value) {\n    this.resolve(value, {});\n  }\n  get typedValue() {\n    return this.parse ? this.parse(this.value, this) : this.unmaskedValue;\n  }\n  set typedValue(value) {\n    if (this.format) {\n      this.value = this.format(value, this);\n    } else {\n      this.unmaskedValue = String(value);\n    }\n  }\n\n  /** Value that includes raw user input */\n  get rawInputValue() {\n    return this.extractInput(0, this.displayValue.length, {\n      raw: true\n    });\n  }\n  set rawInputValue(value) {\n    this.resolve(value, {\n      raw: true\n    });\n  }\n  get displayValue() {\n    return this.value;\n  }\n  get isComplete() {\n    return true;\n  }\n  get isFilled() {\n    return this.isComplete;\n  }\n\n  /** Finds nearest input position in direction */\n  nearestInputPos(cursorPos, direction) {\n    return cursorPos;\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    return Math.min(this.displayValue.length, toPos - fromPos);\n  }\n\n  /** Extracts value in range considering flags */\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    return this.displayValue.slice(fromPos, toPos);\n  }\n\n  /** Extracts tail in range */\n  extractTail(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    return new ContinuousTailDetails(this.extractInput(fromPos, toPos), fromPos);\n  }\n\n  /** Appends tail */\n  appendTail(tail) {\n    if (isString(tail)) tail = new ContinuousTailDetails(String(tail));\n    return tail.appendTo(this);\n  }\n\n  /** Appends char */\n  _appendCharRaw(ch, flags) {\n    if (!ch) return new ChangeDetails();\n    this._value += ch;\n    return new ChangeDetails({\n      inserted: ch,\n      rawInserted: ch\n    });\n  }\n\n  /** Appends char */\n  _appendChar(ch, flags, checkTail) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const consistentState = this.state;\n    let details;\n    [ch, details] = this.doPrepareChar(ch, flags);\n    if (ch) {\n      details = details.aggregate(this._appendCharRaw(ch, flags));\n\n      // TODO handle `skip`?\n\n      // try `autofix` lookahead\n      if (!details.rawInserted && this.autofix === 'pad') {\n        const noFixState = this.state;\n        this.state = consistentState;\n        let fixDetails = this.pad(flags);\n        const chDetails = this._appendCharRaw(ch, flags);\n        fixDetails = fixDetails.aggregate(chDetails);\n\n        // if fix was applied or\n        // if details are equal use skip restoring state optimization\n        if (chDetails.rawInserted || fixDetails.equals(details)) {\n          details = fixDetails;\n        } else {\n          this.state = noFixState;\n        }\n      }\n    }\n    if (details.inserted) {\n      let consistentTail;\n      let appended = this.doValidate(flags) !== false;\n      if (appended && checkTail != null) {\n        // validation ok, check tail\n        const beforeTailState = this.state;\n        if (this.overwrite === true) {\n          consistentTail = checkTail.state;\n          for (let i = 0; i < details.rawInserted.length; ++i) {\n            checkTail.unshift(this.displayValue.length - details.tailShift);\n          }\n        }\n        let tailDetails = this.appendTail(checkTail);\n        appended = tailDetails.rawInserted.length === checkTail.toString().length;\n\n        // not ok, try shift\n        if (!(appended && tailDetails.inserted) && this.overwrite === 'shift') {\n          this.state = beforeTailState;\n          consistentTail = checkTail.state;\n          for (let i = 0; i < details.rawInserted.length; ++i) {\n            checkTail.shift();\n          }\n          tailDetails = this.appendTail(checkTail);\n          appended = tailDetails.rawInserted.length === checkTail.toString().length;\n        }\n\n        // if ok, rollback state after tail\n        if (appended && tailDetails.inserted) this.state = beforeTailState;\n      }\n\n      // revert all if something went wrong\n      if (!appended) {\n        details = new ChangeDetails();\n        this.state = consistentState;\n        if (checkTail && consistentTail) checkTail.state = consistentTail;\n      }\n    }\n    return details;\n  }\n\n  /** Appends optional placeholder at the end */\n  _appendPlaceholder() {\n    return new ChangeDetails();\n  }\n\n  /** Appends optional eager placeholder at the end */\n  _appendEager() {\n    return new ChangeDetails();\n  }\n\n  /** Appends symbols considering flags */\n  append(str, flags, tail) {\n    if (!isString(str)) throw new Error('value should be string');\n    const checkTail = isString(tail) ? new ContinuousTailDetails(String(tail)) : tail;\n    if (flags != null && flags.tail) flags._beforeTailState = this.state;\n    let details;\n    [str, details] = this.doPrepare(str, flags);\n    for (let ci = 0; ci < str.length; ++ci) {\n      const d = this._appendChar(str[ci], flags, checkTail);\n      if (!d.rawInserted && !this.doSkipInvalid(str[ci], flags, checkTail)) break;\n      details.aggregate(d);\n    }\n    if ((this.eager === true || this.eager === 'append') && flags != null && flags.input && str) {\n      details.aggregate(this._appendEager());\n    }\n\n    // append tail but aggregate only tailShift\n    if (checkTail != null) {\n      details.tailShift += this.appendTail(checkTail).tailShift;\n      // TODO it's a good idea to clear state after appending ends\n      // but it causes bugs when one append calls another (when dynamic dispatch set rawInputValue)\n      // this._resetBeforeTailState();\n    }\n    return details;\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    this._value = this.displayValue.slice(0, fromPos) + this.displayValue.slice(toPos);\n    return new ChangeDetails();\n  }\n\n  /** Calls function and reapplies current value */\n  withValueRefresh(fn) {\n    if (this._refreshing || !this._initialized) return fn();\n    this._refreshing = true;\n    const rawInput = this.rawInputValue;\n    const value = this.value;\n    const ret = fn();\n    this.rawInputValue = rawInput;\n    // append lost trailing chars at the end\n    if (this.value && this.value !== value && value.indexOf(this.value) === 0) {\n      this.append(value.slice(this.displayValue.length), {}, '');\n      this.doCommit();\n    }\n    delete this._refreshing;\n    return ret;\n  }\n  runIsolated(fn) {\n    if (this._isolated || !this._initialized) return fn(this);\n    this._isolated = true;\n    const state = this.state;\n    const ret = fn(this);\n    this.state = state;\n    delete this._isolated;\n    return ret;\n  }\n  doSkipInvalid(ch, flags, checkTail) {\n    return Boolean(this.skipInvalid);\n  }\n\n  /** Prepares string before mask processing */\n  doPrepare(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    return ChangeDetails.normalize(this.prepare ? this.prepare(str, this, flags) : str);\n  }\n\n  /** Prepares each char before mask processing */\n  doPrepareChar(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    return ChangeDetails.normalize(this.prepareChar ? this.prepareChar(str, this, flags) : str);\n  }\n\n  /** Validates if value is acceptable */\n  doValidate(flags) {\n    return (!this.validate || this.validate(this.value, this, flags)) && (!this.parent || this.parent.doValidate(flags));\n  }\n\n  /** Does additional processing at the end of editing */\n  doCommit() {\n    if (this.commit) this.commit(this.value, this);\n  }\n  splice(start, deleteCount, inserted, removeDirection, flags) {\n    if (inserted === void 0) {\n      inserted = '';\n    }\n    if (removeDirection === void 0) {\n      removeDirection = DIRECTION.NONE;\n    }\n    if (flags === void 0) {\n      flags = {\n        input: true\n      };\n    }\n    const tailPos = start + deleteCount;\n    const tail = this.extractTail(tailPos);\n    const eagerRemove = this.eager === true || this.eager === 'remove';\n    let oldRawValue;\n    if (eagerRemove) {\n      removeDirection = forceDirection(removeDirection);\n      oldRawValue = this.extractInput(0, tailPos, {\n        raw: true\n      });\n    }\n    let startChangePos = start;\n    const details = new ChangeDetails();\n\n    // if it is just deletion without insertion\n    if (removeDirection !== DIRECTION.NONE) {\n      startChangePos = this.nearestInputPos(start, deleteCount > 1 && start !== 0 && !eagerRemove ? DIRECTION.NONE : removeDirection);\n\n      // adjust tailShift if start was aligned\n      details.tailShift = startChangePos - start;\n    }\n    details.aggregate(this.remove(startChangePos));\n    if (eagerRemove && removeDirection !== DIRECTION.NONE && oldRawValue === this.rawInputValue) {\n      if (removeDirection === DIRECTION.FORCE_LEFT) {\n        let valLength;\n        while (oldRawValue === this.rawInputValue && (valLength = this.displayValue.length)) {\n          details.aggregate(new ChangeDetails({\n            tailShift: -1\n          })).aggregate(this.remove(valLength - 1));\n        }\n      } else if (removeDirection === DIRECTION.FORCE_RIGHT) {\n        tail.unshift();\n      }\n    }\n    return details.aggregate(this.append(inserted, flags, tail));\n  }\n  maskEquals(mask) {\n    return this.mask === mask;\n  }\n  optionsIsChanged(opts) {\n    return !objectIncludes(this, opts);\n  }\n  typedValueEquals(value) {\n    const tval = this.typedValue;\n    return value === tval || Masked.EMPTY_VALUES.includes(value) && Masked.EMPTY_VALUES.includes(tval) || (this.format ? this.format(value, this) === this.format(this.typedValue, this) : false);\n  }\n  pad(flags) {\n    return new ChangeDetails();\n  }\n}\nMasked.DEFAULTS = {\n  skipInvalid: true\n};\nMasked.EMPTY_VALUES = [undefined, null, ''];\nIMask.Masked = Masked;\n\nexport { Masked as default };\n","import ChangeDetails from '../../core/change-details.js';\nimport { isString } from '../../core/utils.js';\nimport ContinuousTailDetails from '../../core/continuous-tail-details.js';\nimport IMask from '../../core/holder.js';\n\nclass ChunksTailDetails {\n  /** */\n\n  constructor(chunks, from) {\n    if (chunks === void 0) {\n      chunks = [];\n    }\n    if (from === void 0) {\n      from = 0;\n    }\n    this.chunks = chunks;\n    this.from = from;\n  }\n  toString() {\n    return this.chunks.map(String).join('');\n  }\n  extend(tailChunk) {\n    if (!String(tailChunk)) return;\n    tailChunk = isString(tailChunk) ? new ContinuousTailDetails(String(tailChunk)) : tailChunk;\n    const lastChunk = this.chunks[this.chunks.length - 1];\n    const extendLast = lastChunk && (\n    // if stops are same or tail has no stop\n    lastChunk.stop === tailChunk.stop || tailChunk.stop == null) &&\n    // if tail chunk goes just after last chunk\n    tailChunk.from === lastChunk.from + lastChunk.toString().length;\n    if (tailChunk instanceof ContinuousTailDetails) {\n      // check the ability to extend previous chunk\n      if (extendLast) {\n        // extend previous chunk\n        lastChunk.extend(tailChunk.toString());\n      } else {\n        // append new chunk\n        this.chunks.push(tailChunk);\n      }\n    } else if (tailChunk instanceof ChunksTailDetails) {\n      if (tailChunk.stop == null) {\n        // unwrap floating chunks to parent, keeping `from` pos\n        let firstTailChunk;\n        while (tailChunk.chunks.length && tailChunk.chunks[0].stop == null) {\n          firstTailChunk = tailChunk.chunks.shift(); // not possible to be `undefined` because length was checked above\n          firstTailChunk.from += tailChunk.from;\n          this.extend(firstTailChunk);\n        }\n      }\n\n      // if tail chunk still has value\n      if (tailChunk.toString()) {\n        // if chunks contains stops, then popup stop to container\n        tailChunk.stop = tailChunk.blockIndex;\n        this.chunks.push(tailChunk);\n      }\n    }\n  }\n  appendTo(masked) {\n    if (!(masked instanceof IMask.MaskedPattern)) {\n      const tail = new ContinuousTailDetails(this.toString());\n      return tail.appendTo(masked);\n    }\n    const details = new ChangeDetails();\n    for (let ci = 0; ci < this.chunks.length; ++ci) {\n      const chunk = this.chunks[ci];\n      const lastBlockIter = masked._mapPosToBlock(masked.displayValue.length);\n      const stop = chunk.stop;\n      let chunkBlock;\n      if (stop != null && (\n      // if block not found or stop is behind lastBlock\n      !lastBlockIter || lastBlockIter.index <= stop)) {\n        if (chunk instanceof ChunksTailDetails ||\n        // for continuous block also check if stop is exist\n        masked._stops.indexOf(stop) >= 0) {\n          details.aggregate(masked._appendPlaceholder(stop));\n        }\n        chunkBlock = chunk instanceof ChunksTailDetails && masked._blocks[stop];\n      }\n      if (chunkBlock) {\n        const tailDetails = chunkBlock.appendTail(chunk);\n        details.aggregate(tailDetails);\n\n        // get not inserted chars\n        const remainChars = chunk.toString().slice(tailDetails.rawInserted.length);\n        if (remainChars) details.aggregate(masked.append(remainChars, {\n          tail: true\n        }));\n      } else {\n        details.aggregate(masked.append(chunk.toString(), {\n          tail: true\n        }));\n      }\n    }\n    return details;\n  }\n  get state() {\n    return {\n      chunks: this.chunks.map(c => c.state),\n      from: this.from,\n      stop: this.stop,\n      blockIndex: this.blockIndex\n    };\n  }\n  set state(state) {\n    const {\n      chunks,\n      ...props\n    } = state;\n    Object.assign(this, props);\n    this.chunks = chunks.map(cstate => {\n      const chunk = \"chunks\" in cstate ? new ChunksTailDetails() : new ContinuousTailDetails();\n      chunk.state = cstate;\n      return chunk;\n    });\n  }\n  unshift(beforePos) {\n    if (!this.chunks.length || beforePos != null && this.from >= beforePos) return '';\n    const chunkShiftPos = beforePos != null ? beforePos - this.from : beforePos;\n    let ci = 0;\n    while (ci < this.chunks.length) {\n      const chunk = this.chunks[ci];\n      const shiftChar = chunk.unshift(chunkShiftPos);\n      if (chunk.toString()) {\n        // chunk still contains value\n        // but not shifted - means no more available chars to shift\n        if (!shiftChar) break;\n        ++ci;\n      } else {\n        // clean if chunk has no value\n        this.chunks.splice(ci, 1);\n      }\n      if (shiftChar) return shiftChar;\n    }\n    return '';\n  }\n  shift() {\n    if (!this.chunks.length) return '';\n    let ci = this.chunks.length - 1;\n    while (0 <= ci) {\n      const chunk = this.chunks[ci];\n      const shiftChar = chunk.shift();\n      if (chunk.toString()) {\n        // chunk still contains value\n        // but not shifted - means no more available chars to shift\n        if (!shiftChar) break;\n        --ci;\n      } else {\n        // clean if chunk has no value\n        this.chunks.splice(ci, 1);\n      }\n      if (shiftChar) return shiftChar;\n    }\n    return '';\n  }\n}\n\nexport { ChunksTailDetails as default };\n","import { DIRECTION } from '../../core/utils.js';\n\nclass PatternCursor {\n  constructor(masked, pos) {\n    this.masked = masked;\n    this._log = [];\n    const {\n      offset,\n      index\n    } = masked._mapPosToBlock(pos) || (pos < 0 ?\n    // first\n    {\n      index: 0,\n      offset: 0\n    } :\n    // last\n    {\n      index: this.masked._blocks.length,\n      offset: 0\n    });\n    this.offset = offset;\n    this.index = index;\n    this.ok = false;\n  }\n  get block() {\n    return this.masked._blocks[this.index];\n  }\n  get pos() {\n    return this.masked._blockStartPos(this.index) + this.offset;\n  }\n  get state() {\n    return {\n      index: this.index,\n      offset: this.offset,\n      ok: this.ok\n    };\n  }\n  set state(s) {\n    Object.assign(this, s);\n  }\n  pushState() {\n    this._log.push(this.state);\n  }\n  popState() {\n    const s = this._log.pop();\n    if (s) this.state = s;\n    return s;\n  }\n  bindBlock() {\n    if (this.block) return;\n    if (this.index < 0) {\n      this.index = 0;\n      this.offset = 0;\n    }\n    if (this.index >= this.masked._blocks.length) {\n      this.index = this.masked._blocks.length - 1;\n      this.offset = this.block.displayValue.length; // TODO this is stupid type error, `block` depends on index that was changed above\n    }\n  }\n  _pushLeft(fn) {\n    this.pushState();\n    for (this.bindBlock(); 0 <= this.index; --this.index, this.offset = ((_this$block = this.block) == null ? void 0 : _this$block.displayValue.length) || 0) {\n      var _this$block;\n      if (fn()) return this.ok = true;\n    }\n    return this.ok = false;\n  }\n  _pushRight(fn) {\n    this.pushState();\n    for (this.bindBlock(); this.index < this.masked._blocks.length; ++this.index, this.offset = 0) {\n      if (fn()) return this.ok = true;\n    }\n    return this.ok = false;\n  }\n  pushLeftBeforeFilled() {\n    return this._pushLeft(() => {\n      if (this.block.isFixed || !this.block.value) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.FORCE_LEFT);\n      if (this.offset !== 0) return true;\n    });\n  }\n  pushLeftBeforeInput() {\n    // cases:\n    // filled input: 00|\n    // optional empty input: 00[]|\n    // nested block: XX<[]>|\n    return this._pushLeft(() => {\n      if (this.block.isFixed) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.LEFT);\n      return true;\n    });\n  }\n  pushLeftBeforeRequired() {\n    return this._pushLeft(() => {\n      if (this.block.isFixed || this.block.isOptional && !this.block.value) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.LEFT);\n      return true;\n    });\n  }\n  pushRightBeforeFilled() {\n    return this._pushRight(() => {\n      if (this.block.isFixed || !this.block.value) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.FORCE_RIGHT);\n      if (this.offset !== this.block.value.length) return true;\n    });\n  }\n  pushRightBeforeInput() {\n    return this._pushRight(() => {\n      if (this.block.isFixed) return;\n\n      // const o = this.offset;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.NONE);\n      // HACK cases like (STILL DOES NOT WORK FOR NESTED)\n      // aa|X\n      // aa<X|[]>X_    - this will not work\n      // if (o && o === this.offset && this.block instanceof PatternInputDefinition) continue;\n      return true;\n    });\n  }\n  pushRightBeforeRequired() {\n    return this._pushRight(() => {\n      if (this.block.isFixed || this.block.isOptional && !this.block.value) return;\n\n      // TODO check |[*]XX_\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.NONE);\n      return true;\n    });\n  }\n}\n\nexport { PatternCursor as default };\n","import ChangeDetails from '../../core/change-details.js';\nimport { DIRECTION, isString } from '../../core/utils.js';\nimport ContinuousTailDetails from '../../core/continuous-tail-details.js';\nimport '../../core/holder.js';\n\nclass PatternFixedDefinition {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    Object.assign(this, opts);\n    this._value = '';\n    this.isFixed = true;\n  }\n  get value() {\n    return this._value;\n  }\n  get unmaskedValue() {\n    return this.isUnmasking ? this.value : '';\n  }\n  get rawInputValue() {\n    return this._isRawInput ? this.value : '';\n  }\n  get displayValue() {\n    return this.value;\n  }\n  reset() {\n    this._isRawInput = false;\n    this._value = '';\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this._value.length;\n    }\n    this._value = this._value.slice(0, fromPos) + this._value.slice(toPos);\n    if (!this._value) this._isRawInput = false;\n    return new ChangeDetails();\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (direction === void 0) {\n      direction = DIRECTION.NONE;\n    }\n    const minPos = 0;\n    const maxPos = this._value.length;\n    switch (direction) {\n      case DIRECTION.LEFT:\n      case DIRECTION.FORCE_LEFT:\n        return minPos;\n      case DIRECTION.NONE:\n      case DIRECTION.RIGHT:\n      case DIRECTION.FORCE_RIGHT:\n      default:\n        return maxPos;\n    }\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this._value.length;\n    }\n    return this._isRawInput ? toPos - fromPos : 0;\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this._value.length;\n    }\n    if (flags === void 0) {\n      flags = {};\n    }\n    return flags.raw && this._isRawInput && this._value.slice(fromPos, toPos) || '';\n  }\n  get isComplete() {\n    return true;\n  }\n  get isFilled() {\n    return Boolean(this._value);\n  }\n  _appendChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (this.isFilled) return new ChangeDetails();\n    const appendEager = this.eager === true || this.eager === 'append';\n    const appended = this.char === ch;\n    const isResolved = appended && (this.isUnmasking || flags.input || flags.raw) && (!flags.raw || !appendEager) && !flags.tail;\n    const details = new ChangeDetails({\n      inserted: this.char,\n      rawInserted: isResolved ? this.char : ''\n    });\n    this._value = this.char;\n    this._isRawInput = isResolved && (flags.raw || flags.input);\n    return details;\n  }\n  _appendEager() {\n    return this._appendChar(this.char, {\n      tail: true\n    });\n  }\n  _appendPlaceholder() {\n    const details = new ChangeDetails();\n    if (this.isFilled) return details;\n    this._value = details.inserted = this.char;\n    return details;\n  }\n  extractTail() {\n    return new ContinuousTailDetails('');\n  }\n  appendTail(tail) {\n    if (isString(tail)) tail = new ContinuousTailDetails(String(tail));\n    return tail.appendTo(this);\n  }\n  append(str, flags, tail) {\n    const details = this._appendChar(str[0], flags);\n    if (tail != null) {\n      details.tailShift += this.appendTail(tail).tailShift;\n    }\n    return details;\n  }\n  doCommit() {}\n  get state() {\n    return {\n      _value: this._value,\n      _rawInputValue: this.rawInputValue\n    };\n  }\n  set state(state) {\n    this._value = state._value;\n    this._isRawInput = Boolean(state._rawInputValue);\n  }\n  pad(flags) {\n    return this._appendPlaceholder();\n  }\n}\n\nexport { PatternFixedDefinition as default };\n","import createMask from '../factory.js';\nimport ChangeDetails from '../../core/change-details.js';\nimport { DIRECTION } from '../../core/utils.js';\nimport '../../core/holder.js';\n\nclass PatternInputDefinition {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    const {\n      parent,\n      isOptional,\n      placeholderChar,\n      displayChar,\n      lazy,\n      eager,\n      ...maskOpts\n    } = opts;\n    this.masked = createMask(maskOpts);\n    Object.assign(this, {\n      parent,\n      isOptional,\n      placeholderChar,\n      displayChar,\n      lazy,\n      eager\n    });\n  }\n  reset() {\n    this.isFilled = false;\n    this.masked.reset();\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.value.length;\n    }\n    if (fromPos === 0 && toPos >= 1) {\n      this.isFilled = false;\n      return this.masked.remove(fromPos, toPos);\n    }\n    return new ChangeDetails();\n  }\n  get value() {\n    return this.masked.value || (this.isFilled && !this.isOptional ? this.placeholderChar : '');\n  }\n  get unmaskedValue() {\n    return this.masked.unmaskedValue;\n  }\n  get rawInputValue() {\n    return this.masked.rawInputValue;\n  }\n  get displayValue() {\n    return this.masked.value && this.displayChar || this.value;\n  }\n  get isComplete() {\n    return Boolean(this.masked.value) || this.isOptional;\n  }\n  _appendChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (this.isFilled) return new ChangeDetails();\n    const state = this.masked.state;\n    // simulate input\n    let details = this.masked._appendChar(ch, this.currentMaskFlags(flags));\n    if (details.inserted && this.doValidate(flags) === false) {\n      details = new ChangeDetails();\n      this.masked.state = state;\n    }\n    if (!details.inserted && !this.isOptional && !this.lazy && !flags.input) {\n      details.inserted = this.placeholderChar;\n    }\n    details.skip = !details.inserted && !this.isOptional;\n    this.isFilled = Boolean(details.inserted);\n    return details;\n  }\n  append(str, flags, tail) {\n    // TODO probably should be done via _appendChar\n    return this.masked.append(str, this.currentMaskFlags(flags), tail);\n  }\n  _appendPlaceholder() {\n    if (this.isFilled || this.isOptional) return new ChangeDetails();\n    this.isFilled = true;\n    return new ChangeDetails({\n      inserted: this.placeholderChar\n    });\n  }\n  _appendEager() {\n    return new ChangeDetails();\n  }\n  extractTail(fromPos, toPos) {\n    return this.masked.extractTail(fromPos, toPos);\n  }\n  appendTail(tail) {\n    return this.masked.appendTail(tail);\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.value.length;\n    }\n    return this.masked.extractInput(fromPos, toPos, flags);\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (direction === void 0) {\n      direction = DIRECTION.NONE;\n    }\n    const minPos = 0;\n    const maxPos = this.value.length;\n    const boundPos = Math.min(Math.max(cursorPos, minPos), maxPos);\n    switch (direction) {\n      case DIRECTION.LEFT:\n      case DIRECTION.FORCE_LEFT:\n        return this.isComplete ? boundPos : minPos;\n      case DIRECTION.RIGHT:\n      case DIRECTION.FORCE_RIGHT:\n        return this.isComplete ? boundPos : maxPos;\n      case DIRECTION.NONE:\n      default:\n        return boundPos;\n    }\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.value.length;\n    }\n    return this.value.slice(fromPos, toPos).length;\n  }\n  doValidate(flags) {\n    return this.masked.doValidate(this.currentMaskFlags(flags)) && (!this.parent || this.parent.doValidate(this.currentMaskFlags(flags)));\n  }\n  doCommit() {\n    this.masked.doCommit();\n  }\n  get state() {\n    return {\n      _value: this.value,\n      _rawInputValue: this.rawInputValue,\n      masked: this.masked.state,\n      isFilled: this.isFilled\n    };\n  }\n  set state(state) {\n    this.masked.state = state.masked;\n    this.isFilled = state.isFilled;\n  }\n  currentMaskFlags(flags) {\n    var _flags$_beforeTailSta;\n    return {\n      ...flags,\n      _beforeTailState: (flags == null || (_flags$_beforeTailSta = flags._beforeTailState) == null ? void 0 : _flags$_beforeTailSta.masked) || (flags == null ? void 0 : flags._beforeTailState)\n    };\n  }\n  pad(flags) {\n    return new ChangeDetails();\n  }\n}\nPatternInputDefinition.DEFAULT_DEFINITIONS = {\n  '0': /\\d/,\n  'a': /[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/,\n  // http://stackoverflow.com/a/22075070\n  '*': /./\n};\n\nexport { PatternInputDefinition as default };\n","import Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/change-details.js';\nimport '../core/continuous-tail-details.js';\nimport '../core/utils.js';\n\n/** Masking by RegExp */\nclass MaskedRegExp extends Masked {\n  /** */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const mask = opts.mask;\n    if (mask) opts.validate = value => value.search(mask) >= 0;\n    super._update(opts);\n  }\n}\nIMask.MaskedRegExp = MaskedRegExp;\n\nexport { MaskedRegExp as default };\n","import ChangeDetails from '../core/change-details.js';\nimport IMask from '../core/holder.js';\nimport { DIRECTION } from '../core/utils.js';\nimport Masked from './base.js';\nimport createMask, { normalizeOpts } from './factory.js';\nimport ChunksTailDetails from './pattern/chunk-tail-details.js';\nimport PatternCursor from './pattern/cursor.js';\nimport PatternFixedDefinition from './pattern/fixed-definition.js';\nimport PatternInputDefinition from './pattern/input-definition.js';\nimport './regexp.js';\nimport '../core/continuous-tail-details.js';\n\n/** Pattern mask */\nclass MaskedPattern extends Masked {\n  /** */\n\n  /** */\n\n  /** Single char for empty input */\n\n  /** Single char for filled input */\n\n  /** Show placeholder only when needed */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    super({\n      ...MaskedPattern.DEFAULTS,\n      ...opts,\n      definitions: Object.assign({}, PatternInputDefinition.DEFAULT_DEFINITIONS, opts == null ? void 0 : opts.definitions)\n    });\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    opts.definitions = Object.assign({}, this.definitions, opts.definitions);\n    super._update(opts);\n    this._rebuildMask();\n  }\n  _rebuildMask() {\n    const defs = this.definitions;\n    this._blocks = [];\n    this.exposeBlock = undefined;\n    this._stops = [];\n    this._maskedBlocks = {};\n    const pattern = this.mask;\n    if (!pattern || !defs) return;\n    let unmaskingBlock = false;\n    let optionalBlock = false;\n    for (let i = 0; i < pattern.length; ++i) {\n      if (this.blocks) {\n        const p = pattern.slice(i);\n        const bNames = Object.keys(this.blocks).filter(bName => p.indexOf(bName) === 0);\n        // order by key length\n        bNames.sort((a, b) => b.length - a.length);\n        // use block name with max length\n        const bName = bNames[0];\n        if (bName) {\n          const {\n            expose,\n            repeat,\n            ...bOpts\n          } = normalizeOpts(this.blocks[bName]); // TODO type Opts<Arg & Extra>\n          const blockOpts = {\n            lazy: this.lazy,\n            eager: this.eager,\n            placeholderChar: this.placeholderChar,\n            displayChar: this.displayChar,\n            overwrite: this.overwrite,\n            autofix: this.autofix,\n            ...bOpts,\n            repeat,\n            parent: this\n          };\n          const maskedBlock = repeat != null ? new IMask.RepeatBlock(blockOpts /* TODO */) : createMask(blockOpts);\n          if (maskedBlock) {\n            this._blocks.push(maskedBlock);\n            if (expose) this.exposeBlock = maskedBlock;\n\n            // store block index\n            if (!this._maskedBlocks[bName]) this._maskedBlocks[bName] = [];\n            this._maskedBlocks[bName].push(this._blocks.length - 1);\n          }\n          i += bName.length - 1;\n          continue;\n        }\n      }\n      let char = pattern[i];\n      let isInput = (char in defs);\n      if (char === MaskedPattern.STOP_CHAR) {\n        this._stops.push(this._blocks.length);\n        continue;\n      }\n      if (char === '{' || char === '}') {\n        unmaskingBlock = !unmaskingBlock;\n        continue;\n      }\n      if (char === '[' || char === ']') {\n        optionalBlock = !optionalBlock;\n        continue;\n      }\n      if (char === MaskedPattern.ESCAPE_CHAR) {\n        ++i;\n        char = pattern[i];\n        if (!char) break;\n        isInput = false;\n      }\n      const def = isInput ? new PatternInputDefinition({\n        isOptional: optionalBlock,\n        lazy: this.lazy,\n        eager: this.eager,\n        placeholderChar: this.placeholderChar,\n        displayChar: this.displayChar,\n        ...normalizeOpts(defs[char]),\n        parent: this\n      }) : new PatternFixedDefinition({\n        char,\n        eager: this.eager,\n        isUnmasking: unmaskingBlock\n      });\n      this._blocks.push(def);\n    }\n  }\n  get state() {\n    return {\n      ...super.state,\n      _blocks: this._blocks.map(b => b.state)\n    };\n  }\n  set state(state) {\n    if (!state) {\n      this.reset();\n      return;\n    }\n    const {\n      _blocks,\n      ...maskedState\n    } = state;\n    this._blocks.forEach((b, bi) => b.state = _blocks[bi]);\n    super.state = maskedState;\n  }\n  reset() {\n    super.reset();\n    this._blocks.forEach(b => b.reset());\n  }\n  get isComplete() {\n    return this.exposeBlock ? this.exposeBlock.isComplete : this._blocks.every(b => b.isComplete);\n  }\n  get isFilled() {\n    return this._blocks.every(b => b.isFilled);\n  }\n  get isFixed() {\n    return this._blocks.every(b => b.isFixed);\n  }\n  get isOptional() {\n    return this._blocks.every(b => b.isOptional);\n  }\n  doCommit() {\n    this._blocks.forEach(b => b.doCommit());\n    super.doCommit();\n  }\n  get unmaskedValue() {\n    return this.exposeBlock ? this.exposeBlock.unmaskedValue : this._blocks.reduce((str, b) => str += b.unmaskedValue, '');\n  }\n  set unmaskedValue(unmaskedValue) {\n    if (this.exposeBlock) {\n      const tail = this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock)) + this.exposeBlock.displayValue.length);\n      this.exposeBlock.unmaskedValue = unmaskedValue;\n      this.appendTail(tail);\n      this.doCommit();\n    } else super.unmaskedValue = unmaskedValue;\n  }\n  get value() {\n    return this.exposeBlock ? this.exposeBlock.value :\n    // TODO return _value when not in change?\n    this._blocks.reduce((str, b) => str += b.value, '');\n  }\n  set value(value) {\n    if (this.exposeBlock) {\n      const tail = this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock)) + this.exposeBlock.displayValue.length);\n      this.exposeBlock.value = value;\n      this.appendTail(tail);\n      this.doCommit();\n    } else super.value = value;\n  }\n  get typedValue() {\n    return this.exposeBlock ? this.exposeBlock.typedValue : super.typedValue;\n  }\n  set typedValue(value) {\n    if (this.exposeBlock) {\n      const tail = this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock)) + this.exposeBlock.displayValue.length);\n      this.exposeBlock.typedValue = value;\n      this.appendTail(tail);\n      this.doCommit();\n    } else super.typedValue = value;\n  }\n  get displayValue() {\n    return this._blocks.reduce((str, b) => str += b.displayValue, '');\n  }\n  appendTail(tail) {\n    return super.appendTail(tail).aggregate(this._appendPlaceholder());\n  }\n  _appendEager() {\n    var _this$_mapPosToBlock;\n    const details = new ChangeDetails();\n    let startBlockIndex = (_this$_mapPosToBlock = this._mapPosToBlock(this.displayValue.length)) == null ? void 0 : _this$_mapPosToBlock.index;\n    if (startBlockIndex == null) return details;\n\n    // TODO test if it works for nested pattern masks\n    if (this._blocks[startBlockIndex].isFilled) ++startBlockIndex;\n    for (let bi = startBlockIndex; bi < this._blocks.length; ++bi) {\n      const d = this._blocks[bi]._appendEager();\n      if (!d.inserted) break;\n      details.aggregate(d);\n    }\n    return details;\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const blockIter = this._mapPosToBlock(this.displayValue.length);\n    const details = new ChangeDetails();\n    if (!blockIter) return details;\n    for (let bi = blockIter.index, block; block = this._blocks[bi]; ++bi) {\n      var _flags$_beforeTailSta;\n      const blockDetails = block._appendChar(ch, {\n        ...flags,\n        _beforeTailState: (_flags$_beforeTailSta = flags._beforeTailState) == null || (_flags$_beforeTailSta = _flags$_beforeTailSta._blocks) == null ? void 0 : _flags$_beforeTailSta[bi]\n      });\n      details.aggregate(blockDetails);\n      if (blockDetails.consumed) break; // go next char\n    }\n    return details;\n  }\n  extractTail(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    const chunkTail = new ChunksTailDetails();\n    if (fromPos === toPos) return chunkTail;\n    this._forEachBlocksInRange(fromPos, toPos, (b, bi, bFromPos, bToPos) => {\n      const blockChunk = b.extractTail(bFromPos, bToPos);\n      blockChunk.stop = this._findStopBefore(bi);\n      blockChunk.from = this._blockStartPos(bi);\n      if (blockChunk instanceof ChunksTailDetails) blockChunk.blockIndex = bi;\n      chunkTail.extend(blockChunk);\n    });\n    return chunkTail;\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (fromPos === toPos) return '';\n    let input = '';\n    this._forEachBlocksInRange(fromPos, toPos, (b, _, fromPos, toPos) => {\n      input += b.extractInput(fromPos, toPos, flags);\n    });\n    return input;\n  }\n  _findStopBefore(blockIndex) {\n    let stopBefore;\n    for (let si = 0; si < this._stops.length; ++si) {\n      const stop = this._stops[si];\n      if (stop <= blockIndex) stopBefore = stop;else break;\n    }\n    return stopBefore;\n  }\n\n  /** Appends placeholder depending on laziness */\n  _appendPlaceholder(toBlockIndex) {\n    const details = new ChangeDetails();\n    if (this.lazy && toBlockIndex == null) return details;\n    const startBlockIter = this._mapPosToBlock(this.displayValue.length);\n    if (!startBlockIter) return details;\n    const startBlockIndex = startBlockIter.index;\n    const endBlockIndex = toBlockIndex != null ? toBlockIndex : this._blocks.length;\n    this._blocks.slice(startBlockIndex, endBlockIndex).forEach(b => {\n      if (!b.lazy || toBlockIndex != null) {\n        var _blocks2;\n        details.aggregate(b._appendPlaceholder((_blocks2 = b._blocks) == null ? void 0 : _blocks2.length));\n      }\n    });\n    return details;\n  }\n\n  /** Finds block in pos */\n  _mapPosToBlock(pos) {\n    let accVal = '';\n    for (let bi = 0; bi < this._blocks.length; ++bi) {\n      const block = this._blocks[bi];\n      const blockStartPos = accVal.length;\n      accVal += block.displayValue;\n      if (pos <= accVal.length) {\n        return {\n          index: bi,\n          offset: pos - blockStartPos\n        };\n      }\n    }\n  }\n  _blockStartPos(blockIndex) {\n    return this._blocks.slice(0, blockIndex).reduce((pos, b) => pos += b.displayValue.length, 0);\n  }\n  _forEachBlocksInRange(fromPos, toPos, fn) {\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    const fromBlockIter = this._mapPosToBlock(fromPos);\n    if (fromBlockIter) {\n      const toBlockIter = this._mapPosToBlock(toPos);\n      // process first block\n      const isSameBlock = toBlockIter && fromBlockIter.index === toBlockIter.index;\n      const fromBlockStartPos = fromBlockIter.offset;\n      const fromBlockEndPos = toBlockIter && isSameBlock ? toBlockIter.offset : this._blocks[fromBlockIter.index].displayValue.length;\n      fn(this._blocks[fromBlockIter.index], fromBlockIter.index, fromBlockStartPos, fromBlockEndPos);\n      if (toBlockIter && !isSameBlock) {\n        // process intermediate blocks\n        for (let bi = fromBlockIter.index + 1; bi < toBlockIter.index; ++bi) {\n          fn(this._blocks[bi], bi, 0, this._blocks[bi].displayValue.length);\n        }\n\n        // process last block\n        fn(this._blocks[toBlockIter.index], toBlockIter.index, 0, toBlockIter.offset);\n      }\n    }\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    const removeDetails = super.remove(fromPos, toPos);\n    this._forEachBlocksInRange(fromPos, toPos, (b, _, bFromPos, bToPos) => {\n      removeDetails.aggregate(b.remove(bFromPos, bToPos));\n    });\n    return removeDetails;\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (direction === void 0) {\n      direction = DIRECTION.NONE;\n    }\n    if (!this._blocks.length) return 0;\n    const cursor = new PatternCursor(this, cursorPos);\n    if (direction === DIRECTION.NONE) {\n      // -------------------------------------------------\n      // NONE should only go out from fixed to the right!\n      // -------------------------------------------------\n      if (cursor.pushRightBeforeInput()) return cursor.pos;\n      cursor.popState();\n      if (cursor.pushLeftBeforeInput()) return cursor.pos;\n      return this.displayValue.length;\n    }\n\n    // FORCE is only about a|* otherwise is 0\n    if (direction === DIRECTION.LEFT || direction === DIRECTION.FORCE_LEFT) {\n      // try to break fast when *|a\n      if (direction === DIRECTION.LEFT) {\n        cursor.pushRightBeforeFilled();\n        if (cursor.ok && cursor.pos === cursorPos) return cursorPos;\n        cursor.popState();\n      }\n\n      // forward flow\n      cursor.pushLeftBeforeInput();\n      cursor.pushLeftBeforeRequired();\n      cursor.pushLeftBeforeFilled();\n\n      // backward flow\n      if (direction === DIRECTION.LEFT) {\n        cursor.pushRightBeforeInput();\n        cursor.pushRightBeforeRequired();\n        if (cursor.ok && cursor.pos <= cursorPos) return cursor.pos;\n        cursor.popState();\n        if (cursor.ok && cursor.pos <= cursorPos) return cursor.pos;\n        cursor.popState();\n      }\n      if (cursor.ok) return cursor.pos;\n      if (direction === DIRECTION.FORCE_LEFT) return 0;\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      return 0;\n    }\n    if (direction === DIRECTION.RIGHT || direction === DIRECTION.FORCE_RIGHT) {\n      // forward flow\n      cursor.pushRightBeforeInput();\n      cursor.pushRightBeforeRequired();\n      if (cursor.pushRightBeforeFilled()) return cursor.pos;\n      if (direction === DIRECTION.FORCE_RIGHT) return this.displayValue.length;\n\n      // backward flow\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      return this.nearestInputPos(cursorPos, DIRECTION.LEFT);\n    }\n    return cursorPos;\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    let total = 0;\n    this._forEachBlocksInRange(fromPos, toPos, (b, _, bFromPos, bToPos) => {\n      total += b.totalInputPositions(bFromPos, bToPos);\n    });\n    return total;\n  }\n\n  /** Get block by name */\n  maskedBlock(name) {\n    return this.maskedBlocks(name)[0];\n  }\n\n  /** Get all blocks by name */\n  maskedBlocks(name) {\n    const indices = this._maskedBlocks[name];\n    if (!indices) return [];\n    return indices.map(gi => this._blocks[gi]);\n  }\n  pad(flags) {\n    const details = new ChangeDetails();\n    this._forEachBlocksInRange(0, this.displayValue.length, b => details.aggregate(b.pad(flags)));\n    return details;\n  }\n}\nMaskedPattern.DEFAULTS = {\n  ...Masked.DEFAULTS,\n  lazy: true,\n  placeholderChar: '_'\n};\nMaskedPattern.STOP_CHAR = '`';\nMaskedPattern.ESCAPE_CHAR = '\\\\';\nMaskedPattern.InputDefinition = PatternInputDefinition;\nMaskedPattern.FixedDefinition = PatternFixedDefinition;\nIMask.MaskedPattern = MaskedPattern;\n\nexport { MaskedPattern as default };\n","import ChangeDetails from '../core/change-details.js';\nimport IMask from '../core/holder.js';\nimport MaskedPattern from './pattern.js';\nimport '../core/utils.js';\nimport './base.js';\nimport '../core/continuous-tail-details.js';\nimport './factory.js';\nimport './pattern/chunk-tail-details.js';\nimport './pattern/cursor.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/input-definition.js';\nimport './regexp.js';\n\n/** Pattern which accepts ranges */\nclass MaskedRange extends MaskedPattern {\n  /**\n    Optionally sets max length of pattern.\n    Used when pattern length is longer then `to` param length. Pads zeros at start in this case.\n  */\n\n  /** Min bound */\n\n  /** Max bound */\n\n  get _matchFrom() {\n    return this.maxLength - String(this.from).length;\n  }\n  constructor(opts) {\n    super(opts); // mask will be created in _update\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const {\n      to = this.to || 0,\n      from = this.from || 0,\n      maxLength = this.maxLength || 0,\n      autofix = this.autofix,\n      ...patternOpts\n    } = opts;\n    this.to = to;\n    this.from = from;\n    this.maxLength = Math.max(String(to).length, maxLength);\n    this.autofix = autofix;\n    const fromStr = String(this.from).padStart(this.maxLength, '0');\n    const toStr = String(this.to).padStart(this.maxLength, '0');\n    let sameCharsCount = 0;\n    while (sameCharsCount < toStr.length && toStr[sameCharsCount] === fromStr[sameCharsCount]) ++sameCharsCount;\n    patternOpts.mask = toStr.slice(0, sameCharsCount).replace(/0/g, '\\\\0') + '0'.repeat(this.maxLength - sameCharsCount);\n    super._update(patternOpts);\n  }\n  get isComplete() {\n    return super.isComplete && Boolean(this.value);\n  }\n  boundaries(str) {\n    let minstr = '';\n    let maxstr = '';\n    const [, placeholder, num] = str.match(/^(\\D*)(\\d*)(\\D*)/) || [];\n    if (num) {\n      minstr = '0'.repeat(placeholder.length) + num;\n      maxstr = '9'.repeat(placeholder.length) + num;\n    }\n    minstr = minstr.padEnd(this.maxLength, '0');\n    maxstr = maxstr.padEnd(this.maxLength, '9');\n    return [minstr, maxstr];\n  }\n  doPrepareChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    let details;\n    [ch, details] = super.doPrepareChar(ch.replace(/\\D/g, ''), flags);\n    if (!ch) details.skip = !this.isComplete;\n    return [ch, details];\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (!this.autofix || this.value.length + 1 > this.maxLength) return super._appendCharRaw(ch, flags);\n    const fromStr = String(this.from).padStart(this.maxLength, '0');\n    const toStr = String(this.to).padStart(this.maxLength, '0');\n    const [minstr, maxstr] = this.boundaries(this.value + ch);\n    if (Number(maxstr) < this.from) return super._appendCharRaw(fromStr[this.value.length], flags);\n    if (Number(minstr) > this.to) {\n      if (!flags.tail && this.autofix === 'pad' && this.value.length + 1 < this.maxLength) {\n        return super._appendCharRaw(fromStr[this.value.length], flags).aggregate(this._appendCharRaw(ch, flags));\n      }\n      return super._appendCharRaw(toStr[this.value.length], flags);\n    }\n    return super._appendCharRaw(ch, flags);\n  }\n  doValidate(flags) {\n    const str = this.value;\n    const firstNonZero = str.search(/[^0]/);\n    if (firstNonZero === -1 && str.length <= this._matchFrom) return true;\n    const [minstr, maxstr] = this.boundaries(str);\n    return this.from <= Number(maxstr) && Number(minstr) <= this.to && super.doValidate(flags);\n  }\n  pad(flags) {\n    const details = new ChangeDetails();\n    if (this.value.length === this.maxLength) return details;\n    const value = this.value;\n    const padLength = this.maxLength - this.value.length;\n    if (padLength) {\n      this.reset();\n      for (let i = 0; i < padLength; ++i) {\n        details.aggregate(super._appendCharRaw('0', flags));\n      }\n\n      // append tail\n      value.split('').forEach(ch => this._appendCharRaw(ch));\n    }\n    return details;\n  }\n}\nIMask.MaskedRange = MaskedRange;\n\nexport { MaskedRange as default };\n","import MaskedPattern from './pattern.js';\nimport MaskedRange from './range.js';\nimport IMask from '../core/holder.js';\nimport { isString } from '../core/utils.js';\nimport '../core/change-details.js';\nimport './base.js';\nimport '../core/continuous-tail-details.js';\nimport './factory.js';\nimport './pattern/chunk-tail-details.js';\nimport './pattern/cursor.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/input-definition.js';\nimport './regexp.js';\n\nconst DefaultPattern = 'd{.}`m{.}`Y';\n\n// Make format and parse required when pattern is provided\n\n/** Date mask */\nclass MaskedDate extends MaskedPattern {\n  static extractPatternOptions(opts) {\n    const {\n      mask,\n      pattern,\n      ...patternOpts\n    } = opts;\n    return {\n      ...patternOpts,\n      mask: isString(mask) ? mask : pattern\n    };\n  }\n\n  /** Pattern mask for date according to {@link MaskedDate#format} */\n\n  /** Start date */\n\n  /** End date */\n\n  /** Format typed value to string */\n\n  /** Parse string to get typed value */\n\n  constructor(opts) {\n    super(MaskedDate.extractPatternOptions({\n      ...MaskedDate.DEFAULTS,\n      ...opts\n    }));\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const {\n      mask,\n      pattern,\n      blocks,\n      ...patternOpts\n    } = {\n      ...MaskedDate.DEFAULTS,\n      ...opts\n    };\n    const patternBlocks = Object.assign({}, MaskedDate.GET_DEFAULT_BLOCKS());\n    // adjust year block\n    if (opts.min) patternBlocks.Y.from = opts.min.getFullYear();\n    if (opts.max) patternBlocks.Y.to = opts.max.getFullYear();\n    if (opts.min && opts.max && patternBlocks.Y.from === patternBlocks.Y.to) {\n      patternBlocks.m.from = opts.min.getMonth() + 1;\n      patternBlocks.m.to = opts.max.getMonth() + 1;\n      if (patternBlocks.m.from === patternBlocks.m.to) {\n        patternBlocks.d.from = opts.min.getDate();\n        patternBlocks.d.to = opts.max.getDate();\n      }\n    }\n    Object.assign(patternBlocks, this.blocks, blocks);\n    super._update({\n      ...patternOpts,\n      mask: isString(mask) ? mask : pattern,\n      blocks: patternBlocks\n    });\n  }\n  doValidate(flags) {\n    const date = this.date;\n    return super.doValidate(flags) && (!this.isComplete || this.isDateExist(this.value) && date != null && (this.min == null || this.min <= date) && (this.max == null || date <= this.max));\n  }\n\n  /** Checks if date is exists */\n  isDateExist(str) {\n    return this.format(this.parse(str, this), this).indexOf(str) >= 0;\n  }\n\n  /** Parsed Date */\n  get date() {\n    return this.typedValue;\n  }\n  set date(date) {\n    this.typedValue = date;\n  }\n  get typedValue() {\n    return this.isComplete ? super.typedValue : null;\n  }\n  set typedValue(value) {\n    super.typedValue = value;\n  }\n  maskEquals(mask) {\n    return mask === Date || super.maskEquals(mask);\n  }\n  optionsIsChanged(opts) {\n    return super.optionsIsChanged(MaskedDate.extractPatternOptions(opts));\n  }\n}\nMaskedDate.GET_DEFAULT_BLOCKS = () => ({\n  d: {\n    mask: MaskedRange,\n    from: 1,\n    to: 31,\n    maxLength: 2\n  },\n  m: {\n    mask: MaskedRange,\n    from: 1,\n    to: 12,\n    maxLength: 2\n  },\n  Y: {\n    mask: MaskedRange,\n    from: 1900,\n    to: 9999\n  }\n});\nMaskedDate.DEFAULTS = {\n  ...MaskedPattern.DEFAULTS,\n  mask: Date,\n  pattern: DefaultPattern,\n  format: (date, masked) => {\n    if (!date) return '';\n    const day = String(date.getDate()).padStart(2, '0');\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const year = date.getFullYear();\n    return [day, month, year].join('.');\n  },\n  parse: (str, masked) => {\n    const [day, month, year] = str.split('.').map(Number);\n    return new Date(year, month - 1, day);\n  }\n};\nIMask.MaskedDate = MaskedDate;\n\nexport { MaskedDate as default };\n","import { DIRECTION, objectIncludes } from '../core/utils.js';\nimport ChangeDetails from '../core/change-details.js';\nimport createMask, { normalizeOpts } from './factory.js';\nimport Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/continuous-tail-details.js';\n\n/** Dynamic mask for choosing appropriate mask in run-time */\nclass MaskedDynamic extends Masked {\n  constructor(opts) {\n    super({\n      ...MaskedDynamic.DEFAULTS,\n      ...opts\n    });\n    this.currentMask = undefined;\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    super._update(opts);\n    if ('mask' in opts) {\n      this.exposeMask = undefined;\n      // mask could be totally dynamic with only `dispatch` option\n      this.compiledMasks = Array.isArray(opts.mask) ? opts.mask.map(m => {\n        const {\n          expose,\n          ...maskOpts\n        } = normalizeOpts(m);\n        const masked = createMask({\n          overwrite: this._overwrite,\n          eager: this._eager,\n          skipInvalid: this._skipInvalid,\n          ...maskOpts\n        });\n        if (expose) this.exposeMask = masked;\n        return masked;\n      }) : [];\n\n      // this.currentMask = this.doDispatch(''); // probably not needed but lets see\n    }\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const details = this._applyDispatch(ch, flags);\n    if (this.currentMask) {\n      details.aggregate(this.currentMask._appendChar(ch, this.currentMaskFlags(flags)));\n    }\n    return details;\n  }\n  _applyDispatch(appended, flags, tail) {\n    if (appended === void 0) {\n      appended = '';\n    }\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (tail === void 0) {\n      tail = '';\n    }\n    const prevValueBeforeTail = flags.tail && flags._beforeTailState != null ? flags._beforeTailState._value : this.value;\n    const inputValue = this.rawInputValue;\n    const insertValue = flags.tail && flags._beforeTailState != null ? flags._beforeTailState._rawInputValue : inputValue;\n    const tailValue = inputValue.slice(insertValue.length);\n    const prevMask = this.currentMask;\n    const details = new ChangeDetails();\n    const prevMaskState = prevMask == null ? void 0 : prevMask.state;\n\n    // clone flags to prevent overwriting `_beforeTailState`\n    this.currentMask = this.doDispatch(appended, {\n      ...flags\n    }, tail);\n\n    // restore state after dispatch\n    if (this.currentMask) {\n      if (this.currentMask !== prevMask) {\n        // if mask changed reapply input\n        this.currentMask.reset();\n        if (insertValue) {\n          this.currentMask.append(insertValue, {\n            raw: true\n          });\n          details.tailShift = this.currentMask.value.length - prevValueBeforeTail.length;\n        }\n        if (tailValue) {\n          details.tailShift += this.currentMask.append(tailValue, {\n            raw: true,\n            tail: true\n          }).tailShift;\n        }\n      } else if (prevMaskState) {\n        // Dispatch can do something bad with state, so\n        // restore prev mask state\n        this.currentMask.state = prevMaskState;\n      }\n    }\n    return details;\n  }\n  _appendPlaceholder() {\n    const details = this._applyDispatch();\n    if (this.currentMask) {\n      details.aggregate(this.currentMask._appendPlaceholder());\n    }\n    return details;\n  }\n  _appendEager() {\n    const details = this._applyDispatch();\n    if (this.currentMask) {\n      details.aggregate(this.currentMask._appendEager());\n    }\n    return details;\n  }\n  appendTail(tail) {\n    const details = new ChangeDetails();\n    if (tail) details.aggregate(this._applyDispatch('', {}, tail));\n    return details.aggregate(this.currentMask ? this.currentMask.appendTail(tail) : super.appendTail(tail));\n  }\n  currentMaskFlags(flags) {\n    var _flags$_beforeTailSta, _flags$_beforeTailSta2;\n    return {\n      ...flags,\n      _beforeTailState: ((_flags$_beforeTailSta = flags._beforeTailState) == null ? void 0 : _flags$_beforeTailSta.currentMaskRef) === this.currentMask && ((_flags$_beforeTailSta2 = flags._beforeTailState) == null ? void 0 : _flags$_beforeTailSta2.currentMask) || flags._beforeTailState\n    };\n  }\n  doDispatch(appended, flags, tail) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (tail === void 0) {\n      tail = '';\n    }\n    return this.dispatch(appended, this, flags, tail);\n  }\n  doValidate(flags) {\n    return super.doValidate(flags) && (!this.currentMask || this.currentMask.doValidate(this.currentMaskFlags(flags)));\n  }\n  doPrepare(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    let [s, details] = super.doPrepare(str, flags);\n    if (this.currentMask) {\n      let currentDetails;\n      [s, currentDetails] = super.doPrepare(s, this.currentMaskFlags(flags));\n      details = details.aggregate(currentDetails);\n    }\n    return [s, details];\n  }\n  doPrepareChar(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    let [s, details] = super.doPrepareChar(str, flags);\n    if (this.currentMask) {\n      let currentDetails;\n      [s, currentDetails] = super.doPrepareChar(s, this.currentMaskFlags(flags));\n      details = details.aggregate(currentDetails);\n    }\n    return [s, details];\n  }\n  reset() {\n    var _this$currentMask;\n    (_this$currentMask = this.currentMask) == null || _this$currentMask.reset();\n    this.compiledMasks.forEach(m => m.reset());\n  }\n  get value() {\n    return this.exposeMask ? this.exposeMask.value : this.currentMask ? this.currentMask.value : '';\n  }\n  set value(value) {\n    if (this.exposeMask) {\n      this.exposeMask.value = value;\n      this.currentMask = this.exposeMask;\n      this._applyDispatch();\n    } else super.value = value;\n  }\n  get unmaskedValue() {\n    return this.exposeMask ? this.exposeMask.unmaskedValue : this.currentMask ? this.currentMask.unmaskedValue : '';\n  }\n  set unmaskedValue(unmaskedValue) {\n    if (this.exposeMask) {\n      this.exposeMask.unmaskedValue = unmaskedValue;\n      this.currentMask = this.exposeMask;\n      this._applyDispatch();\n    } else super.unmaskedValue = unmaskedValue;\n  }\n  get typedValue() {\n    return this.exposeMask ? this.exposeMask.typedValue : this.currentMask ? this.currentMask.typedValue : '';\n  }\n  set typedValue(typedValue) {\n    if (this.exposeMask) {\n      this.exposeMask.typedValue = typedValue;\n      this.currentMask = this.exposeMask;\n      this._applyDispatch();\n      return;\n    }\n    let unmaskedValue = String(typedValue);\n\n    // double check it\n    if (this.currentMask) {\n      this.currentMask.typedValue = typedValue;\n      unmaskedValue = this.currentMask.unmaskedValue;\n    }\n    this.unmaskedValue = unmaskedValue;\n  }\n  get displayValue() {\n    return this.currentMask ? this.currentMask.displayValue : '';\n  }\n  get isComplete() {\n    var _this$currentMask2;\n    return Boolean((_this$currentMask2 = this.currentMask) == null ? void 0 : _this$currentMask2.isComplete);\n  }\n  get isFilled() {\n    var _this$currentMask3;\n    return Boolean((_this$currentMask3 = this.currentMask) == null ? void 0 : _this$currentMask3.isFilled);\n  }\n  remove(fromPos, toPos) {\n    const details = new ChangeDetails();\n    if (this.currentMask) {\n      details.aggregate(this.currentMask.remove(fromPos, toPos))\n      // update with dispatch\n      .aggregate(this._applyDispatch());\n    }\n    return details;\n  }\n  get state() {\n    var _this$currentMask4;\n    return {\n      ...super.state,\n      _rawInputValue: this.rawInputValue,\n      compiledMasks: this.compiledMasks.map(m => m.state),\n      currentMaskRef: this.currentMask,\n      currentMask: (_this$currentMask4 = this.currentMask) == null ? void 0 : _this$currentMask4.state\n    };\n  }\n  set state(state) {\n    const {\n      compiledMasks,\n      currentMaskRef,\n      currentMask,\n      ...maskedState\n    } = state;\n    if (compiledMasks) this.compiledMasks.forEach((m, mi) => m.state = compiledMasks[mi]);\n    if (currentMaskRef != null) {\n      this.currentMask = currentMaskRef;\n      this.currentMask.state = currentMask;\n    }\n    super.state = maskedState;\n  }\n  extractInput(fromPos, toPos, flags) {\n    return this.currentMask ? this.currentMask.extractInput(fromPos, toPos, flags) : '';\n  }\n  extractTail(fromPos, toPos) {\n    return this.currentMask ? this.currentMask.extractTail(fromPos, toPos) : super.extractTail(fromPos, toPos);\n  }\n  doCommit() {\n    if (this.currentMask) this.currentMask.doCommit();\n    super.doCommit();\n  }\n  nearestInputPos(cursorPos, direction) {\n    return this.currentMask ? this.currentMask.nearestInputPos(cursorPos, direction) : super.nearestInputPos(cursorPos, direction);\n  }\n  get overwrite() {\n    return this.currentMask ? this.currentMask.overwrite : this._overwrite;\n  }\n  set overwrite(overwrite) {\n    this._overwrite = overwrite;\n  }\n  get eager() {\n    return this.currentMask ? this.currentMask.eager : this._eager;\n  }\n  set eager(eager) {\n    this._eager = eager;\n  }\n  get skipInvalid() {\n    return this.currentMask ? this.currentMask.skipInvalid : this._skipInvalid;\n  }\n  set skipInvalid(skipInvalid) {\n    this._skipInvalid = skipInvalid;\n  }\n  get autofix() {\n    return this.currentMask ? this.currentMask.autofix : this._autofix;\n  }\n  set autofix(autofix) {\n    this._autofix = autofix;\n  }\n  maskEquals(mask) {\n    return Array.isArray(mask) ? this.compiledMasks.every((m, mi) => {\n      if (!mask[mi]) return;\n      const {\n        mask: oldMask,\n        ...restOpts\n      } = mask[mi];\n      return objectIncludes(m, restOpts) && m.maskEquals(oldMask);\n    }) : super.maskEquals(mask);\n  }\n  typedValueEquals(value) {\n    var _this$currentMask5;\n    return Boolean((_this$currentMask5 = this.currentMask) == null ? void 0 : _this$currentMask5.typedValueEquals(value));\n  }\n}\n/** Currently chosen mask */\n/** Currently chosen mask */\n/** Compliled {@link Masked} options */\n/** Chooses {@link Masked} depending on input value */\nMaskedDynamic.DEFAULTS = {\n  ...Masked.DEFAULTS,\n  dispatch: (appended, masked, flags, tail) => {\n    if (!masked.compiledMasks.length) return;\n    const inputValue = masked.rawInputValue;\n\n    // simulate input\n    const inputs = masked.compiledMasks.map((m, index) => {\n      const isCurrent = masked.currentMask === m;\n      const startInputPos = isCurrent ? m.displayValue.length : m.nearestInputPos(m.displayValue.length, DIRECTION.FORCE_LEFT);\n      if (m.rawInputValue !== inputValue) {\n        m.reset();\n        m.append(inputValue, {\n          raw: true\n        });\n      } else if (!isCurrent) {\n        m.remove(startInputPos);\n      }\n      m.append(appended, masked.currentMaskFlags(flags));\n      m.appendTail(tail);\n      return {\n        index,\n        weight: m.rawInputValue.length,\n        totalInputPositions: m.totalInputPositions(0, Math.max(startInputPos, m.nearestInputPos(m.displayValue.length, DIRECTION.FORCE_LEFT)))\n      };\n    });\n\n    // pop masks with longer values first\n    inputs.sort((i1, i2) => i2.weight - i1.weight || i2.totalInputPositions - i1.totalInputPositions);\n    return masked.compiledMasks[inputs[0].index];\n  }\n};\nIMask.MaskedDynamic = MaskedDynamic;\n\nexport { MaskedDynamic as default };\n","import MaskedPattern from './pattern.js';\nimport IMask from '../core/holder.js';\nimport ChangeDetails from '../core/change-details.js';\nimport { DIRECTION } from '../core/utils.js';\nimport ContinuousTailDetails from '../core/continuous-tail-details.js';\nimport './base.js';\nimport './factory.js';\nimport './pattern/chunk-tail-details.js';\nimport './pattern/cursor.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/input-definition.js';\nimport './regexp.js';\n\n/** Pattern which validates enum values */\nclass MaskedEnum extends MaskedPattern {\n  constructor(opts) {\n    super({\n      ...MaskedEnum.DEFAULTS,\n      ...opts\n    }); // mask will be created in _update\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const {\n      enum: enum_,\n      ...eopts\n    } = opts;\n    if (enum_) {\n      const lengths = enum_.map(e => e.length);\n      const requiredLength = Math.min(...lengths);\n      const optionalLength = Math.max(...lengths) - requiredLength;\n      eopts.mask = '*'.repeat(requiredLength);\n      if (optionalLength) eopts.mask += '[' + '*'.repeat(optionalLength) + ']';\n      this.enum = enum_;\n    }\n    super._update(eopts);\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const matchFrom = Math.min(this.nearestInputPos(0, DIRECTION.FORCE_RIGHT), this.value.length);\n    const matches = this.enum.filter(e => this.matchValue(e, this.unmaskedValue + ch, matchFrom));\n    if (matches.length) {\n      if (matches.length === 1) {\n        this._forEachBlocksInRange(0, this.value.length, (b, bi) => {\n          const mch = matches[0][bi];\n          if (bi >= this.value.length || mch === b.value) return;\n          b.reset();\n          b._appendChar(mch, flags);\n        });\n      }\n      const d = super._appendCharRaw(matches[0][this.value.length], flags);\n      if (matches.length === 1) {\n        matches[0].slice(this.unmaskedValue.length).split('').forEach(mch => d.aggregate(super._appendCharRaw(mch)));\n      }\n      return d;\n    }\n    return new ChangeDetails({\n      skip: !this.isComplete\n    });\n  }\n  extractTail(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    // just drop tail\n    return new ContinuousTailDetails('', fromPos);\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    if (fromPos === toPos) return new ChangeDetails();\n    const matchFrom = Math.min(super.nearestInputPos(0, DIRECTION.FORCE_RIGHT), this.value.length);\n    let pos;\n    for (pos = fromPos; pos >= 0; --pos) {\n      const matches = this.enum.filter(e => this.matchValue(e, this.value.slice(matchFrom, pos), matchFrom));\n      if (matches.length > 1) break;\n    }\n    const details = super.remove(pos, toPos);\n    details.tailShift += pos - fromPos;\n    return details;\n  }\n  get isComplete() {\n    return this.enum.indexOf(this.value) >= 0;\n  }\n}\n/** Match enum value */\nMaskedEnum.DEFAULTS = {\n  ...MaskedPattern.DEFAULTS,\n  matchValue: (estr, istr, matchFrom) => estr.indexOf(istr, matchFrom) === matchFrom\n};\nIMask.MaskedEnum = MaskedEnum;\n\nexport { MaskedEnum as default };\n","import Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/change-details.js';\nimport '../core/continuous-tail-details.js';\nimport '../core/utils.js';\n\n/** Masking by custom Function */\nclass MaskedFunction extends Masked {\n  /** */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    super._update({\n      ...opts,\n      validate: opts.mask\n    });\n  }\n}\nIMask.MaskedFunction = MaskedFunction;\n\nexport { MaskedFunction as default };\n","import { escapeRegExp, DIRECTION } from '../core/utils.js';\nimport ChangeDetails from '../core/change-details.js';\nimport Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/continuous-tail-details.js';\n\nvar _MaskedNumber;\n/** Number mask */\nclass MaskedNumber extends Masked {\n  /** Single char */\n\n  /** Single char */\n\n  /** Array of single chars */\n\n  /** */\n\n  /** */\n\n  /** Digits after point */\n\n  /** Flag to remove leading and trailing zeros in the end of editing */\n\n  /** Flag to pad trailing zeros after point in the end of editing */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** Format typed value to string */\n\n  /** Parse string to get typed value */\n\n  constructor(opts) {\n    super({\n      ...MaskedNumber.DEFAULTS,\n      ...opts\n    });\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    super._update(opts);\n    this._updateRegExps();\n  }\n  _updateRegExps() {\n    const start = '^' + (this.allowNegative ? '[+|\\\\-]?' : '');\n    const mid = '\\\\d*';\n    const end = (this.scale ? \"(\" + escapeRegExp(this.radix) + \"\\\\d{0,\" + this.scale + \"})?\" : '') + '$';\n    this._numberRegExp = new RegExp(start + mid + end);\n    this._mapToRadixRegExp = new RegExp(\"[\" + this.mapToRadix.map(escapeRegExp).join('') + \"]\", 'g');\n    this._thousandsSeparatorRegExp = new RegExp(escapeRegExp(this.thousandsSeparator), 'g');\n  }\n  _removeThousandsSeparators(value) {\n    return value.replace(this._thousandsSeparatorRegExp, '');\n  }\n  _insertThousandsSeparators(value) {\n    // https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript\n    const parts = value.split(this.radix);\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, this.thousandsSeparator);\n    return parts.join(this.radix);\n  }\n  doPrepareChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const [prepCh, details] = super.doPrepareChar(this._removeThousandsSeparators(this.scale && this.mapToRadix.length && (\n    /*\n      radix should be mapped when\n      1) input is done from keyboard = flags.input && flags.raw\n      2) unmasked value is set = !flags.input && !flags.raw\n      and should not be mapped when\n      1) value is set = flags.input && !flags.raw\n      2) raw value is set = !flags.input && flags.raw\n    */\n    flags.input && flags.raw || !flags.input && !flags.raw) ? ch.replace(this._mapToRadixRegExp, this.radix) : ch), flags);\n    if (ch && !prepCh) details.skip = true;\n    if (prepCh && !this.allowPositive && !this.value && prepCh !== '-') details.aggregate(this._appendChar('-'));\n    return [prepCh, details];\n  }\n  _separatorsCount(to, extendOnSeparators) {\n    if (extendOnSeparators === void 0) {\n      extendOnSeparators = false;\n    }\n    let count = 0;\n    for (let pos = 0; pos < to; ++pos) {\n      if (this._value.indexOf(this.thousandsSeparator, pos) === pos) {\n        ++count;\n        if (extendOnSeparators) to += this.thousandsSeparator.length;\n      }\n    }\n    return count;\n  }\n  _separatorsCountFromSlice(slice) {\n    if (slice === void 0) {\n      slice = this._value;\n    }\n    return this._separatorsCount(this._removeThousandsSeparators(slice).length, true);\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    [fromPos, toPos] = this._adjustRangeWithSeparators(fromPos, toPos);\n    return this._removeThousandsSeparators(super.extractInput(fromPos, toPos, flags));\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const prevBeforeTailValue = flags.tail && flags._beforeTailState ? flags._beforeTailState._value : this._value;\n    const prevBeforeTailSeparatorsCount = this._separatorsCountFromSlice(prevBeforeTailValue);\n    this._value = this._removeThousandsSeparators(this.value);\n    const oldValue = this._value;\n    this._value += ch;\n    const num = this.number;\n    let accepted = !isNaN(num);\n    let skip = false;\n    if (accepted) {\n      let fixedNum;\n      if (this.min != null && this.min < 0 && this.number < this.min) fixedNum = this.min;\n      if (this.max != null && this.max > 0 && this.number > this.max) fixedNum = this.max;\n      if (fixedNum != null) {\n        if (this.autofix) {\n          this._value = this.format(fixedNum, this).replace(MaskedNumber.UNMASKED_RADIX, this.radix);\n          skip || (skip = oldValue === this._value && !flags.tail); // if not changed on tail it's still ok to proceed\n        } else {\n          accepted = false;\n        }\n      }\n      accepted && (accepted = Boolean(this._value.match(this._numberRegExp)));\n    }\n    let appendDetails;\n    if (!accepted) {\n      this._value = oldValue;\n      appendDetails = new ChangeDetails();\n    } else {\n      appendDetails = new ChangeDetails({\n        inserted: this._value.slice(oldValue.length),\n        rawInserted: skip ? '' : ch,\n        skip\n      });\n    }\n    this._value = this._insertThousandsSeparators(this._value);\n    const beforeTailValue = flags.tail && flags._beforeTailState ? flags._beforeTailState._value : this._value;\n    const beforeTailSeparatorsCount = this._separatorsCountFromSlice(beforeTailValue);\n    appendDetails.tailShift += (beforeTailSeparatorsCount - prevBeforeTailSeparatorsCount) * this.thousandsSeparator.length;\n    return appendDetails;\n  }\n  _findSeparatorAround(pos) {\n    if (this.thousandsSeparator) {\n      const searchFrom = pos - this.thousandsSeparator.length + 1;\n      const separatorPos = this.value.indexOf(this.thousandsSeparator, searchFrom);\n      if (separatorPos <= pos) return separatorPos;\n    }\n    return -1;\n  }\n  _adjustRangeWithSeparators(from, to) {\n    const separatorAroundFromPos = this._findSeparatorAround(from);\n    if (separatorAroundFromPos >= 0) from = separatorAroundFromPos;\n    const separatorAroundToPos = this._findSeparatorAround(to);\n    if (separatorAroundToPos >= 0) to = separatorAroundToPos + this.thousandsSeparator.length;\n    return [from, to];\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    [fromPos, toPos] = this._adjustRangeWithSeparators(fromPos, toPos);\n    const valueBeforePos = this.value.slice(0, fromPos);\n    const valueAfterPos = this.value.slice(toPos);\n    const prevBeforeTailSeparatorsCount = this._separatorsCount(valueBeforePos.length);\n    this._value = this._insertThousandsSeparators(this._removeThousandsSeparators(valueBeforePos + valueAfterPos));\n    const beforeTailSeparatorsCount = this._separatorsCountFromSlice(valueBeforePos);\n    return new ChangeDetails({\n      tailShift: (beforeTailSeparatorsCount - prevBeforeTailSeparatorsCount) * this.thousandsSeparator.length\n    });\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (!this.thousandsSeparator) return cursorPos;\n    switch (direction) {\n      case DIRECTION.NONE:\n      case DIRECTION.LEFT:\n      case DIRECTION.FORCE_LEFT:\n        {\n          const separatorAtLeftPos = this._findSeparatorAround(cursorPos - 1);\n          if (separatorAtLeftPos >= 0) {\n            const separatorAtLeftEndPos = separatorAtLeftPos + this.thousandsSeparator.length;\n            if (cursorPos < separatorAtLeftEndPos || this.value.length <= separatorAtLeftEndPos || direction === DIRECTION.FORCE_LEFT) {\n              return separatorAtLeftPos;\n            }\n          }\n          break;\n        }\n      case DIRECTION.RIGHT:\n      case DIRECTION.FORCE_RIGHT:\n        {\n          const separatorAtRightPos = this._findSeparatorAround(cursorPos);\n          if (separatorAtRightPos >= 0) {\n            return separatorAtRightPos + this.thousandsSeparator.length;\n          }\n        }\n    }\n    return cursorPos;\n  }\n  doCommit() {\n    if (this.value) {\n      const number = this.number;\n      let validnum = number;\n\n      // check bounds\n      if (this.min != null) validnum = Math.max(validnum, this.min);\n      if (this.max != null) validnum = Math.min(validnum, this.max);\n      if (validnum !== number) this.unmaskedValue = this.format(validnum, this);\n      let formatted = this.value;\n      if (this.normalizeZeros) formatted = this._normalizeZeros(formatted);\n      if (this.padFractionalZeros && this.scale > 0) formatted = this._padFractionalZeros(formatted);\n      this._value = formatted;\n    }\n    super.doCommit();\n  }\n  _normalizeZeros(value) {\n    const parts = this._removeThousandsSeparators(value).split(this.radix);\n\n    // remove leading zeros\n    parts[0] = parts[0].replace(/^(\\D*)(0*)(\\d*)/, (match, sign, zeros, num) => sign + num);\n    // add leading zero\n    if (value.length && !/\\d$/.test(parts[0])) parts[0] = parts[0] + '0';\n    if (parts.length > 1) {\n      parts[1] = parts[1].replace(/0*$/, ''); // remove trailing zeros\n      if (!parts[1].length) parts.length = 1; // remove fractional\n    }\n    return this._insertThousandsSeparators(parts.join(this.radix));\n  }\n  _padFractionalZeros(value) {\n    if (!value) return value;\n    const parts = value.split(this.radix);\n    if (parts.length < 2) parts.push('');\n    parts[1] = parts[1].padEnd(this.scale, '0');\n    return parts.join(this.radix);\n  }\n  doSkipInvalid(ch, flags, checkTail) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const dropFractional = this.scale === 0 && ch !== this.thousandsSeparator && (ch === this.radix || ch === MaskedNumber.UNMASKED_RADIX || this.mapToRadix.includes(ch));\n    return super.doSkipInvalid(ch, flags, checkTail) && !dropFractional;\n  }\n  get unmaskedValue() {\n    return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix, MaskedNumber.UNMASKED_RADIX);\n  }\n  set unmaskedValue(unmaskedValue) {\n    super.unmaskedValue = unmaskedValue;\n  }\n  get typedValue() {\n    return this.parse(this.unmaskedValue, this);\n  }\n  set typedValue(n) {\n    this.rawInputValue = this.format(n, this).replace(MaskedNumber.UNMASKED_RADIX, this.radix);\n  }\n\n  /** Parsed Number */\n  get number() {\n    return this.typedValue;\n  }\n  set number(number) {\n    this.typedValue = number;\n  }\n  get allowNegative() {\n    return this.min != null && this.min < 0 || this.max != null && this.max < 0;\n  }\n  get allowPositive() {\n    return this.min != null && this.min > 0 || this.max != null && this.max > 0;\n  }\n  typedValueEquals(value) {\n    // handle  0 -> '' case (typed = 0 even if value = '')\n    // for details see https://github.com/uNmAnNeR/imaskjs/issues/134\n    return (super.typedValueEquals(value) || MaskedNumber.EMPTY_VALUES.includes(value) && MaskedNumber.EMPTY_VALUES.includes(this.typedValue)) && !(value === 0 && this.value === '');\n  }\n}\n_MaskedNumber = MaskedNumber;\nMaskedNumber.UNMASKED_RADIX = '.';\nMaskedNumber.EMPTY_VALUES = [...Masked.EMPTY_VALUES, 0];\nMaskedNumber.DEFAULTS = {\n  ...Masked.DEFAULTS,\n  mask: Number,\n  radix: ',',\n  thousandsSeparator: '',\n  mapToRadix: [_MaskedNumber.UNMASKED_RADIX],\n  min: Number.MIN_SAFE_INTEGER,\n  max: Number.MAX_SAFE_INTEGER,\n  scale: 2,\n  normalizeZeros: true,\n  padFractionalZeros: false,\n  parse: Number,\n  format: n => n.toLocaleString('en-US', {\n    useGrouping: false,\n    maximumFractionDigits: 20\n  })\n};\nIMask.MaskedNumber = MaskedNumber;\n\nexport { MaskedNumber as default };\n","import createMask from './factory.js';\nimport IMask from '../core/holder.js';\nimport '../core/utils.js';\n\n/** Mask pipe source and destination types */\nconst PIPE_TYPE = {\n  MASKED: 'value',\n  UNMASKED: 'unmaskedValue',\n  TYPED: 'typedValue'\n};\n/** Creates new pipe function depending on mask type, source and destination options */\nfunction createPipe(arg, from, to) {\n  if (from === void 0) {\n    from = PIPE_TYPE.MASKED;\n  }\n  if (to === void 0) {\n    to = PIPE_TYPE.MASKED;\n  }\n  const masked = createMask(arg);\n  return value => masked.runIsolated(m => {\n    m[from] = value;\n    return m[to];\n  });\n}\n\n/** Pipes value through mask depending on mask type, source and destination options */\nfunction pipe(value, mask, from, to) {\n  return createPipe(mask, from, to)(value);\n}\nIMask.PIPE_TYPE = PIPE_TYPE;\nIMask.createPipe = createPipe;\nIMask.pipe = pipe;\n\nexport { PIPE_TYPE, createPipe, pipe };\n","import ChangeDetails from '../core/change-details.js';\nimport IMask from '../core/holder.js';\nimport createMask, { normalizeOpts } from './factory.js';\nimport MaskedPattern from './pattern.js';\nimport '../core/utils.js';\nimport './base.js';\nimport '../core/continuous-tail-details.js';\nimport './pattern/chunk-tail-details.js';\nimport './pattern/cursor.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/input-definition.js';\nimport './regexp.js';\n\n/** Pattern mask */\nclass RepeatBlock extends MaskedPattern {\n  get repeatFrom() {\n    var _ref;\n    return (_ref = Array.isArray(this.repeat) ? this.repeat[0] : this.repeat === Infinity ? 0 : this.repeat) != null ? _ref : 0;\n  }\n  get repeatTo() {\n    var _ref2;\n    return (_ref2 = Array.isArray(this.repeat) ? this.repeat[1] : this.repeat) != null ? _ref2 : Infinity;\n  }\n  constructor(opts) {\n    super(opts);\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    var _ref3, _ref4, _this$_blocks;\n    const {\n      repeat,\n      ...blockOpts\n    } = normalizeOpts(opts); // TODO type\n    this._blockOpts = Object.assign({}, this._blockOpts, blockOpts);\n    const block = createMask(this._blockOpts);\n    this.repeat = (_ref3 = (_ref4 = repeat != null ? repeat : block.repeat) != null ? _ref4 : this.repeat) != null ? _ref3 : Infinity; // TODO type\n\n    super._update({\n      mask: 'm'.repeat(Math.max(this.repeatTo === Infinity && ((_this$_blocks = this._blocks) == null ? void 0 : _this$_blocks.length) || 0, this.repeatFrom)),\n      blocks: {\n        m: block\n      },\n      eager: block.eager,\n      overwrite: block.overwrite,\n      skipInvalid: block.skipInvalid,\n      lazy: block.lazy,\n      placeholderChar: block.placeholderChar,\n      displayChar: block.displayChar\n    });\n  }\n  _allocateBlock(bi) {\n    if (bi < this._blocks.length) return this._blocks[bi];\n    if (this.repeatTo === Infinity || this._blocks.length < this.repeatTo) {\n      this._blocks.push(createMask(this._blockOpts));\n      this.mask += 'm';\n      return this._blocks[this._blocks.length - 1];\n    }\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const details = new ChangeDetails();\n    for (let bi = (_this$_mapPosToBlock$ = (_this$_mapPosToBlock = this._mapPosToBlock(this.displayValue.length)) == null ? void 0 : _this$_mapPosToBlock.index) != null ? _this$_mapPosToBlock$ : Math.max(this._blocks.length - 1, 0), block, allocated;\n    // try to get a block or\n    // try to allocate a new block if not allocated already\n    block = (_this$_blocks$bi = this._blocks[bi]) != null ? _this$_blocks$bi : allocated = !allocated && this._allocateBlock(bi); ++bi) {\n      var _this$_mapPosToBlock$, _this$_mapPosToBlock, _this$_blocks$bi, _flags$_beforeTailSta;\n      const blockDetails = block._appendChar(ch, {\n        ...flags,\n        _beforeTailState: (_flags$_beforeTailSta = flags._beforeTailState) == null || (_flags$_beforeTailSta = _flags$_beforeTailSta._blocks) == null ? void 0 : _flags$_beforeTailSta[bi]\n      });\n      if (blockDetails.skip && allocated) {\n        // remove the last allocated block and break\n        this._blocks.pop();\n        this.mask = this.mask.slice(1);\n        break;\n      }\n      details.aggregate(blockDetails);\n      if (blockDetails.consumed) break; // go next char\n    }\n    return details;\n  }\n  _trimEmptyTail(fromPos, toPos) {\n    var _this$_mapPosToBlock2, _this$_mapPosToBlock3;\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    const firstBlockIndex = Math.max(((_this$_mapPosToBlock2 = this._mapPosToBlock(fromPos)) == null ? void 0 : _this$_mapPosToBlock2.index) || 0, this.repeatFrom, 0);\n    let lastBlockIndex;\n    if (toPos != null) lastBlockIndex = (_this$_mapPosToBlock3 = this._mapPosToBlock(toPos)) == null ? void 0 : _this$_mapPosToBlock3.index;\n    if (lastBlockIndex == null) lastBlockIndex = this._blocks.length - 1;\n    let removeCount = 0;\n    for (let blockIndex = lastBlockIndex; firstBlockIndex <= blockIndex; --blockIndex, ++removeCount) {\n      if (this._blocks[blockIndex].unmaskedValue) break;\n    }\n    if (removeCount) {\n      this._blocks.splice(lastBlockIndex - removeCount + 1, removeCount);\n      this.mask = this.mask.slice(removeCount);\n    }\n  }\n  reset() {\n    super.reset();\n    this._trimEmptyTail();\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    const removeDetails = super.remove(fromPos, toPos);\n    this._trimEmptyTail(fromPos, toPos);\n    return removeDetails;\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos == null && this.repeatTo === Infinity) return Infinity;\n    return super.totalInputPositions(fromPos, toPos);\n  }\n  get state() {\n    return super.state;\n  }\n  set state(state) {\n    this._blocks.length = state._blocks.length;\n    this.mask = this.mask.slice(0, this._blocks.length);\n    super.state = state;\n  }\n}\nIMask.RepeatBlock = RepeatBlock;\n\nexport { RepeatBlock as default };\n","export { default as InputMask } from './controls/input.js';\nimport IMask from './core/holder.js';\nexport { default as HTMLContenteditableMaskElement } from './controls/html-contenteditable-mask-element.js';\nexport { default as HTMLInputMaskElement } from './controls/html-input-mask-element.js';\nexport { default as HTMLMaskElement } from './controls/html-mask-element.js';\nexport { default as MaskElement } from './controls/mask-element.js';\nexport { default as ChangeDetails } from './core/change-details.js';\nexport { DIRECTION, forceDirection } from './core/utils.js';\nexport { default as Masked } from './masked/base.js';\nexport { default as MaskedDate } from './masked/date.js';\nexport { default as MaskedDynamic } from './masked/dynamic.js';\nexport { default as MaskedEnum } from './masked/enum.js';\nexport { default as createMask, normalizeOpts } from './masked/factory.js';\nexport { default as MaskedFunction } from './masked/function.js';\nexport { default as MaskedNumber } from './masked/number.js';\nexport { default as MaskedPattern } from './masked/pattern.js';\nexport { default as ChunksTailDetails } from './masked/pattern/chunk-tail-details.js';\nexport { default as PatternFixedDefinition } from './masked/pattern/fixed-definition.js';\nexport { default as PatternInputDefinition } from './masked/pattern/input-definition.js';\nexport { PIPE_TYPE, createPipe, pipe } from './masked/pipe.js';\nexport { default as MaskedRange } from './masked/range.js';\nexport { default as MaskedRegExp } from './masked/regexp.js';\nexport { default as RepeatBlock } from './masked/repeat.js';\nimport './core/action-details.js';\nimport './controls/input-history.js';\nimport './core/continuous-tail-details.js';\nimport './masked/pattern/cursor.js';\n\ntry {\n  globalThis.IMask = IMask;\n} catch {}\n\nexport { IMask as default };\n","/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?\nSymbol.for(\"react.suspense_list\"):60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.block\"):60121,w=b?Symbol.for(\"react.fundamental\"):60117,x=b?Symbol.for(\"react.responder\"):60118,y=b?Symbol.for(\"react.scope\"):60119;\nfunction z(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;\nexports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};\nexports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z;\n","/** @license React v16.13.1\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar hasSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nvar REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\nvar REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\nvar REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\nvar REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\nvar REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n// (unstable) APIs that have been removed. Can we remove the symbols?\n\nvar REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\nvar REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\nvar REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nvar REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\nvar REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nvar REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\nvar REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\nvar REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\nvar REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\nvar REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\nfunction isValidElementType(type) {\n  return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n}\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n} // AsyncMode is deprecated along with isAsyncMode\n\nvar AsyncMode = REACT_ASYNC_MODE_TYPE;\nvar ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n      console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n    }\n  }\n\n  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n}\nfunction isConcurrentMode(object) {\n  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.AsyncMode = AsyncMode;\nexports.ConcurrentMode = ConcurrentMode;\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\nexports.isValidElementType = isValidElementType;\nexports.typeOf = typeOf;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","module.exports = Function.call.bind(Object.prototype.hasOwnProperty);\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n  var loggedTypeFailures = {};\n  var has = require('./lib/has');\n\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) { /**/ }\n  };\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error(\n              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +\n              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' +\n              'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.'\n            );\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        if (error && !(error instanceof Error)) {\n          printWarning(\n            (componentName || 'React class') + ': type specification of ' +\n            location + ' `' + typeSpecName + '` is invalid; the type checker ' +\n            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +\n            'You may have forgotten to pass an argument to the type checker ' +\n            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +\n            'shape all require an argument).'\n          );\n        }\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          printWarning(\n            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')\n          );\n        }\n      }\n    }\n  }\n}\n\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\ncheckPropTypes.resetWarningCache = function() {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n}\n\nmodule.exports = checkPropTypes;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactIs = require('react-is');\nvar assign = require('object-assign');\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\nvar has = require('./lib/has');\nvar checkPropTypes = require('./checkPropTypes');\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bigint: createPrimitiveTypeChecker('bigint'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker,\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message, data) {\n    this.message = message;\n    this.data = data && typeof data === 'object' ? data: {};\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error(\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            printWarning(\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `' + propFullName + '` prop on `' + componentName + '`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError(\n          'Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'),\n          {expectedType: expectedType}\n        );\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!ReactIs.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning(\n            'Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' +\n            'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).'\n          );\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n        if (type === 'symbol') {\n          return String(value);\n        }\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        printWarning(\n          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'\n        );\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var expectedTypes = [];\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        var checkerResult = checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret);\n        if (checkerResult == null) {\n          return null;\n        }\n        if (checkerResult.data && has(checkerResult.data, 'expectedType')) {\n          expectedTypes.push(checkerResult.data.expectedType);\n        }\n      }\n      var expectedTypesMessage = (expectedTypes.length > 0) ? ', expected one of type [' + expectedTypes.join(', ') + ']': '';\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`' + expectedTypesMessage + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function invalidValidatorError(componentName, location, propFullName, key, type) {\n    return new PropTypeError(\n      (componentName || 'React class') + ': ' + location + ' type `' + propFullName + '.' + key + '` is invalid; ' +\n      'it must be a function, usually from the `prop-types` package, but received `' + type + '`.'\n    );\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      // We need to check all keys in case some are required but missing from props.\n      var allKeys = assign({}, props[propName], shapeTypes);\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n        if (has(shapeTypes, key) && typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n        if (!checker) {\n          return new PropTypeError(\n            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n            '\\nValid keys: ' + JSON.stringify(Object.keys(shapeTypes), null, '  ')\n          );\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // falsy value can't be a Symbol\n    if (!propValue) {\n      return false;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport IMask from 'imask/esm/imask';\n\nconst MASK_PROPS = {\n  // common\n  mask: PropTypes.oneOfType([PropTypes.array, PropTypes.func, PropTypes.string, PropTypes.instanceOf(RegExp), PropTypes.oneOf([Date, Number, IMask.Masked]), PropTypes.instanceOf(IMask.Masked)]),\n  value: PropTypes.any,\n  unmask: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['typed'])]),\n  prepare: PropTypes.func,\n  prepareChar: PropTypes.func,\n  validate: PropTypes.func,\n  commit: PropTypes.func,\n  overwrite: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['shift'])]),\n  eager: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['append', 'remove'])]),\n  skipInvalid: PropTypes.bool,\n  // events\n  onAccept: PropTypes.func,\n  onComplete: PropTypes.func,\n  // pattern\n  placeholderChar: PropTypes.string,\n  displayChar: PropTypes.string,\n  lazy: PropTypes.bool,\n  definitions: PropTypes.object,\n  blocks: PropTypes.object,\n  // enum\n  enum: PropTypes.arrayOf(PropTypes.string),\n  // range\n  maxLength: PropTypes.number,\n  from: PropTypes.number,\n  to: PropTypes.number,\n  // date\n  pattern: PropTypes.string,\n  format: PropTypes.func,\n  parse: PropTypes.func,\n  autofix: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['pad'])]),\n  // number\n  radix: PropTypes.string,\n  thousandsSeparator: PropTypes.string,\n  mapToRadix: PropTypes.arrayOf(PropTypes.string),\n  scale: PropTypes.number,\n  normalizeZeros: PropTypes.bool,\n  padFractionalZeros: PropTypes.bool,\n  min: PropTypes.oneOfType([PropTypes.number, PropTypes.instanceOf(Date)]),\n  max: PropTypes.oneOfType([PropTypes.number, PropTypes.instanceOf(Date)]),\n  // dynamic\n  dispatch: PropTypes.func,\n  // ref\n  inputRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: PropTypes.object\n  })])\n};\nconst MASK_PROPS_NAMES = Object.keys(MASK_PROPS).filter(p => p !== 'value');\nconst NON_MASK_OPTIONS_NAMES = ['value', 'unmask', 'onAccept', 'onComplete', 'inputRef'];\nconst MASK_OPTIONS_NAMES = MASK_PROPS_NAMES.filter(pName => NON_MASK_OPTIONS_NAMES.indexOf(pName) < 0);\nfunction IMaskMixin(ComposedComponent) {\n  var _Class;\n  const MaskedComponent = (_Class = class MaskedComponent extends React.Component {\n    constructor(props) {\n      super(props);\n      this._inputRef = this._inputRef.bind(this);\n    }\n    componentDidMount() {\n      if (!this.props.mask) return;\n      this.initMask();\n    }\n    componentDidUpdate() {\n      const props = this.props;\n      const maskOptions = this._extractMaskOptionsFromProps(props);\n      if (maskOptions.mask) {\n        if (this.maskRef) {\n          this.maskRef.updateOptions(maskOptions); // TODO fix\n          if ('value' in props && props.value !== undefined) this.maskValue = props.value;\n        } else {\n          this.initMask(maskOptions);\n        }\n      } else {\n        this.destroyMask();\n        if ('value' in props && props.value !== undefined) {\n          var _this$element;\n          if ((_this$element = this.element) != null && _this$element.isContentEditable && this.element.tagName !== 'INPUT' && this.element.tagName !== 'TEXTAREA') this.element.textContent = props.value;else this.element.value = props.value;\n        }\n      }\n    }\n    componentWillUnmount() {\n      this.destroyMask();\n    }\n    _inputRef(el) {\n      this.element = el;\n      if (this.props.inputRef) {\n        if (Object.prototype.hasOwnProperty.call(this.props.inputRef, 'current')) this.props.inputRef.current = el;else this.props.inputRef(el);\n      }\n    }\n    initMask(maskOptions) {\n      if (maskOptions === void 0) {\n        maskOptions = this._extractMaskOptionsFromProps(this.props);\n      }\n      this.maskRef = IMask(this.element, maskOptions).on('accept', this._onAccept.bind(this)).on('complete', this._onComplete.bind(this));\n      if ('value' in this.props && this.props.value !== undefined) this.maskValue = this.props.value;\n    }\n    destroyMask() {\n      if (this.maskRef) {\n        this.maskRef.destroy();\n        delete this.maskRef;\n      }\n    }\n    _extractMaskOptionsFromProps(props) {\n      const {\n        ...cloneProps\n      } = props;\n\n      // keep only mask options\n      Object.keys(cloneProps).filter(prop => MASK_OPTIONS_NAMES.indexOf(prop) < 0).forEach(nonMaskProp => {\n        delete cloneProps[nonMaskProp];\n      });\n      return cloneProps;\n    }\n    _extractNonMaskProps(props) {\n      const {\n        ...cloneProps\n      } = props;\n      MASK_PROPS_NAMES.forEach(maskProp => {\n        if (maskProp !== 'maxLength') delete cloneProps[maskProp];\n      });\n      if (!('defaultValue' in cloneProps)) cloneProps.defaultValue = props.mask ? '' : cloneProps.value;\n      delete cloneProps.value;\n      return cloneProps;\n    }\n    get maskValue() {\n      if (!this.maskRef) return '';\n      if (this.props.unmask === 'typed') return this.maskRef.typedValue;\n      if (this.props.unmask) return this.maskRef.unmaskedValue;\n      return this.maskRef.value;\n    }\n    set maskValue(value) {\n      if (!this.maskRef) return;\n      value = value == null && this.props.unmask !== 'typed' ? '' : value;\n      if (this.props.unmask === 'typed') this.maskRef.typedValue = value;else if (this.props.unmask) this.maskRef.unmaskedValue = value;else this.maskRef.value = value;\n    }\n    _onAccept(e) {\n      if (this.props.onAccept && this.maskRef) this.props.onAccept(this.maskValue, this.maskRef, e);\n    }\n    _onComplete(e) {\n      if (this.props.onComplete && this.maskRef) this.props.onComplete(this.maskValue, this.maskRef, e);\n    }\n    render() {\n      return React.createElement(ComposedComponent, {\n        ...this._extractNonMaskProps(this.props),\n        inputRef: this._inputRef\n      });\n    }\n  }, _Class.displayName = void 0, _Class.propTypes = void 0, _Class);\n  const nestedComponentName = ComposedComponent.displayName || ComposedComponent.name || 'Component';\n  MaskedComponent.displayName = \"IMask(\" + nestedComponentName + \")\";\n  MaskedComponent.propTypes = MASK_PROPS;\n  return React.forwardRef((props, ref) => React.createElement(MaskedComponent, {\n    ...props,\n    ref\n  }));\n}\n\nexport { IMaskMixin as default };\n","import React from 'react';\nimport IMaskMixin from './mixin.js';\nimport 'prop-types';\nimport 'imask/esm/imask';\n\nconst IMaskInputClass = IMaskMixin(_ref => {\n  let {\n    inputRef,\n    ...props\n  } = _ref;\n  return React.createElement('input', {\n    ...props,\n    ref: inputRef\n  });\n});\nconst IMaskInputFn = (props, ref) => React.createElement(IMaskInputClass, {\n  ...props,\n  ref\n}) // TODO fix no idea\n;\nconst IMaskInput = React.forwardRef(IMaskInputFn);\n\nexport { IMaskInput as default };\n","import { Input } from \"../Input\";\nimport { IMaskMixin } from \"react-imask\";\n\nexport const InputMask = IMaskMixin(({ inputRef, ...props }) => {\n    return <Input {...props} ref={inputRef as React.Ref<HTMLInputElement>} />;\n});\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEhSURBVHgBrVK7cYNAFHzHuAEKgFEHtjuwK7BSaIHAZJDZyiAySkidQSp34IBc7sCiAkQDnPZuDs0TnDQE2pmd+71d9h0naIKu614wvIFrcGW2/ww3ruseeL2YiL8wxHQbhTE6XhhAvMfwRMug0rwqE4d9eamYTO2HmjgQr4jFruuaoiiaKfI8p6qq+Fas7ssZnUa0basLuYkSZ1lGTdNMfde6d1ByJkkicSjDMJRpmup5EARyWgf+K4POcnA2uSHWdOgKhBDW+Qy2Fnhs3o4lwV4ZFNfEtjvhtX3ffz/gYAe+j4k8zyOIqSzLc0qY6tH3/Yv0wzBshGmj4CYLscVLjO/zlBWweFauC8TbUawWs/9jnvYn+MgSHcAfcAfhL68/AdPnFIscUh0eAAAAAElFTkSuQmCC\"","import { ComponentProps, FC } from \"react\";\nimport closeIcon from \"../../../assets/close.png\";\n\ninterface Props extends ComponentProps<\"form\"> {\n    title: string;\n    onClose: () => void;\n}\n\nexport const FormContainer: FC<Props> = ({\n    title,\n    onClose,\n    className,\n    children,\n    ...props\n}) => {\n    return (\n        <form\n            className={`w-full sm:w-[28rem] bg-white rounded-xl pb-6 px-4 sm:py-6 flex flex-col gap-3 relative ${className}`}\n            {...props}\n        >\n            <button\n                onClick={onClose}\n                type='button'\n                className='absolute right-4'\n            >\n                <img src={closeIcon} />\n            </button>\n            <div className='text-2xl text-center w-1/2 self-center'>\n                <h2>{title}</h2>\n            </div>\n            <div className='min-h-px bg-line' />\n            {children}\n        </form>\n    );\n};\n","import { ComponentProps, FC } from \"react\";\nimport { GREEN_COLOR } from \"../../constants\";\n\ninterface Props extends ComponentProps<\"button\"> {\n    bgColor?: string | null;\n}\n\nexport const Button: FC<Props> = ({\n    bgColor = GREEN_COLOR,\n    children,\n    className,\n    ...props\n}) => {\n    return (\n        <button\n            className={`rounded-xl py-3 px-4 text-white bg-[${bgColor}] disabled:bg-[#BFBFBF] disabled:text-opacity-50 outline-none ${className}`}\n            {...props}\n        >\n            получить обратную связь\n        </button>\n    );\n};\n","import { FC, useCallback, useState } from \"react\";\nimport { InputMask } from \"../../shared/components/InputMask\";\nimport { FormContainer } from \"../../shared/components/FormContainer\";\nimport { Button } from \"../../shared/components/Button\";\nimport { FeedBackProps, Stages } from \"../../shared/types\";\nimport { MASK_PLACEHOLDER } from \"../../shared/constants\";\n\ninterface Props extends FeedBackProps {\n    item: Stages;\n}\n\nconst BUTTON_TEXT = \"получить обратную связь\";\n\nexport const FinalForm: FC<Props> = ({ onClose, item }) => {\n    const [phone, setPhone] = useState(\"\");\n\n    const handleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n        setPhone(e.target.value);\n    };\n\n    const onSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n        console.log(phone);\n    };\n\n    const validate = useCallback(\n        (phone: string) => {\n            if (!phone.length) return true;\n            if (phone.length < 18) return true;\n            return false;\n        },\n        [phone],\n    );\n\n    return (\n        <FormContainer\n            onSubmit={onSubmit}\n            onClose={onClose}\n            title={item.title}\n        >\n            {item.text && <p className='text-xs'>{item.text}</p>}\n            <InputMask\n                mask={\"+7 (000) 000-00-00\"}\n                placeholder={item.placeholder ?? MASK_PLACEHOLDER}\n                onChange={handleChange}\n                value={phone}\n            />\n            <Button\n                type='submit'\n                disabled={validate(phone)}\n            >\n                {item.text ?? BUTTON_TEXT}\n            </Button>\n        </FormContainer>\n    );\n};\n","import { useContext } from \"react\";\nimport { FeedBackContext, IFeedBackContext } from \"../../context/FeedBackContext\";\n\nexport const useFeedback = (): IFeedBackContext => {\n    const context = useContext(FeedBackContext);\n    if (!context) {\n        throw new Error(\"error\");\n    }\n    return context;\n};\n","import { FC } from \"react\";\nimport styles from \"./styles.module.scss\";\n\ninterface Props {\n    item: any;\n    onClick: (value: number) => void;\n}\n\nexport const RateItem: FC<Props> = ({ item, onClick }) => {\n    return (\n        <div key={item.id} className={styles.item}>\n            <button\n                className={styles.button}\n                onClick={() => onClick(item.value)}\n            >\n                <img\n                    src={item.image}\n                    alt={item.text}\n                    className={styles.image}\n                />\n            </button>\n            <p className={styles.text}>{item.text}</p>\n        </div>\n    );\n};\n","import { FC } from \"react\";\nimport styles from \"./styles.module.scss\";\nimport { RATES } from \"../../shared/constants\";\nimport { RateItem } from \"../../shared/components/RateItem\";\nimport { useFeedback } from \"../../shared/hooks/useFeedback\";\nimport { FeedBackProps, Stages } from \"../../shared/types\";\nimport { FormContainer } from \"../../shared/components/FormContainer\";\n\ninterface Props extends FeedBackProps {\n    item: Stages;\n}\n\nexport const InitialContent: FC<Props> = ({ item, onClose }) => {\n    const { stage, onChangeRate, onChangeStage } = useFeedback();\n\n    const onSubmit = (value: number) => {\n        onChangeRate(value);\n        onChangeStage(stage + 1);\n    };\n\n    return (\n        <FormContainer title={item.title} onClose={onClose}>\n            {item.text && <p className='text-xs'>{item.text}</p>}\n            <div className={styles.list}>\n                {RATES.map((item) => (\n                    <RateItem key={item.id} item={item} onClick={onSubmit} />\n                ))}\n            </div>\n        </FormContainer>\n    );\n};\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAYAAADpwXTaAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAI1SURBVHgBpZWxbhNBEIZn9s5RlOoqRMfRISURh3gBp4xQkGlpHBdEJg3hCQJPgNMgKxQ4FXQnAojS5gEQhxQkyqOlcoUitLvDzK7PXCxzd4GRrPPO7n43M//sHsIlrP92o61JJYpsBIjZmgkmg3vZtJjHJpAH75MEtUkBKb44gzn7Rsc7Z09lFNSBHr5b71oLrxHpqnMQAwAYAjKO+Ne+ff8KfHr14yPWgYzFkU8Bcwb2hjtnExn30yS2gX7GfzsyVghb2BjUCraG21leXrObJtGK0mNekDBoov4VJDaS4iOduOwBEtUUJErunW52FtcTqELNSDUBOREIxrw13U/Xk/IeBBvNqNkcJm/9G6jsX4FWXuwREYDUIzcXYIaF0wTmMwJFVaBy7Zyayox97+FUtYJbLjJx/g+IAj+HUlhfD98r0kdlXxPQiztZ5vYb65tO+qRoSGvx5WVBYiFHc5O8Gl/ksc/nUBsdO1gDkPiJTwIhZCHM+wWmsGCr595XBXJ+gBgsxIoIv3tp6Zo8n/Mi9IcZfrLCe282nlSCCn8Y9hSgdTmTxc4BnzUHVtSbxRtz4Q5rQTO/+mVaI/ApRhzJoSBECGXC60hwJMLIU/qoCjQTkbufU3ER+GgeH9/9OoAlVqemg5WvEp8mjpDoZFWHmVzL/Q83YqvDLtf3QJp7GWgO+wM0A35rFyptOegCbJ7K6eYuAXW5VdqLECA6WrPhoPwRqYQVJsqeh9pfN6HOh9vfcqix31/Wm+B+aGglAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB6SURBVHgB7ZLBCYAwDEV/xaMDdAxX8+QYjuEYruMY5pBCKBJriKCYByG0oT/hN0AQvIlMsVIs8rKHD5mFMx6gTL5xdm3yQ/G54cEt8a46j9A3QtZ2iolzM9p0bp6fCZnFk9JEWgEYbUlKrf4Lk+dXFGvc91wycAQf5QDRWiP2UJqX7wAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGGSURBVHgBrZUvb8JQEMDvHl2WCVhJplA4JF2CJWMWwVcAgZ/iU2CQCMQQCCwCSwgW0W+wKtQWmpFsY396u3sUAmx9bJRf0vB6fe+Xu/fKFSFk7jg2BMEdIZYIwOGQDWZ8BHADxO6V696vgxjKsgHRiIdZOA5PId6mXdfTwqd8/iGGbFt6nXh0nBpbaxAfm7drqRRRFU4EEt1Y4QHscF6pbMYXjQaoZFKPabGAl2Zz82w5GOysExfy/tG+MD2ZAIaSKEQ+LxZ/xNVvk7eziCJqjoIDWbz1ept7KTHgmAnL9DCYzeC13dZiQeSpXA5ArmOECV6Y6nTguV7X0st+X8dMGEsW3kcj/SuHtB6bMGb4OZ2uyuQsBcn0rFAAi6+jhLJQylSZjL63h8ODr5OU7BsnhDLhkExcSlrQfvSDS5UTjkIOSObsg4iuxX/oMRCVth+IzC+X4b8EAF3FNbd47EF8PGm0ipuiL80xptQLHauOvUZ6I2dcJaK/fQJ4z74AxvyqtCQxCX4DHO+Vksdja9oAAAAASUVORK5CYII=\"","import validate from './validate.js';\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  //\n  // Note to future-self: No, you can't remove the `toLowerCase()` call.\n  // REF: https://github.com/uuidjs/uuid/pull/677#issuecomment-1757351351\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n  var uuid = unsafeStringify(arr, offset);\n  // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n  return uuid;\n}\nexport default stringify;","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n  return getRandomValues(rnds8);\n}","var randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    offset = offset || 0;\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n    return buf;\n  }\n  return unsafeStringify(rnds);\n}\nexport default v4;","import { FC, useCallback, useId, useState } from \"react\";\nimport vector from \"../../assets/vector.png\";\nimport check from \"../../assets/check.png\";\nimport deleteIcon from \"../../assets/delete.png\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { FeedBackProps, Stages } from \"../../shared/types\";\nimport { useFeedback } from \"../../shared/hooks/useFeedback\";\nimport { FormContainer } from \"../../shared/components/FormContainer\";\nimport { Button } from \"../../shared/components/Button\";\n\ninterface Files {\n    id: string;\n    name: string;\n}\n\ninterface Props extends FeedBackProps {\n    item: Stages;\n}\n\nexport const FeedbackForm: FC<Props> = ({ item, onClose }) => {\n    const { stage, onChangeStage } = useFeedback();\n    const [text, setText] = useState(\"\");\n    const [file, setFile] = useState<Files[]>([]);\n    const id = useId();\n\n    const onChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n        setText(e.target.value);\n    };\n\n    const handleFileInputChange: React.ChangeEventHandler<\n        HTMLInputElement\n    > = async (event) => {\n        try {\n            if (!event.target.files?.[0]) return;\n            const current: Files = {\n                id: uuidv4(),\n                name: event.target.files[0].name,\n                // image64: await convertFileToBase64(event.target.files[0]),\n            };\n            setFile((prev) => [...prev, current]);\n        } catch {\n            setFile(file);\n        }\n    };\n\n    const handleDeleteFile = (id: string) => {\n        setFile((prev) => [...prev.filter((item) => item.id !== id)]);\n    };\n\n    const onSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n        console.log(text);\n        console.log(file);\n        onChangeStage(stage + 1);\n    };\n\n    const validate = useCallback(\n        (text: string) => {\n            if (!text.length) return true;\n            if (text.length > 1000) return true;\n            return false;\n        },\n        [text],\n    );\n\n    return (\n        <FormContainer onSubmit={onSubmit} title={item.title} onClose={onClose}>\n            <textarea\n                className='border-2 border-[#66B22C] border-solid h-36 rounded-xl resize-none py-3 px-4 outline-none'\n                placeholder='Мне бы хотелось, чтобы'\n                onChange={onChange}\n                value={text}\n            />\n            <ul className='flex flex-col gap-2'>\n                {file.map((item) => (\n                    <li className='flex gap-2 items-center' key={item.id}>\n                        <img src={check} />\n                        <p>{item.name}</p>\n                        <button\n                            onClick={() => handleDeleteFile(item.id)}\n                            className='ml-auto'\n                        >\n                            <img src={deleteIcon} />\n                        </button>\n                    </li>\n                ))}\n            </ul>\n            <div className='self-end w-full'>\n                <input\n                    type='file'\n                    accept='image/png, image/jpeg'\n                    className='opacity-0 absolute invisible'\n                    onChange={handleFileInputChange}\n                    id={id}\n                />\n                <label\n                    htmlFor={id}\n                    className='h-20 bg-[#ECF5E4] rounded-xl flex items-center justify-center gap-4 px-5 py-4 cursor-pointer'\n                >\n                    <img src={vector} alt='прикрепить изображение' />\n                    <p className='font-bold text-start'>Прикрепить скриншот</p>\n                </label>\n            </div>\n            {item.button && (\n                <Button\n                    type='submit'\n                    disabled={validate(text)}\n                    bgColor={item.buttonColor}\n                >\n                    {item.button}\n                </Button>\n            )}\n        </FormContainer>\n    );\n};\n","import { FC, useEffect, useState } from \"react\";\nimport { Modal } from \"../../shared/components/Modal\";\nimport { FinalForm } from \"../FinalForm\";\nimport { useFeedback } from \"../../shared/hooks/useFeedback\";\nimport { InitialContent } from \"../InitialContent\";\nimport { FeedbackForm } from \"../FeedbackForm\";\nimport { FeedBackProps, Stages } from \"../../shared/types\";\nimport { STAGES } from \"../../shared/constants\";\n\nexport const FeedBackModal: FC<Omit<FeedBackProps, \"onClose\" | \"isVisible\">> = (props) => {\n    const { stage, onChangeStage, } = useFeedback();\n    const [visible, setVisible] = useState(false);\n\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            setVisible(true);\n        }, 5000);\n        return () => clearTimeout(timer);\n    }, [visible]);\n\n    const onClose = () => {\n        setVisible(false);\n        onChangeStage(0);\n    };\n\n    const getStage = (item: Stages) => {\n        switch (stage) {\n            case 0: {\n                return (\n                    <InitialContent\n                        key={item.id}\n                        item={item}\n                        {...props}\n                        onClose={onClose}\n                        isVisible={visible}\n                    />\n                );\n            }\n            case 1: {\n                return (\n                    <FeedbackForm\n                        key={item.id}\n                        item={item}\n                        {...props}\n                        onClose={onClose}\n                        isVisible={visible}\n                    />\n                );\n            }\n            case 2: {\n                return (\n                    <FinalForm\n                        key={item.id}\n                        item={item}\n                        {...props}\n                        onClose={onClose}\n                        isVisible={visible}\n                    />\n                );\n            }\n        }\n    };\n\n    return (\n        <Modal {...props} isVisible={visible} onClose={onClose}>\n            {STAGES.map((item, index) => {\n                if (index === stage) {\n                    return getStage(item);\n                }\n            })}\n        </Modal>\n    );\n};\n","import { FC } from \"react\";\nimport { FeedBackProvider } from \"../../context/FeedBackContext\";\nimport { FeedBackModal } from \"../FeedBackModal\";\ninterface IFeedBackProps {\n    appId: number\n}\n\nexport const Feedback: FC<IFeedBackProps> = (props) => {\n    return (\n        <FeedBackProvider>\n            <FeedBackModal {...props} />\n        </FeedBackProvider>\n    );\n};\n"],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","React","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_OFFSCREEN_TYPE","MAYBE_ITERATOR_SYMBOL","FAUX_ITERATOR_SYMBOL","getIteratorFn","maybeIterable","maybeIterator","ReactSharedInternals","error","format","_len2","args","_key2","printWarning","level","ReactDebugCurrentFrame","stack","argsWithFormat","item","enableScopeAPI","enableCacheElement","enableTransitionTracing","enableLegacyHidden","enableDebugTracing","REACT_MODULE_REFERENCE","isValidElementType","type","getWrappedName","outerType","innerType","wrapperName","displayName","functionName","getContextName","getComponentNameFromType","context","provider","outerName","lazyComponent","payload","init","assign","disabledDepth","prevLog","prevInfo","prevWarn","prevError","prevGroup","prevGroupCollapsed","prevGroupEnd","disabledLog","disableLogs","props","reenableLogs","ReactCurrentDispatcher","prefix","describeBuiltInComponentFrame","name","source","ownerFn","x","match","reentry","componentFrameCache","PossiblyWeakMap","describeNativeComponentFrame","fn","construct","frame","control","previousPrepareStackTrace","previousDispatcher","Fake","sample","sampleLines","controlLines","s","_frame","syntheticFrame","describeFunctionComponentFrame","shouldConstruct","Component","prototype","describeUnknownElementTypeFrameInDEV","hasOwnProperty","loggedTypeFailures","setCurrentlyValidatingElement","element","owner","checkPropTypes","typeSpecs","values","location","componentName","has","typeSpecName","error$1","err","ex","isArrayImpl","isArray","typeName","value","hasToStringTag","willCoercionThrow","testStringCoercion","checkKeyStringCoercion","ReactCurrentOwner","RESERVED_PROPS","specialPropKeyWarningShown","specialPropRefWarningShown","didWarnAboutStringRefs","hasValidRef","config","getter","hasValidKey","warnIfStringRefCannotBeAutoConverted","self","defineKeyPropWarningGetter","warnAboutAccessingKey","defineRefPropWarningGetter","warnAboutAccessingRef","ReactElement","key","ref","jsxDEV","maybeKey","propName","defaultProps","ReactCurrentOwner$1","ReactDebugCurrentFrame$1","setCurrentlyValidatingElement$1","propTypesMisspellWarningShown","isValidElement","object","getDeclarationErrorAddendum","getSourceInfoErrorAddendum","ownerHasKeyUseWarning","getCurrentComponentErrorInfo","parentType","info","parentName","validateExplicitKey","currentComponentErrorInfo","childOwner","validateChildKeys","node","i","child","iteratorFn","iterator","step","validatePropTypes","propTypes","_name","validateFragmentProps","fragment","keys","didWarnAboutKeySpread","jsxWithValidation","isStaticChildren","validType","sourceInfo","typeString","children","beforeExample","afterExample","jsxWithValidationStatic","jsxWithValidationDynamic","jsx","jsxs","reactJsxRuntime_development","jsxRuntimeModule","require$$1","FeedBackContext","createContext","FeedBackProvider","rateValue","setRateValue","useState","stage","setStage","text","setText","onChangeRate","onSetText","onChangeStage","MotionConfigContext","MotionContext","PresenceContext","isBrowser","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","LazyContext","camelToDash","str","optimizedAppearDataId","optimizedAppearDataAttribute","MotionGlobalConfig","Queue","process","index","createRenderStep","runNextFrame","thisFrame","nextFrame","numToRun","isProcessing","flushNextFrame","toKeepAlive","callback","keepAlive","immediate","addToCurrentFrame","queue","frameData","stepsOrder","maxElapsed","createRenderBatcher","scheduleNextBatch","allowKeepAlive","useDefaultElapsed","state","steps","acc","processStep","stepId","processBatch","timestamp","wake","microtask","cancelMicrotask","isRefObject","SwitchLayoutGroupContext","scheduleHandoffComplete","useVisualElement","visualState","createVisualElement","ProjectionNodeConstructor","parent","useContext","lazyContext","presenceContext","reducedMotionConfig","visualElementRef","useRef","visualElement","initialLayoutGroupConfig","createProjectionNode","useInsertionEffect","wantsHandoff","completeHandoff","initialPromotionConfig","layoutId","layout","drag","dragConstraints","layoutScroll","layoutRoot","getClosestProjectingNode","useMotionRef","externalRef","useCallback","instance","isVariantLabel","v","isAnimationControls","variantPriorityOrder","variantProps","isControllingVariants","isVariantNode","getCurrentTreeVariants","initial","animate","useCreateMotionContext","useMemo","variantLabelsAsDependency","prop","featureProps","featureDefinitions","loadFeatures","features","LayoutGroupContext","motionComponentSymbol","noop","any","warning","invariant","check","message","createMotionComponent","preloadedFeatures","useRender","useVisualState","MotionComponent","MeasureLayout","configAndProps","useLayoutId","isStatic","useStrictMode","layoutProjection","getProjectionFunctionality","ForwardRefComponent","forwardRef","layoutGroupId","isStrict","strictMessage","combined","createMotionProxy","createConfig","custom","customMotionComponentConfig","componentCache","_target","lowercaseSVGElements","isSVGComponent","scaleCorrectors","addScaleCorrector","correctors","transformPropOrder","transformProps","isForcedMotionValue","isMotionValue","translateAlias","numTransforms","buildTransform","transform","enableHardwareAcceleration","allowTransformNone","transformIsDefault","transformTemplate","transformString","transformName","checkStringStartsWith","token","isCSSVariableName","startsAsVariableToken","isCSSVariableToken","singleCssVariableRegex","getValueAsType","clamp","min","max","number","alpha","scale","sanitize","floatRegex","colorRegex","singleColorRegex","isString","createUnitType","unit","degrees","percent","px","vh","vw","progressPercentage","int","numberValueTypes","buildHTMLStyles","latestValues","options","style","vars","transformOrigin","hasTransform","hasTransformOrigin","transformIsNone","valueType","valueAsType","originX","originY","originZ","createHtmlRenderState","copyRawValuesOnly","target","useInitialMotionValues","useStyle","styleProp","useHTMLProps","htmlProps","validMotionProps","isValidMotionProp","shouldForward","loadExternalIsValidProp","isValidProp","filterProps","isDom","forwardMotionProps","filteredProps","calcOrigin","origin","offset","size","calcSVGTransformOrigin","dimensions","pxOriginX","pxOriginY","dashKeys","camelKeys","buildSVGPath","attrs","length","spacing","useDashCase","pathLength","pathSpacing","buildSVGAttrs","attrX","attrY","attrScale","pathOffset","latest","isSVGTag","createSvgRenderState","tag","useSVGProps","_isStatic","visualProps","rawStyles","createUseRender","elementProps","Fragment","renderedChildren","createElement","renderHTML","projection","camelCaseAttributes","renderSVG","renderState","_styleProp","scrapeMotionValuesFromProps","prevProps","_a","newValues","scrapeMotionValuesFromProps$1","targetKey","getValueState","resolveVariantFromProps","definition","current","velocity","useConstant","isKeyframesTarget","isCustomValue","resolveFinalValueInKeyframes","resolveMotionValue","unwrappedValue","makeState","createRenderState","onMount","makeLatestValues","makeUseVisualState","make","scrapeMotionValues","motionValues","isControllingVariants$1","isVariantNode$1","isInitialAnimationBlocked","variantToSet","resolved","transitionEnd","transition","valueTarget","cancelFrame","svgMotionConfig","htmlMotionConfig","createDomMotionConfig","addDomEvent","eventName","handler","isPrimaryPointer","event","extractEventInfo","pointType","addPointerInfo","addPointerEvent","combineFunctions","pipe","transformers","createLock","lock","openLock","globalHorizontalLock","globalVerticalLock","getGlobalLock","openHorizontal","openVertical","isDragActive","openGestureLock","Feature","addHoverEvent","isActive","callbackName","handleEvent","HoverGesture","FocusGesture","isFocusVisible","isNodeOrChild","fireSyntheticPointerEvent","syntheticPointerEvent","PressGesture","startEvent","startInfo","removePointerUpListener","endEvent","endInfo","onTap","onTapCancel","globalTapTarget","removePointerCancelListener","cancelEvent","cancelInfo","handleKeydown","keydownEvent","handleKeyup","keyupEvent","removeKeydownListener","handleBlur","removeBlurListener","onTapStart","whileTap","removePointerListener","removeFocusListener","observerCallbacks","observers","fireObserverCallback","entry","fireAllObserverCallbacks","entries","initIntersectionObserver","root","lookupRoot","rootObservers","observeIntersection","rootInteresectionObserver","thresholdNames","InViewFeature","viewport","rootMargin","amount","once","onIntersectionUpdate","isIntersecting","onViewportEnter","onViewportLeave","hasViewportOptionChanged","prevViewport","gestureAnimations","shallowCompare","next","prev","prevLength","resolveVariant","secondsToMilliseconds","seconds","millisecondsToSeconds","milliseconds","underDampedSpring","criticallyDampedSpring","keyframesTransition","ease","getDefaultTransition","valueKey","keyframes","isTransitionDefined","when","_delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed","getValueTransition","isNotNull","getFinalKeyframe","finalKeyframe","resolvedKeyframes","now","clearTime","time","newTime","isZeroValueString","isNone","isNumericalString","splitCSSVariableRegex","parseCSSVariable","token1","token2","fallback","maxDepth","getVariableValue","depth","trimmed","positionalKeys","isNumOrPxType","getPosFromMatrix","matrix","pos","getTranslateFromMatrix","pos2","pos3","_bbox","matrix3d","transformKeys","nonTranslationalTransformKeys","removeNonTranslationalTransform","removedTransforms","positionalValues","paddingLeft","paddingRight","y","paddingTop","paddingBottom","top","left","testValueType","auto","dimensionValueTypes","findDimensionValueType","toResolve","isScheduled","anyNeedsMeasurement","measureAllKeyframes","resolversToMeasure","resolver","elementsToMeasure","transformsToRestore","restore","readAllKeyframes","flushKeyframeResolvers","KeyframeResolver","unresolvedKeyframes","onComplete","motionValue","isAsync","currentValue","valueAsRead","isColorString","testProp","splitColor","aName","bName","cName","clampRgbUnit","rgbUnit","rgba","red","green","blue","alpha$1","parseHex","r","hex","hsla","hue","saturation","lightness","color","test","_b","NUMBER_TOKEN","COLOR_TOKEN","VAR_TOKEN","VAR_FUNCTION_TOKEN","SPLIT_TOKEN","complexRegex","analyseComplexValue","originalValue","indexes","types","split","parsedValue","parseComplexValue","createTransformer","numSections","output","convertNumbersToZero","getAnimatableNone","parsed","complex","maxDefaults","applyDefaultFilter","defaultValue","functionRegex","filter","functions","defaultValueTypes","getDefaultValueType","defaultValueType","invalidTemplates","makeNoneKeyframesAnimatable","noneKeyframeIndexes","animatableTemplate","keyframe","noneIndex","DOMKeyframesResolver","originType","targetType","measureKeyframe","finalKeyframeIndex","unsetTransformName","unsetTransformValue","memo","result","isAnimatable","hasKeyframesChanged","canAnimate","originKeyframe","targetKeyframe","isOriginAnimatable","isTargetAnimatable","BaseAnimation","autoplay","delay","onUpdate","isGenerator","resolvedAnimation","resolve","reject","velocityPerSecond","frameDuration","velocitySampleDuration","calcGeneratorVelocity","resolveValue","prevT","safeMin","minDuration","maxDuration","minDamping","maxDamping","findSpring","duration","bounce","mass","envelope","derivative","dampingRatio","undampedFreq","exponentialDecay","delta","calcAngularFreq","initialGuess","approximateRoot","stiffness","rootIterations","durationKeys","physicsKeys","isSpringType","getSpringOptions","springOptions","derived","spring","restDelta","restSpeed","damping","isResolvedFromDuration","initialVelocity","initialDelta","undampedAngularFreq","isGranularScale","resolveSpring","angularFreq","t","dampedAngularFreq","freqForT","currentVelocity","isBelowVelocityThreshold","isBelowDisplacementThreshold","inertia","power","timeConstant","bounceDamping","bounceStiffness","modifyTarget","isOutOfBounds","nearestBoundary","amplitude","ideal","calcDelta","calcLatest","applyFriction","timeReachedBoundary","spring$1","checkCatchBoundary","hasUpdatedFrame","calcBezier","a1","a2","subdivisionPrecision","subdivisionMaxIterations","binarySubdivide","lowerBound","upperBound","mX1","mX2","currentX","currentT","cubicBezier","mY1","mY2","getTForX","aX","easeIn","easeOut","easeInOut","isEasingArray","mirrorEasing","easing","reverseEasing","circIn","circOut","circInOut","backOut","backIn","backInOut","anticipate","easingLookup","easingDefinitionToFunction","x1","y1","x2","y2","progress","to","toFromDifference","mixNumber","hueToRgb","hslaToRgba","mixImmediate","mixLinearColor","fromExpo","expo","colorTypes","getColorType","asRGBA","model","mixColor","fromRGBA","toRGBA","blended","invisibleValues","mixVisibility","mixNumber$1","getMixer","mixComplex","mixArray","mixObject","numValues","blendValue","matchOrder","orderedOrigin","pointers","originIndex","originValue","template","originStats","targetStats","mix","createMixers","customMixer","mixers","mixerFactory","numMixers","mixer","easingFunction","interpolate","input","isClamp","inputLength","interpolator","progressInRange","fillOffset","remaining","offsetProgress","defaultOffset","arr","convertOffsetToTimes","o","defaultEasing","keyframeValues","times","easingFunctions","absoluteTimes","mapTimeToKeyframe","maxGeneratorDuration","calcGeneratorDuration","generator","timeStep","frameloopDriver","update","passTimestamp","generators","percentToProgress","MainThreadAnimation","KeyframeResolver$1","onStop","onResolved","keyframes$1","generatorFactory","mapPercentToKeyframes","mirroredGenerator","calculatedDuration","resolvedDuration","totalDuration","timeWithoutDelay","isInDelayPhase","frameGenerator","currentIteration","iterationProgress","done","isAnimationFinished","newSpeed","hasChanged","driver","onPlay","isBezierDefinition","isWaapiSupportedEasing","supportedWaapiEasing","cubicBezierAsString","mapEasingToNativeEasingWithDefault","mapEasingToNativeEasing","animateStyle","valueName","keyframeOptions","supportsWaapi","acceleratedValues","sampleDelta","requiresPregeneratedKeyframes","pregenerateKeyframes","sampleAnimation","pregeneratedKeyframes","AcceleratedAnimation","pregeneratedAnimation","animation","timeline","sampleTime","observeTimeline","prevProgress","onFrame","currentTime","supportsScrollTimeline","GroupPlaybackControls","animations","onResolve","onReject","newValue","cancelAll","cancelTimeline","speed","methodName","controls","animateMotionValue","isHandoff","valueTransition","shouldSkip","isWillChangeMotionValue","addUniqueItem","removeItem","SubscriptionManager","numSubscriptions","warned","warnOnce","condition","MAX_VELOCITY_DELTA","isFloat","collectMotionValues","MotionValue","render","prevFrameValue","subscription","unsubscribe","eventManagers","passiveEffect","stopPassiveEffect","endAnimation","startAnimation","setMotionValue","setTarget","getOptimisedAppearId","shouldBlockAnimation","protectedKeys","needsAnimating","shouldBlock","animateTarget","targetAndTransition","transitionOverride","willChange","animationTypeState","appearId","animateVariant","variant","getAnimation","getChildAnimations","forwardDelay","animateChildren","first","last","maxStaggerDuration","generateStaggerDuration","sortByTreeOrder","animateVisualElement","resolvedDefinition","reversePriorityOrder","numAnimationTypes","animateList","createAnimationState","createState","isInitialRender","buildResolvedTypeValues","setAnimateFunction","makeAnimator","animateChanges","changedActiveType","removedKeys","encounteredKeys","removedVariantIndex","typeState","propIsVariant","activeDelta","isInherited","shouldAnimateType","checkVariantsDidChange","handledRemovedValues","definitionList","resolvedValues","prevResolvedValues","allKeys","markToAnimate","valueHasChanged","fallbackAnimation","fallbackTarget","shouldAnimate","setActive","createTypeState","AnimationFeature","prevAnimate","id","ExitAnimationFeature","isPresent","onExitComplete","prevIsPresent","exitAnimation","register","distance","distance2D","xDelta","yDelta","PanSession","handlers","transformPagePoint","contextWindow","dragSnapToOrigin","getPanInfo","isPanStarted","isDistancePastThreshold","point","onStart","onMove","transformPoint","onEnd","onSessionEnd","resumeAnimation","panInfo","initialInfo","onSessionStart","subtractPoint","history","lastDevicePoint","startDevicePoint","getVelocity","timeDelta","timestampedPoint","lastPoint","calcLength","axis","isNear","maxDistance","calcAxisDelta","calcBoxDelta","calcRelativeAxis","relative","calcRelativeBox","calcRelativeAxisPosition","calcRelativePosition","applyConstraints","elastic","calcRelativeAxisConstraints","calcRelativeConstraints","layoutBox","bottom","right","calcViewportAxisConstraints","layoutAxis","constraintsAxis","calcViewportConstraints","constraintsBox","sourceLength","targetLength","rebaseAxisConstraints","constraints","relativeConstraints","defaultElastic","resolveDragElastic","dragElastic","resolveAxisElastic","minLabel","maxLabel","resolvePointElastic","label","createAxisDelta","createDelta","createAxis","createBox","eachAxis","convertBoundingBoxToBox","convertBoxToBoundingBox","transformBoxPoints","topLeft","bottomRight","isIdentityScale","hasScale","scaleX","scaleY","has2DTranslate","is2DTranslate","scalePoint","originPoint","distanceFromOrigin","scaled","applyPointDelta","translate","boxScale","applyAxisDelta","applyBoxDelta","box","applyTreeDeltas","treeScale","treePath","isSharedTransition","treeLength","transformBox","snapToDefault","translateAxis","transformAxis","transforms","scaleKey","originKey","axisOrigin","xKeys","yKeys","measureViewportBox","measurePageBox","rootProjectionNode","viewportBox","scroll","getContextWindow","elementDragControls","VisualElementDragControls","originEvent","snapToCursor","dragPropagation","onDragStart","measuredAxis","animationState","dragDirectionLock","onDirectionLock","onDrag","getCurrentDirection","isDragging","onDragEnd","_point","shouldDrag","axisValue","prevConstraints","onMeasureDragConstraints","constraintsElement","measuredConstraints","userConstraints","dragMomentum","dragTransition","onDragTransitionEnd","momentumAnimations","dragKey","externalMotionValue","boxProgress","stopPointerListener","dragListener","measureDragConstraints","stopMeasureLayoutListener","stopResizeListener","stopLayoutUpdateListener","hasLayoutChanged","direction","currentDirection","lockThreshold","DragGesture","dragControls","asyncHandler","PanGesture","pointerDownEvent","onPanSessionStart","onPanStart","onPan","onPanEnd","usePresence","useId","globalProjectionState","pixelsToPercent","pixels","correctBorderRadius","correctBoxShadow","projectionDelta","original","shadow","xScale","yScale","averageScale","MeasureLayoutWithContext","layoutGroup","switchLayoutGroup","defaultScaleCorrectors","layoutDependency","promoteContext","safeToRemove","borders","numBorders","asNumber","isPx","mixValues","follow","lead","shouldCrossfadeOpacity","isOnlyMember","easeCrossfadeIn","easeCrossfadeOut","borderLabel","followRadius","getRadius","leadRadius","radiusName","compress","copyAxisInto","originAxis","copyBoxInto","originBox","removePointDelta","removeAxisDelta","sourceAxis","removeAxisTransforms","removeBoxTransforms","sourceBox","isAxisDeltaZero","isDeltaZero","boxEquals","boxEqualsRounded","aspectRatio","NodeStack","prevLead","indexOfNode","member","preserveFollowOpacity","crossfade","resumingFrom","buildProjectionTransform","latestTransform","xTranslate","yTranslate","zTranslate","transformPerspective","rotate","rotateX","rotateY","skewX","skewY","elementScaleX","elementScaleY","compareByDepth","FlatTree","timeout","start","checkElapsed","record","data","isSVGElement","animateSingleValue","motionValue$1","transformAxes","hiddenVisibility","animationTarget","projectionFrameData","resetDistortingTransform","sharedAnimationValues","isOptimisedAppearTree","projectionNode","attachResizeListener","defaultParent","measureScroll","checkIsScrollRoot","resetTransform","propagateDirtyNodes","resolveTargetDelta","calcProjection","cleanDirtyNodes","subscriptionManager","isLayoutDirty","cancelDelay","resizeUnblockUpdate","finishAnimation","hasRelativeTargetChanged","newLayout","layoutTransition","defaultLayoutTransition","onLayoutAnimationStart","onLayoutAnimationComplete","targetChanged","hasOnlyRelativeTargetChanged","animationOptions","resetSkewAndRotation","shouldNotifyListeners","clearMeasurements","clearIsLayoutDirty","resetTransformStyle","updateLayout","notifyLayoutUpdate","clearSnapshot","removeLeadSnapshots","prevLayout","phase","needsMeasurement","isResetRequested","hasProjection","transformTemplateValue","transformTemplateHasChanged","removeTransform","pageBox","roundBox","boxWithoutScroll","rootScroll","transformOnly","withTransforms","boxWithoutTransform","nodeBox","forceRecalculation","isShared","relativeParent","canSkip","prevTreeScaleX","prevTreeScaleY","prevProjectionTransform","notifyAll","snapshot","snapshotLatestValues","mixedValues","targetDelta","relativeLayout","snapshotSource","layoutSource","isSharedLayoutAnimation","hasOpacityCrossfade","prevRelativeTarget","mixAxisDelta","mixBox","targetWithTransforms","shouldAnimatePositionOnly","xLength","yLength","needsReset","hasDistortingTransform","resetValues","styles","emptyStyles","valuesToRender","correct","applyTo","corrected","num","measuredLayout","animationType","axisSnapshot","layoutDelta","visualDelta","parentSnapshot","parentLayout","relativeSnapshot","mixAxis","userAgentContains","string","roundPoint","roundAxis","DocumentProjectionNode","notify","HTMLProjectionNode","documentNode","prefersReducedMotion","hasReducedMotionListener","initPrefersReducedMotion","motionMediaQuery","setReducedMotionPreferences","updateMotionValuesFromProps","nextValue","prevValue","existingValue","latestValue","visualElementStore","valueTypes","findValueType","propEventHandlers","numVariantProps","VisualElement","_props","_prevProps","_visualElement","blockInitialAnimation","initialMotionValues","remove","feature","valueIsTransform","removeOnChange","removeOnRenderRequest","other","featureDefinition","isEnabled","FeatureConstructor","listenerName","listener","startAtParent","closestVariantNode","valueFromInitial","DOMVisualElement","getComputedStyle","HTMLVisualElement","defaultType","computedStyle","SVGVisualElement","createDomVisualElement","motion","useIsMounted","isMounted","useForceUpdate","forcedRenderCount","setForcedRenderCount","forceRender","PopChildMeasure","PopChild","nonce","width","height","PresenceChild","presenceAffectsLayout","mode","presenceChildren","newChildrenMap","childId","isComplete","_","useUnmountEffect","getChildKey","updateChildLookup","allChildren","onlyElements","filtered","Children","AnimatePresence","exitBeforeEnter","filteredChildren","childrenToRender","exitingChildren","presentChildren","presentKeys","targetKeys","numPresent","component","insertionIndex","exitingComponent","onExit","leftOverKeys","childKey","leftOverKey","presentChild","presentChildKey","cloneElement","useMotionValue","setLatest","isCustomValueType","useImmediate","argOffset","inputValue","inputRange","outputRange","useCombineMotionValues","combineValues","updateValue","scheduleUpdate","subscriptions","useComputed","compute","useTransform","inputRangeOrTransformer","transformer","useListTransform","resolveElements","elements","scope","selectorCache","useReducedMotion","shouldReduceMotion","isDOMKeyframes","createGeneratorEasing","calcNextTime","labels","wrap","rangeSize","getEasingForSegment","eraseKeyframes","sequence","startTime","endTime","addKeyframes","compareByTime","defaultSegmentEasing","createAnimationsFromSequence","defaultTransition","sequenceTransition","defaultDuration","animationDefinitions","sequences","elementCache","timeLabels","prevTime","segment","subject","resolveValueSequence","valueKeyframes","valueSequence","elementIndex","numElements","valueKeyframesAsList","keyframesAsList","remainingTransition","calculatedDelay","numKeyframes","absoluteDelta","isNumberKeyframesArray","springTransition","springEasing","targetTime","remainder","subjectSequence","getSubjectSequence","getValueSequence","valueSequences","valueOffset","valueEasing","at","isNumber","animateElements","elementOrSelector","isSequence","animateSequence","createScopedAnimate","scopedAnimate","valueOrElementOrSequence","$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c","$HgANd$react","$ff5963eb1fccf552$export$e08e3b67e392101e","callbacks","$c87311424ea30a05$var$testPlatform","re","_window_navigator_userAgentData","$c87311424ea30a05$export$9ac100e40613ea10","$c87311424ea30a05$export$186c6964ca17d99","$c87311424ea30a05$export$7bef049ce92e4224","$c87311424ea30a05$export$fedb369cb70207f1","$cc38e7bd3fc7b213$export$2bb74740c4e19def","checkForOverflow","isScrollable","$62d8ded9296f3872$export$cfa2225e87938781","scrollableNode","MAX_HEIGHT","IS_SSR","DEFAULT_TWEEN_CONFIG","REDUCED_MOTION_TWEEN_CONFIG","DRAG_CLOSE_THRESHOLD","DRAG_VELOCITY_THRESHOLD","getClosest","nums","goal","closest","minDifference","difference","applyRootStyles","rootId","body","cleanupRootStyles","onTransitionEnd","inDescendingOrder","validateSnapTo","snapTo","sheetHeight","mergeRefs","refs","isTouchDevice","useModalEffect","isOpen","prevOpen","usePrevious","useEventCallbacks","didOpen","handleAnimationComplete","_c","_d","useDimensions","setDimensions","useEffectEvent","handlerRef","useDragConstraints","constraintsRef","SheetContext","useSheetContext","SheetScrollerContext","SheetScrollerContextProvider","sheetContext","disableDrag","setDisableDrag","setDragEnabled","setDragDisabled","React2","useSheetScrollerContext","visualViewport","nonTextInputTypes","preventScrollCount","usePreventScroll","isDisabled","useLayoutEffect$1","isIOS","preventScrollMobileSafari","preventScrollStandard","chain","setStyle","scrollable","lastY","onTouchStart","getScrollParent","onTouchMove","scrollTop","onTouchEnd","willOpenKeyboard","onFocus","scrollIntoView","onWindowScroll","scrollX","scrollY","restoreStyles","removeEvents","addEvent","cur","scrollableTop","targetTop","styles_default","Sheet","onOpenStart","onOpenEnd","onClose","onCloseStart","onCloseEnd","onSnap","disableScrollLocking","snapPoints","mountPoint","detent","initialSnap","tweenConfig","rest","sheetRef","indicatorRotation","windowHeight","reduceMotion","zIndex","visibility","focusedElement","currentY","snapToValues","snapValue","snapIndex","roundedSheetHeight","useImperativeHandle","sheetEl","snapPoint","dragProps","sheet","createPortal","sheet_default","SheetContainer","className","initialY","maxSnapHeight","SheetContainer_default","SheetContent","sheetScrollerContext","SheetContent_default","SheetHeader","_dragProps","indicator1Transform","indicator2Transform","SheetHeader_default","isClickable","SheetBackdrop","Comp","pointerEvents","SheetBackdrop_default","SheetScroller","draggableAt","determineDragState","scrollHeight","clientHeight","isAtTop","isAtBottom","onScroll","scrollProps","SheetScroller_default","_SheetCompound","Sheet2","getWindowDimensions","useWindowDimensions","windowDimensions","setWindowDimensions","handleResize","Modal","isVisible","terrible","bad","neutral","good","excelent","GREEN_COLOR","MASK_PLACEHOLDER","RATES","STAGES","Input","borderColor","readOnly","isObject","obj","_obj$constructor","pick","_ref","DIRECTION","forceDirection","escapeRegExp","objectIncludes","arrA","arrB","dateA","dateB","regexpA","regexpB","ActionDetails","opts","IMask","el","maskedClass","mask","normalizeOpts","instanceOpts","_mask","createMask","nOpts","MaskedClass","MaskElement","end","KEY_Z","KEY_Y","HTMLMaskElement","_this$input$getRootNo","_this$input$getRootNo2","_this$input","HTMLInputMaskElement","HTMLContenteditableMaskElement","selection","anchorOffset","focusOffset","range","InputHistory","InputMask$1","_this$masked","masked","val","ev","listeners","cursorPos","newUnmaskedValue","newRawInputValue","newDisplayValue","isChanged","restOpts","updateMask","updateOpts","hIndex","details","oldRawValue","removeDirection","InputMask","ChangeDetails","prep","ContinuousTailDetails","stop","tail","beforePos","shiftChar","Masked","flags","fromPos","toPos","ch","checkTail","consistentState","noFixState","fixDetails","chDetails","consistentTail","appended","beforeTailState","tailDetails","ci","rawInput","ret","deleteCount","inserted","tailPos","eagerRemove","startChangePos","valLength","tval","ChunksTailDetails","chunks","tailChunk","lastChunk","extendLast","firstTailChunk","chunk","lastBlockIter","chunkBlock","remainChars","cstate","chunkShiftPos","PatternCursor","_this$block","PatternFixedDefinition","minPos","maxPos","appendEager","isResolved","PatternInputDefinition","isOptional","placeholderChar","displayChar","lazy","eager","maskOpts","boundPos","_flags$_beforeTailSta","MaskedRegExp","MaskedPattern","defs","pattern","unmaskingBlock","optionalBlock","bNames","expose","bOpts","blockOpts","maskedBlock","char","isInput","def","_blocks","maskedState","bi","unmaskedValue","_this$_mapPosToBlock","startBlockIndex","blockIter","block","blockDetails","chunkTail","bFromPos","bToPos","blockChunk","blockIndex","stopBefore","si","toBlockIndex","startBlockIter","endBlockIndex","_blocks2","accVal","blockStartPos","fromBlockIter","toBlockIter","isSameBlock","fromBlockStartPos","fromBlockEndPos","removeDetails","cursor","total","indices","gi","MaskedRange","maxLength","autofix","patternOpts","fromStr","toStr","sameCharsCount","minstr","maxstr","placeholder","padLength","DefaultPattern","MaskedDate","blocks","patternBlocks","date","day","month","year","MaskedDynamic","prevValueBeforeTail","insertValue","tailValue","prevMask","prevMaskState","_flags$_beforeTailSta2","currentDetails","_this$currentMask","typedValue","_this$currentMask2","_this$currentMask3","_this$currentMask4","compiledMasks","currentMaskRef","currentMask","mi","overwrite","skipInvalid","oldMask","_this$currentMask5","inputs","isCurrent","startInputPos","i1","i2","MaskedEnum","enum_","eopts","lengths","requiredLength","optionalLength","matchFrom","matches","mch","estr","istr","MaskedFunction","_MaskedNumber","MaskedNumber","mid","parts","prepCh","extendOnSeparators","count","slice","prevBeforeTailValue","prevBeforeTailSeparatorsCount","oldValue","accepted","skip","fixedNum","appendDetails","beforeTailValue","beforeTailSeparatorsCount","searchFrom","separatorPos","separatorAroundFromPos","separatorAroundToPos","valueBeforePos","valueAfterPos","separatorAtLeftPos","separatorAtLeftEndPos","separatorAtRightPos","validnum","formatted","sign","zeros","dropFractional","PIPE_TYPE","createPipe","arg","RepeatBlock","_ref2","_ref3","_ref4","_this$_blocks","_this$_mapPosToBlock$","allocated","_this$_blocks$bi","_this$_mapPosToBlock2","_this$_mapPosToBlock3","firstBlockIndex","lastBlockIndex","removeCount","w","z","u","A","reactIs_production_min","hasSymbol","REACT_ASYNC_MODE_TYPE","REACT_CONCURRENT_MODE_TYPE","REACT_BLOCK_TYPE","REACT_FUNDAMENTAL_TYPE","REACT_RESPONDER_TYPE","REACT_SCOPE_TYPE","typeOf","$$typeof","$$typeofType","AsyncMode","ConcurrentMode","ContextConsumer","ContextProvider","Element","ForwardRef","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","hasWarnedAboutDeprecatedIsAsyncMode","isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","reactIs_development","reactIsModule","getOwnPropertySymbols","propIsEnumerable","toObject","shouldUseNative","test1","test2","order2","test3","letter","objectAssign","symbols","ReactPropTypesSecret","ReactPropTypesSecret_1","getStack","checkPropTypes_1","ReactIs","require$$2","require$$3","require$$4","emptyFunctionThatReturnsNull","factoryWithTypeCheckers","throwOnDirectAccess","ITERATOR_SYMBOL","ANONYMOUS","ReactPropTypes","createPrimitiveTypeChecker","createAnyTypeChecker","createArrayOfTypeChecker","createElementTypeChecker","createElementTypeTypeChecker","createInstanceTypeChecker","createNodeChecker","createObjectOfTypeChecker","createEnumTypeChecker","createUnionTypeChecker","createShapeTypeChecker","createStrictShapeTypeChecker","is","PropTypeError","createChainableTypeChecker","validate","manualPropTypeCallCache","manualPropTypeWarningCount","checkType","isRequired","propFullName","secret","cacheKey","chainedCheckType","expectedType","propValue","propType","getPropType","preciseType","getPreciseType","typeChecker","expectedClass","expectedClassName","actualClassName","getClassName","expectedValues","valuesString","arrayOfTypeCheckers","checker","getPostfixForTypeWarning","expectedTypes","checkerResult","expectedTypesMessage","isNode","invalidValidatorError","shapeTypes","isSymbol","emptyFunction","emptyFunctionWithReset","factoryWithThrowingShims","shim","getShim","propTypesModule","MASK_PROPS","PropTypes","MASK_PROPS_NAMES","NON_MASK_OPTIONS_NAMES","MASK_OPTIONS_NAMES","pName","IMaskMixin","ComposedComponent","_Class","MaskedComponent","maskOptions","_this$element","cloneProps","nonMaskProp","maskProp","nestedComponentName","IMaskInputClass","inputRef","IMaskInputFn","closeIcon","FormContainer","title","Button","bgColor","BUTTON_TEXT","FinalForm","phone","setPhone","handleChange","onSubmit","useFeedback","RateItem","onClick","InitialContent","vector","deleteIcon","byteToHex","unsafeStringify","getRandomValues","rnds8","rng","randomUUID","native","v4","buf","rnds","FeedbackForm","file","setFile","onChange","handleFileInputChange","uuidv4","handleDeleteFile","FeedBackModal","visible","setVisible","timer","getStage","Feedback"],"mappings":"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","x_google_ignoreList":[0,1,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,309,310,311,312]}