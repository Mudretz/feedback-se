{"version":3,"file":"index.umd.js","sources":["../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/react/cjs/react-jsx-runtime.development.js","../node_modules/react/jsx-runtime.js","../src/context/FeedBackContext.tsx","../node_modules/framer-motion/dist/es/context/MotionConfigContext.mjs","../node_modules/framer-motion/dist/es/context/MotionContext/index.mjs","../node_modules/framer-motion/dist/es/context/PresenceContext.mjs","../node_modules/framer-motion/dist/es/utils/is-browser.mjs","../node_modules/framer-motion/dist/es/utils/use-isomorphic-effect.mjs","../node_modules/framer-motion/dist/es/context/LazyContext.mjs","../node_modules/framer-motion/dist/es/render/dom/utils/camel-to-dash.mjs","../node_modules/framer-motion/dist/es/animation/optimized-appear/data-id.mjs","../node_modules/framer-motion/dist/es/utils/GlobalConfig.mjs","../node_modules/framer-motion/dist/es/frameloop/render-step.mjs","../node_modules/framer-motion/dist/es/frameloop/batcher.mjs","../node_modules/framer-motion/dist/es/frameloop/microtask.mjs","../node_modules/framer-motion/dist/es/utils/is-ref-object.mjs","../node_modules/framer-motion/dist/es/context/SwitchLayoutGroupContext.mjs","../node_modules/framer-motion/dist/es/motion/utils/use-visual-element.mjs","../node_modules/framer-motion/dist/es/motion/utils/use-motion-ref.mjs","../node_modules/framer-motion/dist/es/render/utils/is-variant-label.mjs","../node_modules/framer-motion/dist/es/animation/utils/is-animation-controls.mjs","../node_modules/framer-motion/dist/es/render/utils/variant-props.mjs","../node_modules/framer-motion/dist/es/render/utils/is-controlling-variants.mjs","../node_modules/framer-motion/dist/es/context/MotionContext/utils.mjs","../node_modules/framer-motion/dist/es/context/MotionContext/create.mjs","../node_modules/framer-motion/dist/es/motion/features/definitions.mjs","../node_modules/framer-motion/dist/es/motion/features/load-features.mjs","../node_modules/framer-motion/dist/es/context/LayoutGroupContext.mjs","../node_modules/framer-motion/dist/es/motion/utils/symbol.mjs","../node_modules/framer-motion/dist/es/utils/noop.mjs","../node_modules/framer-motion/dist/es/utils/errors.mjs","../node_modules/framer-motion/dist/es/motion/index.mjs","../node_modules/framer-motion/dist/es/render/dom/motion-proxy.mjs","../node_modules/framer-motion/dist/es/render/svg/lowercase-elements.mjs","../node_modules/framer-motion/dist/es/render/dom/utils/is-svg-component.mjs","../node_modules/framer-motion/dist/es/projection/styles/scale-correction.mjs","../node_modules/framer-motion/dist/es/render/html/utils/transform.mjs","../node_modules/framer-motion/dist/es/motion/utils/is-forced-motion-value.mjs","../node_modules/framer-motion/dist/es/value/utils/is-motion-value.mjs","../node_modules/framer-motion/dist/es/render/html/utils/build-transform.mjs","../node_modules/framer-motion/dist/es/render/dom/utils/is-css-variable.mjs","../node_modules/framer-motion/dist/es/render/dom/value-types/get-as-type.mjs","../node_modules/framer-motion/dist/es/utils/clamp.mjs","../node_modules/framer-motion/dist/es/value/types/numbers/index.mjs","../node_modules/framer-motion/dist/es/value/types/utils.mjs","../node_modules/framer-motion/dist/es/value/types/numbers/units.mjs","../node_modules/framer-motion/dist/es/render/dom/value-types/type-int.mjs","../node_modules/framer-motion/dist/es/render/dom/value-types/number.mjs","../node_modules/framer-motion/dist/es/render/html/utils/build-styles.mjs","../node_modules/framer-motion/dist/es/render/html/utils/create-render-state.mjs","../node_modules/framer-motion/dist/es/render/html/use-props.mjs","../node_modules/framer-motion/dist/es/motion/utils/valid-prop.mjs","../node_modules/framer-motion/dist/es/render/dom/utils/filter-props.mjs","../node_modules/framer-motion/dist/es/render/svg/utils/transform-origin.mjs","../node_modules/framer-motion/dist/es/render/svg/utils/path.mjs","../node_modules/framer-motion/dist/es/render/svg/utils/build-attrs.mjs","../node_modules/framer-motion/dist/es/render/svg/utils/create-render-state.mjs","../node_modules/framer-motion/dist/es/render/svg/utils/is-svg-tag.mjs","../node_modules/framer-motion/dist/es/render/svg/use-props.mjs","../node_modules/framer-motion/dist/es/render/dom/use-render.mjs","../node_modules/framer-motion/dist/es/render/html/utils/render.mjs","../node_modules/framer-motion/dist/es/render/svg/utils/camel-case-attrs.mjs","../node_modules/framer-motion/dist/es/render/svg/utils/render.mjs","../node_modules/framer-motion/dist/es/render/html/utils/scrape-motion-values.mjs","../node_modules/framer-motion/dist/es/render/svg/utils/scrape-motion-values.mjs","../node_modules/framer-motion/dist/es/render/utils/resolve-variants.mjs","../node_modules/framer-motion/dist/es/utils/use-constant.mjs","../node_modules/framer-motion/dist/es/animation/utils/is-keyframes-target.mjs","../node_modules/framer-motion/dist/es/utils/resolve-value.mjs","../node_modules/framer-motion/dist/es/value/utils/resolve-motion-value.mjs","../node_modules/framer-motion/dist/es/motion/utils/use-visual-state.mjs","../node_modules/framer-motion/dist/es/frameloop/frame.mjs","../node_modules/framer-motion/dist/es/render/svg/config-motion.mjs","../node_modules/framer-motion/dist/es/render/html/config-motion.mjs","../node_modules/framer-motion/dist/es/render/dom/utils/create-config.mjs","../node_modules/framer-motion/dist/es/events/add-dom-event.mjs","../node_modules/framer-motion/dist/es/events/utils/is-primary-pointer.mjs","../node_modules/framer-motion/dist/es/events/event-info.mjs","../node_modules/framer-motion/dist/es/events/add-pointer-event.mjs","../node_modules/framer-motion/dist/es/utils/pipe.mjs","../node_modules/framer-motion/dist/es/gestures/drag/utils/lock.mjs","../node_modules/framer-motion/dist/es/motion/features/Feature.mjs","../node_modules/framer-motion/dist/es/gestures/hover.mjs","../node_modules/framer-motion/dist/es/gestures/focus.mjs","../node_modules/framer-motion/dist/es/gestures/utils/is-node-or-child.mjs","../node_modules/framer-motion/dist/es/gestures/press.mjs","../node_modules/framer-motion/dist/es/motion/features/viewport/observers.mjs","../node_modules/framer-motion/dist/es/motion/features/viewport/index.mjs","../node_modules/framer-motion/dist/es/motion/features/gestures.mjs","../node_modules/framer-motion/dist/es/utils/shallow-compare.mjs","../node_modules/framer-motion/dist/es/render/utils/resolve-dynamic-variants.mjs","../node_modules/framer-motion/dist/es/utils/time-conversion.mjs","../node_modules/framer-motion/dist/es/animation/utils/default-transitions.mjs","../node_modules/framer-motion/dist/es/animation/utils/transitions.mjs","../node_modules/framer-motion/dist/es/animation/animators/waapi/utils/get-final-keyframe.mjs","../node_modules/framer-motion/dist/es/frameloop/sync-time.mjs","../node_modules/framer-motion/dist/es/utils/is-zero-value-string.mjs","../node_modules/framer-motion/dist/es/animation/utils/is-none.mjs","../node_modules/framer-motion/dist/es/utils/is-numerical-string.mjs","../node_modules/framer-motion/dist/es/render/dom/utils/css-variables-conversion.mjs","../node_modules/framer-motion/dist/es/render/dom/utils/unit-conversion.mjs","../node_modules/framer-motion/dist/es/render/dom/value-types/test.mjs","../node_modules/framer-motion/dist/es/render/dom/value-types/dimensions.mjs","../node_modules/framer-motion/dist/es/render/dom/value-types/type-auto.mjs","../node_modules/framer-motion/dist/es/render/utils/KeyframesResolver.mjs","../node_modules/framer-motion/dist/es/value/types/color/utils.mjs","../node_modules/framer-motion/dist/es/value/types/color/rgba.mjs","../node_modules/framer-motion/dist/es/value/types/color/hex.mjs","../node_modules/framer-motion/dist/es/value/types/color/hsla.mjs","../node_modules/framer-motion/dist/es/value/types/color/index.mjs","../node_modules/framer-motion/dist/es/value/types/complex/index.mjs","../node_modules/framer-motion/dist/es/value/types/complex/filter.mjs","../node_modules/framer-motion/dist/es/render/dom/value-types/defaults.mjs","../node_modules/framer-motion/dist/es/render/dom/value-types/animatable-none.mjs","../node_modules/framer-motion/dist/es/render/html/utils/make-none-animatable.mjs","../node_modules/framer-motion/dist/es/render/dom/DOMKeyframesResolver.mjs","../node_modules/framer-motion/dist/es/utils/memo.mjs","../node_modules/framer-motion/dist/es/animation/utils/is-animatable.mjs","../node_modules/framer-motion/dist/es/animation/animators/utils/can-animate.mjs","../node_modules/framer-motion/dist/es/animation/animators/BaseAnimation.mjs","../node_modules/framer-motion/dist/es/utils/velocity-per-second.mjs","../node_modules/framer-motion/dist/es/animation/generators/utils/velocity.mjs","../node_modules/framer-motion/dist/es/animation/generators/spring/find.mjs","../node_modules/framer-motion/dist/es/animation/generators/spring/index.mjs","../node_modules/framer-motion/dist/es/animation/generators/inertia.mjs","../node_modules/framer-motion/dist/es/easing/cubic-bezier.mjs","../node_modules/framer-motion/dist/es/easing/ease.mjs","../node_modules/framer-motion/dist/es/easing/utils/is-easing-array.mjs","../node_modules/framer-motion/dist/es/easing/modifiers/mirror.mjs","../node_modules/framer-motion/dist/es/easing/modifiers/reverse.mjs","../node_modules/framer-motion/dist/es/easing/circ.mjs","../node_modules/framer-motion/dist/es/easing/back.mjs","../node_modules/framer-motion/dist/es/easing/utils/map.mjs","../node_modules/framer-motion/dist/es/easing/anticipate.mjs","../node_modules/framer-motion/dist/es/utils/progress.mjs","../node_modules/framer-motion/dist/es/utils/mix/number.mjs","../node_modules/framer-motion/dist/es/utils/hsla-to-rgba.mjs","../node_modules/framer-motion/dist/es/utils/mix/immediate.mjs","../node_modules/framer-motion/dist/es/utils/mix/color.mjs","../node_modules/framer-motion/dist/es/utils/mix/visibility.mjs","../node_modules/framer-motion/dist/es/utils/mix/complex.mjs","../node_modules/framer-motion/dist/es/utils/mix/index.mjs","../node_modules/framer-motion/dist/es/utils/interpolate.mjs","../node_modules/framer-motion/dist/es/utils/offsets/fill.mjs","../node_modules/framer-motion/dist/es/utils/offsets/default.mjs","../node_modules/framer-motion/dist/es/utils/offsets/time.mjs","../node_modules/framer-motion/dist/es/animation/generators/keyframes.mjs","../node_modules/framer-motion/dist/es/animation/generators/utils/calc-duration.mjs","../node_modules/framer-motion/dist/es/animation/animators/drivers/driver-frameloop.mjs","../node_modules/framer-motion/dist/es/animation/animators/MainThreadAnimation.mjs","../node_modules/framer-motion/dist/es/easing/utils/is-bezier-definition.mjs","../node_modules/framer-motion/dist/es/animation/animators/waapi/easing.mjs","../node_modules/framer-motion/dist/es/animation/animators/waapi/index.mjs","../node_modules/framer-motion/dist/es/animation/animators/AcceleratedAnimation.mjs","../node_modules/framer-motion/dist/es/render/dom/scroll/observe.mjs","../node_modules/framer-motion/dist/es/render/dom/scroll/supports.mjs","../node_modules/framer-motion/dist/es/animation/GroupPlaybackControls.mjs","../node_modules/framer-motion/dist/es/animation/interfaces/motion-value.mjs","../node_modules/framer-motion/dist/es/value/use-will-change/is.mjs","../node_modules/framer-motion/dist/es/utils/array.mjs","../node_modules/framer-motion/dist/es/utils/subscription-manager.mjs","../node_modules/framer-motion/dist/es/utils/warn-once.mjs","../node_modules/framer-motion/dist/es/value/index.mjs","../node_modules/framer-motion/dist/es/render/utils/setters.mjs","../node_modules/framer-motion/dist/es/animation/optimized-appear/get-appear-id.mjs","../node_modules/framer-motion/dist/es/animation/interfaces/visual-element-target.mjs","../node_modules/framer-motion/dist/es/animation/interfaces/visual-element-variant.mjs","../node_modules/framer-motion/dist/es/animation/interfaces/visual-element.mjs","../node_modules/framer-motion/dist/es/render/utils/animation-state.mjs","../node_modules/framer-motion/dist/es/motion/features/animation/index.mjs","../node_modules/framer-motion/dist/es/motion/features/animation/exit.mjs","../node_modules/framer-motion/dist/es/motion/features/animations.mjs","../node_modules/framer-motion/dist/es/utils/distance.mjs","../node_modules/framer-motion/dist/es/gestures/pan/PanSession.mjs","../node_modules/framer-motion/dist/es/projection/geometry/delta-calc.mjs","../node_modules/framer-motion/dist/es/gestures/drag/utils/constraints.mjs","../node_modules/framer-motion/dist/es/projection/geometry/models.mjs","../node_modules/framer-motion/dist/es/projection/utils/each-axis.mjs","../node_modules/framer-motion/dist/es/projection/geometry/conversion.mjs","../node_modules/framer-motion/dist/es/projection/utils/has-transform.mjs","../node_modules/framer-motion/dist/es/projection/geometry/delta-apply.mjs","../node_modules/framer-motion/dist/es/projection/utils/measure.mjs","../node_modules/framer-motion/dist/es/utils/get-context-window.mjs","../node_modules/framer-motion/dist/es/gestures/drag/VisualElementDragControls.mjs","../node_modules/framer-motion/dist/es/gestures/drag/index.mjs","../node_modules/framer-motion/dist/es/gestures/pan/index.mjs","../node_modules/framer-motion/dist/es/components/AnimatePresence/use-presence.mjs","../node_modules/framer-motion/dist/es/projection/node/state.mjs","../node_modules/framer-motion/dist/es/projection/styles/scale-border-radius.mjs","../node_modules/framer-motion/dist/es/projection/styles/scale-box-shadow.mjs","../node_modules/framer-motion/dist/es/motion/features/layout/MeasureLayout.mjs","../node_modules/framer-motion/dist/es/projection/animation/mix-values.mjs","../node_modules/framer-motion/dist/es/projection/geometry/copy.mjs","../node_modules/framer-motion/dist/es/projection/geometry/delta-remove.mjs","../node_modules/framer-motion/dist/es/projection/geometry/utils.mjs","../node_modules/framer-motion/dist/es/projection/shared/stack.mjs","../node_modules/framer-motion/dist/es/projection/styles/transform.mjs","../node_modules/framer-motion/dist/es/render/utils/compare-by-depth.mjs","../node_modules/framer-motion/dist/es/render/utils/flat-tree.mjs","../node_modules/framer-motion/dist/es/utils/delay.mjs","../node_modules/framer-motion/dist/es/debug/record.mjs","../node_modules/framer-motion/dist/es/render/dom/utils/is-svg-element.mjs","../node_modules/framer-motion/dist/es/animation/interfaces/single-value.mjs","../node_modules/framer-motion/dist/es/projection/node/create-projection-node.mjs","../node_modules/framer-motion/dist/es/projection/node/DocumentProjectionNode.mjs","../node_modules/framer-motion/dist/es/projection/node/HTMLProjectionNode.mjs","../node_modules/framer-motion/dist/es/motion/features/drag.mjs","../node_modules/framer-motion/dist/es/utils/reduced-motion/state.mjs","../node_modules/framer-motion/dist/es/utils/reduced-motion/index.mjs","../node_modules/framer-motion/dist/es/render/utils/motion-values.mjs","../node_modules/framer-motion/dist/es/render/store.mjs","../node_modules/framer-motion/dist/es/render/dom/value-types/find.mjs","../node_modules/framer-motion/dist/es/render/VisualElement.mjs","../node_modules/framer-motion/dist/es/render/dom/DOMVisualElement.mjs","../node_modules/framer-motion/dist/es/render/html/HTMLVisualElement.mjs","../node_modules/framer-motion/dist/es/render/svg/SVGVisualElement.mjs","../node_modules/framer-motion/dist/es/render/dom/create-visual-element.mjs","../node_modules/framer-motion/dist/es/render/dom/motion.mjs","../node_modules/framer-motion/dist/es/motion/features/layout.mjs","../node_modules/framer-motion/dist/es/utils/use-is-mounted.mjs","../node_modules/framer-motion/dist/es/utils/use-force-update.mjs","../node_modules/framer-motion/dist/es/components/AnimatePresence/PopChild.mjs","../node_modules/framer-motion/dist/es/components/AnimatePresence/PresenceChild.mjs","../node_modules/framer-motion/dist/es/utils/use-unmount-effect.mjs","../node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs","../node_modules/framer-motion/dist/es/value/use-motion-value.mjs","../node_modules/framer-motion/dist/es/utils/transform.mjs","../node_modules/framer-motion/dist/es/value/use-combine-values.mjs","../node_modules/framer-motion/dist/es/value/use-computed.mjs","../node_modules/framer-motion/dist/es/value/use-transform.mjs","../node_modules/framer-motion/dist/es/render/dom/utils/resolve-element.mjs","../node_modules/framer-motion/dist/es/utils/reduced-motion/use-reduced-motion.mjs","../node_modules/framer-motion/dist/es/animation/utils/is-dom-keyframes.mjs","../node_modules/framer-motion/dist/es/animation/utils/create-visual-element.mjs","../node_modules/framer-motion/dist/es/easing/utils/create-generator-easing.mjs","../node_modules/framer-motion/dist/es/animation/sequence/utils/calc-time.mjs","../node_modules/framer-motion/dist/es/utils/wrap.mjs","../node_modules/framer-motion/dist/es/easing/utils/get-easing-for-segment.mjs","../node_modules/framer-motion/dist/es/animation/sequence/utils/edit.mjs","../node_modules/framer-motion/dist/es/animation/sequence/utils/sort.mjs","../node_modules/framer-motion/dist/es/animation/sequence/create.mjs","../node_modules/framer-motion/dist/es/animation/animate.mjs","../node_modules/@react-aria/utils/dist/useLayoutEffect.mjs","../node_modules/@react-aria/utils/dist/chain.mjs","../node_modules/@react-aria/utils/dist/platform.mjs","../node_modules/@react-aria/utils/dist/isScrollable.mjs","../node_modules/@react-aria/utils/dist/getScrollParent.mjs","../node_modules/react-modal-sheet/dist/index.mjs","../src/shared/hooks/useWindowDimensions.ts","../src/shared/components/Modal/index.tsx","../src/assets/terrible.png","../src/assets/bad.png","../src/assets/neutral.png","../src/assets/good.png","../src/assets/excelent.png","../src/shared/constants/data.ts","../src/shared/components/Input/index.tsx","../node_modules/imask/esm/core/utils.js","../node_modules/imask/esm/core/action-details.js","../node_modules/imask/esm/core/holder.js","../node_modules/imask/esm/masked/factory.js","../node_modules/imask/esm/controls/mask-element.js","../node_modules/imask/esm/controls/html-mask-element.js","../node_modules/imask/esm/controls/html-input-mask-element.js","../node_modules/imask/esm/controls/html-contenteditable-mask-element.js","../node_modules/imask/esm/controls/input-history.js","../node_modules/imask/esm/controls/input.js","../node_modules/imask/esm/core/change-details.js","../node_modules/imask/esm/core/continuous-tail-details.js","../node_modules/imask/esm/masked/base.js","../node_modules/imask/esm/masked/pattern/chunk-tail-details.js","../node_modules/imask/esm/masked/pattern/cursor.js","../node_modules/imask/esm/masked/pattern/fixed-definition.js","../node_modules/imask/esm/masked/pattern/input-definition.js","../node_modules/imask/esm/masked/regexp.js","../node_modules/imask/esm/masked/pattern.js","../node_modules/imask/esm/masked/range.js","../node_modules/imask/esm/masked/date.js","../node_modules/imask/esm/masked/dynamic.js","../node_modules/imask/esm/masked/enum.js","../node_modules/imask/esm/masked/function.js","../node_modules/imask/esm/masked/number.js","../node_modules/imask/esm/masked/pipe.js","../node_modules/imask/esm/masked/repeat.js","../node_modules/imask/esm/index.js","../node_modules/react-is/cjs/react-is.production.min.js","../node_modules/react-is/cjs/react-is.development.js","../node_modules/react-is/index.js","../node_modules/object-assign/index.js","../node_modules/prop-types/lib/ReactPropTypesSecret.js","../node_modules/prop-types/lib/has.js","../node_modules/prop-types/checkPropTypes.js","../node_modules/prop-types/factoryWithTypeCheckers.js","../node_modules/prop-types/factoryWithThrowingShims.js","../node_modules/prop-types/index.js","../node_modules/react-imask/esm/mixin.js","../node_modules/react-imask/esm/input.js","../src/shared/components/InputMask/index.tsx","../src/assets/close.png","../src/shared/components/FormContainer/index.tsx","../src/shared/components/Button/index.tsx","../src/components/FinalForm/index.tsx","../src/shared/hooks/useFeedback.ts","../src/shared/components/RateItem/index.tsx","../src/components/InitialContent/index.tsx","../src/assets/vector.png","../src/assets/check.png","../src/assets/delete.png","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/native.js","../node_modules/uuid/dist/esm-browser/v4.js","../src/components/FeedbackForm/index.tsx","../src/components/FeedBackModal/index.tsx","../src/components/Feedback/index.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","/**\n * @license React\n * react-jsx-runtime.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\nvar React = require('react');\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n// The Symbol used to tag the ReactElement-like types.\nvar REACT_ELEMENT_TYPE = Symbol.for('react.element');\nvar REACT_PORTAL_TYPE = Symbol.for('react.portal');\nvar REACT_FRAGMENT_TYPE = Symbol.for('react.fragment');\nvar REACT_STRICT_MODE_TYPE = Symbol.for('react.strict_mode');\nvar REACT_PROFILER_TYPE = Symbol.for('react.profiler');\nvar REACT_PROVIDER_TYPE = Symbol.for('react.provider');\nvar REACT_CONTEXT_TYPE = Symbol.for('react.context');\nvar REACT_FORWARD_REF_TYPE = Symbol.for('react.forward_ref');\nvar REACT_SUSPENSE_TYPE = Symbol.for('react.suspense');\nvar REACT_SUSPENSE_LIST_TYPE = Symbol.for('react.suspense_list');\nvar REACT_MEMO_TYPE = Symbol.for('react.memo');\nvar REACT_LAZY_TYPE = Symbol.for('react.lazy');\nvar REACT_OFFSCREEN_TYPE = Symbol.for('react.offscreen');\nvar MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nvar FAUX_ITERATOR_SYMBOL = '@@iterator';\nfunction getIteratorFn(maybeIterable) {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n\n  var maybeIterator = MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL];\n\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n\n  return null;\n}\n\nvar ReactSharedInternals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nfunction error(format) {\n  {\n    {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      printWarning('error', format, args);\n    }\n  }\n}\n\nfunction printWarning(level, format, args) {\n  // When changing this logic, you might want to also\n  // update consoleWithStackDev.www.js as well.\n  {\n    var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n    var stack = ReactDebugCurrentFrame.getStackAddendum();\n\n    if (stack !== '') {\n      format += '%s';\n      args = args.concat([stack]);\n    } // eslint-disable-next-line react-internal/safe-string-coercion\n\n\n    var argsWithFormat = args.map(function (item) {\n      return String(item);\n    }); // Careful: RN currently depends on this prefix\n\n    argsWithFormat.unshift('Warning: ' + format); // We intentionally don't use spread (or .apply) directly because it\n    // breaks IE9: https://github.com/facebook/react/issues/13610\n    // eslint-disable-next-line react-internal/no-production-logging\n\n    Function.prototype.apply.call(console[level], console, argsWithFormat);\n  }\n}\n\n// -----------------------------------------------------------------------------\n\nvar enableScopeAPI = false; // Experimental Create Event Handle API.\nvar enableCacheElement = false;\nvar enableTransitionTracing = false; // No known bugs, but needs performance testing\n\nvar enableLegacyHidden = false; // Enables unstable_avoidThisFallback feature in Fiber\n// stuff. Intended to enable React core members to more easily debug scheduling\n// issues in DEV builds.\n\nvar enableDebugTracing = false; // Track which Fiber(s) schedule render work.\n\nvar REACT_MODULE_REFERENCE;\n\n{\n  REACT_MODULE_REFERENCE = Symbol.for('react.module.reference');\n}\n\nfunction isValidElementType(type) {\n  if (typeof type === 'string' || typeof type === 'function') {\n    return true;\n  } // Note: typeof might be other than 'symbol' or 'number' (e.g. if it's a polyfill).\n\n\n  if (type === REACT_FRAGMENT_TYPE || type === REACT_PROFILER_TYPE || enableDebugTracing  || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || enableLegacyHidden  || type === REACT_OFFSCREEN_TYPE || enableScopeAPI  || enableCacheElement  || enableTransitionTracing ) {\n    return true;\n  }\n\n  if (typeof type === 'object' && type !== null) {\n    if (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || // This needs to include all possible module reference object\n    // types supported by any Flight configuration anywhere since\n    // we don't know which Flight build this will end up being used\n    // with.\n    type.$$typeof === REACT_MODULE_REFERENCE || type.getModuleId !== undefined) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction getWrappedName(outerType, innerType, wrapperName) {\n  var displayName = outerType.displayName;\n\n  if (displayName) {\n    return displayName;\n  }\n\n  var functionName = innerType.displayName || innerType.name || '';\n  return functionName !== '' ? wrapperName + \"(\" + functionName + \")\" : wrapperName;\n} // Keep in sync with react-reconciler/getComponentNameFromFiber\n\n\nfunction getContextName(type) {\n  return type.displayName || 'Context';\n} // Note that the reconciler package should generally prefer to use getComponentNameFromFiber() instead.\n\n\nfunction getComponentNameFromType(type) {\n  if (type == null) {\n    // Host root, text node or just invalid type.\n    return null;\n  }\n\n  {\n    if (typeof type.tag === 'number') {\n      error('Received an unexpected object in getComponentNameFromType(). ' + 'This is likely a bug in React. Please file an issue.');\n    }\n  }\n\n  if (typeof type === 'function') {\n    return type.displayName || type.name || null;\n  }\n\n  if (typeof type === 'string') {\n    return type;\n  }\n\n  switch (type) {\n    case REACT_FRAGMENT_TYPE:\n      return 'Fragment';\n\n    case REACT_PORTAL_TYPE:\n      return 'Portal';\n\n    case REACT_PROFILER_TYPE:\n      return 'Profiler';\n\n    case REACT_STRICT_MODE_TYPE:\n      return 'StrictMode';\n\n    case REACT_SUSPENSE_TYPE:\n      return 'Suspense';\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return 'SuspenseList';\n\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_CONTEXT_TYPE:\n        var context = type;\n        return getContextName(context) + '.Consumer';\n\n      case REACT_PROVIDER_TYPE:\n        var provider = type;\n        return getContextName(provider._context) + '.Provider';\n\n      case REACT_FORWARD_REF_TYPE:\n        return getWrappedName(type, type.render, 'ForwardRef');\n\n      case REACT_MEMO_TYPE:\n        var outerName = type.displayName || null;\n\n        if (outerName !== null) {\n          return outerName;\n        }\n\n        return getComponentNameFromType(type.type) || 'Memo';\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            return getComponentNameFromType(init(payload));\n          } catch (x) {\n            return null;\n          }\n        }\n\n      // eslint-disable-next-line no-fallthrough\n    }\n  }\n\n  return null;\n}\n\nvar assign = Object.assign;\n\n// Helpers to patch console.logs to avoid logging during side-effect free\n// replaying on render function. This currently only patches the object\n// lazily which won't cover if the log function was extracted eagerly.\n// We could also eagerly patch the method.\nvar disabledDepth = 0;\nvar prevLog;\nvar prevInfo;\nvar prevWarn;\nvar prevError;\nvar prevGroup;\nvar prevGroupCollapsed;\nvar prevGroupEnd;\n\nfunction disabledLog() {}\n\ndisabledLog.__reactDisabledLog = true;\nfunction disableLogs() {\n  {\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      prevLog = console.log;\n      prevInfo = console.info;\n      prevWarn = console.warn;\n      prevError = console.error;\n      prevGroup = console.group;\n      prevGroupCollapsed = console.groupCollapsed;\n      prevGroupEnd = console.groupEnd; // https://github.com/facebook/react/issues/19099\n\n      var props = {\n        configurable: true,\n        enumerable: true,\n        value: disabledLog,\n        writable: true\n      }; // $FlowFixMe Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        info: props,\n        log: props,\n        warn: props,\n        error: props,\n        group: props,\n        groupCollapsed: props,\n        groupEnd: props\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    disabledDepth++;\n  }\n}\nfunction reenableLogs() {\n  {\n    disabledDepth--;\n\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      var props = {\n        configurable: true,\n        enumerable: true,\n        writable: true\n      }; // $FlowFixMe Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        log: assign({}, props, {\n          value: prevLog\n        }),\n        info: assign({}, props, {\n          value: prevInfo\n        }),\n        warn: assign({}, props, {\n          value: prevWarn\n        }),\n        error: assign({}, props, {\n          value: prevError\n        }),\n        group: assign({}, props, {\n          value: prevGroup\n        }),\n        groupCollapsed: assign({}, props, {\n          value: prevGroupCollapsed\n        }),\n        groupEnd: assign({}, props, {\n          value: prevGroupEnd\n        })\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    if (disabledDepth < 0) {\n      error('disabledDepth fell below zero. ' + 'This is a bug in React. Please file an issue.');\n    }\n  }\n}\n\nvar ReactCurrentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\nvar prefix;\nfunction describeBuiltInComponentFrame(name, source, ownerFn) {\n  {\n    if (prefix === undefined) {\n      // Extract the VM specific prefix used by each line.\n      try {\n        throw Error();\n      } catch (x) {\n        var match = x.stack.trim().match(/\\n( *(at )?)/);\n        prefix = match && match[1] || '';\n      }\n    } // We use the prefix to ensure our stacks line up with native stack frames.\n\n\n    return '\\n' + prefix + name;\n  }\n}\nvar reentry = false;\nvar componentFrameCache;\n\n{\n  var PossiblyWeakMap = typeof WeakMap === 'function' ? WeakMap : Map;\n  componentFrameCache = new PossiblyWeakMap();\n}\n\nfunction describeNativeComponentFrame(fn, construct) {\n  // If something asked for a stack inside a fake render, it should get ignored.\n  if ( !fn || reentry) {\n    return '';\n  }\n\n  {\n    var frame = componentFrameCache.get(fn);\n\n    if (frame !== undefined) {\n      return frame;\n    }\n  }\n\n  var control;\n  reentry = true;\n  var previousPrepareStackTrace = Error.prepareStackTrace; // $FlowFixMe It does accept undefined.\n\n  Error.prepareStackTrace = undefined;\n  var previousDispatcher;\n\n  {\n    previousDispatcher = ReactCurrentDispatcher.current; // Set the dispatcher in DEV because this might be call in the render function\n    // for warnings.\n\n    ReactCurrentDispatcher.current = null;\n    disableLogs();\n  }\n\n  try {\n    // This should throw.\n    if (construct) {\n      // Something should be setting the props in the constructor.\n      var Fake = function () {\n        throw Error();\n      }; // $FlowFixMe\n\n\n      Object.defineProperty(Fake.prototype, 'props', {\n        set: function () {\n          // We use a throwing setter instead of frozen or non-writable props\n          // because that won't throw in a non-strict mode function.\n          throw Error();\n        }\n      });\n\n      if (typeof Reflect === 'object' && Reflect.construct) {\n        // We construct a different control for this case to include any extra\n        // frames added by the construct call.\n        try {\n          Reflect.construct(Fake, []);\n        } catch (x) {\n          control = x;\n        }\n\n        Reflect.construct(fn, [], Fake);\n      } else {\n        try {\n          Fake.call();\n        } catch (x) {\n          control = x;\n        }\n\n        fn.call(Fake.prototype);\n      }\n    } else {\n      try {\n        throw Error();\n      } catch (x) {\n        control = x;\n      }\n\n      fn();\n    }\n  } catch (sample) {\n    // This is inlined manually because closure doesn't do it for us.\n    if (sample && control && typeof sample.stack === 'string') {\n      // This extracts the first frame from the sample that isn't also in the control.\n      // Skipping one frame that we assume is the frame that calls the two.\n      var sampleLines = sample.stack.split('\\n');\n      var controlLines = control.stack.split('\\n');\n      var s = sampleLines.length - 1;\n      var c = controlLines.length - 1;\n\n      while (s >= 1 && c >= 0 && sampleLines[s] !== controlLines[c]) {\n        // We expect at least one stack frame to be shared.\n        // Typically this will be the root most one. However, stack frames may be\n        // cut off due to maximum stack limits. In this case, one maybe cut off\n        // earlier than the other. We assume that the sample is longer or the same\n        // and there for cut off earlier. So we should find the root most frame in\n        // the sample somewhere in the control.\n        c--;\n      }\n\n      for (; s >= 1 && c >= 0; s--, c--) {\n        // Next we find the first one that isn't the same which should be the\n        // frame that called our sample function and the control.\n        if (sampleLines[s] !== controlLines[c]) {\n          // In V8, the first line is describing the message but other VMs don't.\n          // If we're about to return the first line, and the control is also on the same\n          // line, that's a pretty good indicator that our sample threw at same line as\n          // the control. I.e. before we entered the sample frame. So we ignore this result.\n          // This can happen if you passed a class to function component, or non-function.\n          if (s !== 1 || c !== 1) {\n            do {\n              s--;\n              c--; // We may still have similar intermediate frames from the construct call.\n              // The next one that isn't the same should be our match though.\n\n              if (c < 0 || sampleLines[s] !== controlLines[c]) {\n                // V8 adds a \"new\" prefix for native classes. Let's remove it to make it prettier.\n                var _frame = '\\n' + sampleLines[s].replace(' at new ', ' at '); // If our component frame is labeled \"<anonymous>\"\n                // but we have a user-provided \"displayName\"\n                // splice it in to make the stack more readable.\n\n\n                if (fn.displayName && _frame.includes('<anonymous>')) {\n                  _frame = _frame.replace('<anonymous>', fn.displayName);\n                }\n\n                {\n                  if (typeof fn === 'function') {\n                    componentFrameCache.set(fn, _frame);\n                  }\n                } // Return the line we found.\n\n\n                return _frame;\n              }\n            } while (s >= 1 && c >= 0);\n          }\n\n          break;\n        }\n      }\n    }\n  } finally {\n    reentry = false;\n\n    {\n      ReactCurrentDispatcher.current = previousDispatcher;\n      reenableLogs();\n    }\n\n    Error.prepareStackTrace = previousPrepareStackTrace;\n  } // Fallback to just using the name if we couldn't make it throw.\n\n\n  var name = fn ? fn.displayName || fn.name : '';\n  var syntheticFrame = name ? describeBuiltInComponentFrame(name) : '';\n\n  {\n    if (typeof fn === 'function') {\n      componentFrameCache.set(fn, syntheticFrame);\n    }\n  }\n\n  return syntheticFrame;\n}\nfunction describeFunctionComponentFrame(fn, source, ownerFn) {\n  {\n    return describeNativeComponentFrame(fn, false);\n  }\n}\n\nfunction shouldConstruct(Component) {\n  var prototype = Component.prototype;\n  return !!(prototype && prototype.isReactComponent);\n}\n\nfunction describeUnknownElementTypeFrameInDEV(type, source, ownerFn) {\n\n  if (type == null) {\n    return '';\n  }\n\n  if (typeof type === 'function') {\n    {\n      return describeNativeComponentFrame(type, shouldConstruct(type));\n    }\n  }\n\n  if (typeof type === 'string') {\n    return describeBuiltInComponentFrame(type);\n  }\n\n  switch (type) {\n    case REACT_SUSPENSE_TYPE:\n      return describeBuiltInComponentFrame('Suspense');\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return describeBuiltInComponentFrame('SuspenseList');\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_FORWARD_REF_TYPE:\n        return describeFunctionComponentFrame(type.render);\n\n      case REACT_MEMO_TYPE:\n        // Memo may contain any component type so we recursively resolve it.\n        return describeUnknownElementTypeFrameInDEV(type.type, source, ownerFn);\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            // Lazy may contain any component type so we recursively resolve it.\n            return describeUnknownElementTypeFrameInDEV(init(payload), source, ownerFn);\n          } catch (x) {}\n        }\n    }\n  }\n\n  return '';\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar loggedTypeFailures = {};\nvar ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n\nfunction setCurrentlyValidatingElement(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n      ReactDebugCurrentFrame.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame.setExtraStackFrame(null);\n    }\n  }\n}\n\nfunction checkPropTypes(typeSpecs, values, location, componentName, element) {\n  {\n    // $FlowFixMe This is okay but Flow doesn't know it.\n    var has = Function.call.bind(hasOwnProperty);\n\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error$1 = void 0; // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            // eslint-disable-next-line react-internal/prod-error-codes\n            var err = Error((componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' + 'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.');\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n\n          error$1 = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED');\n        } catch (ex) {\n          error$1 = ex;\n        }\n\n        if (error$1 && !(error$1 instanceof Error)) {\n          setCurrentlyValidatingElement(element);\n\n          error('%s: type specification of %s' + ' `%s` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a %s. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).', componentName || 'React class', location, typeSpecName, typeof error$1);\n\n          setCurrentlyValidatingElement(null);\n        }\n\n        if (error$1 instanceof Error && !(error$1.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error$1.message] = true;\n          setCurrentlyValidatingElement(element);\n\n          error('Failed %s type: %s', location, error$1.message);\n\n          setCurrentlyValidatingElement(null);\n        }\n      }\n    }\n  }\n}\n\nvar isArrayImpl = Array.isArray; // eslint-disable-next-line no-redeclare\n\nfunction isArray(a) {\n  return isArrayImpl(a);\n}\n\n/*\n * The `'' + value` pattern (used in in perf-sensitive code) throws for Symbol\n * and Temporal.* types. See https://github.com/facebook/react/pull/22064.\n *\n * The functions in this module will throw an easier-to-understand,\n * easier-to-debug exception with a clear errors message message explaining the\n * problem. (Instead of a confusing exception thrown inside the implementation\n * of the `value` object).\n */\n// $FlowFixMe only called in DEV, so void return is not possible.\nfunction typeName(value) {\n  {\n    // toStringTag is needed for namespaced types like Temporal.Instant\n    var hasToStringTag = typeof Symbol === 'function' && Symbol.toStringTag;\n    var type = hasToStringTag && value[Symbol.toStringTag] || value.constructor.name || 'Object';\n    return type;\n  }\n} // $FlowFixMe only called in DEV, so void return is not possible.\n\n\nfunction willCoercionThrow(value) {\n  {\n    try {\n      testStringCoercion(value);\n      return false;\n    } catch (e) {\n      return true;\n    }\n  }\n}\n\nfunction testStringCoercion(value) {\n  // If you ended up here by following an exception call stack, here's what's\n  // happened: you supplied an object or symbol value to React (as a prop, key,\n  // DOM attribute, CSS property, string ref, etc.) and when React tried to\n  // coerce it to a string using `'' + value`, an exception was thrown.\n  //\n  // The most common types that will cause this exception are `Symbol` instances\n  // and Temporal objects like `Temporal.Instant`. But any object that has a\n  // `valueOf` or `[Symbol.toPrimitive]` method that throws will also cause this\n  // exception. (Library authors do this to prevent users from using built-in\n  // numeric operators like `+` or comparison operators like `>=` because custom\n  // methods are needed to perform accurate arithmetic or comparison.)\n  //\n  // To fix the problem, coerce this object or symbol value to a string before\n  // passing it to React. The most reliable way is usually `String(value)`.\n  //\n  // To find which value is throwing, check the browser or debugger console.\n  // Before this exception was thrown, there should be `console.error` output\n  // that shows the type (Symbol, Temporal.PlainDate, etc.) that caused the\n  // problem and how that type was used: key, atrribute, input value prop, etc.\n  // In most cases, this console output also shows the component and its\n  // ancestor components where the exception happened.\n  //\n  // eslint-disable-next-line react-internal/safe-string-coercion\n  return '' + value;\n}\nfunction checkKeyStringCoercion(value) {\n  {\n    if (willCoercionThrow(value)) {\n      error('The provided key is an unsupported type %s.' + ' This value must be coerced to a string before before using it here.', typeName(value));\n\n      return testStringCoercion(value); // throw (to help callers find troubleshooting comments)\n    }\n  }\n}\n\nvar ReactCurrentOwner = ReactSharedInternals.ReactCurrentOwner;\nvar RESERVED_PROPS = {\n  key: true,\n  ref: true,\n  __self: true,\n  __source: true\n};\nvar specialPropKeyWarningShown;\nvar specialPropRefWarningShown;\nvar didWarnAboutStringRefs;\n\n{\n  didWarnAboutStringRefs = {};\n}\n\nfunction hasValidRef(config) {\n  {\n    if (hasOwnProperty.call(config, 'ref')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'ref').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.ref !== undefined;\n}\n\nfunction hasValidKey(config) {\n  {\n    if (hasOwnProperty.call(config, 'key')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'key').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.key !== undefined;\n}\n\nfunction warnIfStringRefCannotBeAutoConverted(config, self) {\n  {\n    if (typeof config.ref === 'string' && ReactCurrentOwner.current && self && ReactCurrentOwner.current.stateNode !== self) {\n      var componentName = getComponentNameFromType(ReactCurrentOwner.current.type);\n\n      if (!didWarnAboutStringRefs[componentName]) {\n        error('Component \"%s\" contains the string ref \"%s\". ' + 'Support for string refs will be removed in a future major release. ' + 'This case cannot be automatically converted to an arrow function. ' + 'We ask you to manually fix this case by using useRef() or createRef() instead. ' + 'Learn more about using refs safely here: ' + 'https://reactjs.org/link/strict-mode-string-ref', getComponentNameFromType(ReactCurrentOwner.current.type), config.ref);\n\n        didWarnAboutStringRefs[componentName] = true;\n      }\n    }\n  }\n}\n\nfunction defineKeyPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingKey = function () {\n      if (!specialPropKeyWarningShown) {\n        specialPropKeyWarningShown = true;\n\n        error('%s: `key` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingKey.isReactWarning = true;\n    Object.defineProperty(props, 'key', {\n      get: warnAboutAccessingKey,\n      configurable: true\n    });\n  }\n}\n\nfunction defineRefPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingRef = function () {\n      if (!specialPropRefWarningShown) {\n        specialPropRefWarningShown = true;\n\n        error('%s: `ref` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingRef.isReactWarning = true;\n    Object.defineProperty(props, 'ref', {\n      get: warnAboutAccessingRef,\n      configurable: true\n    });\n  }\n}\n/**\n * Factory method to create a new React element. This no longer adheres to\n * the class pattern, so do not use new to call it. Also, instanceof check\n * will not work. Instead test $$typeof field against Symbol.for('react.element') to check\n * if something is a React Element.\n *\n * @param {*} type\n * @param {*} props\n * @param {*} key\n * @param {string|object} ref\n * @param {*} owner\n * @param {*} self A *temporary* helper to detect places where `this` is\n * different from the `owner` when React.createElement is called, so that we\n * can warn. We want to get rid of owner and replace string `ref`s with arrow\n * functions, and as long as `this` and owner are the same, there will be no\n * change in behavior.\n * @param {*} source An annotation object (added by a transpiler or otherwise)\n * indicating filename, line number, and/or other information.\n * @internal\n */\n\n\nvar ReactElement = function (type, key, ref, self, source, owner, props) {\n  var element = {\n    // This tag allows us to uniquely identify this as a React Element\n    $$typeof: REACT_ELEMENT_TYPE,\n    // Built-in properties that belong on the element\n    type: type,\n    key: key,\n    ref: ref,\n    props: props,\n    // Record the component responsible for creating this element.\n    _owner: owner\n  };\n\n  {\n    // The validation flag is currently mutative. We put it on\n    // an external backing store so that we can freeze the whole object.\n    // This can be replaced with a WeakMap once they are implemented in\n    // commonly used development environments.\n    element._store = {}; // To make comparing ReactElements easier for testing purposes, we make\n    // the validation flag non-enumerable (where possible, which should\n    // include every environment we run tests in), so the test framework\n    // ignores it.\n\n    Object.defineProperty(element._store, 'validated', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: false\n    }); // self and source are DEV only properties.\n\n    Object.defineProperty(element, '_self', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: self\n    }); // Two elements created in two different places should be considered\n    // equal for testing purposes and therefore we hide it from enumeration.\n\n    Object.defineProperty(element, '_source', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: source\n    });\n\n    if (Object.freeze) {\n      Object.freeze(element.props);\n      Object.freeze(element);\n    }\n  }\n\n  return element;\n};\n/**\n * https://github.com/reactjs/rfcs/pull/107\n * @param {*} type\n * @param {object} props\n * @param {string} key\n */\n\nfunction jsxDEV(type, config, maybeKey, source, self) {\n  {\n    var propName; // Reserved names are extracted\n\n    var props = {};\n    var key = null;\n    var ref = null; // Currently, key can be spread in as a prop. This causes a potential\n    // issue if key is also explicitly declared (ie. <div {...props} key=\"Hi\" />\n    // or <div key=\"Hi\" {...props} /> ). We want to deprecate key spread,\n    // but as an intermediary step, we will use jsxDEV for everything except\n    // <div {...props} key=\"Hi\" />, because we aren't currently able to tell if\n    // key is explicitly declared to be undefined or not.\n\n    if (maybeKey !== undefined) {\n      {\n        checkKeyStringCoercion(maybeKey);\n      }\n\n      key = '' + maybeKey;\n    }\n\n    if (hasValidKey(config)) {\n      {\n        checkKeyStringCoercion(config.key);\n      }\n\n      key = '' + config.key;\n    }\n\n    if (hasValidRef(config)) {\n      ref = config.ref;\n      warnIfStringRefCannotBeAutoConverted(config, self);\n    } // Remaining properties are added to a new props object\n\n\n    for (propName in config) {\n      if (hasOwnProperty.call(config, propName) && !RESERVED_PROPS.hasOwnProperty(propName)) {\n        props[propName] = config[propName];\n      }\n    } // Resolve default props\n\n\n    if (type && type.defaultProps) {\n      var defaultProps = type.defaultProps;\n\n      for (propName in defaultProps) {\n        if (props[propName] === undefined) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    }\n\n    if (key || ref) {\n      var displayName = typeof type === 'function' ? type.displayName || type.name || 'Unknown' : type;\n\n      if (key) {\n        defineKeyPropWarningGetter(props, displayName);\n      }\n\n      if (ref) {\n        defineRefPropWarningGetter(props, displayName);\n      }\n    }\n\n    return ReactElement(type, key, ref, self, source, ReactCurrentOwner.current, props);\n  }\n}\n\nvar ReactCurrentOwner$1 = ReactSharedInternals.ReactCurrentOwner;\nvar ReactDebugCurrentFrame$1 = ReactSharedInternals.ReactDebugCurrentFrame;\n\nfunction setCurrentlyValidatingElement$1(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n      ReactDebugCurrentFrame$1.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame$1.setExtraStackFrame(null);\n    }\n  }\n}\n\nvar propTypesMisspellWarningShown;\n\n{\n  propTypesMisspellWarningShown = false;\n}\n/**\n * Verifies the object is a ReactElement.\n * See https://reactjs.org/docs/react-api.html#isvalidelement\n * @param {?object} object\n * @return {boolean} True if `object` is a ReactElement.\n * @final\n */\n\n\nfunction isValidElement(object) {\n  {\n    return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n  }\n}\n\nfunction getDeclarationErrorAddendum() {\n  {\n    if (ReactCurrentOwner$1.current) {\n      var name = getComponentNameFromType(ReactCurrentOwner$1.current.type);\n\n      if (name) {\n        return '\\n\\nCheck the render method of `' + name + '`.';\n      }\n    }\n\n    return '';\n  }\n}\n\nfunction getSourceInfoErrorAddendum(source) {\n  {\n    if (source !== undefined) {\n      var fileName = source.fileName.replace(/^.*[\\\\\\/]/, '');\n      var lineNumber = source.lineNumber;\n      return '\\n\\nCheck your code at ' + fileName + ':' + lineNumber + '.';\n    }\n\n    return '';\n  }\n}\n/**\n * Warn if there's no key explicitly set on dynamic arrays of children or\n * object keys are not valid. This allows us to keep track of children between\n * updates.\n */\n\n\nvar ownerHasKeyUseWarning = {};\n\nfunction getCurrentComponentErrorInfo(parentType) {\n  {\n    var info = getDeclarationErrorAddendum();\n\n    if (!info) {\n      var parentName = typeof parentType === 'string' ? parentType : parentType.displayName || parentType.name;\n\n      if (parentName) {\n        info = \"\\n\\nCheck the top-level render call using <\" + parentName + \">.\";\n      }\n    }\n\n    return info;\n  }\n}\n/**\n * Warn if the element doesn't have an explicit key assigned to it.\n * This element is in an array. The array could grow and shrink or be\n * reordered. All children that haven't already been validated are required to\n * have a \"key\" property assigned to it. Error statuses are cached so a warning\n * will only be shown once.\n *\n * @internal\n * @param {ReactElement} element Element that requires a key.\n * @param {*} parentType element's parent's type.\n */\n\n\nfunction validateExplicitKey(element, parentType) {\n  {\n    if (!element._store || element._store.validated || element.key != null) {\n      return;\n    }\n\n    element._store.validated = true;\n    var currentComponentErrorInfo = getCurrentComponentErrorInfo(parentType);\n\n    if (ownerHasKeyUseWarning[currentComponentErrorInfo]) {\n      return;\n    }\n\n    ownerHasKeyUseWarning[currentComponentErrorInfo] = true; // Usually the current owner is the offender, but if it accepts children as a\n    // property, it may be the creator of the child that's responsible for\n    // assigning it a key.\n\n    var childOwner = '';\n\n    if (element && element._owner && element._owner !== ReactCurrentOwner$1.current) {\n      // Give the component that originally created this child.\n      childOwner = \" It was passed a child from \" + getComponentNameFromType(element._owner.type) + \".\";\n    }\n\n    setCurrentlyValidatingElement$1(element);\n\n    error('Each child in a list should have a unique \"key\" prop.' + '%s%s See https://reactjs.org/link/warning-keys for more information.', currentComponentErrorInfo, childOwner);\n\n    setCurrentlyValidatingElement$1(null);\n  }\n}\n/**\n * Ensure that every element either is passed in a static location, in an\n * array with an explicit keys property defined, or in an object literal\n * with valid key property.\n *\n * @internal\n * @param {ReactNode} node Statically passed child of any type.\n * @param {*} parentType node's parent's type.\n */\n\n\nfunction validateChildKeys(node, parentType) {\n  {\n    if (typeof node !== 'object') {\n      return;\n    }\n\n    if (isArray(node)) {\n      for (var i = 0; i < node.length; i++) {\n        var child = node[i];\n\n        if (isValidElement(child)) {\n          validateExplicitKey(child, parentType);\n        }\n      }\n    } else if (isValidElement(node)) {\n      // This element was passed in a valid location.\n      if (node._store) {\n        node._store.validated = true;\n      }\n    } else if (node) {\n      var iteratorFn = getIteratorFn(node);\n\n      if (typeof iteratorFn === 'function') {\n        // Entry iterators used to provide implicit keys,\n        // but now we print a separate warning for them later.\n        if (iteratorFn !== node.entries) {\n          var iterator = iteratorFn.call(node);\n          var step;\n\n          while (!(step = iterator.next()).done) {\n            if (isValidElement(step.value)) {\n              validateExplicitKey(step.value, parentType);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n/**\n * Given an element, validate that its props follow the propTypes definition,\n * provided by the type.\n *\n * @param {ReactElement} element\n */\n\n\nfunction validatePropTypes(element) {\n  {\n    var type = element.type;\n\n    if (type === null || type === undefined || typeof type === 'string') {\n      return;\n    }\n\n    var propTypes;\n\n    if (typeof type === 'function') {\n      propTypes = type.propTypes;\n    } else if (typeof type === 'object' && (type.$$typeof === REACT_FORWARD_REF_TYPE || // Note: Memo only checks outer props here.\n    // Inner props are checked in the reconciler.\n    type.$$typeof === REACT_MEMO_TYPE)) {\n      propTypes = type.propTypes;\n    } else {\n      return;\n    }\n\n    if (propTypes) {\n      // Intentionally inside to avoid triggering lazy initializers:\n      var name = getComponentNameFromType(type);\n      checkPropTypes(propTypes, element.props, 'prop', name, element);\n    } else if (type.PropTypes !== undefined && !propTypesMisspellWarningShown) {\n      propTypesMisspellWarningShown = true; // Intentionally inside to avoid triggering lazy initializers:\n\n      var _name = getComponentNameFromType(type);\n\n      error('Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?', _name || 'Unknown');\n    }\n\n    if (typeof type.getDefaultProps === 'function' && !type.getDefaultProps.isReactClassApproved) {\n      error('getDefaultProps is only used on classic React.createClass ' + 'definitions. Use a static property named `defaultProps` instead.');\n    }\n  }\n}\n/**\n * Given a fragment, validate that it can only be provided with fragment props\n * @param {ReactElement} fragment\n */\n\n\nfunction validateFragmentProps(fragment) {\n  {\n    var keys = Object.keys(fragment.props);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n\n      if (key !== 'children' && key !== 'key') {\n        setCurrentlyValidatingElement$1(fragment);\n\n        error('Invalid prop `%s` supplied to `React.Fragment`. ' + 'React.Fragment can only have `key` and `children` props.', key);\n\n        setCurrentlyValidatingElement$1(null);\n        break;\n      }\n    }\n\n    if (fragment.ref !== null) {\n      setCurrentlyValidatingElement$1(fragment);\n\n      error('Invalid attribute `ref` supplied to `React.Fragment`.');\n\n      setCurrentlyValidatingElement$1(null);\n    }\n  }\n}\n\nvar didWarnAboutKeySpread = {};\nfunction jsxWithValidation(type, props, key, isStaticChildren, source, self) {\n  {\n    var validType = isValidElementType(type); // We warn in this case but don't throw. We expect the element creation to\n    // succeed and there will likely be errors in render.\n\n    if (!validType) {\n      var info = '';\n\n      if (type === undefined || typeof type === 'object' && type !== null && Object.keys(type).length === 0) {\n        info += ' You likely forgot to export your component from the file ' + \"it's defined in, or you might have mixed up default and named imports.\";\n      }\n\n      var sourceInfo = getSourceInfoErrorAddendum(source);\n\n      if (sourceInfo) {\n        info += sourceInfo;\n      } else {\n        info += getDeclarationErrorAddendum();\n      }\n\n      var typeString;\n\n      if (type === null) {\n        typeString = 'null';\n      } else if (isArray(type)) {\n        typeString = 'array';\n      } else if (type !== undefined && type.$$typeof === REACT_ELEMENT_TYPE) {\n        typeString = \"<\" + (getComponentNameFromType(type.type) || 'Unknown') + \" />\";\n        info = ' Did you accidentally export a JSX literal instead of a component?';\n      } else {\n        typeString = typeof type;\n      }\n\n      error('React.jsx: type is invalid -- expected a string (for ' + 'built-in components) or a class/function (for composite ' + 'components) but got: %s.%s', typeString, info);\n    }\n\n    var element = jsxDEV(type, props, key, source, self); // The result can be nullish if a mock or a custom function is used.\n    // TODO: Drop this when these are no longer allowed as the type argument.\n\n    if (element == null) {\n      return element;\n    } // Skip key warning if the type isn't valid since our key validation logic\n    // doesn't expect a non-string/function type and can throw confusing errors.\n    // We don't want exception behavior to differ between dev and prod.\n    // (Rendering will throw with a helpful message and as soon as the type is\n    // fixed, the key warnings will appear.)\n\n\n    if (validType) {\n      var children = props.children;\n\n      if (children !== undefined) {\n        if (isStaticChildren) {\n          if (isArray(children)) {\n            for (var i = 0; i < children.length; i++) {\n              validateChildKeys(children[i], type);\n            }\n\n            if (Object.freeze) {\n              Object.freeze(children);\n            }\n          } else {\n            error('React.jsx: Static children should always be an array. ' + 'You are likely explicitly calling React.jsxs or React.jsxDEV. ' + 'Use the Babel transform instead.');\n          }\n        } else {\n          validateChildKeys(children, type);\n        }\n      }\n    }\n\n    {\n      if (hasOwnProperty.call(props, 'key')) {\n        var componentName = getComponentNameFromType(type);\n        var keys = Object.keys(props).filter(function (k) {\n          return k !== 'key';\n        });\n        var beforeExample = keys.length > 0 ? '{key: someKey, ' + keys.join(': ..., ') + ': ...}' : '{key: someKey}';\n\n        if (!didWarnAboutKeySpread[componentName + beforeExample]) {\n          var afterExample = keys.length > 0 ? '{' + keys.join(': ..., ') + ': ...}' : '{}';\n\n          error('A props object containing a \"key\" prop is being spread into JSX:\\n' + '  let props = %s;\\n' + '  <%s {...props} />\\n' + 'React keys must be passed directly to JSX without using spread:\\n' + '  let props = %s;\\n' + '  <%s key={someKey} {...props} />', beforeExample, componentName, afterExample, componentName);\n\n          didWarnAboutKeySpread[componentName + beforeExample] = true;\n        }\n      }\n    }\n\n    if (type === REACT_FRAGMENT_TYPE) {\n      validateFragmentProps(element);\n    } else {\n      validatePropTypes(element);\n    }\n\n    return element;\n  }\n} // These two functions exist to still get child warnings in dev\n// even with the prod transform. This means that jsxDEV is purely\n// opt-in behavior for better messages but that we won't stop\n// giving you warnings if you use production apis.\n\nfunction jsxWithValidationStatic(type, props, key) {\n  {\n    return jsxWithValidation(type, props, key, true);\n  }\n}\nfunction jsxWithValidationDynamic(type, props, key) {\n  {\n    return jsxWithValidation(type, props, key, false);\n  }\n}\n\nvar jsx =  jsxWithValidationDynamic ; // we may want to special case jsxs internally to take advantage of static children.\n// for now we can ship identical prod functions\n\nvar jsxs =  jsxWithValidationStatic ;\n\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsx = jsx;\nexports.jsxs = jsxs;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","import { FC, createContext, useState } from \"react\";\n\nexport interface IFeedBackContext {\n    rateValue: number | null;\n    text: string;\n    stage: number;\n    onChangeStage: (stage: number) => void;\n    onChangeRate: (value: number) => void;\n    onSetText: (value: string) => void;\n}\n\nconst FeedBackContext = createContext<IFeedBackContext | null>(null);\n\ninterface FeedBackProviderProps {\n    children: React.ReactNode;\n}\n\nconst FeedBackProvider: FC<FeedBackProviderProps> = ({ children }) => {\n    const [rateValue, setRateValue] = useState<number | null>(null);\n    const [stage, setStage] = useState(0);\n    const [text, setText] = useState(\"\");\n\n    const onChangeRate = (value: number) => {\n        setRateValue(value);\n    };\n\n    const onSetText = (value: string) => {\n        setText(value);\n    };\n\n    const onChangeStage = (value: number) => {\n        setStage(value);\n    };\n\n    return (\n        <FeedBackContext.Provider\n            value={{\n                rateValue,\n                text,\n                stage,\n                onChangeStage,\n                onSetText,\n                onChangeRate,\n            }}\n        >\n            {children}\n        </FeedBackContext.Provider>\n    );\n};\n\nexport { FeedBackProvider, FeedBackContext };\n","import { createContext } from 'react';\n\n/**\n * @public\n */\nconst MotionConfigContext = createContext({\n    transformPagePoint: (p) => p,\n    isStatic: false,\n    reducedMotion: \"never\",\n});\n\nexport { MotionConfigContext };\n","import { createContext } from 'react';\n\nconst MotionContext = createContext({});\n\nexport { MotionContext };\n","import { createContext } from 'react';\n\n/**\n * @public\n */\nconst PresenceContext = createContext(null);\n\nexport { PresenceContext };\n","const isBrowser = typeof document !== \"undefined\";\n\nexport { isBrowser };\n","import { useLayoutEffect, useEffect } from 'react';\nimport { isBrowser } from './is-browser.mjs';\n\nconst useIsomorphicLayoutEffect = isBrowser ? useLayoutEffect : useEffect;\n\nexport { useIsomorphicLayoutEffect };\n","import { createContext } from 'react';\n\nconst LazyContext = createContext({ strict: false });\n\nexport { LazyContext };\n","/**\n * Convert camelCase to dash-case properties.\n */\nconst camelToDash = (str) => str.replace(/([a-z])([A-Z])/gu, \"$1-$2\").toLowerCase();\n\nexport { camelToDash };\n","import { camelToDash } from '../../render/dom/utils/camel-to-dash.mjs';\n\nconst optimizedAppearDataId = \"framerAppearId\";\nconst optimizedAppearDataAttribute = \"data-\" + camelToDash(optimizedAppearDataId);\n\nexport { optimizedAppearDataAttribute, optimizedAppearDataId };\n","const MotionGlobalConfig = {\n    skipAnimations: false,\n    useManualTiming: false,\n};\n\nexport { MotionGlobalConfig };\n","class Queue {\n    constructor() {\n        this.order = [];\n        this.scheduled = new Set();\n    }\n    add(process) {\n        if (!this.scheduled.has(process)) {\n            this.scheduled.add(process);\n            this.order.push(process);\n            return true;\n        }\n    }\n    remove(process) {\n        const index = this.order.indexOf(process);\n        if (index !== -1) {\n            this.order.splice(index, 1);\n            this.scheduled.delete(process);\n        }\n    }\n    clear() {\n        this.order.length = 0;\n        this.scheduled.clear();\n    }\n}\nfunction createRenderStep(runNextFrame) {\n    /**\n     * We create and reuse two queues, one to queue jobs for the current frame\n     * and one for the next. We reuse to avoid triggering GC after x frames.\n     */\n    let thisFrame = new Queue();\n    let nextFrame = new Queue();\n    let numToRun = 0;\n    /**\n     * Track whether we're currently processing jobs in this step. This way\n     * we can decide whether to schedule new jobs for this frame or next.\n     */\n    let isProcessing = false;\n    let flushNextFrame = false;\n    /**\n     * A set of processes which were marked keepAlive when scheduled.\n     */\n    const toKeepAlive = new WeakSet();\n    const step = {\n        /**\n         * Schedule a process to run on the next frame.\n         */\n        schedule: (callback, keepAlive = false, immediate = false) => {\n            const addToCurrentFrame = immediate && isProcessing;\n            const queue = addToCurrentFrame ? thisFrame : nextFrame;\n            if (keepAlive)\n                toKeepAlive.add(callback);\n            if (queue.add(callback) && addToCurrentFrame && isProcessing) {\n                // If we're adding it to the currently running queue, update its measured size\n                numToRun = thisFrame.order.length;\n            }\n            return callback;\n        },\n        /**\n         * Cancel the provided callback from running on the next frame.\n         */\n        cancel: (callback) => {\n            nextFrame.remove(callback);\n            toKeepAlive.delete(callback);\n        },\n        /**\n         * Execute all schedule callbacks.\n         */\n        process: (frameData) => {\n            /**\n             * If we're already processing we've probably been triggered by a flushSync\n             * inside an existing process. Instead of executing, mark flushNextFrame\n             * as true and ensure we flush the following frame at the end of this one.\n             */\n            if (isProcessing) {\n                flushNextFrame = true;\n                return;\n            }\n            isProcessing = true;\n            [thisFrame, nextFrame] = [nextFrame, thisFrame];\n            // Clear the next frame queue\n            nextFrame.clear();\n            // Execute this frame\n            numToRun = thisFrame.order.length;\n            if (numToRun) {\n                for (let i = 0; i < numToRun; i++) {\n                    const callback = thisFrame.order[i];\n                    if (toKeepAlive.has(callback)) {\n                        step.schedule(callback);\n                        runNextFrame();\n                    }\n                    callback(frameData);\n                }\n            }\n            isProcessing = false;\n            if (flushNextFrame) {\n                flushNextFrame = false;\n                step.process(frameData);\n            }\n        },\n    };\n    return step;\n}\n\nexport { createRenderStep };\n","import { MotionGlobalConfig } from '../utils/GlobalConfig.mjs';\nimport { createRenderStep } from './render-step.mjs';\n\nconst stepsOrder = [\n    \"read\", // Read\n    \"resolveKeyframes\", // Write/Read/Write/Read\n    \"update\", // Compute\n    \"preRender\", // Compute\n    \"render\", // Write\n    \"postRender\", // Compute\n];\nconst maxElapsed = 40;\nfunction createRenderBatcher(scheduleNextBatch, allowKeepAlive) {\n    let runNextFrame = false;\n    let useDefaultElapsed = true;\n    const state = {\n        delta: 0,\n        timestamp: 0,\n        isProcessing: false,\n    };\n    const steps = stepsOrder.reduce((acc, key) => {\n        acc[key] = createRenderStep(() => (runNextFrame = true));\n        return acc;\n    }, {});\n    const processStep = (stepId) => {\n        steps[stepId].process(state);\n    };\n    const processBatch = () => {\n        const timestamp = MotionGlobalConfig.useManualTiming\n            ? state.timestamp\n            : performance.now();\n        runNextFrame = false;\n        state.delta = useDefaultElapsed\n            ? 1000 / 60\n            : Math.max(Math.min(timestamp - state.timestamp, maxElapsed), 1);\n        state.timestamp = timestamp;\n        state.isProcessing = true;\n        stepsOrder.forEach(processStep);\n        state.isProcessing = false;\n        if (runNextFrame && allowKeepAlive) {\n            useDefaultElapsed = false;\n            scheduleNextBatch(processBatch);\n        }\n    };\n    const wake = () => {\n        runNextFrame = true;\n        useDefaultElapsed = true;\n        if (!state.isProcessing) {\n            scheduleNextBatch(processBatch);\n        }\n    };\n    const schedule = stepsOrder.reduce((acc, key) => {\n        const step = steps[key];\n        acc[key] = (process, keepAlive = false, immediate = false) => {\n            if (!runNextFrame)\n                wake();\n            return step.schedule(process, keepAlive, immediate);\n        };\n        return acc;\n    }, {});\n    const cancel = (process) => stepsOrder.forEach((key) => steps[key].cancel(process));\n    return { schedule, cancel, state, steps };\n}\n\nexport { createRenderBatcher, stepsOrder };\n","import { createRenderBatcher } from './batcher.mjs';\n\nconst { schedule: microtask, cancel: cancelMicrotask } = createRenderBatcher(queueMicrotask, false);\n\nexport { cancelMicrotask, microtask };\n","function isRefObject(ref) {\n    return (ref &&\n        typeof ref === \"object\" &&\n        Object.prototype.hasOwnProperty.call(ref, \"current\"));\n}\n\nexport { isRefObject };\n","import { createContext } from 'react';\n\n/**\n * Internal, exported only for usage in Framer\n */\nconst SwitchLayoutGroupContext = createContext({});\n\nexport { SwitchLayoutGroupContext };\n","import { useContext, useRef, useInsertionEffect, useEffect } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { MotionContext } from '../../context/MotionContext/index.mjs';\nimport { useIsomorphicLayoutEffect } from '../../utils/use-isomorphic-effect.mjs';\nimport { LazyContext } from '../../context/LazyContext.mjs';\nimport { MotionConfigContext } from '../../context/MotionConfigContext.mjs';\nimport { optimizedAppearDataAttribute } from '../../animation/optimized-appear/data-id.mjs';\nimport { microtask } from '../../frameloop/microtask.mjs';\nimport { isRefObject } from '../../utils/is-ref-object.mjs';\nimport { SwitchLayoutGroupContext } from '../../context/SwitchLayoutGroupContext.mjs';\n\nlet scheduleHandoffComplete = false;\nfunction useVisualElement(Component, visualState, props, createVisualElement, ProjectionNodeConstructor) {\n    const { visualElement: parent } = useContext(MotionContext);\n    const lazyContext = useContext(LazyContext);\n    const presenceContext = useContext(PresenceContext);\n    const reducedMotionConfig = useContext(MotionConfigContext).reducedMotion;\n    const visualElementRef = useRef();\n    /**\n     * If we haven't preloaded a renderer, check to see if we have one lazy-loaded\n     */\n    createVisualElement = createVisualElement || lazyContext.renderer;\n    if (!visualElementRef.current && createVisualElement) {\n        visualElementRef.current = createVisualElement(Component, {\n            visualState,\n            parent,\n            props,\n            presenceContext,\n            blockInitialAnimation: presenceContext\n                ? presenceContext.initial === false\n                : false,\n            reducedMotionConfig,\n        });\n    }\n    const visualElement = visualElementRef.current;\n    /**\n     * Load Motion gesture and animation features. These are rendered as renderless\n     * components so each feature can optionally make use of React lifecycle methods.\n     */\n    const initialLayoutGroupConfig = useContext(SwitchLayoutGroupContext);\n    if (visualElement &&\n        !visualElement.projection &&\n        ProjectionNodeConstructor &&\n        (visualElement.type === \"html\" || visualElement.type === \"svg\")) {\n        createProjectionNode(visualElementRef.current, props, ProjectionNodeConstructor, initialLayoutGroupConfig);\n    }\n    useInsertionEffect(() => {\n        visualElement && visualElement.update(props, presenceContext);\n    });\n    /**\n     * Cache this value as we want to know whether HandoffAppearAnimations\n     * was present on initial render - it will be deleted after this.\n     */\n    const wantsHandoff = useRef(Boolean(props[optimizedAppearDataAttribute] &&\n        !window.HandoffComplete));\n    useIsomorphicLayoutEffect(() => {\n        if (!visualElement)\n            return;\n        visualElement.updateFeatures();\n        microtask.render(visualElement.render);\n        /**\n         * Ideally this function would always run in a useEffect.\n         *\n         * However, if we have optimised appear animations to handoff from,\n         * it needs to happen synchronously to ensure there's no flash of\n         * incorrect styles in the event of a hydration error.\n         *\n         * So if we detect a situtation where optimised appear animations\n         * are running, we use useLayoutEffect to trigger animations.\n         */\n        if (wantsHandoff.current && visualElement.animationState) {\n            visualElement.animationState.animateChanges();\n        }\n    });\n    useEffect(() => {\n        if (!visualElement)\n            return;\n        if (!wantsHandoff.current && visualElement.animationState) {\n            visualElement.animationState.animateChanges();\n        }\n        if (wantsHandoff.current) {\n            wantsHandoff.current = false;\n            // This ensures all future calls to animateChanges() will run in useEffect\n            if (!scheduleHandoffComplete) {\n                scheduleHandoffComplete = true;\n                queueMicrotask(completeHandoff);\n            }\n        }\n    });\n    return visualElement;\n}\nfunction completeHandoff() {\n    window.HandoffComplete = true;\n}\nfunction createProjectionNode(visualElement, props, ProjectionNodeConstructor, initialPromotionConfig) {\n    const { layoutId, layout, drag, dragConstraints, layoutScroll, layoutRoot, } = props;\n    visualElement.projection = new ProjectionNodeConstructor(visualElement.latestValues, props[\"data-framer-portal-id\"]\n        ? undefined\n        : getClosestProjectingNode(visualElement.parent));\n    visualElement.projection.setOptions({\n        layoutId,\n        layout,\n        alwaysMeasureLayout: Boolean(drag) || (dragConstraints && isRefObject(dragConstraints)),\n        visualElement,\n        scheduleRender: () => visualElement.scheduleRender(),\n        /**\n         * TODO: Update options in an effect. This could be tricky as it'll be too late\n         * to update by the time layout animations run.\n         * We also need to fix this safeToRemove by linking it up to the one returned by usePresence,\n         * ensuring it gets called if there's no potential layout animations.\n         *\n         */\n        animationType: typeof layout === \"string\" ? layout : \"both\",\n        initialPromotionConfig,\n        layoutScroll,\n        layoutRoot,\n    });\n}\nfunction getClosestProjectingNode(visualElement) {\n    if (!visualElement)\n        return undefined;\n    return visualElement.options.allowProjection !== false\n        ? visualElement.projection\n        : getClosestProjectingNode(visualElement.parent);\n}\n\nexport { useVisualElement };\n","import { useCallback } from 'react';\nimport { isRefObject } from '../../utils/is-ref-object.mjs';\n\n/**\n * Creates a ref function that, when called, hydrates the provided\n * external ref and VisualElement.\n */\nfunction useMotionRef(visualState, visualElement, externalRef) {\n    return useCallback((instance) => {\n        instance && visualState.mount && visualState.mount(instance);\n        if (visualElement) {\n            if (instance) {\n                visualElement.mount(instance);\n            }\n            else {\n                visualElement.unmount();\n            }\n        }\n        if (externalRef) {\n            if (typeof externalRef === \"function\") {\n                externalRef(instance);\n            }\n            else if (isRefObject(externalRef)) {\n                externalRef.current = instance;\n            }\n        }\n    }, \n    /**\n     * Only pass a new ref callback to React if we've received a visual element\n     * factory. Otherwise we'll be mounting/remounting every time externalRef\n     * or other dependencies change.\n     */\n    [visualElement]);\n}\n\nexport { useMotionRef };\n","/**\n * Decides if the supplied variable is variant label\n */\nfunction isVariantLabel(v) {\n    return typeof v === \"string\" || Array.isArray(v);\n}\n\nexport { isVariantLabel };\n","function isAnimationControls(v) {\n    return (v !== null &&\n        typeof v === \"object\" &&\n        typeof v.start === \"function\");\n}\n\nexport { isAnimationControls };\n","const variantPriorityOrder = [\n    \"animate\",\n    \"whileInView\",\n    \"whileFocus\",\n    \"whileHover\",\n    \"whileTap\",\n    \"whileDrag\",\n    \"exit\",\n];\nconst variantProps = [\"initial\", ...variantPriorityOrder];\n\nexport { variantPriorityOrder, variantProps };\n","import { isAnimationControls } from '../../animation/utils/is-animation-controls.mjs';\nimport { isVariantLabel } from './is-variant-label.mjs';\nimport { variantProps } from './variant-props.mjs';\n\nfunction isControllingVariants(props) {\n    return (isAnimationControls(props.animate) ||\n        variantProps.some((name) => isVariantLabel(props[name])));\n}\nfunction isVariantNode(props) {\n    return Boolean(isControllingVariants(props) || props.variants);\n}\n\nexport { isControllingVariants, isVariantNode };\n","import { isVariantLabel } from '../../render/utils/is-variant-label.mjs';\nimport { isControllingVariants } from '../../render/utils/is-controlling-variants.mjs';\n\nfunction getCurrentTreeVariants(props, context) {\n    if (isControllingVariants(props)) {\n        const { initial, animate } = props;\n        return {\n            initial: initial === false || isVariantLabel(initial)\n                ? initial\n                : undefined,\n            animate: isVariantLabel(animate) ? animate : undefined,\n        };\n    }\n    return props.inherit !== false ? context : {};\n}\n\nexport { getCurrentTreeVariants };\n","import { useContext, useMemo } from 'react';\nimport { MotionContext } from './index.mjs';\nimport { getCurrentTreeVariants } from './utils.mjs';\n\nfunction useCreateMotionContext(props) {\n    const { initial, animate } = getCurrentTreeVariants(props, useContext(MotionContext));\n    return useMemo(() => ({ initial, animate }), [variantLabelsAsDependency(initial), variantLabelsAsDependency(animate)]);\n}\nfunction variantLabelsAsDependency(prop) {\n    return Array.isArray(prop) ? prop.join(\" \") : prop;\n}\n\nexport { useCreateMotionContext };\n","const featureProps = {\n    animation: [\n        \"animate\",\n        \"variants\",\n        \"whileHover\",\n        \"whileTap\",\n        \"exit\",\n        \"whileInView\",\n        \"whileFocus\",\n        \"whileDrag\",\n    ],\n    exit: [\"exit\"],\n    drag: [\"drag\", \"dragControls\"],\n    focus: [\"whileFocus\"],\n    hover: [\"whileHover\", \"onHoverStart\", \"onHoverEnd\"],\n    tap: [\"whileTap\", \"onTap\", \"onTapStart\", \"onTapCancel\"],\n    pan: [\"onPan\", \"onPanStart\", \"onPanSessionStart\", \"onPanEnd\"],\n    inView: [\"whileInView\", \"onViewportEnter\", \"onViewportLeave\"],\n    layout: [\"layout\", \"layoutId\"],\n};\nconst featureDefinitions = {};\nfor (const key in featureProps) {\n    featureDefinitions[key] = {\n        isEnabled: (props) => featureProps[key].some((name) => !!props[name]),\n    };\n}\n\nexport { featureDefinitions };\n","import { featureDefinitions } from './definitions.mjs';\n\nfunction loadFeatures(features) {\n    for (const key in features) {\n        featureDefinitions[key] = {\n            ...featureDefinitions[key],\n            ...features[key],\n        };\n    }\n}\n\nexport { loadFeatures };\n","import { createContext } from 'react';\n\nconst LayoutGroupContext = createContext({});\n\nexport { LayoutGroupContext };\n","const motionComponentSymbol = Symbol.for(\"motionComponentSymbol\");\n\nexport { motionComponentSymbol };\n","const noop = (any) => any;\n\nexport { noop };\n","import { noop } from './noop.mjs';\n\nlet warning = noop;\nlet invariant = noop;\nif (process.env.NODE_ENV !== \"production\") {\n    warning = (check, message) => {\n        if (!check && typeof console !== \"undefined\") {\n            console.warn(message);\n        }\n    };\n    invariant = (check, message) => {\n        if (!check) {\n            throw new Error(message);\n        }\n    };\n}\n\nexport { invariant, warning };\n","import { jsxs, jsx } from 'react/jsx-runtime';\nimport { forwardRef, useContext } from 'react';\nimport { MotionConfigContext } from '../context/MotionConfigContext.mjs';\nimport { MotionContext } from '../context/MotionContext/index.mjs';\nimport { useVisualElement } from './utils/use-visual-element.mjs';\nimport { useMotionRef } from './utils/use-motion-ref.mjs';\nimport { useCreateMotionContext } from '../context/MotionContext/create.mjs';\nimport { loadFeatures } from './features/load-features.mjs';\nimport { isBrowser } from '../utils/is-browser.mjs';\nimport { LayoutGroupContext } from '../context/LayoutGroupContext.mjs';\nimport { LazyContext } from '../context/LazyContext.mjs';\nimport { motionComponentSymbol } from './utils/symbol.mjs';\nimport { warning, invariant } from '../utils/errors.mjs';\nimport { featureDefinitions } from './features/definitions.mjs';\n\n/**\n * Create a `motion` component.\n *\n * This function accepts a Component argument, which can be either a string (ie \"div\"\n * for `motion.div`), or an actual React component.\n *\n * Alongside this is a config option which provides a way of rendering the provided\n * component \"offline\", or outside the React render cycle.\n */\nfunction createMotionComponent({ preloadedFeatures, createVisualElement, useRender, useVisualState, Component, }) {\n    preloadedFeatures && loadFeatures(preloadedFeatures);\n    function MotionComponent(props, externalRef) {\n        /**\n         * If we need to measure the element we load this functionality in a\n         * separate class component in order to gain access to getSnapshotBeforeUpdate.\n         */\n        let MeasureLayout;\n        const configAndProps = {\n            ...useContext(MotionConfigContext),\n            ...props,\n            layoutId: useLayoutId(props),\n        };\n        const { isStatic } = configAndProps;\n        const context = useCreateMotionContext(props);\n        const visualState = useVisualState(props, isStatic);\n        if (!isStatic && isBrowser) {\n            useStrictMode(configAndProps, preloadedFeatures);\n            const layoutProjection = getProjectionFunctionality(configAndProps);\n            MeasureLayout = layoutProjection.MeasureLayout;\n            /**\n             * Create a VisualElement for this component. A VisualElement provides a common\n             * interface to renderer-specific APIs (ie DOM/Three.js etc) as well as\n             * providing a way of rendering to these APIs outside of the React render loop\n             * for more performant animations and interactions\n             */\n            context.visualElement = useVisualElement(Component, visualState, configAndProps, createVisualElement, layoutProjection.ProjectionNode);\n        }\n        /**\n         * The mount order and hierarchy is specific to ensure our element ref\n         * is hydrated by the time features fire their effects.\n         */\n        return (jsxs(MotionContext.Provider, { value: context, children: [MeasureLayout && context.visualElement ? (jsx(MeasureLayout, { visualElement: context.visualElement, ...configAndProps })) : null, useRender(Component, props, useMotionRef(visualState, context.visualElement, externalRef), visualState, isStatic, context.visualElement)] }));\n    }\n    const ForwardRefComponent = forwardRef(MotionComponent);\n    ForwardRefComponent[motionComponentSymbol] = Component;\n    return ForwardRefComponent;\n}\nfunction useLayoutId({ layoutId }) {\n    const layoutGroupId = useContext(LayoutGroupContext).id;\n    return layoutGroupId && layoutId !== undefined\n        ? layoutGroupId + \"-\" + layoutId\n        : layoutId;\n}\nfunction useStrictMode(configAndProps, preloadedFeatures) {\n    const isStrict = useContext(LazyContext).strict;\n    /**\n     * If we're in development mode, check to make sure we're not rendering a motion component\n     * as a child of LazyMotion, as this will break the file-size benefits of using it.\n     */\n    if (process.env.NODE_ENV !== \"production\" &&\n        preloadedFeatures &&\n        isStrict) {\n        const strictMessage = \"You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.\";\n        configAndProps.ignoreStrict\n            ? warning(false, strictMessage)\n            : invariant(false, strictMessage);\n    }\n}\nfunction getProjectionFunctionality(props) {\n    const { drag, layout } = featureDefinitions;\n    if (!drag && !layout)\n        return {};\n    const combined = { ...drag, ...layout };\n    return {\n        MeasureLayout: (drag === null || drag === void 0 ? void 0 : drag.isEnabled(props)) || (layout === null || layout === void 0 ? void 0 : layout.isEnabled(props))\n            ? combined.MeasureLayout\n            : undefined,\n        ProjectionNode: combined.ProjectionNode,\n    };\n}\n\nexport { createMotionComponent };\n","import { createMotionComponent } from '../../motion/index.mjs';\n\n/**\n * Convert any React component into a `motion` component. The provided component\n * **must** use `React.forwardRef` to the underlying DOM component you want to animate.\n *\n * ```jsx\n * const Component = React.forwardRef((props, ref) => {\n *   return <div ref={ref} />\n * })\n *\n * const MotionComponent = motion(Component)\n * ```\n *\n * @public\n */\nfunction createMotionProxy(createConfig) {\n    function custom(Component, customMotionComponentConfig = {}) {\n        return createMotionComponent(createConfig(Component, customMotionComponentConfig));\n    }\n    if (typeof Proxy === \"undefined\") {\n        return custom;\n    }\n    /**\n     * A cache of generated `motion` components, e.g `motion.div`, `motion.input` etc.\n     * Rather than generating them anew every render.\n     */\n    const componentCache = new Map();\n    return new Proxy(custom, {\n        /**\n         * Called when `motion` is referenced with a prop: `motion.div`, `motion.input` etc.\n         * The prop name is passed through as `key` and we can use that to generate a `motion`\n         * DOM component with that name.\n         */\n        get: (_target, key) => {\n            /**\n             * If this element doesn't exist in the component cache, create it and cache.\n             */\n            if (!componentCache.has(key)) {\n                componentCache.set(key, custom(key));\n            }\n            return componentCache.get(key);\n        },\n    });\n}\n\nexport { createMotionProxy };\n","/**\n * We keep these listed seperately as we use the lowercase tag names as part\n * of the runtime bundle to detect SVG components\n */\nconst lowercaseSVGElements = [\n    \"animate\",\n    \"circle\",\n    \"defs\",\n    \"desc\",\n    \"ellipse\",\n    \"g\",\n    \"image\",\n    \"line\",\n    \"filter\",\n    \"marker\",\n    \"mask\",\n    \"metadata\",\n    \"path\",\n    \"pattern\",\n    \"polygon\",\n    \"polyline\",\n    \"rect\",\n    \"stop\",\n    \"switch\",\n    \"symbol\",\n    \"svg\",\n    \"text\",\n    \"tspan\",\n    \"use\",\n    \"view\",\n];\n\nexport { lowercaseSVGElements };\n","import { lowercaseSVGElements } from '../../svg/lowercase-elements.mjs';\n\nfunction isSVGComponent(Component) {\n    if (\n    /**\n     * If it's not a string, it's a custom React component. Currently we only support\n     * HTML custom React components.\n     */\n    typeof Component !== \"string\" ||\n        /**\n         * If it contains a dash, the element is a custom HTML webcomponent.\n         */\n        Component.includes(\"-\")) {\n        return false;\n    }\n    else if (\n    /**\n     * If it's in our list of lowercase SVG tags, it's an SVG component\n     */\n    lowercaseSVGElements.indexOf(Component) > -1 ||\n        /**\n         * If it contains a capital letter, it's an SVG component\n         */\n        /[A-Z]/u.test(Component)) {\n        return true;\n    }\n    return false;\n}\n\nexport { isSVGComponent };\n","const scaleCorrectors = {};\nfunction addScaleCorrector(correctors) {\n    Object.assign(scaleCorrectors, correctors);\n}\n\nexport { addScaleCorrector, scaleCorrectors };\n","/**\n * Generate a list of every possible transform key.\n */\nconst transformPropOrder = [\n    \"transformPerspective\",\n    \"x\",\n    \"y\",\n    \"z\",\n    \"translateX\",\n    \"translateY\",\n    \"translateZ\",\n    \"scale\",\n    \"scaleX\",\n    \"scaleY\",\n    \"rotate\",\n    \"rotateX\",\n    \"rotateY\",\n    \"rotateZ\",\n    \"skew\",\n    \"skewX\",\n    \"skewY\",\n];\n/**\n * A quick lookup for transform props.\n */\nconst transformProps = new Set(transformPropOrder);\n\nexport { transformPropOrder, transformProps };\n","import { scaleCorrectors } from '../../projection/styles/scale-correction.mjs';\nimport { transformProps } from '../../render/html/utils/transform.mjs';\n\nfunction isForcedMotionValue(key, { layout, layoutId }) {\n    return (transformProps.has(key) ||\n        key.startsWith(\"origin\") ||\n        ((layout || layoutId !== undefined) &&\n            (!!scaleCorrectors[key] || key === \"opacity\")));\n}\n\nexport { isForcedMotionValue };\n","const isMotionValue = (value) => Boolean(value && value.getVelocity);\n\nexport { isMotionValue };\n","import { transformPropOrder } from './transform.mjs';\n\nconst translateAlias = {\n    x: \"translateX\",\n    y: \"translateY\",\n    z: \"translateZ\",\n    transformPerspective: \"perspective\",\n};\nconst numTransforms = transformPropOrder.length;\n/**\n * Build a CSS transform style from individual x/y/scale etc properties.\n *\n * This outputs with a default order of transforms/scales/rotations, this can be customised by\n * providing a transformTemplate function.\n */\nfunction buildTransform(transform, { enableHardwareAcceleration = true, allowTransformNone = true, }, transformIsDefault, transformTemplate) {\n    // The transform string we're going to build into.\n    let transformString = \"\";\n    /**\n     * Loop over all possible transforms in order, adding the ones that\n     * are present to the transform string.\n     */\n    for (let i = 0; i < numTransforms; i++) {\n        const key = transformPropOrder[i];\n        if (transform[key] !== undefined) {\n            const transformName = translateAlias[key] || key;\n            transformString += `${transformName}(${transform[key]}) `;\n        }\n    }\n    if (enableHardwareAcceleration && !transform.z) {\n        transformString += \"translateZ(0)\";\n    }\n    transformString = transformString.trim();\n    // If we have a custom `transform` template, pass our transform values and\n    // generated transformString to that before returning\n    if (transformTemplate) {\n        transformString = transformTemplate(transform, transformIsDefault ? \"\" : transformString);\n    }\n    else if (allowTransformNone && transformIsDefault) {\n        transformString = \"none\";\n    }\n    return transformString;\n}\n\nexport { buildTransform };\n","const checkStringStartsWith = (token) => (key) => typeof key === \"string\" && key.startsWith(token);\nconst isCSSVariableName = checkStringStartsWith(\"--\");\nconst startsAsVariableToken = checkStringStartsWith(\"var(--\");\nconst isCSSVariableToken = (value) => {\n    const startsWithToken = startsAsVariableToken(value);\n    if (!startsWithToken)\n        return false;\n    // Ensure any comments are stripped from the value as this can harm performance of the regex.\n    return singleCssVariableRegex.test(value.split(\"/*\")[0].trim());\n};\nconst singleCssVariableRegex = /var\\(--(?:[\\w-]+\\s*|[\\w-]+\\s*,(?:\\s*[^)(\\s]|\\s*\\((?:[^)(]|\\([^)(]*\\))*\\))+\\s*)\\)$/iu;\n\nexport { isCSSVariableName, isCSSVariableToken };\n","/**\n * Provided a value and a ValueType, returns the value as that value type.\n */\nconst getValueAsType = (value, type) => {\n    return type && typeof value === \"number\"\n        ? type.transform(value)\n        : value;\n};\n\nexport { getValueAsType };\n","const clamp = (min, max, v) => {\n    if (v > max)\n        return max;\n    if (v < min)\n        return min;\n    return v;\n};\n\nexport { clamp };\n","import { clamp } from '../../../utils/clamp.mjs';\n\nconst number = {\n    test: (v) => typeof v === \"number\",\n    parse: parseFloat,\n    transform: (v) => v,\n};\nconst alpha = {\n    ...number,\n    transform: (v) => clamp(0, 1, v),\n};\nconst scale = {\n    ...number,\n    default: 1,\n};\n\nexport { alpha, number, scale };\n","/**\n * TODO: When we move from string as a source of truth to data models\n * everything in this folder should probably be referred to as models vs types\n */\n// If this number is a decimal, make it just five decimal places\n// to avoid exponents\nconst sanitize = (v) => Math.round(v * 100000) / 100000;\nconst floatRegex = /-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)/gu;\nconst colorRegex = /(?:#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\))/giu;\nconst singleColorRegex = /^(?:#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\))$/iu;\nfunction isString(v) {\n    return typeof v === \"string\";\n}\n\nexport { colorRegex, floatRegex, isString, sanitize, singleColorRegex };\n","import { isString } from '../utils.mjs';\n\nconst createUnitType = (unit) => ({\n    test: (v) => isString(v) && v.endsWith(unit) && v.split(\" \").length === 1,\n    parse: parseFloat,\n    transform: (v) => `${v}${unit}`,\n});\nconst degrees = createUnitType(\"deg\");\nconst percent = createUnitType(\"%\");\nconst px = createUnitType(\"px\");\nconst vh = createUnitType(\"vh\");\nconst vw = createUnitType(\"vw\");\nconst progressPercentage = {\n    ...percent,\n    parse: (v) => percent.parse(v) / 100,\n    transform: (v) => percent.transform(v * 100),\n};\n\nexport { degrees, percent, progressPercentage, px, vh, vw };\n","import { number } from '../../../value/types/numbers/index.mjs';\n\nconst int = {\n    ...number,\n    transform: Math.round,\n};\n\nexport { int };\n","import { scale, alpha } from '../../../value/types/numbers/index.mjs';\nimport { px, degrees, progressPercentage } from '../../../value/types/numbers/units.mjs';\nimport { int } from './type-int.mjs';\n\nconst numberValueTypes = {\n    // Border props\n    borderWidth: px,\n    borderTopWidth: px,\n    borderRightWidth: px,\n    borderBottomWidth: px,\n    borderLeftWidth: px,\n    borderRadius: px,\n    radius: px,\n    borderTopLeftRadius: px,\n    borderTopRightRadius: px,\n    borderBottomRightRadius: px,\n    borderBottomLeftRadius: px,\n    // Positioning props\n    width: px,\n    maxWidth: px,\n    height: px,\n    maxHeight: px,\n    size: px,\n    top: px,\n    right: px,\n    bottom: px,\n    left: px,\n    // Spacing props\n    padding: px,\n    paddingTop: px,\n    paddingRight: px,\n    paddingBottom: px,\n    paddingLeft: px,\n    margin: px,\n    marginTop: px,\n    marginRight: px,\n    marginBottom: px,\n    marginLeft: px,\n    // Transform props\n    rotate: degrees,\n    rotateX: degrees,\n    rotateY: degrees,\n    rotateZ: degrees,\n    scale,\n    scaleX: scale,\n    scaleY: scale,\n    scaleZ: scale,\n    skew: degrees,\n    skewX: degrees,\n    skewY: degrees,\n    distance: px,\n    translateX: px,\n    translateY: px,\n    translateZ: px,\n    x: px,\n    y: px,\n    z: px,\n    perspective: px,\n    transformPerspective: px,\n    opacity: alpha,\n    originX: progressPercentage,\n    originY: progressPercentage,\n    originZ: px,\n    // Misc\n    zIndex: int,\n    backgroundPositionX: px,\n    backgroundPositionY: px,\n    // SVG\n    fillOpacity: alpha,\n    strokeOpacity: alpha,\n    numOctaves: int,\n};\n\nexport { numberValueTypes };\n","import { buildTransform } from './build-transform.mjs';\nimport { isCSSVariableName } from '../../dom/utils/is-css-variable.mjs';\nimport { transformProps } from './transform.mjs';\nimport { getValueAsType } from '../../dom/value-types/get-as-type.mjs';\nimport { numberValueTypes } from '../../dom/value-types/number.mjs';\n\nfunction buildHTMLStyles(state, latestValues, options, transformTemplate) {\n    const { style, vars, transform, transformOrigin } = state;\n    // Track whether we encounter any transform or transformOrigin values.\n    let hasTransform = false;\n    let hasTransformOrigin = false;\n    // Does the calculated transform essentially equal \"none\"?\n    let transformIsNone = true;\n    /**\n     * Loop over all our latest animated values and decide whether to handle them\n     * as a style or CSS variable.\n     *\n     * Transforms and transform origins are kept seperately for further processing.\n     */\n    for (const key in latestValues) {\n        const value = latestValues[key];\n        /**\n         * If this is a CSS variable we don't do any further processing.\n         */\n        if (isCSSVariableName(key)) {\n            vars[key] = value;\n            continue;\n        }\n        // Convert the value to its default value type, ie 0 -> \"0px\"\n        const valueType = numberValueTypes[key];\n        const valueAsType = getValueAsType(value, valueType);\n        if (transformProps.has(key)) {\n            // If this is a transform, flag to enable further transform processing\n            hasTransform = true;\n            transform[key] = valueAsType;\n            // If we already know we have a non-default transform, early return\n            if (!transformIsNone)\n                continue;\n            // Otherwise check to see if this is a default transform\n            if (value !== (valueType.default || 0))\n                transformIsNone = false;\n        }\n        else if (key.startsWith(\"origin\")) {\n            // If this is a transform origin, flag and enable further transform-origin processing\n            hasTransformOrigin = true;\n            transformOrigin[key] = valueAsType;\n        }\n        else {\n            style[key] = valueAsType;\n        }\n    }\n    if (!latestValues.transform) {\n        if (hasTransform || transformTemplate) {\n            style.transform = buildTransform(state.transform, options, transformIsNone, transformTemplate);\n        }\n        else if (style.transform) {\n            /**\n             * If we have previously created a transform but currently don't have any,\n             * reset transform style to none.\n             */\n            style.transform = \"none\";\n        }\n    }\n    /**\n     * Build a transformOrigin style. Uses the same defaults as the browser for\n     * undefined origins.\n     */\n    if (hasTransformOrigin) {\n        const { originX = \"50%\", originY = \"50%\", originZ = 0, } = transformOrigin;\n        style.transformOrigin = `${originX} ${originY} ${originZ}`;\n    }\n}\n\nexport { buildHTMLStyles };\n","const createHtmlRenderState = () => ({\n    style: {},\n    transform: {},\n    transformOrigin: {},\n    vars: {},\n});\n\nexport { createHtmlRenderState };\n","import { useMemo } from 'react';\nimport { isForcedMotionValue } from '../../motion/utils/is-forced-motion-value.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\nimport { buildHTMLStyles } from './utils/build-styles.mjs';\nimport { createHtmlRenderState } from './utils/create-render-state.mjs';\n\nfunction copyRawValuesOnly(target, source, props) {\n    for (const key in source) {\n        if (!isMotionValue(source[key]) && !isForcedMotionValue(key, props)) {\n            target[key] = source[key];\n        }\n    }\n}\nfunction useInitialMotionValues({ transformTemplate }, visualState, isStatic) {\n    return useMemo(() => {\n        const state = createHtmlRenderState();\n        buildHTMLStyles(state, visualState, { enableHardwareAcceleration: !isStatic }, transformTemplate);\n        return Object.assign({}, state.vars, state.style);\n    }, [visualState]);\n}\nfunction useStyle(props, visualState, isStatic) {\n    const styleProp = props.style || {};\n    const style = {};\n    /**\n     * Copy non-Motion Values straight into style\n     */\n    copyRawValuesOnly(style, styleProp, props);\n    Object.assign(style, useInitialMotionValues(props, visualState, isStatic));\n    return style;\n}\nfunction useHTMLProps(props, visualState, isStatic) {\n    // The `any` isn't ideal but it is the type of createElement props argument\n    const htmlProps = {};\n    const style = useStyle(props, visualState, isStatic);\n    if (props.drag && props.dragListener !== false) {\n        // Disable the ghost element when a user drags\n        htmlProps.draggable = false;\n        // Disable text selection\n        style.userSelect =\n            style.WebkitUserSelect =\n                style.WebkitTouchCallout =\n                    \"none\";\n        // Disable scrolling on the draggable direction\n        style.touchAction =\n            props.drag === true\n                ? \"none\"\n                : `pan-${props.drag === \"x\" ? \"y\" : \"x\"}`;\n    }\n    if (props.tabIndex === undefined &&\n        (props.onTap || props.onTapStart || props.whileTap)) {\n        htmlProps.tabIndex = 0;\n    }\n    htmlProps.style = style;\n    return htmlProps;\n}\n\nexport { copyRawValuesOnly, useHTMLProps };\n","/**\n * A list of all valid MotionProps.\n *\n * @privateRemarks\n * This doesn't throw if a `MotionProp` name is missing - it should.\n */\nconst validMotionProps = new Set([\n    \"animate\",\n    \"exit\",\n    \"variants\",\n    \"initial\",\n    \"style\",\n    \"values\",\n    \"variants\",\n    \"transition\",\n    \"transformTemplate\",\n    \"custom\",\n    \"inherit\",\n    \"onBeforeLayoutMeasure\",\n    \"onAnimationStart\",\n    \"onAnimationComplete\",\n    \"onUpdate\",\n    \"onDragStart\",\n    \"onDrag\",\n    \"onDragEnd\",\n    \"onMeasureDragConstraints\",\n    \"onDirectionLock\",\n    \"onDragTransitionEnd\",\n    \"_dragX\",\n    \"_dragY\",\n    \"onHoverStart\",\n    \"onHoverEnd\",\n    \"onViewportEnter\",\n    \"onViewportLeave\",\n    \"globalTapTarget\",\n    \"ignoreStrict\",\n    \"viewport\",\n]);\n/**\n * Check whether a prop name is a valid `MotionProp` key.\n *\n * @param key - Name of the property to check\n * @returns `true` is key is a valid `MotionProp`.\n *\n * @public\n */\nfunction isValidMotionProp(key) {\n    return (key.startsWith(\"while\") ||\n        (key.startsWith(\"drag\") && key !== \"draggable\") ||\n        key.startsWith(\"layout\") ||\n        key.startsWith(\"onTap\") ||\n        key.startsWith(\"onPan\") ||\n        key.startsWith(\"onLayout\") ||\n        validMotionProps.has(key));\n}\n\nexport { isValidMotionProp };\n","import { isValidMotionProp } from '../../../motion/utils/valid-prop.mjs';\n\nlet shouldForward = (key) => !isValidMotionProp(key);\nfunction loadExternalIsValidProp(isValidProp) {\n    if (!isValidProp)\n        return;\n    // Explicitly filter our events\n    shouldForward = (key) => key.startsWith(\"on\") ? !isValidMotionProp(key) : isValidProp(key);\n}\n/**\n * Emotion and Styled Components both allow users to pass through arbitrary props to their components\n * to dynamically generate CSS. They both use the `@emotion/is-prop-valid` package to determine which\n * of these should be passed to the underlying DOM node.\n *\n * However, when styling a Motion component `styled(motion.div)`, both packages pass through *all* props\n * as it's seen as an arbitrary component rather than a DOM node. Motion only allows arbitrary props\n * passed through the `custom` prop so it doesn't *need* the payload or computational overhead of\n * `@emotion/is-prop-valid`, however to fix this problem we need to use it.\n *\n * By making it an optionalDependency we can offer this functionality only in the situations where it's\n * actually required.\n */\ntry {\n    /**\n     * We attempt to import this package but require won't be defined in esm environments, in that case\n     * isPropValid will have to be provided via `MotionContext`. In a 6.0.0 this should probably be removed\n     * in favour of explicit injection.\n     */\n    loadExternalIsValidProp(require(\"@emotion/is-prop-valid\").default);\n}\ncatch (_a) {\n    // We don't need to actually do anything here - the fallback is the existing `isPropValid`.\n}\nfunction filterProps(props, isDom, forwardMotionProps) {\n    const filteredProps = {};\n    for (const key in props) {\n        /**\n         * values is considered a valid prop by Emotion, so if it's present\n         * this will be rendered out to the DOM unless explicitly filtered.\n         *\n         * We check the type as it could be used with the `feColorMatrix`\n         * element, which we support.\n         */\n        if (key === \"values\" && typeof props.values === \"object\")\n            continue;\n        if (shouldForward(key) ||\n            (forwardMotionProps === true && isValidMotionProp(key)) ||\n            (!isDom && !isValidMotionProp(key)) ||\n            // If trying to use native HTML drag events, forward drag listeners\n            (props[\"draggable\"] &&\n                key.startsWith(\"onDrag\"))) {\n            filteredProps[key] =\n                props[key];\n        }\n    }\n    return filteredProps;\n}\n\nexport { filterProps, loadExternalIsValidProp };\n","import { px } from '../../../value/types/numbers/units.mjs';\n\nfunction calcOrigin(origin, offset, size) {\n    return typeof origin === \"string\"\n        ? origin\n        : px.transform(offset + size * origin);\n}\n/**\n * The SVG transform origin defaults are different to CSS and is less intuitive,\n * so we use the measured dimensions of the SVG to reconcile these.\n */\nfunction calcSVGTransformOrigin(dimensions, originX, originY) {\n    const pxOriginX = calcOrigin(originX, dimensions.x, dimensions.width);\n    const pxOriginY = calcOrigin(originY, dimensions.y, dimensions.height);\n    return `${pxOriginX} ${pxOriginY}`;\n}\n\nexport { calcSVGTransformOrigin };\n","import { px } from '../../../value/types/numbers/units.mjs';\n\nconst dashKeys = {\n    offset: \"stroke-dashoffset\",\n    array: \"stroke-dasharray\",\n};\nconst camelKeys = {\n    offset: \"strokeDashoffset\",\n    array: \"strokeDasharray\",\n};\n/**\n * Build SVG path properties. Uses the path's measured length to convert\n * our custom pathLength, pathSpacing and pathOffset into stroke-dashoffset\n * and stroke-dasharray attributes.\n *\n * This function is mutative to reduce per-frame GC.\n */\nfunction buildSVGPath(attrs, length, spacing = 1, offset = 0, useDashCase = true) {\n    // Normalise path length by setting SVG attribute pathLength to 1\n    attrs.pathLength = 1;\n    // We use dash case when setting attributes directly to the DOM node and camel case\n    // when defining props on a React component.\n    const keys = useDashCase ? dashKeys : camelKeys;\n    // Build the dash offset\n    attrs[keys.offset] = px.transform(-offset);\n    // Build the dash array\n    const pathLength = px.transform(length);\n    const pathSpacing = px.transform(spacing);\n    attrs[keys.array] = `${pathLength} ${pathSpacing}`;\n}\n\nexport { buildSVGPath };\n","import { buildHTMLStyles } from '../../html/utils/build-styles.mjs';\nimport { calcSVGTransformOrigin } from './transform-origin.mjs';\nimport { buildSVGPath } from './path.mjs';\n\n/**\n * Build SVG visual attrbutes, like cx and style.transform\n */\nfunction buildSVGAttrs(state, { attrX, attrY, attrScale, originX, originY, pathLength, pathSpacing = 1, pathOffset = 0, \n// This is object creation, which we try to avoid per-frame.\n...latest }, options, isSVGTag, transformTemplate) {\n    buildHTMLStyles(state, latest, options, transformTemplate);\n    /**\n     * For svg tags we just want to make sure viewBox is animatable and treat all the styles\n     * as normal HTML tags.\n     */\n    if (isSVGTag) {\n        if (state.style.viewBox) {\n            state.attrs.viewBox = state.style.viewBox;\n        }\n        return;\n    }\n    state.attrs = state.style;\n    state.style = {};\n    const { attrs, style, dimensions } = state;\n    /**\n     * However, we apply transforms as CSS transforms. So if we detect a transform we take it from attrs\n     * and copy it into style.\n     */\n    if (attrs.transform) {\n        if (dimensions)\n            style.transform = attrs.transform;\n        delete attrs.transform;\n    }\n    // Parse transformOrigin\n    if (dimensions &&\n        (originX !== undefined || originY !== undefined || style.transform)) {\n        style.transformOrigin = calcSVGTransformOrigin(dimensions, originX !== undefined ? originX : 0.5, originY !== undefined ? originY : 0.5);\n    }\n    // Render attrX/attrY/attrScale as attributes\n    if (attrX !== undefined)\n        attrs.x = attrX;\n    if (attrY !== undefined)\n        attrs.y = attrY;\n    if (attrScale !== undefined)\n        attrs.scale = attrScale;\n    // Build SVG path if one has been defined\n    if (pathLength !== undefined) {\n        buildSVGPath(attrs, pathLength, pathSpacing, pathOffset, false);\n    }\n}\n\nexport { buildSVGAttrs };\n","import { createHtmlRenderState } from '../../html/utils/create-render-state.mjs';\n\nconst createSvgRenderState = () => ({\n    ...createHtmlRenderState(),\n    attrs: {},\n});\n\nexport { createSvgRenderState };\n","const isSVGTag = (tag) => typeof tag === \"string\" && tag.toLowerCase() === \"svg\";\n\nexport { isSVGTag };\n","import { useMemo } from 'react';\nimport { copyRawValuesOnly } from '../html/use-props.mjs';\nimport { buildSVGAttrs } from './utils/build-attrs.mjs';\nimport { createSvgRenderState } from './utils/create-render-state.mjs';\nimport { isSVGTag } from './utils/is-svg-tag.mjs';\n\nfunction useSVGProps(props, visualState, _isStatic, Component) {\n    const visualProps = useMemo(() => {\n        const state = createSvgRenderState();\n        buildSVGAttrs(state, visualState, { enableHardwareAcceleration: false }, isSVGTag(Component), props.transformTemplate);\n        return {\n            ...state.attrs,\n            style: { ...state.style },\n        };\n    }, [visualState]);\n    if (props.style) {\n        const rawStyles = {};\n        copyRawValuesOnly(rawStyles, props.style, props);\n        visualProps.style = { ...rawStyles, ...visualProps.style };\n    }\n    return visualProps;\n}\n\nexport { useSVGProps };\n","import { Fragment, useMemo, createElement } from 'react';\nimport { useHTMLProps } from '../html/use-props.mjs';\nimport { filterProps } from './utils/filter-props.mjs';\nimport { isSVGComponent } from './utils/is-svg-component.mjs';\nimport { useSVGProps } from '../svg/use-props.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\n\nfunction createUseRender(forwardMotionProps = false) {\n    const useRender = (Component, props, ref, { latestValues }, isStatic) => {\n        const useVisualProps = isSVGComponent(Component)\n            ? useSVGProps\n            : useHTMLProps;\n        const visualProps = useVisualProps(props, latestValues, isStatic, Component);\n        const filteredProps = filterProps(props, typeof Component === \"string\", forwardMotionProps);\n        const elementProps = Component !== Fragment\n            ? { ...filteredProps, ...visualProps, ref }\n            : {};\n        /**\n         * If component has been handed a motion value as its child,\n         * memoise its initial value and render that. Subsequent updates\n         * will be handled by the onChange handler\n         */\n        const { children } = props;\n        const renderedChildren = useMemo(() => (isMotionValue(children) ? children.get() : children), [children]);\n        return createElement(Component, {\n            ...elementProps,\n            children: renderedChildren,\n        });\n    };\n    return useRender;\n}\n\nexport { createUseRender };\n","function renderHTML(element, { style, vars }, styleProp, projection) {\n    Object.assign(element.style, style, projection && projection.getProjectionStyles(styleProp));\n    // Loop over any CSS variables and assign those.\n    for (const key in vars) {\n        element.style.setProperty(key, vars[key]);\n    }\n}\n\nexport { renderHTML };\n","/**\n * A set of attribute names that are always read/written as camel case.\n */\nconst camelCaseAttributes = new Set([\n    \"baseFrequency\",\n    \"diffuseConstant\",\n    \"kernelMatrix\",\n    \"kernelUnitLength\",\n    \"keySplines\",\n    \"keyTimes\",\n    \"limitingConeAngle\",\n    \"markerHeight\",\n    \"markerWidth\",\n    \"numOctaves\",\n    \"targetX\",\n    \"targetY\",\n    \"surfaceScale\",\n    \"specularConstant\",\n    \"specularExponent\",\n    \"stdDeviation\",\n    \"tableValues\",\n    \"viewBox\",\n    \"gradientTransform\",\n    \"pathLength\",\n    \"startOffset\",\n    \"textLength\",\n    \"lengthAdjust\",\n]);\n\nexport { camelCaseAttributes };\n","import { camelToDash } from '../../dom/utils/camel-to-dash.mjs';\nimport { renderHTML } from '../../html/utils/render.mjs';\nimport { camelCaseAttributes } from './camel-case-attrs.mjs';\n\nfunction renderSVG(element, renderState, _styleProp, projection) {\n    renderHTML(element, renderState, undefined, projection);\n    for (const key in renderState.attrs) {\n        element.setAttribute(!camelCaseAttributes.has(key) ? camelToDash(key) : key, renderState.attrs[key]);\n    }\n}\n\nexport { renderSVG };\n","import { isForcedMotionValue } from '../../../motion/utils/is-forced-motion-value.mjs';\nimport { isMotionValue } from '../../../value/utils/is-motion-value.mjs';\n\nfunction scrapeMotionValuesFromProps(props, prevProps, visualElement) {\n    var _a;\n    const { style } = props;\n    const newValues = {};\n    for (const key in style) {\n        if (isMotionValue(style[key]) ||\n            (prevProps.style &&\n                isMotionValue(prevProps.style[key])) ||\n            isForcedMotionValue(key, props) ||\n            ((_a = visualElement === null || visualElement === void 0 ? void 0 : visualElement.getValue(key)) === null || _a === void 0 ? void 0 : _a.liveStyle) !== undefined) {\n            newValues[key] = style[key];\n        }\n    }\n    return newValues;\n}\n\nexport { scrapeMotionValuesFromProps };\n","import { isMotionValue } from '../../../value/utils/is-motion-value.mjs';\nimport { scrapeMotionValuesFromProps as scrapeMotionValuesFromProps$1 } from '../../html/utils/scrape-motion-values.mjs';\nimport { transformPropOrder } from '../../html/utils/transform.mjs';\n\nfunction scrapeMotionValuesFromProps(props, prevProps, visualElement) {\n    const newValues = scrapeMotionValuesFromProps$1(props, prevProps, visualElement);\n    for (const key in props) {\n        if (isMotionValue(props[key]) ||\n            isMotionValue(prevProps[key])) {\n            const targetKey = transformPropOrder.indexOf(key) !== -1\n                ? \"attr\" + key.charAt(0).toUpperCase() + key.substring(1)\n                : key;\n            newValues[targetKey] = props[key];\n        }\n    }\n    return newValues;\n}\n\nexport { scrapeMotionValuesFromProps };\n","function getValueState(visualElement) {\n    const state = [{}, {}];\n    visualElement === null || visualElement === void 0 ? void 0 : visualElement.values.forEach((value, key) => {\n        state[0][key] = value.get();\n        state[1][key] = value.getVelocity();\n    });\n    return state;\n}\nfunction resolveVariantFromProps(props, definition, custom, visualElement) {\n    /**\n     * If the variant definition is a function, resolve.\n     */\n    if (typeof definition === \"function\") {\n        const [current, velocity] = getValueState(visualElement);\n        definition = definition(custom !== undefined ? custom : props.custom, current, velocity);\n    }\n    /**\n     * If the variant definition is a variant label, or\n     * the function returned a variant label, resolve.\n     */\n    if (typeof definition === \"string\") {\n        definition = props.variants && props.variants[definition];\n    }\n    /**\n     * At this point we've resolved both functions and variant labels,\n     * but the resolved variant label might itself have been a function.\n     * If so, resolve. This can only have returned a valid target object.\n     */\n    if (typeof definition === \"function\") {\n        const [current, velocity] = getValueState(visualElement);\n        definition = definition(custom !== undefined ? custom : props.custom, current, velocity);\n    }\n    return definition;\n}\n\nexport { resolveVariantFromProps };\n","import { useRef } from 'react';\n\n/**\n * Creates a constant value over the lifecycle of a component.\n *\n * Even if `useMemo` is provided an empty array as its final argument, it doesn't offer\n * a guarantee that it won't re-run for performance reasons later on. By using `useConstant`\n * you can ensure that initialisers don't execute twice or more.\n */\nfunction useConstant(init) {\n    const ref = useRef(null);\n    if (ref.current === null) {\n        ref.current = init();\n    }\n    return ref.current;\n}\n\nexport { useConstant };\n","const isKeyframesTarget = (v) => {\n    return Array.isArray(v);\n};\n\nexport { isKeyframesTarget };\n","import { isKeyframesTarget } from '../animation/utils/is-keyframes-target.mjs';\n\nconst isCustomValue = (v) => {\n    return Boolean(v && typeof v === \"object\" && v.mix && v.toValue);\n};\nconst resolveFinalValueInKeyframes = (v) => {\n    // TODO maybe throw if v.length - 1 is placeholder token?\n    return isKeyframesTarget(v) ? v[v.length - 1] || 0 : v;\n};\n\nexport { isCustomValue, resolveFinalValueInKeyframes };\n","import { isCustomValue } from '../../utils/resolve-value.mjs';\nimport { isMotionValue } from './is-motion-value.mjs';\n\n/**\n * If the provided value is a MotionValue, this returns the actual value, otherwise just the value itself\n *\n * TODO: Remove and move to library\n */\nfunction resolveMotionValue(value) {\n    const unwrappedValue = isMotionValue(value) ? value.get() : value;\n    return isCustomValue(unwrappedValue)\n        ? unwrappedValue.toValue()\n        : unwrappedValue;\n}\n\nexport { resolveMotionValue };\n","import { useContext } from 'react';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.mjs';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { resolveVariantFromProps } from '../../render/utils/resolve-variants.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\nimport { resolveMotionValue } from '../../value/utils/resolve-motion-value.mjs';\nimport { MotionContext } from '../../context/MotionContext/index.mjs';\nimport { isControllingVariants, isVariantNode } from '../../render/utils/is-controlling-variants.mjs';\n\nfunction makeState({ scrapeMotionValuesFromProps, createRenderState, onMount, }, props, context, presenceContext) {\n    const state = {\n        latestValues: makeLatestValues(props, context, presenceContext, scrapeMotionValuesFromProps),\n        renderState: createRenderState(),\n    };\n    if (onMount) {\n        state.mount = (instance) => onMount(props, instance, state);\n    }\n    return state;\n}\nconst makeUseVisualState = (config) => (props, isStatic) => {\n    const context = useContext(MotionContext);\n    const presenceContext = useContext(PresenceContext);\n    const make = () => makeState(config, props, context, presenceContext);\n    return isStatic ? make() : useConstant(make);\n};\nfunction makeLatestValues(props, context, presenceContext, scrapeMotionValues) {\n    const values = {};\n    const motionValues = scrapeMotionValues(props, {});\n    for (const key in motionValues) {\n        values[key] = resolveMotionValue(motionValues[key]);\n    }\n    let { initial, animate } = props;\n    const isControllingVariants$1 = isControllingVariants(props);\n    const isVariantNode$1 = isVariantNode(props);\n    if (context &&\n        isVariantNode$1 &&\n        !isControllingVariants$1 &&\n        props.inherit !== false) {\n        if (initial === undefined)\n            initial = context.initial;\n        if (animate === undefined)\n            animate = context.animate;\n    }\n    let isInitialAnimationBlocked = presenceContext\n        ? presenceContext.initial === false\n        : false;\n    isInitialAnimationBlocked = isInitialAnimationBlocked || initial === false;\n    const variantToSet = isInitialAnimationBlocked ? animate : initial;\n    if (variantToSet &&\n        typeof variantToSet !== \"boolean\" &&\n        !isAnimationControls(variantToSet)) {\n        const list = Array.isArray(variantToSet) ? variantToSet : [variantToSet];\n        list.forEach((definition) => {\n            const resolved = resolveVariantFromProps(props, definition);\n            if (!resolved)\n                return;\n            const { transitionEnd, transition, ...target } = resolved;\n            for (const key in target) {\n                let valueTarget = target[key];\n                if (Array.isArray(valueTarget)) {\n                    /**\n                     * Take final keyframe if the initial animation is blocked because\n                     * we want to initialise at the end of that blocked animation.\n                     */\n                    const index = isInitialAnimationBlocked\n                        ? valueTarget.length - 1\n                        : 0;\n                    valueTarget = valueTarget[index];\n                }\n                if (valueTarget !== null) {\n                    values[key] = valueTarget;\n                }\n            }\n            for (const key in transitionEnd)\n                values[key] = transitionEnd[key];\n        });\n    }\n    return values;\n}\n\nexport { makeUseVisualState };\n","import { noop } from '../utils/noop.mjs';\nimport { createRenderBatcher } from './batcher.mjs';\n\nconst { schedule: frame, cancel: cancelFrame, state: frameData, steps, } = createRenderBatcher(typeof requestAnimationFrame !== \"undefined\" ? requestAnimationFrame : noop, true);\n\nexport { cancelFrame, frame, frameData, steps };\n","import { renderSVG } from './utils/render.mjs';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\nimport { makeUseVisualState } from '../../motion/utils/use-visual-state.mjs';\nimport { createSvgRenderState } from './utils/create-render-state.mjs';\nimport { buildSVGAttrs } from './utils/build-attrs.mjs';\nimport { isSVGTag } from './utils/is-svg-tag.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\n\nconst svgMotionConfig = {\n    useVisualState: makeUseVisualState({\n        scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n        createRenderState: createSvgRenderState,\n        onMount: (props, instance, { renderState, latestValues }) => {\n            frame.read(() => {\n                try {\n                    renderState.dimensions =\n                        typeof instance.getBBox ===\n                            \"function\"\n                            ? instance.getBBox()\n                            : instance.getBoundingClientRect();\n                }\n                catch (e) {\n                    // Most likely trying to measure an unrendered element under Firefox\n                    renderState.dimensions = {\n                        x: 0,\n                        y: 0,\n                        width: 0,\n                        height: 0,\n                    };\n                }\n            });\n            frame.render(() => {\n                buildSVGAttrs(renderState, latestValues, { enableHardwareAcceleration: false }, isSVGTag(instance.tagName), props.transformTemplate);\n                renderSVG(instance, renderState);\n            });\n        },\n    }),\n};\n\nexport { svgMotionConfig };\n","import { makeUseVisualState } from '../../motion/utils/use-visual-state.mjs';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\nimport { createHtmlRenderState } from './utils/create-render-state.mjs';\n\nconst htmlMotionConfig = {\n    useVisualState: makeUseVisualState({\n        scrapeMotionValuesFromProps,\n        createRenderState: createHtmlRenderState,\n    }),\n};\n\nexport { htmlMotionConfig };\n","import { isSVGComponent } from './is-svg-component.mjs';\nimport { createUseRender } from '../use-render.mjs';\nimport { svgMotionConfig } from '../../svg/config-motion.mjs';\nimport { htmlMotionConfig } from '../../html/config-motion.mjs';\n\nfunction createDomMotionConfig(Component, { forwardMotionProps = false }, preloadedFeatures, createVisualElement) {\n    const baseConfig = isSVGComponent(Component)\n        ? svgMotionConfig\n        : htmlMotionConfig;\n    return {\n        ...baseConfig,\n        preloadedFeatures,\n        useRender: createUseRender(forwardMotionProps),\n        createVisualElement,\n        Component,\n    };\n}\n\nexport { createDomMotionConfig };\n","function addDomEvent(target, eventName, handler, options = { passive: true }) {\n    target.addEventListener(eventName, handler, options);\n    return () => target.removeEventListener(eventName, handler);\n}\n\nexport { addDomEvent };\n","const isPrimaryPointer = (event) => {\n    if (event.pointerType === \"mouse\") {\n        return typeof event.button !== \"number\" || event.button <= 0;\n    }\n    else {\n        /**\n         * isPrimary is true for all mice buttons, whereas every touch point\n         * is regarded as its own input. So subsequent concurrent touch points\n         * will be false.\n         *\n         * Specifically match against false here as incomplete versions of\n         * PointerEvents in very old browser might have it set as undefined.\n         */\n        return event.isPrimary !== false;\n    }\n};\n\nexport { isPrimaryPointer };\n","import { isPrimaryPointer } from './utils/is-primary-pointer.mjs';\n\nfunction extractEventInfo(event, pointType = \"page\") {\n    return {\n        point: {\n            x: event[`${pointType}X`],\n            y: event[`${pointType}Y`],\n        },\n    };\n}\nconst addPointerInfo = (handler) => {\n    return (event) => isPrimaryPointer(event) && handler(event, extractEventInfo(event));\n};\n\nexport { addPointerInfo, extractEventInfo };\n","import { addDomEvent } from './add-dom-event.mjs';\nimport { addPointerInfo } from './event-info.mjs';\n\nfunction addPointerEvent(target, eventName, handler, options) {\n    return addDomEvent(target, eventName, addPointerInfo(handler), options);\n}\n\nexport { addPointerEvent };\n","/**\n * Pipe\n * Compose other transformers to run linearily\n * pipe(min(20), max(40))\n * @param  {...functions} transformers\n * @return {function}\n */\nconst combineFunctions = (a, b) => (v) => b(a(v));\nconst pipe = (...transformers) => transformers.reduce(combineFunctions);\n\nexport { pipe };\n","function createLock(name) {\n    let lock = null;\n    return () => {\n        const openLock = () => {\n            lock = null;\n        };\n        if (lock === null) {\n            lock = name;\n            return openLock;\n        }\n        return false;\n    };\n}\nconst globalHorizontalLock = createLock(\"dragHorizontal\");\nconst globalVerticalLock = createLock(\"dragVertical\");\nfunction getGlobalLock(drag) {\n    let lock = false;\n    if (drag === \"y\") {\n        lock = globalVerticalLock();\n    }\n    else if (drag === \"x\") {\n        lock = globalHorizontalLock();\n    }\n    else {\n        const openHorizontal = globalHorizontalLock();\n        const openVertical = globalVerticalLock();\n        if (openHorizontal && openVertical) {\n            lock = () => {\n                openHorizontal();\n                openVertical();\n            };\n        }\n        else {\n            // Release the locks because we don't use them\n            if (openHorizontal)\n                openHorizontal();\n            if (openVertical)\n                openVertical();\n        }\n    }\n    return lock;\n}\nfunction isDragActive() {\n    // Check the gesture lock - if we get it, it means no drag gesture is active\n    // and we can safely fire the tap gesture.\n    const openGestureLock = getGlobalLock(true);\n    if (!openGestureLock)\n        return true;\n    openGestureLock();\n    return false;\n}\n\nexport { createLock, getGlobalLock, isDragActive };\n","class Feature {\n    constructor(node) {\n        this.isMounted = false;\n        this.node = node;\n    }\n    update() { }\n}\n\nexport { Feature };\n","import { addPointerEvent } from '../events/add-pointer-event.mjs';\nimport { pipe } from '../utils/pipe.mjs';\nimport { isDragActive } from './drag/utils/lock.mjs';\nimport { Feature } from '../motion/features/Feature.mjs';\nimport { frame } from '../frameloop/frame.mjs';\n\nfunction addHoverEvent(node, isActive) {\n    const eventName = isActive ? \"pointerenter\" : \"pointerleave\";\n    const callbackName = isActive ? \"onHoverStart\" : \"onHoverEnd\";\n    const handleEvent = (event, info) => {\n        if (event.pointerType === \"touch\" || isDragActive())\n            return;\n        const props = node.getProps();\n        if (node.animationState && props.whileHover) {\n            node.animationState.setActive(\"whileHover\", isActive);\n        }\n        const callback = props[callbackName];\n        if (callback) {\n            frame.postRender(() => callback(event, info));\n        }\n    };\n    return addPointerEvent(node.current, eventName, handleEvent, {\n        passive: !node.getProps()[callbackName],\n    });\n}\nclass HoverGesture extends Feature {\n    mount() {\n        this.unmount = pipe(addHoverEvent(this.node, true), addHoverEvent(this.node, false));\n    }\n    unmount() { }\n}\n\nexport { HoverGesture };\n","import { addDomEvent } from '../events/add-dom-event.mjs';\nimport { Feature } from '../motion/features/Feature.mjs';\nimport { pipe } from '../utils/pipe.mjs';\n\nclass FocusGesture extends Feature {\n    constructor() {\n        super(...arguments);\n        this.isActive = false;\n    }\n    onFocus() {\n        let isFocusVisible = false;\n        /**\n         * If this element doesn't match focus-visible then don't\n         * apply whileHover. But, if matches throws that focus-visible\n         * is not a valid selector then in that browser outline styles will be applied\n         * to the element by default and we want to match that behaviour with whileFocus.\n         */\n        try {\n            isFocusVisible = this.node.current.matches(\":focus-visible\");\n        }\n        catch (e) {\n            isFocusVisible = true;\n        }\n        if (!isFocusVisible || !this.node.animationState)\n            return;\n        this.node.animationState.setActive(\"whileFocus\", true);\n        this.isActive = true;\n    }\n    onBlur() {\n        if (!this.isActive || !this.node.animationState)\n            return;\n        this.node.animationState.setActive(\"whileFocus\", false);\n        this.isActive = false;\n    }\n    mount() {\n        this.unmount = pipe(addDomEvent(this.node.current, \"focus\", () => this.onFocus()), addDomEvent(this.node.current, \"blur\", () => this.onBlur()));\n    }\n    unmount() { }\n}\n\nexport { FocusGesture };\n","/**\n * Recursively traverse up the tree to check whether the provided child node\n * is the parent or a descendant of it.\n *\n * @param parent - Element to find\n * @param child - Element to test against parent\n */\nconst isNodeOrChild = (parent, child) => {\n    if (!child) {\n        return false;\n    }\n    else if (parent === child) {\n        return true;\n    }\n    else {\n        return isNodeOrChild(parent, child.parentElement);\n    }\n};\n\nexport { isNodeOrChild };\n","import { extractEventInfo } from '../events/event-info.mjs';\nimport { addDomEvent } from '../events/add-dom-event.mjs';\nimport { addPointerEvent } from '../events/add-pointer-event.mjs';\nimport { Feature } from '../motion/features/Feature.mjs';\nimport { pipe } from '../utils/pipe.mjs';\nimport { isDragActive } from './drag/utils/lock.mjs';\nimport { isNodeOrChild } from './utils/is-node-or-child.mjs';\nimport { noop } from '../utils/noop.mjs';\nimport { frame } from '../frameloop/frame.mjs';\n\nfunction fireSyntheticPointerEvent(name, handler) {\n    if (!handler)\n        return;\n    const syntheticPointerEvent = new PointerEvent(\"pointer\" + name);\n    handler(syntheticPointerEvent, extractEventInfo(syntheticPointerEvent));\n}\nclass PressGesture extends Feature {\n    constructor() {\n        super(...arguments);\n        this.removeStartListeners = noop;\n        this.removeEndListeners = noop;\n        this.removeAccessibleListeners = noop;\n        this.startPointerPress = (startEvent, startInfo) => {\n            if (this.isPressing)\n                return;\n            this.removeEndListeners();\n            const props = this.node.getProps();\n            const endPointerPress = (endEvent, endInfo) => {\n                if (!this.checkPressEnd())\n                    return;\n                const { onTap, onTapCancel, globalTapTarget } = this.node.getProps();\n                /**\n                 * We only count this as a tap gesture if the event.target is the same\n                 * as, or a child of, this component's element\n                 */\n                const handler = !globalTapTarget &&\n                    !isNodeOrChild(this.node.current, endEvent.target)\n                    ? onTapCancel\n                    : onTap;\n                if (handler) {\n                    frame.update(() => handler(endEvent, endInfo));\n                }\n            };\n            const removePointerUpListener = addPointerEvent(window, \"pointerup\", endPointerPress, {\n                passive: !(props.onTap || props[\"onPointerUp\"]),\n            });\n            const removePointerCancelListener = addPointerEvent(window, \"pointercancel\", (cancelEvent, cancelInfo) => this.cancelPress(cancelEvent, cancelInfo), {\n                passive: !(props.onTapCancel ||\n                    props[\"onPointerCancel\"]),\n            });\n            this.removeEndListeners = pipe(removePointerUpListener, removePointerCancelListener);\n            this.startPress(startEvent, startInfo);\n        };\n        this.startAccessiblePress = () => {\n            const handleKeydown = (keydownEvent) => {\n                if (keydownEvent.key !== \"Enter\" || this.isPressing)\n                    return;\n                const handleKeyup = (keyupEvent) => {\n                    if (keyupEvent.key !== \"Enter\" || !this.checkPressEnd())\n                        return;\n                    fireSyntheticPointerEvent(\"up\", (event, info) => {\n                        const { onTap } = this.node.getProps();\n                        if (onTap) {\n                            frame.postRender(() => onTap(event, info));\n                        }\n                    });\n                };\n                this.removeEndListeners();\n                this.removeEndListeners = addDomEvent(this.node.current, \"keyup\", handleKeyup);\n                fireSyntheticPointerEvent(\"down\", (event, info) => {\n                    this.startPress(event, info);\n                });\n            };\n            const removeKeydownListener = addDomEvent(this.node.current, \"keydown\", handleKeydown);\n            const handleBlur = () => {\n                if (!this.isPressing)\n                    return;\n                fireSyntheticPointerEvent(\"cancel\", (cancelEvent, cancelInfo) => this.cancelPress(cancelEvent, cancelInfo));\n            };\n            const removeBlurListener = addDomEvent(this.node.current, \"blur\", handleBlur);\n            this.removeAccessibleListeners = pipe(removeKeydownListener, removeBlurListener);\n        };\n    }\n    startPress(event, info) {\n        this.isPressing = true;\n        const { onTapStart, whileTap } = this.node.getProps();\n        /**\n         * Ensure we trigger animations before firing event callback\n         */\n        if (whileTap && this.node.animationState) {\n            this.node.animationState.setActive(\"whileTap\", true);\n        }\n        if (onTapStart) {\n            frame.postRender(() => onTapStart(event, info));\n        }\n    }\n    checkPressEnd() {\n        this.removeEndListeners();\n        this.isPressing = false;\n        const props = this.node.getProps();\n        if (props.whileTap && this.node.animationState) {\n            this.node.animationState.setActive(\"whileTap\", false);\n        }\n        return !isDragActive();\n    }\n    cancelPress(event, info) {\n        if (!this.checkPressEnd())\n            return;\n        const { onTapCancel } = this.node.getProps();\n        if (onTapCancel) {\n            frame.postRender(() => onTapCancel(event, info));\n        }\n    }\n    mount() {\n        const props = this.node.getProps();\n        const removePointerListener = addPointerEvent(props.globalTapTarget ? window : this.node.current, \"pointerdown\", this.startPointerPress, {\n            passive: !(props.onTapStart ||\n                props[\"onPointerStart\"]),\n        });\n        const removeFocusListener = addDomEvent(this.node.current, \"focus\", this.startAccessiblePress);\n        this.removeStartListeners = pipe(removePointerListener, removeFocusListener);\n    }\n    unmount() {\n        this.removeStartListeners();\n        this.removeEndListeners();\n        this.removeAccessibleListeners();\n    }\n}\n\nexport { PressGesture };\n","/**\n * Map an IntersectionHandler callback to an element. We only ever make one handler for one\n * element, so even though these handlers might all be triggered by different\n * observers, we can keep them in the same map.\n */\nconst observerCallbacks = new WeakMap();\n/**\n * Multiple observers can be created for multiple element/document roots. Each with\n * different settings. So here we store dictionaries of observers to each root,\n * using serialised settings (threshold/margin) as lookup keys.\n */\nconst observers = new WeakMap();\nconst fireObserverCallback = (entry) => {\n    const callback = observerCallbacks.get(entry.target);\n    callback && callback(entry);\n};\nconst fireAllObserverCallbacks = (entries) => {\n    entries.forEach(fireObserverCallback);\n};\nfunction initIntersectionObserver({ root, ...options }) {\n    const lookupRoot = root || document;\n    /**\n     * If we don't have an observer lookup map for this root, create one.\n     */\n    if (!observers.has(lookupRoot)) {\n        observers.set(lookupRoot, {});\n    }\n    const rootObservers = observers.get(lookupRoot);\n    const key = JSON.stringify(options);\n    /**\n     * If we don't have an observer for this combination of root and settings,\n     * create one.\n     */\n    if (!rootObservers[key]) {\n        rootObservers[key] = new IntersectionObserver(fireAllObserverCallbacks, { root, ...options });\n    }\n    return rootObservers[key];\n}\nfunction observeIntersection(element, options, callback) {\n    const rootInteresectionObserver = initIntersectionObserver(options);\n    observerCallbacks.set(element, callback);\n    rootInteresectionObserver.observe(element);\n    return () => {\n        observerCallbacks.delete(element);\n        rootInteresectionObserver.unobserve(element);\n    };\n}\n\nexport { observeIntersection };\n","import { Feature } from '../Feature.mjs';\nimport { observeIntersection } from './observers.mjs';\n\nconst thresholdNames = {\n    some: 0,\n    all: 1,\n};\nclass InViewFeature extends Feature {\n    constructor() {\n        super(...arguments);\n        this.hasEnteredView = false;\n        this.isInView = false;\n    }\n    startObserver() {\n        this.unmount();\n        const { viewport = {} } = this.node.getProps();\n        const { root, margin: rootMargin, amount = \"some\", once } = viewport;\n        const options = {\n            root: root ? root.current : undefined,\n            rootMargin,\n            threshold: typeof amount === \"number\" ? amount : thresholdNames[amount],\n        };\n        const onIntersectionUpdate = (entry) => {\n            const { isIntersecting } = entry;\n            /**\n             * If there's been no change in the viewport state, early return.\n             */\n            if (this.isInView === isIntersecting)\n                return;\n            this.isInView = isIntersecting;\n            /**\n             * Handle hasEnteredView. If this is only meant to run once, and\n             * element isn't visible, early return. Otherwise set hasEnteredView to true.\n             */\n            if (once && !isIntersecting && this.hasEnteredView) {\n                return;\n            }\n            else if (isIntersecting) {\n                this.hasEnteredView = true;\n            }\n            if (this.node.animationState) {\n                this.node.animationState.setActive(\"whileInView\", isIntersecting);\n            }\n            /**\n             * Use the latest committed props rather than the ones in scope\n             * when this observer is created\n             */\n            const { onViewportEnter, onViewportLeave } = this.node.getProps();\n            const callback = isIntersecting ? onViewportEnter : onViewportLeave;\n            callback && callback(entry);\n        };\n        return observeIntersection(this.node.current, options, onIntersectionUpdate);\n    }\n    mount() {\n        this.startObserver();\n    }\n    update() {\n        if (typeof IntersectionObserver === \"undefined\")\n            return;\n        const { props, prevProps } = this.node;\n        const hasOptionsChanged = [\"amount\", \"margin\", \"root\"].some(hasViewportOptionChanged(props, prevProps));\n        if (hasOptionsChanged) {\n            this.startObserver();\n        }\n    }\n    unmount() { }\n}\nfunction hasViewportOptionChanged({ viewport = {} }, { viewport: prevViewport = {} } = {}) {\n    return (name) => viewport[name] !== prevViewport[name];\n}\n\nexport { InViewFeature };\n","import { HoverGesture } from '../../gestures/hover.mjs';\nimport { FocusGesture } from '../../gestures/focus.mjs';\nimport { PressGesture } from '../../gestures/press.mjs';\nimport { InViewFeature } from './viewport/index.mjs';\n\nconst gestureAnimations = {\n    inView: {\n        Feature: InViewFeature,\n    },\n    tap: {\n        Feature: PressGesture,\n    },\n    focus: {\n        Feature: FocusGesture,\n    },\n    hover: {\n        Feature: HoverGesture,\n    },\n};\n\nexport { gestureAnimations };\n","function shallowCompare(next, prev) {\n    if (!Array.isArray(prev))\n        return false;\n    const prevLength = prev.length;\n    if (prevLength !== next.length)\n        return false;\n    for (let i = 0; i < prevLength; i++) {\n        if (prev[i] !== next[i])\n            return false;\n    }\n    return true;\n}\n\nexport { shallowCompare };\n","import { resolveVariantFromProps } from './resolve-variants.mjs';\n\nfunction resolveVariant(visualElement, definition, custom) {\n    const props = visualElement.getProps();\n    return resolveVariantFromProps(props, definition, custom !== undefined ? custom : props.custom, visualElement);\n}\n\nexport { resolveVariant };\n","/**\n * Converts seconds to milliseconds\n *\n * @param seconds - Time in seconds.\n * @return milliseconds - Converted time in milliseconds.\n */\nconst secondsToMilliseconds = (seconds) => seconds * 1000;\nconst millisecondsToSeconds = (milliseconds) => milliseconds / 1000;\n\nexport { millisecondsToSeconds, secondsToMilliseconds };\n","import { transformProps } from '../../render/html/utils/transform.mjs';\n\nconst underDampedSpring = {\n    type: \"spring\",\n    stiffness: 500,\n    damping: 25,\n    restSpeed: 10,\n};\nconst criticallyDampedSpring = (target) => ({\n    type: \"spring\",\n    stiffness: 550,\n    damping: target === 0 ? 2 * Math.sqrt(550) : 30,\n    restSpeed: 10,\n});\nconst keyframesTransition = {\n    type: \"keyframes\",\n    duration: 0.8,\n};\n/**\n * Default easing curve is a slightly shallower version of\n * the default browser easing curve.\n */\nconst ease = {\n    type: \"keyframes\",\n    ease: [0.25, 0.1, 0.35, 1],\n    duration: 0.3,\n};\nconst getDefaultTransition = (valueKey, { keyframes }) => {\n    if (keyframes.length > 2) {\n        return keyframesTransition;\n    }\n    else if (transformProps.has(valueKey)) {\n        return valueKey.startsWith(\"scale\")\n            ? criticallyDampedSpring(keyframes[1])\n            : underDampedSpring;\n    }\n    return ease;\n};\n\nexport { getDefaultTransition };\n","/**\n * Decide whether a transition is defined on a given Transition.\n * This filters out orchestration options and returns true\n * if any options are left.\n */\nfunction isTransitionDefined({ when, delay: _delay, delayChildren, staggerChildren, staggerDirection, repeat, repeatType, repeatDelay, from, elapsed, ...transition }) {\n    return !!Object.keys(transition).length;\n}\nfunction getValueTransition(transition, key) {\n    return (transition[key] ||\n        transition[\"default\"] ||\n        transition);\n}\n\nexport { getValueTransition, isTransitionDefined };\n","const isNotNull = (value) => value !== null;\nfunction getFinalKeyframe(keyframes, { repeat, repeatType = \"loop\" }, finalKeyframe) {\n    const resolvedKeyframes = keyframes.filter(isNotNull);\n    const index = repeat && repeatType !== \"loop\" && repeat % 2 === 1\n        ? 0\n        : resolvedKeyframes.length - 1;\n    return !index || finalKeyframe === undefined\n        ? resolvedKeyframes[index]\n        : finalKeyframe;\n}\n\nexport { getFinalKeyframe };\n","import { MotionGlobalConfig } from '../utils/GlobalConfig.mjs';\nimport { frameData } from './frame.mjs';\n\nlet now;\nfunction clearTime() {\n    now = undefined;\n}\n/**\n * An eventloop-synchronous alternative to performance.now().\n *\n * Ensures that time measurements remain consistent within a synchronous context.\n * Usually calling performance.now() twice within the same synchronous context\n * will return different values which isn't useful for animations when we're usually\n * trying to sync animations to the same frame.\n */\nconst time = {\n    now: () => {\n        if (now === undefined) {\n            time.set(frameData.isProcessing || MotionGlobalConfig.useManualTiming\n                ? frameData.timestamp\n                : performance.now());\n        }\n        return now;\n    },\n    set: (newTime) => {\n        now = newTime;\n        queueMicrotask(clearTime);\n    },\n};\n\nexport { time };\n","/**\n * Check if the value is a zero value string like \"0px\" or \"0%\"\n */\nconst isZeroValueString = (v) => /^0[^.\\s]+$/u.test(v);\n\nexport { isZeroValueString };\n","import { isZeroValueString } from '../../utils/is-zero-value-string.mjs';\n\nfunction isNone(value) {\n    if (typeof value === \"number\") {\n        return value === 0;\n    }\n    else if (value !== null) {\n        return value === \"none\" || value === \"0\" || isZeroValueString(value);\n    }\n    else {\n        return true;\n    }\n}\n\nexport { isNone };\n","/**\n * Check if value is a numerical string, ie a string that is purely a number eg \"100\" or \"-100.1\"\n */\nconst isNumericalString = (v) => /^-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)$/u.test(v);\n\nexport { isNumericalString };\n","import { invariant } from '../../../utils/errors.mjs';\nimport { isNumericalString } from '../../../utils/is-numerical-string.mjs';\nimport { isCSSVariableToken } from './is-css-variable.mjs';\n\n/**\n * Parse Framer's special CSS variable format into a CSS token and a fallback.\n *\n * ```\n * `var(--foo, #fff)` => [`--foo`, '#fff']\n * ```\n *\n * @param current\n */\nconst splitCSSVariableRegex = \n// eslint-disable-next-line redos-detector/no-unsafe-regex -- false positive, as it can match a lot of words\n/^var\\(--(?:([\\w-]+)|([\\w-]+), ?([a-zA-Z\\d ()%#.,-]+))\\)/u;\nfunction parseCSSVariable(current) {\n    const match = splitCSSVariableRegex.exec(current);\n    if (!match)\n        return [,];\n    const [, token1, token2, fallback] = match;\n    return [`--${token1 !== null && token1 !== void 0 ? token1 : token2}`, fallback];\n}\nconst maxDepth = 4;\nfunction getVariableValue(current, element, depth = 1) {\n    invariant(depth <= maxDepth, `Max CSS variable fallback depth detected in property \"${current}\". This may indicate a circular fallback dependency.`);\n    const [token, fallback] = parseCSSVariable(current);\n    // No CSS variable detected\n    if (!token)\n        return;\n    // Attempt to read this CSS variable off the element\n    const resolved = window.getComputedStyle(element).getPropertyValue(token);\n    if (resolved) {\n        const trimmed = resolved.trim();\n        return isNumericalString(trimmed) ? parseFloat(trimmed) : trimmed;\n    }\n    return isCSSVariableToken(fallback)\n        ? getVariableValue(fallback, element, depth + 1)\n        : fallback;\n}\n\nexport { getVariableValue, parseCSSVariable };\n","import { transformPropOrder } from '../../html/utils/transform.mjs';\nimport { number } from '../../../value/types/numbers/index.mjs';\nimport { px } from '../../../value/types/numbers/units.mjs';\n\nconst positionalKeys = new Set([\n    \"width\",\n    \"height\",\n    \"top\",\n    \"left\",\n    \"right\",\n    \"bottom\",\n    \"x\",\n    \"y\",\n    \"translateX\",\n    \"translateY\",\n]);\nconst isNumOrPxType = (v) => v === number || v === px;\nconst getPosFromMatrix = (matrix, pos) => parseFloat(matrix.split(\", \")[pos]);\nconst getTranslateFromMatrix = (pos2, pos3) => (_bbox, { transform }) => {\n    if (transform === \"none\" || !transform)\n        return 0;\n    const matrix3d = transform.match(/^matrix3d\\((.+)\\)$/u);\n    if (matrix3d) {\n        return getPosFromMatrix(matrix3d[1], pos3);\n    }\n    else {\n        const matrix = transform.match(/^matrix\\((.+)\\)$/u);\n        if (matrix) {\n            return getPosFromMatrix(matrix[1], pos2);\n        }\n        else {\n            return 0;\n        }\n    }\n};\nconst transformKeys = new Set([\"x\", \"y\", \"z\"]);\nconst nonTranslationalTransformKeys = transformPropOrder.filter((key) => !transformKeys.has(key));\nfunction removeNonTranslationalTransform(visualElement) {\n    const removedTransforms = [];\n    nonTranslationalTransformKeys.forEach((key) => {\n        const value = visualElement.getValue(key);\n        if (value !== undefined) {\n            removedTransforms.push([key, value.get()]);\n            value.set(key.startsWith(\"scale\") ? 1 : 0);\n        }\n    });\n    return removedTransforms;\n}\nconst positionalValues = {\n    // Dimensions\n    width: ({ x }, { paddingLeft = \"0\", paddingRight = \"0\" }) => x.max - x.min - parseFloat(paddingLeft) - parseFloat(paddingRight),\n    height: ({ y }, { paddingTop = \"0\", paddingBottom = \"0\" }) => y.max - y.min - parseFloat(paddingTop) - parseFloat(paddingBottom),\n    top: (_bbox, { top }) => parseFloat(top),\n    left: (_bbox, { left }) => parseFloat(left),\n    bottom: ({ y }, { top }) => parseFloat(top) + (y.max - y.min),\n    right: ({ x }, { left }) => parseFloat(left) + (x.max - x.min),\n    // Transform\n    x: getTranslateFromMatrix(4, 13),\n    y: getTranslateFromMatrix(5, 14),\n};\n// Alias translate longform names\npositionalValues.translateX = positionalValues.x;\npositionalValues.translateY = positionalValues.y;\n\nexport { isNumOrPxType, positionalKeys, positionalValues, removeNonTranslationalTransform };\n","/**\n * Tests a provided value against a ValueType\n */\nconst testValueType = (v) => (type) => type.test(v);\n\nexport { testValueType };\n","import { number } from '../../../value/types/numbers/index.mjs';\nimport { px, percent, degrees, vw, vh } from '../../../value/types/numbers/units.mjs';\nimport { testValueType } from './test.mjs';\nimport { auto } from './type-auto.mjs';\n\n/**\n * A list of value types commonly used for dimensions\n */\nconst dimensionValueTypes = [number, px, percent, degrees, vw, vh, auto];\n/**\n * Tests a dimensional value against the list of dimension ValueTypes\n */\nconst findDimensionValueType = (v) => dimensionValueTypes.find(testValueType(v));\n\nexport { dimensionValueTypes, findDimensionValueType };\n","/**\n * ValueType for \"auto\"\n */\nconst auto = {\n    test: (v) => v === \"auto\",\n    parse: (v) => v,\n};\n\nexport { auto };\n","import { removeNonTranslationalTransform } from '../dom/utils/unit-conversion.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\n\nconst toResolve = new Set();\nlet isScheduled = false;\nlet anyNeedsMeasurement = false;\nfunction measureAllKeyframes() {\n    if (anyNeedsMeasurement) {\n        const resolversToMeasure = Array.from(toResolve).filter((resolver) => resolver.needsMeasurement);\n        const elementsToMeasure = new Set(resolversToMeasure.map((resolver) => resolver.element));\n        const transformsToRestore = new Map();\n        /**\n         * Write pass\n         * If we're measuring elements we want to remove bounding box-changing transforms.\n         */\n        elementsToMeasure.forEach((element) => {\n            const removedTransforms = removeNonTranslationalTransform(element);\n            if (!removedTransforms.length)\n                return;\n            transformsToRestore.set(element, removedTransforms);\n            element.render();\n        });\n        // Read\n        resolversToMeasure.forEach((resolver) => resolver.measureInitialState());\n        // Write\n        elementsToMeasure.forEach((element) => {\n            element.render();\n            const restore = transformsToRestore.get(element);\n            if (restore) {\n                restore.forEach(([key, value]) => {\n                    var _a;\n                    (_a = element.getValue(key)) === null || _a === void 0 ? void 0 : _a.set(value);\n                });\n            }\n        });\n        // Read\n        resolversToMeasure.forEach((resolver) => resolver.measureEndState());\n        // Write\n        resolversToMeasure.forEach((resolver) => {\n            if (resolver.suspendedScrollY !== undefined) {\n                window.scrollTo(0, resolver.suspendedScrollY);\n            }\n        });\n    }\n    anyNeedsMeasurement = false;\n    isScheduled = false;\n    toResolve.forEach((resolver) => resolver.complete());\n    toResolve.clear();\n}\nfunction readAllKeyframes() {\n    toResolve.forEach((resolver) => {\n        resolver.readKeyframes();\n        if (resolver.needsMeasurement) {\n            anyNeedsMeasurement = true;\n        }\n    });\n}\nfunction flushKeyframeResolvers() {\n    readAllKeyframes();\n    measureAllKeyframes();\n}\nclass KeyframeResolver {\n    constructor(unresolvedKeyframes, onComplete, name, motionValue, element, isAsync = false) {\n        /**\n         * Track whether this resolver has completed. Once complete, it never\n         * needs to attempt keyframe resolution again.\n         */\n        this.isComplete = false;\n        /**\n         * Track whether this resolver is async. If it is, it'll be added to the\n         * resolver queue and flushed in the next frame. Resolvers that aren't going\n         * to trigger read/write thrashing don't need to be async.\n         */\n        this.isAsync = false;\n        /**\n         * Track whether this resolver needs to perform a measurement\n         * to resolve its keyframes.\n         */\n        this.needsMeasurement = false;\n        /**\n         * Track whether this resolver is currently scheduled to resolve\n         * to allow it to be cancelled and resumed externally.\n         */\n        this.isScheduled = false;\n        this.unresolvedKeyframes = [...unresolvedKeyframes];\n        this.onComplete = onComplete;\n        this.name = name;\n        this.motionValue = motionValue;\n        this.element = element;\n        this.isAsync = isAsync;\n    }\n    scheduleResolve() {\n        this.isScheduled = true;\n        if (this.isAsync) {\n            toResolve.add(this);\n            if (!isScheduled) {\n                isScheduled = true;\n                frame.read(readAllKeyframes);\n                frame.resolveKeyframes(measureAllKeyframes);\n            }\n        }\n        else {\n            this.readKeyframes();\n            this.complete();\n        }\n    }\n    readKeyframes() {\n        const { unresolvedKeyframes, name, element, motionValue } = this;\n        /**\n         * If a keyframe is null, we hydrate it either by reading it from\n         * the instance, or propagating from previous keyframes.\n         */\n        for (let i = 0; i < unresolvedKeyframes.length; i++) {\n            if (unresolvedKeyframes[i] === null) {\n                /**\n                 * If the first keyframe is null, we need to find its value by sampling the element\n                 */\n                if (i === 0) {\n                    const currentValue = motionValue === null || motionValue === void 0 ? void 0 : motionValue.get();\n                    const finalKeyframe = unresolvedKeyframes[unresolvedKeyframes.length - 1];\n                    if (currentValue !== undefined) {\n                        unresolvedKeyframes[0] = currentValue;\n                    }\n                    else if (element && name) {\n                        const valueAsRead = element.readValue(name, finalKeyframe);\n                        if (valueAsRead !== undefined && valueAsRead !== null) {\n                            unresolvedKeyframes[0] = valueAsRead;\n                        }\n                    }\n                    if (unresolvedKeyframes[0] === undefined) {\n                        unresolvedKeyframes[0] = finalKeyframe;\n                    }\n                    if (motionValue && currentValue === undefined) {\n                        motionValue.set(unresolvedKeyframes[0]);\n                    }\n                }\n                else {\n                    unresolvedKeyframes[i] = unresolvedKeyframes[i - 1];\n                }\n            }\n        }\n    }\n    setFinalKeyframe() { }\n    measureInitialState() { }\n    renderEndStyles() { }\n    measureEndState() { }\n    complete() {\n        this.isComplete = true;\n        this.onComplete(this.unresolvedKeyframes, this.finalKeyframe);\n        toResolve.delete(this);\n    }\n    cancel() {\n        if (!this.isComplete) {\n            this.isScheduled = false;\n            toResolve.delete(this);\n        }\n    }\n    resume() {\n        if (!this.isComplete)\n            this.scheduleResolve();\n    }\n}\n\nexport { KeyframeResolver, flushKeyframeResolvers };\n","import { isString, singleColorRegex, floatRegex } from '../utils.mjs';\n\n/**\n * Returns true if the provided string is a color, ie rgba(0,0,0,0) or #000,\n * but false if a number or multiple colors\n */\nconst isColorString = (type, testProp) => (v) => {\n    return Boolean((isString(v) && singleColorRegex.test(v) && v.startsWith(type)) ||\n        (testProp && Object.prototype.hasOwnProperty.call(v, testProp)));\n};\nconst splitColor = (aName, bName, cName) => (v) => {\n    if (!isString(v))\n        return v;\n    const [a, b, c, alpha] = v.match(floatRegex);\n    return {\n        [aName]: parseFloat(a),\n        [bName]: parseFloat(b),\n        [cName]: parseFloat(c),\n        alpha: alpha !== undefined ? parseFloat(alpha) : 1,\n    };\n};\n\nexport { isColorString, splitColor };\n","import { clamp } from '../../../utils/clamp.mjs';\nimport { alpha, number } from '../numbers/index.mjs';\nimport { sanitize } from '../utils.mjs';\nimport { isColorString, splitColor } from './utils.mjs';\n\nconst clampRgbUnit = (v) => clamp(0, 255, v);\nconst rgbUnit = {\n    ...number,\n    transform: (v) => Math.round(clampRgbUnit(v)),\n};\nconst rgba = {\n    test: isColorString(\"rgb\", \"red\"),\n    parse: splitColor(\"red\", \"green\", \"blue\"),\n    transform: ({ red, green, blue, alpha: alpha$1 = 1 }) => \"rgba(\" +\n        rgbUnit.transform(red) +\n        \", \" +\n        rgbUnit.transform(green) +\n        \", \" +\n        rgbUnit.transform(blue) +\n        \", \" +\n        sanitize(alpha.transform(alpha$1)) +\n        \")\",\n};\n\nexport { rgbUnit, rgba };\n","import { rgba } from './rgba.mjs';\nimport { isColorString } from './utils.mjs';\n\nfunction parseHex(v) {\n    let r = \"\";\n    let g = \"\";\n    let b = \"\";\n    let a = \"\";\n    // If we have 6 characters, ie #FF0000\n    if (v.length > 5) {\n        r = v.substring(1, 3);\n        g = v.substring(3, 5);\n        b = v.substring(5, 7);\n        a = v.substring(7, 9);\n        // Or we have 3 characters, ie #F00\n    }\n    else {\n        r = v.substring(1, 2);\n        g = v.substring(2, 3);\n        b = v.substring(3, 4);\n        a = v.substring(4, 5);\n        r += r;\n        g += g;\n        b += b;\n        a += a;\n    }\n    return {\n        red: parseInt(r, 16),\n        green: parseInt(g, 16),\n        blue: parseInt(b, 16),\n        alpha: a ? parseInt(a, 16) / 255 : 1,\n    };\n}\nconst hex = {\n    test: isColorString(\"#\"),\n    parse: parseHex,\n    transform: rgba.transform,\n};\n\nexport { hex };\n","import { alpha } from '../numbers/index.mjs';\nimport { percent } from '../numbers/units.mjs';\nimport { sanitize } from '../utils.mjs';\nimport { isColorString, splitColor } from './utils.mjs';\n\nconst hsla = {\n    test: isColorString(\"hsl\", \"hue\"),\n    parse: splitColor(\"hue\", \"saturation\", \"lightness\"),\n    transform: ({ hue, saturation, lightness, alpha: alpha$1 = 1 }) => {\n        return (\"hsla(\" +\n            Math.round(hue) +\n            \", \" +\n            percent.transform(sanitize(saturation)) +\n            \", \" +\n            percent.transform(sanitize(lightness)) +\n            \", \" +\n            sanitize(alpha.transform(alpha$1)) +\n            \")\");\n    },\n};\n\nexport { hsla };\n","import { isString } from '../utils.mjs';\nimport { hex } from './hex.mjs';\nimport { hsla } from './hsla.mjs';\nimport { rgba } from './rgba.mjs';\n\nconst color = {\n    test: (v) => rgba.test(v) || hex.test(v) || hsla.test(v),\n    parse: (v) => {\n        if (rgba.test(v)) {\n            return rgba.parse(v);\n        }\n        else if (hsla.test(v)) {\n            return hsla.parse(v);\n        }\n        else {\n            return hex.parse(v);\n        }\n    },\n    transform: (v) => {\n        return isString(v)\n            ? v\n            : v.hasOwnProperty(\"red\")\n                ? rgba.transform(v)\n                : hsla.transform(v);\n    },\n};\n\nexport { color };\n","import { color } from '../color/index.mjs';\nimport { isString, floatRegex, colorRegex, sanitize } from '../utils.mjs';\n\nfunction test(v) {\n    var _a, _b;\n    return (isNaN(v) &&\n        isString(v) &&\n        (((_a = v.match(floatRegex)) === null || _a === void 0 ? void 0 : _a.length) || 0) +\n            (((_b = v.match(colorRegex)) === null || _b === void 0 ? void 0 : _b.length) || 0) >\n            0);\n}\nconst NUMBER_TOKEN = \"number\";\nconst COLOR_TOKEN = \"color\";\nconst VAR_TOKEN = \"var\";\nconst VAR_FUNCTION_TOKEN = \"var(\";\nconst SPLIT_TOKEN = \"${}\";\n// this regex consists of the `singleCssVariableRegex|rgbHSLValueRegex|digitRegex`\nconst complexRegex = /var\\s*\\(\\s*--(?:[\\w-]+\\s*|[\\w-]+\\s*,(?:\\s*[^)(\\s]|\\s*\\((?:[^)(]|\\([^)(]*\\))*\\))+\\s*)\\)|#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\)|-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)/giu;\nfunction analyseComplexValue(value) {\n    const originalValue = value.toString();\n    const values = [];\n    const indexes = {\n        color: [],\n        number: [],\n        var: [],\n    };\n    const types = [];\n    let i = 0;\n    const tokenised = originalValue.replace(complexRegex, (parsedValue) => {\n        if (color.test(parsedValue)) {\n            indexes.color.push(i);\n            types.push(COLOR_TOKEN);\n            values.push(color.parse(parsedValue));\n        }\n        else if (parsedValue.startsWith(VAR_FUNCTION_TOKEN)) {\n            indexes.var.push(i);\n            types.push(VAR_TOKEN);\n            values.push(parsedValue);\n        }\n        else {\n            indexes.number.push(i);\n            types.push(NUMBER_TOKEN);\n            values.push(parseFloat(parsedValue));\n        }\n        ++i;\n        return SPLIT_TOKEN;\n    });\n    const split = tokenised.split(SPLIT_TOKEN);\n    return { values, split, indexes, types };\n}\nfunction parseComplexValue(v) {\n    return analyseComplexValue(v).values;\n}\nfunction createTransformer(source) {\n    const { split, types } = analyseComplexValue(source);\n    const numSections = split.length;\n    return (v) => {\n        let output = \"\";\n        for (let i = 0; i < numSections; i++) {\n            output += split[i];\n            if (v[i] !== undefined) {\n                const type = types[i];\n                if (type === NUMBER_TOKEN) {\n                    output += sanitize(v[i]);\n                }\n                else if (type === COLOR_TOKEN) {\n                    output += color.transform(v[i]);\n                }\n                else {\n                    output += v[i];\n                }\n            }\n        }\n        return output;\n    };\n}\nconst convertNumbersToZero = (v) => typeof v === \"number\" ? 0 : v;\nfunction getAnimatableNone(v) {\n    const parsed = parseComplexValue(v);\n    const transformer = createTransformer(v);\n    return transformer(parsed.map(convertNumbersToZero));\n}\nconst complex = {\n    test,\n    parse: parseComplexValue,\n    createTransformer,\n    getAnimatableNone,\n};\n\nexport { analyseComplexValue, complex };\n","import { complex } from './index.mjs';\nimport { floatRegex } from '../utils.mjs';\n\n/**\n * Properties that should default to 1 or 100%\n */\nconst maxDefaults = new Set([\"brightness\", \"contrast\", \"saturate\", \"opacity\"]);\nfunction applyDefaultFilter(v) {\n    const [name, value] = v.slice(0, -1).split(\"(\");\n    if (name === \"drop-shadow\")\n        return v;\n    const [number] = value.match(floatRegex) || [];\n    if (!number)\n        return v;\n    const unit = value.replace(number, \"\");\n    let defaultValue = maxDefaults.has(name) ? 1 : 0;\n    if (number !== value)\n        defaultValue *= 100;\n    return name + \"(\" + defaultValue + unit + \")\";\n}\nconst functionRegex = /\\b([a-z-]*)\\(.*?\\)/gu;\nconst filter = {\n    ...complex,\n    getAnimatableNone: (v) => {\n        const functions = v.match(functionRegex);\n        return functions ? functions.map(applyDefaultFilter).join(\" \") : v;\n    },\n};\n\nexport { filter };\n","import { color } from '../../../value/types/color/index.mjs';\nimport { filter } from '../../../value/types/complex/filter.mjs';\nimport { numberValueTypes } from './number.mjs';\n\n/**\n * A map of default value types for common values\n */\nconst defaultValueTypes = {\n    ...numberValueTypes,\n    // Color props\n    color,\n    backgroundColor: color,\n    outlineColor: color,\n    fill: color,\n    stroke: color,\n    // Border props\n    borderColor: color,\n    borderTopColor: color,\n    borderRightColor: color,\n    borderBottomColor: color,\n    borderLeftColor: color,\n    filter,\n    WebkitFilter: filter,\n};\n/**\n * Gets the default ValueType for the provided value key\n */\nconst getDefaultValueType = (key) => defaultValueTypes[key];\n\nexport { defaultValueTypes, getDefaultValueType };\n","import { complex } from '../../../value/types/complex/index.mjs';\nimport { filter } from '../../../value/types/complex/filter.mjs';\nimport { getDefaultValueType } from './defaults.mjs';\n\nfunction getAnimatableNone(key, value) {\n    let defaultValueType = getDefaultValueType(key);\n    if (defaultValueType !== filter)\n        defaultValueType = complex;\n    // If value is not recognised as animatable, ie \"none\", create an animatable version origin based on the target\n    return defaultValueType.getAnimatableNone\n        ? defaultValueType.getAnimatableNone(value)\n        : undefined;\n}\n\nexport { getAnimatableNone };\n","import { analyseComplexValue } from '../../../value/types/complex/index.mjs';\nimport { getAnimatableNone } from '../../dom/value-types/animatable-none.mjs';\n\n/**\n * If we encounter keyframes like \"none\" or \"0\" and we also have keyframes like\n * \"#fff\" or \"200px 200px\" we want to find a keyframe to serve as a template for\n * the \"none\" keyframes. In this case \"#fff\" or \"200px 200px\" - then these get turned into\n * zero equivalents, i.e. \"#fff0\" or \"0px 0px\".\n */\nconst invalidTemplates = new Set([\"auto\", \"none\", \"0\"]);\nfunction makeNoneKeyframesAnimatable(unresolvedKeyframes, noneKeyframeIndexes, name) {\n    let i = 0;\n    let animatableTemplate = undefined;\n    while (i < unresolvedKeyframes.length && !animatableTemplate) {\n        const keyframe = unresolvedKeyframes[i];\n        if (typeof keyframe === \"string\" &&\n            !invalidTemplates.has(keyframe) &&\n            analyseComplexValue(keyframe).values.length) {\n            animatableTemplate = unresolvedKeyframes[i];\n        }\n        i++;\n    }\n    if (animatableTemplate && name) {\n        for (const noneIndex of noneKeyframeIndexes) {\n            unresolvedKeyframes[noneIndex] = getAnimatableNone(name, animatableTemplate);\n        }\n    }\n}\n\nexport { makeNoneKeyframesAnimatable };\n","import { isNone } from '../../animation/utils/is-none.mjs';\nimport { getVariableValue } from './utils/css-variables-conversion.mjs';\nimport { isCSSVariableToken } from './utils/is-css-variable.mjs';\nimport { positionalKeys, isNumOrPxType, positionalValues } from './utils/unit-conversion.mjs';\nimport { findDimensionValueType } from './value-types/dimensions.mjs';\nimport { KeyframeResolver } from '../utils/KeyframesResolver.mjs';\nimport { makeNoneKeyframesAnimatable } from '../html/utils/make-none-animatable.mjs';\n\nclass DOMKeyframesResolver extends KeyframeResolver {\n    constructor(unresolvedKeyframes, onComplete, name, motionValue) {\n        super(unresolvedKeyframes, onComplete, name, motionValue, motionValue === null || motionValue === void 0 ? void 0 : motionValue.owner, true);\n    }\n    readKeyframes() {\n        const { unresolvedKeyframes, element, name } = this;\n        if (!element.current)\n            return;\n        super.readKeyframes();\n        /**\n         * If any keyframe is a CSS variable, we need to find its value by sampling the element\n         */\n        for (let i = 0; i < unresolvedKeyframes.length; i++) {\n            let keyframe = unresolvedKeyframes[i];\n            if (typeof keyframe === \"string\") {\n                keyframe = keyframe.trim();\n                if (isCSSVariableToken(keyframe)) {\n                    const resolved = getVariableValue(keyframe, element.current);\n                    if (resolved !== undefined) {\n                        unresolvedKeyframes[i] = resolved;\n                    }\n                    if (i === unresolvedKeyframes.length - 1) {\n                        this.finalKeyframe = keyframe;\n                    }\n                }\n            }\n        }\n        /**\n         * Resolve \"none\" values. We do this potentially twice - once before and once after measuring keyframes.\n         * This could be seen as inefficient but it's a trade-off to avoid measurements in more situations, which\n         * have a far bigger performance impact.\n         */\n        this.resolveNoneKeyframes();\n        /**\n         * Check to see if unit type has changed. If so schedule jobs that will\n         * temporarily set styles to the destination keyframes.\n         * Skip if we have more than two keyframes or this isn't a positional value.\n         * TODO: We can throw if there are multiple keyframes and the value type changes.\n         */\n        if (!positionalKeys.has(name) || unresolvedKeyframes.length !== 2) {\n            return;\n        }\n        const [origin, target] = unresolvedKeyframes;\n        const originType = findDimensionValueType(origin);\n        const targetType = findDimensionValueType(target);\n        /**\n         * Either we don't recognise these value types or we can animate between them.\n         */\n        if (originType === targetType)\n            return;\n        /**\n         * If both values are numbers or pixels, we can animate between them by\n         * converting them to numbers.\n         */\n        if (isNumOrPxType(originType) && isNumOrPxType(targetType)) {\n            for (let i = 0; i < unresolvedKeyframes.length; i++) {\n                const value = unresolvedKeyframes[i];\n                if (typeof value === \"string\") {\n                    unresolvedKeyframes[i] = parseFloat(value);\n                }\n            }\n        }\n        else {\n            /**\n             * Else, the only way to resolve this is by measuring the element.\n             */\n            this.needsMeasurement = true;\n        }\n    }\n    resolveNoneKeyframes() {\n        const { unresolvedKeyframes, name } = this;\n        const noneKeyframeIndexes = [];\n        for (let i = 0; i < unresolvedKeyframes.length; i++) {\n            if (isNone(unresolvedKeyframes[i])) {\n                noneKeyframeIndexes.push(i);\n            }\n        }\n        if (noneKeyframeIndexes.length) {\n            makeNoneKeyframesAnimatable(unresolvedKeyframes, noneKeyframeIndexes, name);\n        }\n    }\n    measureInitialState() {\n        const { element, unresolvedKeyframes, name } = this;\n        if (!element.current)\n            return;\n        if (name === \"height\") {\n            this.suspendedScrollY = window.pageYOffset;\n        }\n        this.measuredOrigin = positionalValues[name](element.measureViewportBox(), window.getComputedStyle(element.current));\n        unresolvedKeyframes[0] = this.measuredOrigin;\n        // Set final key frame to measure after next render\n        const measureKeyframe = unresolvedKeyframes[unresolvedKeyframes.length - 1];\n        if (measureKeyframe !== undefined) {\n            element.getValue(name, measureKeyframe).jump(measureKeyframe, false);\n        }\n    }\n    measureEndState() {\n        var _a;\n        const { element, name, unresolvedKeyframes } = this;\n        if (!element.current)\n            return;\n        const value = element.getValue(name);\n        value && value.jump(this.measuredOrigin, false);\n        const finalKeyframeIndex = unresolvedKeyframes.length - 1;\n        const finalKeyframe = unresolvedKeyframes[finalKeyframeIndex];\n        unresolvedKeyframes[finalKeyframeIndex] = positionalValues[name](element.measureViewportBox(), window.getComputedStyle(element.current));\n        if (finalKeyframe !== null && this.finalKeyframe === undefined) {\n            this.finalKeyframe = finalKeyframe;\n        }\n        // If we removed transform values, reapply them before the next render\n        if ((_a = this.removedTransforms) === null || _a === void 0 ? void 0 : _a.length) {\n            this.removedTransforms.forEach(([unsetTransformName, unsetTransformValue]) => {\n                element\n                    .getValue(unsetTransformName)\n                    .set(unsetTransformValue);\n            });\n        }\n        this.resolveNoneKeyframes();\n    }\n}\n\nexport { DOMKeyframesResolver };\n","function memo(callback) {\n    let result;\n    return () => {\n        if (result === undefined)\n            result = callback();\n        return result;\n    };\n}\n\nexport { memo };\n","import { complex } from '../../value/types/complex/index.mjs';\n\n/**\n * Check if a value is animatable. Examples:\n *\n * : 100, \"100px\", \"#fff\"\n * : \"block\", \"url(2.jpg)\"\n * @param value\n *\n * @internal\n */\nconst isAnimatable = (value, name) => {\n    // If the list of keys tat might be non-animatable grows, replace with Set\n    if (name === \"zIndex\")\n        return false;\n    // If it's a number or a keyframes array, we can animate it. We might at some point\n    // need to do a deep isAnimatable check of keyframes, or let Popmotion handle this,\n    // but for now lets leave it like this for performance reasons\n    if (typeof value === \"number\" || Array.isArray(value))\n        return true;\n    if (typeof value === \"string\" && // It's animatable if we have a string\n        (complex.test(value) || value === \"0\") && // And it contains numbers and/or colors\n        !value.startsWith(\"url(\") // Unless it starts with \"url(\"\n    ) {\n        return true;\n    }\n    return false;\n};\n\nexport { isAnimatable };\n","import { warning } from '../../../utils/errors.mjs';\nimport { isAnimatable } from '../../utils/is-animatable.mjs';\n\nfunction hasKeyframesChanged(keyframes) {\n    const current = keyframes[0];\n    if (keyframes.length === 1)\n        return true;\n    for (let i = 0; i < keyframes.length; i++) {\n        if (keyframes[i] !== current)\n            return true;\n    }\n}\nfunction canAnimate(keyframes, name, type, velocity) {\n    /**\n     * Check if we're able to animate between the start and end keyframes,\n     * and throw a warning if we're attempting to animate between one that's\n     * animatable and another that isn't.\n     */\n    const originKeyframe = keyframes[0];\n    if (originKeyframe === null)\n        return false;\n    /**\n     * These aren't traditionally animatable but we do support them.\n     * In future we could look into making this more generic or replacing\n     * this function with mix() === mixImmediate\n     */\n    if (name === \"display\" || name === \"visibility\")\n        return true;\n    const targetKeyframe = keyframes[keyframes.length - 1];\n    const isOriginAnimatable = isAnimatable(originKeyframe, name);\n    const isTargetAnimatable = isAnimatable(targetKeyframe, name);\n    warning(isOriginAnimatable === isTargetAnimatable, `You are trying to animate ${name} from \"${originKeyframe}\" to \"${targetKeyframe}\". ${originKeyframe} is not an animatable value - to enable this animation set ${originKeyframe} to a value animatable to ${targetKeyframe} via the \\`style\\` property.`);\n    // Always skip if any of these are true\n    if (!isOriginAnimatable || !isTargetAnimatable) {\n        return false;\n    }\n    return hasKeyframesChanged(keyframes) || (type === \"spring\" && velocity);\n}\n\nexport { canAnimate };\n","import { flushKeyframeResolvers } from '../../render/utils/KeyframesResolver.mjs';\nimport { instantAnimationState } from '../../utils/use-instant-transition-state.mjs';\nimport { canAnimate } from './utils/can-animate.mjs';\nimport { getFinalKeyframe } from './waapi/utils/get-final-keyframe.mjs';\n\nclass BaseAnimation {\n    constructor({ autoplay = true, delay = 0, type = \"keyframes\", repeat = 0, repeatDelay = 0, repeatType = \"loop\", ...options }) {\n        // Track whether the animation has been stopped. Stopped animations won't restart.\n        this.isStopped = false;\n        this.hasAttemptedResolve = false;\n        this.options = {\n            autoplay,\n            delay,\n            type,\n            repeat,\n            repeatDelay,\n            repeatType,\n            ...options,\n        };\n        this.updateFinishedPromise();\n    }\n    /**\n     * A getter for resolved data. If keyframes are not yet resolved, accessing\n     * this.resolved will synchronously flush all pending keyframe resolvers.\n     * This is a deoptimisation, but at its worst still batches read/writes.\n     */\n    get resolved() {\n        if (!this._resolved && !this.hasAttemptedResolve) {\n            flushKeyframeResolvers();\n        }\n        return this._resolved;\n    }\n    /**\n     * A method to be called when the keyframes resolver completes. This method\n     * will check if its possible to run the animation and, if not, skip it.\n     * Otherwise, it will call initPlayback on the implementing class.\n     */\n    onKeyframesResolved(keyframes, finalKeyframe) {\n        this.hasAttemptedResolve = true;\n        const { name, type, velocity, delay, onComplete, onUpdate, isGenerator, } = this.options;\n        /**\n         * If we can't animate this value with the resolved keyframes\n         * then we should complete it immediately.\n         */\n        if (!isGenerator && !canAnimate(keyframes, name, type, velocity)) {\n            // Finish immediately\n            if (instantAnimationState.current || !delay) {\n                onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(getFinalKeyframe(keyframes, this.options, finalKeyframe));\n                onComplete === null || onComplete === void 0 ? void 0 : onComplete();\n                this.resolveFinishedPromise();\n                return;\n            }\n            // Finish after a delay\n            else {\n                this.options.duration = 0;\n            }\n        }\n        const resolvedAnimation = this.initPlayback(keyframes, finalKeyframe);\n        if (resolvedAnimation === false)\n            return;\n        this._resolved = {\n            keyframes,\n            finalKeyframe,\n            ...resolvedAnimation,\n        };\n        this.onPostResolved();\n    }\n    onPostResolved() { }\n    /**\n     * Allows the returned animation to be awaited or promise-chained. Currently\n     * resolves when the animation finishes at all but in a future update could/should\n     * reject if its cancels.\n     */\n    then(resolve, reject) {\n        return this.currentFinishedPromise.then(resolve, reject);\n    }\n    updateFinishedPromise() {\n        this.currentFinishedPromise = new Promise((resolve) => {\n            this.resolveFinishedPromise = resolve;\n        });\n    }\n}\n\nexport { BaseAnimation };\n","/*\n  Convert velocity into velocity per second\n\n  @param [number]: Unit per frame\n  @param [number]: Frame duration in ms\n*/\nfunction velocityPerSecond(velocity, frameDuration) {\n    return frameDuration ? velocity * (1000 / frameDuration) : 0;\n}\n\nexport { velocityPerSecond };\n","import { velocityPerSecond } from '../../../utils/velocity-per-second.mjs';\n\nconst velocitySampleDuration = 5; // ms\nfunction calcGeneratorVelocity(resolveValue, t, current) {\n    const prevT = Math.max(t - velocitySampleDuration, 0);\n    return velocityPerSecond(current - resolveValue(prevT), t - prevT);\n}\n\nexport { calcGeneratorVelocity };\n","import { warning } from '../../../utils/errors.mjs';\nimport { clamp } from '../../../utils/clamp.mjs';\nimport { secondsToMilliseconds, millisecondsToSeconds } from '../../../utils/time-conversion.mjs';\n\nconst safeMin = 0.001;\nconst minDuration = 0.01;\nconst maxDuration = 10.0;\nconst minDamping = 0.05;\nconst maxDamping = 1;\nfunction findSpring({ duration = 800, bounce = 0.25, velocity = 0, mass = 1, }) {\n    let envelope;\n    let derivative;\n    warning(duration <= secondsToMilliseconds(maxDuration), \"Spring duration must be 10 seconds or less\");\n    let dampingRatio = 1 - bounce;\n    /**\n     * Restrict dampingRatio and duration to within acceptable ranges.\n     */\n    dampingRatio = clamp(minDamping, maxDamping, dampingRatio);\n    duration = clamp(minDuration, maxDuration, millisecondsToSeconds(duration));\n    if (dampingRatio < 1) {\n        /**\n         * Underdamped spring\n         */\n        envelope = (undampedFreq) => {\n            const exponentialDecay = undampedFreq * dampingRatio;\n            const delta = exponentialDecay * duration;\n            const a = exponentialDecay - velocity;\n            const b = calcAngularFreq(undampedFreq, dampingRatio);\n            const c = Math.exp(-delta);\n            return safeMin - (a / b) * c;\n        };\n        derivative = (undampedFreq) => {\n            const exponentialDecay = undampedFreq * dampingRatio;\n            const delta = exponentialDecay * duration;\n            const d = delta * velocity + velocity;\n            const e = Math.pow(dampingRatio, 2) * Math.pow(undampedFreq, 2) * duration;\n            const f = Math.exp(-delta);\n            const g = calcAngularFreq(Math.pow(undampedFreq, 2), dampingRatio);\n            const factor = -envelope(undampedFreq) + safeMin > 0 ? -1 : 1;\n            return (factor * ((d - e) * f)) / g;\n        };\n    }\n    else {\n        /**\n         * Critically-damped spring\n         */\n        envelope = (undampedFreq) => {\n            const a = Math.exp(-undampedFreq * duration);\n            const b = (undampedFreq - velocity) * duration + 1;\n            return -safeMin + a * b;\n        };\n        derivative = (undampedFreq) => {\n            const a = Math.exp(-undampedFreq * duration);\n            const b = (velocity - undampedFreq) * (duration * duration);\n            return a * b;\n        };\n    }\n    const initialGuess = 5 / duration;\n    const undampedFreq = approximateRoot(envelope, derivative, initialGuess);\n    duration = secondsToMilliseconds(duration);\n    if (isNaN(undampedFreq)) {\n        return {\n            stiffness: 100,\n            damping: 10,\n            duration,\n        };\n    }\n    else {\n        const stiffness = Math.pow(undampedFreq, 2) * mass;\n        return {\n            stiffness,\n            damping: dampingRatio * 2 * Math.sqrt(mass * stiffness),\n            duration,\n        };\n    }\n}\nconst rootIterations = 12;\nfunction approximateRoot(envelope, derivative, initialGuess) {\n    let result = initialGuess;\n    for (let i = 1; i < rootIterations; i++) {\n        result = result - envelope(result) / derivative(result);\n    }\n    return result;\n}\nfunction calcAngularFreq(undampedFreq, dampingRatio) {\n    return undampedFreq * Math.sqrt(1 - dampingRatio * dampingRatio);\n}\n\nexport { calcAngularFreq, findSpring, maxDamping, maxDuration, minDamping, minDuration };\n","import { millisecondsToSeconds } from '../../../utils/time-conversion.mjs';\nimport { calcGeneratorVelocity } from '../utils/velocity.mjs';\nimport { findSpring, calcAngularFreq } from './find.mjs';\n\nconst durationKeys = [\"duration\", \"bounce\"];\nconst physicsKeys = [\"stiffness\", \"damping\", \"mass\"];\nfunction isSpringType(options, keys) {\n    return keys.some((key) => options[key] !== undefined);\n}\nfunction getSpringOptions(options) {\n    let springOptions = {\n        velocity: 0.0,\n        stiffness: 100,\n        damping: 10,\n        mass: 1.0,\n        isResolvedFromDuration: false,\n        ...options,\n    };\n    // stiffness/damping/mass overrides duration/bounce\n    if (!isSpringType(options, physicsKeys) &&\n        isSpringType(options, durationKeys)) {\n        const derived = findSpring(options);\n        springOptions = {\n            ...springOptions,\n            ...derived,\n            mass: 1.0,\n        };\n        springOptions.isResolvedFromDuration = true;\n    }\n    return springOptions;\n}\nfunction spring({ keyframes, restDelta, restSpeed, ...options }) {\n    const origin = keyframes[0];\n    const target = keyframes[keyframes.length - 1];\n    /**\n     * This is the Iterator-spec return value. We ensure it's mutable rather than using a generator\n     * to reduce GC during animation.\n     */\n    const state = { done: false, value: origin };\n    const { stiffness, damping, mass, duration, velocity, isResolvedFromDuration, } = getSpringOptions({\n        ...options,\n        velocity: -millisecondsToSeconds(options.velocity || 0),\n    });\n    const initialVelocity = velocity || 0.0;\n    const dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n    const initialDelta = target - origin;\n    const undampedAngularFreq = millisecondsToSeconds(Math.sqrt(stiffness / mass));\n    /**\n     * If we're working on a granular scale, use smaller defaults for determining\n     * when the spring is finished.\n     *\n     * These defaults have been selected emprically based on what strikes a good\n     * ratio between feeling good and finishing as soon as changes are imperceptible.\n     */\n    const isGranularScale = Math.abs(initialDelta) < 5;\n    restSpeed || (restSpeed = isGranularScale ? 0.01 : 2);\n    restDelta || (restDelta = isGranularScale ? 0.005 : 0.5);\n    let resolveSpring;\n    if (dampingRatio < 1) {\n        const angularFreq = calcAngularFreq(undampedAngularFreq, dampingRatio);\n        // Underdamped spring\n        resolveSpring = (t) => {\n            const envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n            return (target -\n                envelope *\n                    (((initialVelocity +\n                        dampingRatio * undampedAngularFreq * initialDelta) /\n                        angularFreq) *\n                        Math.sin(angularFreq * t) +\n                        initialDelta * Math.cos(angularFreq * t)));\n        };\n    }\n    else if (dampingRatio === 1) {\n        // Critically damped spring\n        resolveSpring = (t) => target -\n            Math.exp(-undampedAngularFreq * t) *\n                (initialDelta +\n                    (initialVelocity + undampedAngularFreq * initialDelta) * t);\n    }\n    else {\n        // Overdamped spring\n        const dampedAngularFreq = undampedAngularFreq * Math.sqrt(dampingRatio * dampingRatio - 1);\n        resolveSpring = (t) => {\n            const envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n            // When performing sinh or cosh values can hit Infinity so we cap them here\n            const freqForT = Math.min(dampedAngularFreq * t, 300);\n            return (target -\n                (envelope *\n                    ((initialVelocity +\n                        dampingRatio * undampedAngularFreq * initialDelta) *\n                        Math.sinh(freqForT) +\n                        dampedAngularFreq *\n                            initialDelta *\n                            Math.cosh(freqForT))) /\n                    dampedAngularFreq);\n        };\n    }\n    return {\n        calculatedDuration: isResolvedFromDuration ? duration || null : null,\n        next: (t) => {\n            const current = resolveSpring(t);\n            if (!isResolvedFromDuration) {\n                let currentVelocity = initialVelocity;\n                if (t !== 0) {\n                    /**\n                     * We only need to calculate velocity for under-damped springs\n                     * as over- and critically-damped springs can't overshoot, so\n                     * checking only for displacement is enough.\n                     */\n                    if (dampingRatio < 1) {\n                        currentVelocity = calcGeneratorVelocity(resolveSpring, t, current);\n                    }\n                    else {\n                        currentVelocity = 0;\n                    }\n                }\n                const isBelowVelocityThreshold = Math.abs(currentVelocity) <= restSpeed;\n                const isBelowDisplacementThreshold = Math.abs(target - current) <= restDelta;\n                state.done =\n                    isBelowVelocityThreshold && isBelowDisplacementThreshold;\n            }\n            else {\n                state.done = t >= duration;\n            }\n            state.value = state.done ? target : current;\n            return state;\n        },\n    };\n}\n\nexport { spring };\n","import { spring } from './spring/index.mjs';\nimport { calcGeneratorVelocity } from './utils/velocity.mjs';\n\nfunction inertia({ keyframes, velocity = 0.0, power = 0.8, timeConstant = 325, bounceDamping = 10, bounceStiffness = 500, modifyTarget, min, max, restDelta = 0.5, restSpeed, }) {\n    const origin = keyframes[0];\n    const state = {\n        done: false,\n        value: origin,\n    };\n    const isOutOfBounds = (v) => (min !== undefined && v < min) || (max !== undefined && v > max);\n    const nearestBoundary = (v) => {\n        if (min === undefined)\n            return max;\n        if (max === undefined)\n            return min;\n        return Math.abs(min - v) < Math.abs(max - v) ? min : max;\n    };\n    let amplitude = power * velocity;\n    const ideal = origin + amplitude;\n    const target = modifyTarget === undefined ? ideal : modifyTarget(ideal);\n    /**\n     * If the target has changed we need to re-calculate the amplitude, otherwise\n     * the animation will start from the wrong position.\n     */\n    if (target !== ideal)\n        amplitude = target - origin;\n    const calcDelta = (t) => -amplitude * Math.exp(-t / timeConstant);\n    const calcLatest = (t) => target + calcDelta(t);\n    const applyFriction = (t) => {\n        const delta = calcDelta(t);\n        const latest = calcLatest(t);\n        state.done = Math.abs(delta) <= restDelta;\n        state.value = state.done ? target : latest;\n    };\n    /**\n     * Ideally this would resolve for t in a stateless way, we could\n     * do that by always precalculating the animation but as we know\n     * this will be done anyway we can assume that spring will\n     * be discovered during that.\n     */\n    let timeReachedBoundary;\n    let spring$1;\n    const checkCatchBoundary = (t) => {\n        if (!isOutOfBounds(state.value))\n            return;\n        timeReachedBoundary = t;\n        spring$1 = spring({\n            keyframes: [state.value, nearestBoundary(state.value)],\n            velocity: calcGeneratorVelocity(calcLatest, t, state.value), // TODO: This should be passing * 1000\n            damping: bounceDamping,\n            stiffness: bounceStiffness,\n            restDelta,\n            restSpeed,\n        });\n    };\n    checkCatchBoundary(0);\n    return {\n        calculatedDuration: null,\n        next: (t) => {\n            /**\n             * We need to resolve the friction to figure out if we need a\n             * spring but we don't want to do this twice per frame. So here\n             * we flag if we updated for this frame and later if we did\n             * we can skip doing it again.\n             */\n            let hasUpdatedFrame = false;\n            if (!spring$1 && timeReachedBoundary === undefined) {\n                hasUpdatedFrame = true;\n                applyFriction(t);\n                checkCatchBoundary(t);\n            }\n            /**\n             * If we have a spring and the provided t is beyond the moment the friction\n             * animation crossed the min/max boundary, use the spring.\n             */\n            if (timeReachedBoundary !== undefined && t >= timeReachedBoundary) {\n                return spring$1.next(t - timeReachedBoundary);\n            }\n            else {\n                !hasUpdatedFrame && applyFriction(t);\n                return state;\n            }\n        },\n    };\n}\n\nexport { inertia };\n","import { noop } from '../utils/noop.mjs';\n\n/*\n  Bezier function generator\n  This has been modified from Gatan Renaudeau's BezierEasing\n  https://github.com/gre/bezier-easing/blob/master/src/index.js\n  https://github.com/gre/bezier-easing/blob/master/LICENSE\n  \n  I've removed the newtonRaphsonIterate algo because in benchmarking it\n  wasn't noticiably faster than binarySubdivision, indeed removing it\n  usually improved times, depending on the curve.\n  I also removed the lookup table, as for the added bundle size and loop we're\n  only cutting ~4 or so subdivision iterations. I bumped the max iterations up\n  to 12 to compensate and this still tended to be faster for no perceivable\n  loss in accuracy.\n  Usage\n    const easeOut = cubicBezier(.17,.67,.83,.67);\n    const x = easeOut(0.5); // returns 0.627...\n*/\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nconst calcBezier = (t, a1, a2) => (((1.0 - 3.0 * a2 + 3.0 * a1) * t + (3.0 * a2 - 6.0 * a1)) * t + 3.0 * a1) *\n    t;\nconst subdivisionPrecision = 0.0000001;\nconst subdivisionMaxIterations = 12;\nfunction binarySubdivide(x, lowerBound, upperBound, mX1, mX2) {\n    let currentX;\n    let currentT;\n    let i = 0;\n    do {\n        currentT = lowerBound + (upperBound - lowerBound) / 2.0;\n        currentX = calcBezier(currentT, mX1, mX2) - x;\n        if (currentX > 0.0) {\n            upperBound = currentT;\n        }\n        else {\n            lowerBound = currentT;\n        }\n    } while (Math.abs(currentX) > subdivisionPrecision &&\n        ++i < subdivisionMaxIterations);\n    return currentT;\n}\nfunction cubicBezier(mX1, mY1, mX2, mY2) {\n    // If this is a linear gradient, return linear easing\n    if (mX1 === mY1 && mX2 === mY2)\n        return noop;\n    const getTForX = (aX) => binarySubdivide(aX, 0, 1, mX1, mX2);\n    // If animation is at start/end, return t without easing\n    return (t) => t === 0 || t === 1 ? t : calcBezier(getTForX(t), mY1, mY2);\n}\n\nexport { cubicBezier };\n","import { cubicBezier } from './cubic-bezier.mjs';\n\nconst easeIn = cubicBezier(0.42, 0, 1, 1);\nconst easeOut = cubicBezier(0, 0, 0.58, 1);\nconst easeInOut = cubicBezier(0.42, 0, 0.58, 1);\n\nexport { easeIn, easeInOut, easeOut };\n","const isEasingArray = (ease) => {\n    return Array.isArray(ease) && typeof ease[0] !== \"number\";\n};\n\nexport { isEasingArray };\n","// Accepts an easing function and returns a new one that outputs mirrored values for\n// the second half of the animation. Turns easeIn into easeInOut.\nconst mirrorEasing = (easing) => (p) => p <= 0.5 ? easing(2 * p) / 2 : (2 - easing(2 * (1 - p))) / 2;\n\nexport { mirrorEasing };\n","// Accepts an easing function and returns a new one that outputs reversed values.\n// Turns easeIn into easeOut.\nconst reverseEasing = (easing) => (p) => 1 - easing(1 - p);\n\nexport { reverseEasing };\n","import { mirrorEasing } from './modifiers/mirror.mjs';\nimport { reverseEasing } from './modifiers/reverse.mjs';\n\nconst circIn = (p) => 1 - Math.sin(Math.acos(p));\nconst circOut = reverseEasing(circIn);\nconst circInOut = mirrorEasing(circIn);\n\nexport { circIn, circInOut, circOut };\n","import { cubicBezier } from './cubic-bezier.mjs';\nimport { mirrorEasing } from './modifiers/mirror.mjs';\nimport { reverseEasing } from './modifiers/reverse.mjs';\n\nconst backOut = cubicBezier(0.33, 1.53, 0.69, 0.99);\nconst backIn = reverseEasing(backOut);\nconst backInOut = mirrorEasing(backIn);\n\nexport { backIn, backInOut, backOut };\n","import { invariant } from '../../utils/errors.mjs';\nimport { cubicBezier } from '../cubic-bezier.mjs';\nimport { noop } from '../../utils/noop.mjs';\nimport { easeIn, easeInOut, easeOut } from '../ease.mjs';\nimport { circIn, circInOut, circOut } from '../circ.mjs';\nimport { backIn, backInOut, backOut } from '../back.mjs';\nimport { anticipate } from '../anticipate.mjs';\n\nconst easingLookup = {\n    linear: noop,\n    easeIn,\n    easeInOut,\n    easeOut,\n    circIn,\n    circInOut,\n    circOut,\n    backIn,\n    backInOut,\n    backOut,\n    anticipate,\n};\nconst easingDefinitionToFunction = (definition) => {\n    if (Array.isArray(definition)) {\n        // If cubic bezier definition, create bezier curve\n        invariant(definition.length === 4, `Cubic bezier arrays must contain four numerical values.`);\n        const [x1, y1, x2, y2] = definition;\n        return cubicBezier(x1, y1, x2, y2);\n    }\n    else if (typeof definition === \"string\") {\n        // Else lookup from table\n        invariant(easingLookup[definition] !== undefined, `Invalid easing type '${definition}'`);\n        return easingLookup[definition];\n    }\n    return definition;\n};\n\nexport { easingDefinitionToFunction };\n","import { backIn } from './back.mjs';\n\nconst anticipate = (p) => (p *= 2) < 1 ? 0.5 * backIn(p) : 0.5 * (2 - Math.pow(2, -10 * (p - 1)));\n\nexport { anticipate };\n","/*\n  Progress within given range\n\n  Given a lower limit and an upper limit, we return the progress\n  (expressed as a number 0-1) represented by the given value, and\n  limit that progress to within 0-1.\n\n  @param [number]: Lower limit\n  @param [number]: Upper limit\n  @param [number]: Value to find progress within given range\n  @return [number]: Progress of value within range as expressed 0-1\n*/\nconst progress = (from, to, value) => {\n    const toFromDifference = to - from;\n    return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;\n};\n\nexport { progress };\n","/*\n  Value in range from progress\n\n  Given a lower limit and an upper limit, we return the value within\n  that range as expressed by progress (usually a number from 0 to 1)\n\n  So progress = 0.5 would change\n\n  from -------- to\n\n  to\n\n  from ---- to\n\n  E.g. from = 10, to = 20, progress = 0.5 => 15\n\n  @param [number]: Lower limit of range\n  @param [number]: Upper limit of range\n  @param [number]: The progress between lower and upper limits expressed 0-1\n  @return [number]: Value as calculated from progress within range (not limited within range)\n*/\nconst mixNumber = (from, to, progress) => {\n    return from + (to - from) * progress;\n};\n\nexport { mixNumber };\n","// Adapted from https://gist.github.com/mjackson/5311256\nfunction hueToRgb(p, q, t) {\n    if (t < 0)\n        t += 1;\n    if (t > 1)\n        t -= 1;\n    if (t < 1 / 6)\n        return p + (q - p) * 6 * t;\n    if (t < 1 / 2)\n        return q;\n    if (t < 2 / 3)\n        return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n}\nfunction hslaToRgba({ hue, saturation, lightness, alpha }) {\n    hue /= 360;\n    saturation /= 100;\n    lightness /= 100;\n    let red = 0;\n    let green = 0;\n    let blue = 0;\n    if (!saturation) {\n        red = green = blue = lightness;\n    }\n    else {\n        const q = lightness < 0.5\n            ? lightness * (1 + saturation)\n            : lightness + saturation - lightness * saturation;\n        const p = 2 * lightness - q;\n        red = hueToRgb(p, q, hue + 1 / 3);\n        green = hueToRgb(p, q, hue);\n        blue = hueToRgb(p, q, hue - 1 / 3);\n    }\n    return {\n        red: Math.round(red * 255),\n        green: Math.round(green * 255),\n        blue: Math.round(blue * 255),\n        alpha,\n    };\n}\n\nexport { hslaToRgba };\n","function mixImmediate(a, b) {\n    return (p) => (p > 0 ? b : a);\n}\n\nexport { mixImmediate };\n","import { mixNumber } from './number.mjs';\nimport { warning } from '../errors.mjs';\nimport { hslaToRgba } from '../hsla-to-rgba.mjs';\nimport { hex } from '../../value/types/color/hex.mjs';\nimport { rgba } from '../../value/types/color/rgba.mjs';\nimport { hsla } from '../../value/types/color/hsla.mjs';\nimport { mixImmediate } from './immediate.mjs';\n\n// Linear color space blending\n// Explained https://www.youtube.com/watch?v=LKnqECcg6Gw\n// Demonstrated http://codepen.io/osublake/pen/xGVVaN\nconst mixLinearColor = (from, to, v) => {\n    const fromExpo = from * from;\n    const expo = v * (to * to - fromExpo) + fromExpo;\n    return expo < 0 ? 0 : Math.sqrt(expo);\n};\nconst colorTypes = [hex, rgba, hsla];\nconst getColorType = (v) => colorTypes.find((type) => type.test(v));\nfunction asRGBA(color) {\n    const type = getColorType(color);\n    warning(Boolean(type), `'${color}' is not an animatable color. Use the equivalent color code instead.`);\n    if (!Boolean(type))\n        return false;\n    let model = type.parse(color);\n    if (type === hsla) {\n        // TODO Remove this cast - needed since Framer Motion's stricter typing\n        model = hslaToRgba(model);\n    }\n    return model;\n}\nconst mixColor = (from, to) => {\n    const fromRGBA = asRGBA(from);\n    const toRGBA = asRGBA(to);\n    if (!fromRGBA || !toRGBA) {\n        return mixImmediate(from, to);\n    }\n    const blended = { ...fromRGBA };\n    return (v) => {\n        blended.red = mixLinearColor(fromRGBA.red, toRGBA.red, v);\n        blended.green = mixLinearColor(fromRGBA.green, toRGBA.green, v);\n        blended.blue = mixLinearColor(fromRGBA.blue, toRGBA.blue, v);\n        blended.alpha = mixNumber(fromRGBA.alpha, toRGBA.alpha, v);\n        return rgba.transform(blended);\n    };\n};\n\nexport { mixColor, mixLinearColor };\n","const invisibleValues = new Set([\"none\", \"hidden\"]);\n/**\n * Returns a function that, when provided a progress value between 0 and 1,\n * will return the \"none\" or \"hidden\" string only when the progress is that of\n * the origin or target.\n */\nfunction mixVisibility(origin, target) {\n    if (invisibleValues.has(origin)) {\n        return (p) => (p <= 0 ? origin : target);\n    }\n    else {\n        return (p) => (p >= 1 ? target : origin);\n    }\n}\n\nexport { invisibleValues, mixVisibility };\n","import { mixNumber as mixNumber$1 } from './number.mjs';\nimport { mixColor } from './color.mjs';\nimport { pipe } from '../pipe.mjs';\nimport { warning } from '../errors.mjs';\nimport { color } from '../../value/types/color/index.mjs';\nimport { complex, analyseComplexValue } from '../../value/types/complex/index.mjs';\nimport { isCSSVariableToken } from '../../render/dom/utils/is-css-variable.mjs';\nimport { invisibleValues, mixVisibility } from './visibility.mjs';\nimport { mixImmediate } from './immediate.mjs';\n\nfunction mixNumber(a, b) {\n    return (p) => mixNumber$1(a, b, p);\n}\nfunction getMixer(a) {\n    if (typeof a === \"number\") {\n        return mixNumber;\n    }\n    else if (typeof a === \"string\") {\n        return isCSSVariableToken(a)\n            ? mixImmediate\n            : color.test(a)\n                ? mixColor\n                : mixComplex;\n    }\n    else if (Array.isArray(a)) {\n        return mixArray;\n    }\n    else if (typeof a === \"object\") {\n        return color.test(a) ? mixColor : mixObject;\n    }\n    return mixImmediate;\n}\nfunction mixArray(a, b) {\n    const output = [...a];\n    const numValues = output.length;\n    const blendValue = a.map((v, i) => getMixer(v)(v, b[i]));\n    return (p) => {\n        for (let i = 0; i < numValues; i++) {\n            output[i] = blendValue[i](p);\n        }\n        return output;\n    };\n}\nfunction mixObject(a, b) {\n    const output = { ...a, ...b };\n    const blendValue = {};\n    for (const key in output) {\n        if (a[key] !== undefined && b[key] !== undefined) {\n            blendValue[key] = getMixer(a[key])(a[key], b[key]);\n        }\n    }\n    return (v) => {\n        for (const key in blendValue) {\n            output[key] = blendValue[key](v);\n        }\n        return output;\n    };\n}\nfunction matchOrder(origin, target) {\n    var _a;\n    const orderedOrigin = [];\n    const pointers = { color: 0, var: 0, number: 0 };\n    for (let i = 0; i < target.values.length; i++) {\n        const type = target.types[i];\n        const originIndex = origin.indexes[type][pointers[type]];\n        const originValue = (_a = origin.values[originIndex]) !== null && _a !== void 0 ? _a : 0;\n        orderedOrigin[i] = originValue;\n        pointers[type]++;\n    }\n    return orderedOrigin;\n}\nconst mixComplex = (origin, target) => {\n    const template = complex.createTransformer(target);\n    const originStats = analyseComplexValue(origin);\n    const targetStats = analyseComplexValue(target);\n    const canInterpolate = originStats.indexes.var.length === targetStats.indexes.var.length &&\n        originStats.indexes.color.length === targetStats.indexes.color.length &&\n        originStats.indexes.number.length >= targetStats.indexes.number.length;\n    if (canInterpolate) {\n        if ((invisibleValues.has(origin) &&\n            !targetStats.values.length) ||\n            (invisibleValues.has(target) &&\n                !originStats.values.length)) {\n            return mixVisibility(origin, target);\n        }\n        return pipe(mixArray(matchOrder(originStats, targetStats), targetStats.values), template);\n    }\n    else {\n        warning(true, `Complex values '${origin}' and '${target}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`);\n        return mixImmediate(origin, target);\n    }\n};\n\nexport { getMixer, mixArray, mixComplex, mixObject };\n","import { getMixer } from './complex.mjs';\nimport { mixNumber } from './number.mjs';\n\nfunction mix(from, to, p) {\n    if (typeof from === \"number\" &&\n        typeof to === \"number\" &&\n        typeof p === \"number\") {\n        return mixNumber(from, to, p);\n    }\n    const mixer = getMixer(from);\n    return mixer(from, to);\n}\n\nexport { mix };\n","import { invariant } from './errors.mjs';\nimport { clamp } from './clamp.mjs';\nimport { pipe } from './pipe.mjs';\nimport { progress } from './progress.mjs';\nimport { noop } from './noop.mjs';\nimport { mix } from './mix/index.mjs';\n\nfunction createMixers(output, ease, customMixer) {\n    const mixers = [];\n    const mixerFactory = customMixer || mix;\n    const numMixers = output.length - 1;\n    for (let i = 0; i < numMixers; i++) {\n        let mixer = mixerFactory(output[i], output[i + 1]);\n        if (ease) {\n            const easingFunction = Array.isArray(ease) ? ease[i] || noop : ease;\n            mixer = pipe(easingFunction, mixer);\n        }\n        mixers.push(mixer);\n    }\n    return mixers;\n}\n/**\n * Create a function that maps from a numerical input array to a generic output array.\n *\n * Accepts:\n *   - Numbers\n *   - Colors (hex, hsl, hsla, rgb, rgba)\n *   - Complex (combinations of one or more numbers or strings)\n *\n * ```jsx\n * const mixColor = interpolate([0, 1], ['#fff', '#000'])\n *\n * mixColor(0.5) // 'rgba(128, 128, 128, 1)'\n * ```\n *\n * TODO Revist this approach once we've moved to data models for values,\n * probably not needed to pregenerate mixer functions.\n *\n * @public\n */\nfunction interpolate(input, output, { clamp: isClamp = true, ease, mixer } = {}) {\n    const inputLength = input.length;\n    invariant(inputLength === output.length, \"Both input and output ranges must be the same length\");\n    /**\n     * If we're only provided a single input, we can just make a function\n     * that returns the output.\n     */\n    if (inputLength === 1)\n        return () => output[0];\n    if (inputLength === 2 && input[0] === input[1])\n        return () => output[1];\n    // If input runs highest -> lowest, reverse both arrays\n    if (input[0] > input[inputLength - 1]) {\n        input = [...input].reverse();\n        output = [...output].reverse();\n    }\n    const mixers = createMixers(output, ease, mixer);\n    const numMixers = mixers.length;\n    const interpolator = (v) => {\n        let i = 0;\n        if (numMixers > 1) {\n            for (; i < input.length - 2; i++) {\n                if (v < input[i + 1])\n                    break;\n            }\n        }\n        const progressInRange = progress(input[i], input[i + 1], v);\n        return mixers[i](progressInRange);\n    };\n    return isClamp\n        ? (v) => interpolator(clamp(input[0], input[inputLength - 1], v))\n        : interpolator;\n}\n\nexport { interpolate };\n","import { mixNumber } from '../mix/number.mjs';\nimport { progress } from '../progress.mjs';\n\nfunction fillOffset(offset, remaining) {\n    const min = offset[offset.length - 1];\n    for (let i = 1; i <= remaining; i++) {\n        const offsetProgress = progress(0, remaining, i);\n        offset.push(mixNumber(min, 1, offsetProgress));\n    }\n}\n\nexport { fillOffset };\n","import { fillOffset } from './fill.mjs';\n\nfunction defaultOffset(arr) {\n    const offset = [0];\n    fillOffset(offset, arr.length - 1);\n    return offset;\n}\n\nexport { defaultOffset };\n","function convertOffsetToTimes(offset, duration) {\n    return offset.map((o) => o * duration);\n}\n\nexport { convertOffsetToTimes };\n","import { easeInOut } from '../../easing/ease.mjs';\nimport { isEasingArray } from '../../easing/utils/is-easing-array.mjs';\nimport { easingDefinitionToFunction } from '../../easing/utils/map.mjs';\nimport { interpolate } from '../../utils/interpolate.mjs';\nimport { defaultOffset } from '../../utils/offsets/default.mjs';\nimport { convertOffsetToTimes } from '../../utils/offsets/time.mjs';\n\nfunction defaultEasing(values, easing) {\n    return values.map(() => easing || easeInOut).splice(0, values.length - 1);\n}\nfunction keyframes({ duration = 300, keyframes: keyframeValues, times, ease = \"easeInOut\", }) {\n    /**\n     * Easing functions can be externally defined as strings. Here we convert them\n     * into actual functions.\n     */\n    const easingFunctions = isEasingArray(ease)\n        ? ease.map(easingDefinitionToFunction)\n        : easingDefinitionToFunction(ease);\n    /**\n     * This is the Iterator-spec return value. We ensure it's mutable rather than using a generator\n     * to reduce GC during animation.\n     */\n    const state = {\n        done: false,\n        value: keyframeValues[0],\n    };\n    /**\n     * Create a times array based on the provided 0-1 offsets\n     */\n    const absoluteTimes = convertOffsetToTimes(\n    // Only use the provided offsets if they're the correct length\n    // TODO Maybe we should warn here if there's a length mismatch\n    times && times.length === keyframeValues.length\n        ? times\n        : defaultOffset(keyframeValues), duration);\n    const mapTimeToKeyframe = interpolate(absoluteTimes, keyframeValues, {\n        ease: Array.isArray(easingFunctions)\n            ? easingFunctions\n            : defaultEasing(keyframeValues, easingFunctions),\n    });\n    return {\n        calculatedDuration: duration,\n        next: (t) => {\n            state.value = mapTimeToKeyframe(t);\n            state.done = t >= duration;\n            return state;\n        },\n    };\n}\n\nexport { defaultEasing, keyframes };\n","/**\n * Implement a practical max duration for keyframe generation\n * to prevent infinite loops\n */\nconst maxGeneratorDuration = 20000;\nfunction calcGeneratorDuration(generator) {\n    let duration = 0;\n    const timeStep = 50;\n    let state = generator.next(duration);\n    while (!state.done && duration < maxGeneratorDuration) {\n        duration += timeStep;\n        state = generator.next(duration);\n    }\n    return duration >= maxGeneratorDuration ? Infinity : duration;\n}\n\nexport { calcGeneratorDuration, maxGeneratorDuration };\n","import { time } from '../../../frameloop/sync-time.mjs';\nimport { frame, cancelFrame, frameData } from '../../../frameloop/frame.mjs';\n\nconst frameloopDriver = (update) => {\n    const passTimestamp = ({ timestamp }) => update(timestamp);\n    return {\n        start: () => frame.update(passTimestamp, true),\n        stop: () => cancelFrame(passTimestamp),\n        /**\n         * If we're processing this frame we can use the\n         * framelocked timestamp to keep things in sync.\n         */\n        now: () => (frameData.isProcessing ? frameData.timestamp : time.now()),\n    };\n};\n\nexport { frameloopDriver };\n","import { KeyframeResolver } from '../../render/utils/KeyframesResolver.mjs';\nimport { spring } from '../generators/spring/index.mjs';\nimport { inertia } from '../generators/inertia.mjs';\nimport { keyframes } from '../generators/keyframes.mjs';\nimport { BaseAnimation } from './BaseAnimation.mjs';\nimport { pipe } from '../../utils/pipe.mjs';\nimport { mix } from '../../utils/mix/index.mjs';\nimport { calcGeneratorDuration } from '../generators/utils/calc-duration.mjs';\nimport { millisecondsToSeconds, secondsToMilliseconds } from '../../utils/time-conversion.mjs';\nimport { clamp } from '../../utils/clamp.mjs';\nimport { invariant } from '../../utils/errors.mjs';\nimport { frameloopDriver } from './drivers/driver-frameloop.mjs';\nimport { getFinalKeyframe } from './waapi/utils/get-final-keyframe.mjs';\n\nconst generators = {\n    decay: inertia,\n    inertia,\n    tween: keyframes,\n    keyframes: keyframes,\n    spring,\n};\nconst percentToProgress = (percent) => percent / 100;\n/**\n * Animation that runs on the main thread. Designed to be WAAPI-spec in the subset of\n * features we expose publically. Mostly the compatibility is to ensure visual identity\n * between both WAAPI and main thread animations.\n */\nclass MainThreadAnimation extends BaseAnimation {\n    constructor({ KeyframeResolver: KeyframeResolver$1 = KeyframeResolver, ...options }) {\n        super(options);\n        /**\n         * The time at which the animation was paused.\n         */\n        this.holdTime = null;\n        /**\n         * The time at which the animation was started.\n         */\n        this.startTime = null;\n        /**\n         * The time at which the animation was cancelled.\n         */\n        this.cancelTime = null;\n        /**\n         * The current time of the animation.\n         */\n        this.currentTime = 0;\n        /**\n         * Playback speed as a factor. 0 would be stopped, -1 reverse and 2 double speed.\n         */\n        this.playbackSpeed = 1;\n        /**\n         * The state of the animation to apply when the animation is resolved. This\n         * allows calls to the public API to control the animation before it is resolved,\n         * without us having to resolve it first.\n         */\n        this.pendingPlayState = \"running\";\n        this.state = \"idle\";\n        /**\n         * This method is bound to the instance to fix a pattern where\n         * animation.stop is returned as a reference from a useEffect.\n         */\n        this.stop = () => {\n            this.resolver.cancel();\n            this.isStopped = true;\n            if (this.state === \"idle\")\n                return;\n            this.teardown();\n            const { onStop } = this.options;\n            onStop && onStop();\n        };\n        const { name, motionValue, keyframes } = this.options;\n        const onResolved = (resolvedKeyframes, finalKeyframe) => this.onKeyframesResolved(resolvedKeyframes, finalKeyframe);\n        if (name && motionValue && motionValue.owner) {\n            this.resolver = motionValue.owner.resolveKeyframes(keyframes, onResolved, name, motionValue);\n        }\n        else {\n            this.resolver = new KeyframeResolver$1(keyframes, onResolved, name, motionValue);\n        }\n        this.resolver.scheduleResolve();\n    }\n    initPlayback(keyframes$1) {\n        const { type = \"keyframes\", repeat = 0, repeatDelay = 0, repeatType, velocity = 0, } = this.options;\n        const generatorFactory = generators[type] || keyframes;\n        /**\n         * If our generator doesn't support mixing numbers, we need to replace keyframes with\n         * [0, 100] and then make a function that maps that to the actual keyframes.\n         *\n         * 100 is chosen instead of 1 as it works nicer with spring animations.\n         */\n        let mapPercentToKeyframes;\n        let mirroredGenerator;\n        if (generatorFactory !== keyframes &&\n            typeof keyframes$1[0] !== \"number\") {\n            if (process.env.NODE_ENV !== \"production\") {\n                invariant(keyframes$1.length === 2, `Only two keyframes currently supported with spring and inertia animations. Trying to animate ${keyframes$1}`);\n            }\n            mapPercentToKeyframes = pipe(percentToProgress, mix(keyframes$1[0], keyframes$1[1]));\n            keyframes$1 = [0, 100];\n        }\n        const generator = generatorFactory({ ...this.options, keyframes: keyframes$1 });\n        /**\n         * If we have a mirror repeat type we need to create a second generator that outputs the\n         * mirrored (not reversed) animation and later ping pong between the two generators.\n         */\n        if (repeatType === \"mirror\") {\n            mirroredGenerator = generatorFactory({\n                ...this.options,\n                keyframes: [...keyframes$1].reverse(),\n                velocity: -velocity,\n            });\n        }\n        /**\n         * If duration is undefined and we have repeat options,\n         * we need to calculate a duration from the generator.\n         *\n         * We set it to the generator itself to cache the duration.\n         * Any timeline resolver will need to have already precalculated\n         * the duration by this step.\n         */\n        if (generator.calculatedDuration === null) {\n            generator.calculatedDuration = calcGeneratorDuration(generator);\n        }\n        const { calculatedDuration } = generator;\n        const resolvedDuration = calculatedDuration + repeatDelay;\n        const totalDuration = resolvedDuration * (repeat + 1) - repeatDelay;\n        return {\n            generator,\n            mirroredGenerator,\n            mapPercentToKeyframes,\n            calculatedDuration,\n            resolvedDuration,\n            totalDuration,\n        };\n    }\n    onPostResolved() {\n        const { autoplay = true } = this.options;\n        this.play();\n        if (this.pendingPlayState === \"paused\" || !autoplay) {\n            this.pause();\n        }\n        else {\n            this.state = this.pendingPlayState;\n        }\n    }\n    tick(timestamp, sample = false) {\n        const { resolved } = this;\n        // If the animations has failed to resolve, return the final keyframe.\n        if (!resolved) {\n            const { keyframes } = this.options;\n            return { done: true, value: keyframes[keyframes.length - 1] };\n        }\n        const { finalKeyframe, generator, mirroredGenerator, mapPercentToKeyframes, keyframes, calculatedDuration, totalDuration, resolvedDuration, } = resolved;\n        if (this.startTime === null)\n            return generator.next(0);\n        const { delay, repeat, repeatType, repeatDelay, onUpdate } = this.options;\n        /**\n         * requestAnimationFrame timestamps can come through as lower than\n         * the startTime as set by performance.now(). Here we prevent this,\n         * though in the future it could be possible to make setting startTime\n         * a pending operation that gets resolved here.\n         */\n        if (this.speed > 0) {\n            this.startTime = Math.min(this.startTime, timestamp);\n        }\n        else if (this.speed < 0) {\n            this.startTime = Math.min(timestamp - totalDuration / this.speed, this.startTime);\n        }\n        // Update currentTime\n        if (sample) {\n            this.currentTime = timestamp;\n        }\n        else if (this.holdTime !== null) {\n            this.currentTime = this.holdTime;\n        }\n        else {\n            // Rounding the time because floating point arithmetic is not always accurate, e.g. 3000.367 - 1000.367 =\n            // 2000.0000000000002. This is a problem when we are comparing the currentTime with the duration, for\n            // example.\n            this.currentTime =\n                Math.round(timestamp - this.startTime) * this.speed;\n        }\n        // Rebase on delay\n        const timeWithoutDelay = this.currentTime - delay * (this.speed >= 0 ? 1 : -1);\n        const isInDelayPhase = this.speed >= 0\n            ? timeWithoutDelay < 0\n            : timeWithoutDelay > totalDuration;\n        this.currentTime = Math.max(timeWithoutDelay, 0);\n        // If this animation has finished, set the current time  to the total duration.\n        if (this.state === \"finished\" && this.holdTime === null) {\n            this.currentTime = totalDuration;\n        }\n        let elapsed = this.currentTime;\n        let frameGenerator = generator;\n        if (repeat) {\n            /**\n             * Get the current progress (0-1) of the animation. If t is >\n             * than duration we'll get values like 2.5 (midway through the\n             * third iteration)\n             */\n            const progress = Math.min(this.currentTime, totalDuration) / resolvedDuration;\n            /**\n             * Get the current iteration (0 indexed). For instance the floor of\n             * 2.5 is 2.\n             */\n            let currentIteration = Math.floor(progress);\n            /**\n             * Get the current progress of the iteration by taking the remainder\n             * so 2.5 is 0.5 through iteration 2\n             */\n            let iterationProgress = progress % 1.0;\n            /**\n             * If iteration progress is 1 we count that as the end\n             * of the previous iteration.\n             */\n            if (!iterationProgress && progress >= 1) {\n                iterationProgress = 1;\n            }\n            iterationProgress === 1 && currentIteration--;\n            currentIteration = Math.min(currentIteration, repeat + 1);\n            /**\n             * Reverse progress if we're not running in \"normal\" direction\n             */\n            const isOddIteration = Boolean(currentIteration % 2);\n            if (isOddIteration) {\n                if (repeatType === \"reverse\") {\n                    iterationProgress = 1 - iterationProgress;\n                    if (repeatDelay) {\n                        iterationProgress -= repeatDelay / resolvedDuration;\n                    }\n                }\n                else if (repeatType === \"mirror\") {\n                    frameGenerator = mirroredGenerator;\n                }\n            }\n            elapsed = clamp(0, 1, iterationProgress) * resolvedDuration;\n        }\n        /**\n         * If we're in negative time, set state as the initial keyframe.\n         * This prevents delay: x, duration: 0 animations from finishing\n         * instantly.\n         */\n        const state = isInDelayPhase\n            ? { done: false, value: keyframes[0] }\n            : frameGenerator.next(elapsed);\n        if (mapPercentToKeyframes) {\n            state.value = mapPercentToKeyframes(state.value);\n        }\n        let { done } = state;\n        if (!isInDelayPhase && calculatedDuration !== null) {\n            done =\n                this.speed >= 0\n                    ? this.currentTime >= totalDuration\n                    : this.currentTime <= 0;\n        }\n        const isAnimationFinished = this.holdTime === null &&\n            (this.state === \"finished\" || (this.state === \"running\" && done));\n        if (isAnimationFinished && finalKeyframe !== undefined) {\n            state.value = getFinalKeyframe(keyframes, this.options, finalKeyframe);\n        }\n        if (onUpdate) {\n            onUpdate(state.value);\n        }\n        if (isAnimationFinished) {\n            this.finish();\n        }\n        return state;\n    }\n    get duration() {\n        const { resolved } = this;\n        return resolved ? millisecondsToSeconds(resolved.calculatedDuration) : 0;\n    }\n    get time() {\n        return millisecondsToSeconds(this.currentTime);\n    }\n    set time(newTime) {\n        newTime = secondsToMilliseconds(newTime);\n        this.currentTime = newTime;\n        if (this.holdTime !== null || this.speed === 0) {\n            this.holdTime = newTime;\n        }\n        else if (this.driver) {\n            this.startTime = this.driver.now() - newTime / this.speed;\n        }\n    }\n    get speed() {\n        return this.playbackSpeed;\n    }\n    set speed(newSpeed) {\n        const hasChanged = this.playbackSpeed !== newSpeed;\n        this.playbackSpeed = newSpeed;\n        if (hasChanged) {\n            this.time = millisecondsToSeconds(this.currentTime);\n        }\n    }\n    play() {\n        if (!this.resolver.isScheduled) {\n            this.resolver.resume();\n        }\n        if (!this._resolved) {\n            this.pendingPlayState = \"running\";\n            return;\n        }\n        if (this.isStopped)\n            return;\n        const { driver = frameloopDriver, onPlay } = this.options;\n        if (!this.driver) {\n            this.driver = driver((timestamp) => this.tick(timestamp));\n        }\n        onPlay && onPlay();\n        const now = this.driver.now();\n        if (this.holdTime !== null) {\n            this.startTime = now - this.holdTime;\n        }\n        else if (!this.startTime || this.state === \"finished\") {\n            this.startTime = now;\n        }\n        if (this.state === \"finished\") {\n            this.updateFinishedPromise();\n        }\n        this.cancelTime = this.startTime;\n        this.holdTime = null;\n        /**\n         * Set playState to running only after we've used it in\n         * the previous logic.\n         */\n        this.state = \"running\";\n        this.driver.start();\n    }\n    pause() {\n        var _a;\n        if (!this._resolved) {\n            this.pendingPlayState = \"paused\";\n            return;\n        }\n        this.state = \"paused\";\n        this.holdTime = (_a = this.currentTime) !== null && _a !== void 0 ? _a : 0;\n    }\n    complete() {\n        if (this.state !== \"running\") {\n            this.play();\n        }\n        this.pendingPlayState = this.state = \"finished\";\n        this.holdTime = null;\n    }\n    finish() {\n        this.teardown();\n        this.state = \"finished\";\n        const { onComplete } = this.options;\n        onComplete && onComplete();\n    }\n    cancel() {\n        if (this.cancelTime !== null) {\n            this.tick(this.cancelTime);\n        }\n        this.teardown();\n        this.updateFinishedPromise();\n    }\n    teardown() {\n        this.state = \"idle\";\n        this.stopDriver();\n        this.resolveFinishedPromise();\n        this.updateFinishedPromise();\n        this.startTime = this.cancelTime = null;\n        this.resolver.cancel();\n    }\n    stopDriver() {\n        if (!this.driver)\n            return;\n        this.driver.stop();\n        this.driver = undefined;\n    }\n    sample(time) {\n        this.startTime = 0;\n        return this.tick(time, true);\n    }\n}\n// Legacy interface\nfunction animateValue(options) {\n    return new MainThreadAnimation(options);\n}\n\nexport { MainThreadAnimation, animateValue };\n","const isBezierDefinition = (easing) => Array.isArray(easing) && typeof easing[0] === \"number\";\n\nexport { isBezierDefinition };\n","import { isBezierDefinition } from '../../../easing/utils/is-bezier-definition.mjs';\n\nfunction isWaapiSupportedEasing(easing) {\n    return Boolean(!easing ||\n        (typeof easing === \"string\" && easing in supportedWaapiEasing) ||\n        isBezierDefinition(easing) ||\n        (Array.isArray(easing) && easing.every(isWaapiSupportedEasing)));\n}\nconst cubicBezierAsString = ([a, b, c, d]) => `cubic-bezier(${a}, ${b}, ${c}, ${d})`;\nconst supportedWaapiEasing = {\n    linear: \"linear\",\n    ease: \"ease\",\n    easeIn: \"ease-in\",\n    easeOut: \"ease-out\",\n    easeInOut: \"ease-in-out\",\n    circIn: cubicBezierAsString([0, 0.65, 0.55, 1]),\n    circOut: cubicBezierAsString([0.55, 0, 1, 0.45]),\n    backIn: cubicBezierAsString([0.31, 0.01, 0.66, -0.59]),\n    backOut: cubicBezierAsString([0.33, 1.53, 0.69, 0.99]),\n};\nfunction mapEasingToNativeEasingWithDefault(easing) {\n    return (mapEasingToNativeEasing(easing) ||\n        supportedWaapiEasing.easeOut);\n}\nfunction mapEasingToNativeEasing(easing) {\n    if (!easing) {\n        return undefined;\n    }\n    else if (isBezierDefinition(easing)) {\n        return cubicBezierAsString(easing);\n    }\n    else if (Array.isArray(easing)) {\n        return easing.map(mapEasingToNativeEasingWithDefault);\n    }\n    else {\n        return supportedWaapiEasing[easing];\n    }\n}\n\nexport { cubicBezierAsString, isWaapiSupportedEasing, mapEasingToNativeEasing, supportedWaapiEasing };\n","import { mapEasingToNativeEasing } from './easing.mjs';\n\nfunction animateStyle(element, valueName, keyframes, { delay = 0, duration = 300, repeat = 0, repeatType = \"loop\", ease, times, } = {}) {\n    const keyframeOptions = { [valueName]: keyframes };\n    if (times)\n        keyframeOptions.offset = times;\n    const easing = mapEasingToNativeEasing(ease);\n    /**\n     * If this is an easing array, apply to keyframes, not animation as a whole\n     */\n    if (Array.isArray(easing))\n        keyframeOptions.easing = easing;\n    return element.animate(keyframeOptions, {\n        delay,\n        duration,\n        easing: !Array.isArray(easing) ? easing : \"linear\",\n        fill: \"both\",\n        iterations: repeat + 1,\n        direction: repeatType === \"reverse\" ? \"alternate\" : \"normal\",\n    });\n}\n\nexport { animateStyle };\n","import { time } from '../../frameloop/sync-time.mjs';\nimport { DOMKeyframesResolver } from '../../render/dom/DOMKeyframesResolver.mjs';\nimport { memo } from '../../utils/memo.mjs';\nimport { noop } from '../../utils/noop.mjs';\nimport { millisecondsToSeconds, secondsToMilliseconds } from '../../utils/time-conversion.mjs';\nimport { BaseAnimation } from './BaseAnimation.mjs';\nimport { MainThreadAnimation } from './MainThreadAnimation.mjs';\nimport { animateStyle } from './waapi/index.mjs';\nimport { isWaapiSupportedEasing } from './waapi/easing.mjs';\nimport { getFinalKeyframe } from './waapi/utils/get-final-keyframe.mjs';\n\nconst supportsWaapi = memo(() => Object.hasOwnProperty.call(Element.prototype, \"animate\"));\n/**\n * A list of values that can be hardware-accelerated.\n */\nconst acceleratedValues = new Set([\n    \"opacity\",\n    \"clipPath\",\n    \"filter\",\n    \"transform\",\n    // TODO: Can be accelerated but currently disabled until https://issues.chromium.org/issues/41491098 is resolved\n    // or until we implement support for linear() easing.\n    // \"background-color\"\n]);\n/**\n * 10ms is chosen here as it strikes a balance between smooth\n * results (more than one keyframe per frame at 60fps) and\n * keyframe quantity.\n */\nconst sampleDelta = 10; //ms\n/**\n * Implement a practical max duration for keyframe generation\n * to prevent infinite loops\n */\nconst maxDuration = 20000;\n/**\n * Check if an animation can run natively via WAAPI or requires pregenerated keyframes.\n * WAAPI doesn't support spring or function easings so we run these as JS animation before\n * handing off.\n */\nfunction requiresPregeneratedKeyframes(options) {\n    return (options.type === \"spring\" ||\n        options.name === \"backgroundColor\" ||\n        !isWaapiSupportedEasing(options.ease));\n}\nfunction pregenerateKeyframes(keyframes, options) {\n    /**\n     * Create a main-thread animation to pregenerate keyframes.\n     * We sample this at regular intervals to generate keyframes that we then\n     * linearly interpolate between.\n     */\n    const sampleAnimation = new MainThreadAnimation({\n        ...options,\n        keyframes,\n        repeat: 0,\n        delay: 0,\n        isGenerator: true,\n    });\n    let state = { done: false, value: keyframes[0] };\n    const pregeneratedKeyframes = [];\n    /**\n     * Bail after 20 seconds of pre-generated keyframes as it's likely\n     * we're heading for an infinite loop.\n     */\n    let t = 0;\n    while (!state.done && t < maxDuration) {\n        state = sampleAnimation.sample(t);\n        pregeneratedKeyframes.push(state.value);\n        t += sampleDelta;\n    }\n    return {\n        times: undefined,\n        keyframes: pregeneratedKeyframes,\n        duration: t - sampleDelta,\n        ease: \"linear\",\n    };\n}\nclass AcceleratedAnimation extends BaseAnimation {\n    constructor(options) {\n        super(options);\n        const { name, motionValue, keyframes } = this.options;\n        this.resolver = new DOMKeyframesResolver(keyframes, (resolvedKeyframes, finalKeyframe) => this.onKeyframesResolved(resolvedKeyframes, finalKeyframe), name, motionValue);\n        this.resolver.scheduleResolve();\n    }\n    initPlayback(keyframes, finalKeyframe) {\n        var _a;\n        let { duration = 300, times, ease, type, motionValue, name, } = this.options;\n        /**\n         * If element has since been unmounted, return false to indicate\n         * the animation failed to initialised.\n         */\n        if (!((_a = motionValue.owner) === null || _a === void 0 ? void 0 : _a.current)) {\n            return false;\n        }\n        /**\n         * If this animation needs pre-generated keyframes then generate.\n         */\n        if (requiresPregeneratedKeyframes(this.options)) {\n            const { onComplete, onUpdate, motionValue, ...options } = this.options;\n            const pregeneratedAnimation = pregenerateKeyframes(keyframes, options);\n            keyframes = pregeneratedAnimation.keyframes;\n            // If this is a very short animation, ensure we have\n            // at least two keyframes to animate between as older browsers\n            // can't animate between a single keyframe.\n            if (keyframes.length === 1) {\n                keyframes[1] = keyframes[0];\n            }\n            duration = pregeneratedAnimation.duration;\n            times = pregeneratedAnimation.times;\n            ease = pregeneratedAnimation.ease;\n            type = \"keyframes\";\n        }\n        const animation = animateStyle(motionValue.owner.current, name, keyframes, { ...this.options, duration, times, ease });\n        // Override the browser calculated startTime with one synchronised to other JS\n        // and WAAPI animations starting this event loop.\n        animation.startTime = time.now();\n        if (this.pendingTimeline) {\n            animation.timeline = this.pendingTimeline;\n            this.pendingTimeline = undefined;\n        }\n        else {\n            /**\n             * Prefer the `onfinish` prop as it's more widely supported than\n             * the `finished` promise.\n             *\n             * Here, we synchronously set the provided MotionValue to the end\n             * keyframe. If we didn't, when the WAAPI animation is finished it would\n             * be removed from the element which would then revert to its old styles.\n             */\n            animation.onfinish = () => {\n                const { onComplete } = this.options;\n                motionValue.set(getFinalKeyframe(keyframes, this.options, finalKeyframe));\n                onComplete && onComplete();\n                this.cancel();\n                this.resolveFinishedPromise();\n            };\n        }\n        return {\n            animation,\n            duration,\n            times,\n            type,\n            ease,\n            keyframes: keyframes,\n        };\n    }\n    get duration() {\n        const { resolved } = this;\n        if (!resolved)\n            return 0;\n        const { duration } = resolved;\n        return millisecondsToSeconds(duration);\n    }\n    get time() {\n        const { resolved } = this;\n        if (!resolved)\n            return 0;\n        const { animation } = resolved;\n        return millisecondsToSeconds(animation.currentTime || 0);\n    }\n    set time(newTime) {\n        const { resolved } = this;\n        if (!resolved)\n            return;\n        const { animation } = resolved;\n        animation.currentTime = secondsToMilliseconds(newTime);\n    }\n    get speed() {\n        const { resolved } = this;\n        if (!resolved)\n            return 1;\n        const { animation } = resolved;\n        return animation.playbackRate;\n    }\n    set speed(newSpeed) {\n        const { resolved } = this;\n        if (!resolved)\n            return;\n        const { animation } = resolved;\n        animation.playbackRate = newSpeed;\n    }\n    get state() {\n        const { resolved } = this;\n        if (!resolved)\n            return \"idle\";\n        const { animation } = resolved;\n        return animation.playState;\n    }\n    /**\n     * Replace the default DocumentTimeline with another AnimationTimeline.\n     * Currently used for scroll animations.\n     */\n    attachTimeline(timeline) {\n        if (!this._resolved) {\n            this.pendingTimeline = timeline;\n        }\n        else {\n            const { resolved } = this;\n            if (!resolved)\n                return noop;\n            const { animation } = resolved;\n            animation.timeline = timeline;\n            animation.onfinish = null;\n        }\n        return noop;\n    }\n    play() {\n        if (this.isStopped)\n            return;\n        const { resolved } = this;\n        if (!resolved)\n            return;\n        const { animation } = resolved;\n        if (animation.playState === \"finished\") {\n            this.updateFinishedPromise();\n        }\n        animation.play();\n    }\n    pause() {\n        const { resolved } = this;\n        if (!resolved)\n            return;\n        const { animation } = resolved;\n        animation.pause();\n    }\n    stop() {\n        this.resolver.cancel();\n        this.isStopped = true;\n        if (this.state === \"idle\")\n            return;\n        const { resolved } = this;\n        if (!resolved)\n            return;\n        const { animation, keyframes, duration, type, ease, times } = resolved;\n        if (animation.playState === \"idle\" ||\n            animation.playState === \"finished\") {\n            return;\n        }\n        /**\n         * WAAPI doesn't natively have any interruption capabilities.\n         *\n         * Rather than read commited styles back out of the DOM, we can\n         * create a renderless JS animation and sample it twice to calculate\n         * its current value, \"previous\" value, and therefore allow\n         * Motion to calculate velocity for any subsequent animation.\n         */\n        if (this.time) {\n            const { motionValue, onUpdate, onComplete, ...options } = this.options;\n            const sampleAnimation = new MainThreadAnimation({\n                ...options,\n                keyframes,\n                duration,\n                type,\n                ease,\n                times,\n                isGenerator: true,\n            });\n            const sampleTime = secondsToMilliseconds(this.time);\n            motionValue.setWithVelocity(sampleAnimation.sample(sampleTime - sampleDelta).value, sampleAnimation.sample(sampleTime).value, sampleDelta);\n        }\n        this.cancel();\n    }\n    complete() {\n        const { resolved } = this;\n        if (!resolved)\n            return;\n        resolved.animation.finish();\n    }\n    cancel() {\n        const { resolved } = this;\n        if (!resolved)\n            return;\n        resolved.animation.cancel();\n    }\n    static supports(options) {\n        const { motionValue, name, repeatDelay, repeatType, damping, type } = options;\n        return (supportsWaapi() &&\n            name &&\n            acceleratedValues.has(name) &&\n            motionValue &&\n            motionValue.owner &&\n            motionValue.owner.current instanceof HTMLElement &&\n            /**\n             * If we're outputting values to onUpdate then we can't use WAAPI as there's\n             * no way to read the value from WAAPI every frame.\n             */\n            !motionValue.owner.getProps().onUpdate &&\n            !repeatDelay &&\n            repeatType !== \"mirror\" &&\n            damping !== 0 &&\n            type !== \"inertia\");\n    }\n}\n\nexport { AcceleratedAnimation };\n","import { frame, cancelFrame } from '../../../frameloop/frame.mjs';\n\nfunction observeTimeline(update, timeline) {\n    let prevProgress;\n    const onFrame = () => {\n        const { currentTime } = timeline;\n        const percentage = currentTime === null ? 0 : currentTime.value;\n        const progress = percentage / 100;\n        if (prevProgress !== progress) {\n            update(progress);\n        }\n        prevProgress = progress;\n    };\n    frame.update(onFrame, true);\n    return () => cancelFrame(onFrame);\n}\n\nexport { observeTimeline };\n","import { memo } from '../../../utils/memo.mjs';\n\nconst supportsScrollTimeline = memo(() => window.ScrollTimeline !== undefined);\n\nexport { supportsScrollTimeline };\n","import { observeTimeline } from '../render/dom/scroll/observe.mjs';\nimport { supportsScrollTimeline } from '../render/dom/scroll/supports.mjs';\n\nclass GroupPlaybackControls {\n    constructor(animations) {\n        // Bound to accomodate common `return animation.stop` pattern\n        this.stop = () => this.runAll(\"stop\");\n        this.animations = animations.filter(Boolean);\n    }\n    then(onResolve, onReject) {\n        return Promise.all(this.animations).then(onResolve).catch(onReject);\n    }\n    /**\n     * TODO: Filter out cancelled or stopped animations before returning\n     */\n    getAll(propName) {\n        return this.animations[0][propName];\n    }\n    setAll(propName, newValue) {\n        for (let i = 0; i < this.animations.length; i++) {\n            this.animations[i][propName] = newValue;\n        }\n    }\n    attachTimeline(timeline) {\n        const cancelAll = this.animations.map((animation) => {\n            if (supportsScrollTimeline() && animation.attachTimeline) {\n                animation.attachTimeline(timeline);\n            }\n            else {\n                animation.pause();\n                return observeTimeline((progress) => {\n                    animation.time = animation.duration * progress;\n                }, timeline);\n            }\n        });\n        return () => {\n            cancelAll.forEach((cancelTimeline, i) => {\n                if (cancelTimeline)\n                    cancelTimeline();\n                this.animations[i].stop();\n            });\n        };\n    }\n    get time() {\n        return this.getAll(\"time\");\n    }\n    set time(time) {\n        this.setAll(\"time\", time);\n    }\n    get speed() {\n        return this.getAll(\"speed\");\n    }\n    set speed(speed) {\n        this.setAll(\"speed\", speed);\n    }\n    get duration() {\n        let max = 0;\n        for (let i = 0; i < this.animations.length; i++) {\n            max = Math.max(max, this.animations[i].duration);\n        }\n        return max;\n    }\n    runAll(methodName) {\n        this.animations.forEach((controls) => controls[methodName]());\n    }\n    play() {\n        this.runAll(\"play\");\n    }\n    pause() {\n        this.runAll(\"pause\");\n    }\n    cancel() {\n        this.runAll(\"cancel\");\n    }\n    complete() {\n        this.runAll(\"complete\");\n    }\n}\n\nexport { GroupPlaybackControls };\n","import { secondsToMilliseconds } from '../../utils/time-conversion.mjs';\nimport { getDefaultTransition } from '../utils/default-transitions.mjs';\nimport { getValueTransition, isTransitionDefined } from '../utils/transitions.mjs';\nimport { MotionGlobalConfig } from '../../utils/GlobalConfig.mjs';\nimport { instantAnimationState } from '../../utils/use-instant-transition-state.mjs';\nimport { getFinalKeyframe } from '../animators/waapi/utils/get-final-keyframe.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\nimport { AcceleratedAnimation } from '../animators/AcceleratedAnimation.mjs';\nimport { MainThreadAnimation } from '../animators/MainThreadAnimation.mjs';\nimport { GroupPlaybackControls } from '../GroupPlaybackControls.mjs';\n\nconst animateMotionValue = (name, value, target, transition = {}, element, isHandoff) => (onComplete) => {\n    const valueTransition = getValueTransition(transition, name) || {};\n    /**\n     * Most transition values are currently completely overwritten by value-specific\n     * transitions. In the future it'd be nicer to blend these transitions. But for now\n     * delay actually does inherit from the root transition if not value-specific.\n     */\n    const delay = valueTransition.delay || transition.delay || 0;\n    /**\n     * Elapsed isn't a public transition option but can be passed through from\n     * optimized appear effects in milliseconds.\n     */\n    let { elapsed = 0 } = transition;\n    elapsed = elapsed - secondsToMilliseconds(delay);\n    let options = {\n        keyframes: Array.isArray(target) ? target : [null, target],\n        ease: \"easeOut\",\n        velocity: value.getVelocity(),\n        ...valueTransition,\n        delay: -elapsed,\n        onUpdate: (v) => {\n            value.set(v);\n            valueTransition.onUpdate && valueTransition.onUpdate(v);\n        },\n        onComplete: () => {\n            onComplete();\n            valueTransition.onComplete && valueTransition.onComplete();\n        },\n        name,\n        motionValue: value,\n        element: isHandoff ? undefined : element,\n    };\n    /**\n     * If there's no transition defined for this value, we can generate\n     * unqiue transition settings for this value.\n     */\n    if (!isTransitionDefined(valueTransition)) {\n        options = {\n            ...options,\n            ...getDefaultTransition(name, options),\n        };\n    }\n    /**\n     * Both WAAPI and our internal animation functions use durations\n     * as defined by milliseconds, while our external API defines them\n     * as seconds.\n     */\n    if (options.duration) {\n        options.duration = secondsToMilliseconds(options.duration);\n    }\n    if (options.repeatDelay) {\n        options.repeatDelay = secondsToMilliseconds(options.repeatDelay);\n    }\n    if (options.from !== undefined) {\n        options.keyframes[0] = options.from;\n    }\n    let shouldSkip = false;\n    if (options.type === false ||\n        (options.duration === 0 && !options.repeatDelay)) {\n        options.duration = 0;\n        if (options.delay === 0) {\n            shouldSkip = true;\n        }\n    }\n    if (instantAnimationState.current ||\n        MotionGlobalConfig.skipAnimations) {\n        shouldSkip = true;\n        options.duration = 0;\n        options.delay = 0;\n    }\n    /**\n     * If we can or must skip creating the animation, and apply only\n     * the final keyframe, do so. We also check once keyframes are resolved but\n     * this early check prevents the need to create an animation at all.\n     */\n    if (shouldSkip && !isHandoff && value.get() !== undefined) {\n        const finalKeyframe = getFinalKeyframe(options.keyframes, valueTransition);\n        if (finalKeyframe !== undefined) {\n            frame.update(() => {\n                options.onUpdate(finalKeyframe);\n                options.onComplete();\n            });\n            // We still want to return some animation controls here rather\n            // than returning undefined\n            return new GroupPlaybackControls([]);\n        }\n    }\n    /**\n     * Animate via WAAPI if possible. If this is a handoff animation, the optimised animation will be running via\n     * WAAPI. Therefore, this animation must be JS to ensure it runs \"under\" the\n     * optimised animation.\n     */\n    if (!isHandoff && AcceleratedAnimation.supports(options)) {\n        return new AcceleratedAnimation(options);\n    }\n    else {\n        return new MainThreadAnimation(options);\n    }\n};\n\nexport { animateMotionValue };\n","import { isMotionValue } from '../utils/is-motion-value.mjs';\n\nfunction isWillChangeMotionValue(value) {\n    return Boolean(isMotionValue(value) && value.add);\n}\n\nexport { isWillChangeMotionValue };\n","function addUniqueItem(arr, item) {\n    if (arr.indexOf(item) === -1)\n        arr.push(item);\n}\nfunction removeItem(arr, item) {\n    const index = arr.indexOf(item);\n    if (index > -1)\n        arr.splice(index, 1);\n}\n// Adapted from array-move\nfunction moveItem([...arr], fromIndex, toIndex) {\n    const startIndex = fromIndex < 0 ? arr.length + fromIndex : fromIndex;\n    if (startIndex >= 0 && startIndex < arr.length) {\n        const endIndex = toIndex < 0 ? arr.length + toIndex : toIndex;\n        const [item] = arr.splice(fromIndex, 1);\n        arr.splice(endIndex, 0, item);\n    }\n    return arr;\n}\n\nexport { addUniqueItem, moveItem, removeItem };\n","import { addUniqueItem, removeItem } from './array.mjs';\n\nclass SubscriptionManager {\n    constructor() {\n        this.subscriptions = [];\n    }\n    add(handler) {\n        addUniqueItem(this.subscriptions, handler);\n        return () => removeItem(this.subscriptions, handler);\n    }\n    notify(a, b, c) {\n        const numSubscriptions = this.subscriptions.length;\n        if (!numSubscriptions)\n            return;\n        if (numSubscriptions === 1) {\n            /**\n             * If there's only a single handler we can just call it without invoking a loop.\n             */\n            this.subscriptions[0](a, b, c);\n        }\n        else {\n            for (let i = 0; i < numSubscriptions; i++) {\n                /**\n                 * Check whether the handler exists before firing as it's possible\n                 * the subscriptions were modified during this loop running.\n                 */\n                const handler = this.subscriptions[i];\n                handler && handler(a, b, c);\n            }\n        }\n    }\n    getSize() {\n        return this.subscriptions.length;\n    }\n    clear() {\n        this.subscriptions.length = 0;\n    }\n}\n\nexport { SubscriptionManager };\n","const warned = new Set();\nfunction warnOnce(condition, message, element) {\n    if (condition || warned.has(message))\n        return;\n    console.warn(message);\n    if (element)\n        console.warn(element);\n    warned.add(message);\n}\n\nexport { warnOnce };\n","import { SubscriptionManager } from '../utils/subscription-manager.mjs';\nimport { velocityPerSecond } from '../utils/velocity-per-second.mjs';\nimport { warnOnce } from '../utils/warn-once.mjs';\nimport { time } from '../frameloop/sync-time.mjs';\nimport { frame } from '../frameloop/frame.mjs';\n\n/**\n * Maximum time between the value of two frames, beyond which we\n * assume the velocity has since been 0.\n */\nconst MAX_VELOCITY_DELTA = 30;\nconst isFloat = (value) => {\n    return !isNaN(parseFloat(value));\n};\nconst collectMotionValues = {\n    current: undefined,\n};\n/**\n * `MotionValue` is used to track the state and velocity of motion values.\n *\n * @public\n */\nclass MotionValue {\n    /**\n     * @param init - The initiating value\n     * @param config - Optional configuration options\n     *\n     * -  `transformer`: A function to transform incoming values with.\n     *\n     * @internal\n     */\n    constructor(init, options = {}) {\n        /**\n         * This will be replaced by the build step with the latest version number.\n         * When MotionValues are provided to motion components, warn if versions are mixed.\n         */\n        this.version = \"11.2.12\";\n        /**\n         * Tracks whether this value can output a velocity. Currently this is only true\n         * if the value is numerical, but we might be able to widen the scope here and support\n         * other value types.\n         *\n         * @internal\n         */\n        this.canTrackVelocity = null;\n        /**\n         * An object containing a SubscriptionManager for each active event.\n         */\n        this.events = {};\n        this.updateAndNotify = (v, render = true) => {\n            const currentTime = time.now();\n            /**\n             * If we're updating the value during another frame or eventloop\n             * than the previous frame, then the we set the previous frame value\n             * to current.\n             */\n            if (this.updatedAt !== currentTime) {\n                this.setPrevFrameValue();\n            }\n            this.prev = this.current;\n            this.setCurrent(v);\n            // Update update subscribers\n            if (this.current !== this.prev && this.events.change) {\n                this.events.change.notify(this.current);\n            }\n            // Update render subscribers\n            if (render && this.events.renderRequest) {\n                this.events.renderRequest.notify(this.current);\n            }\n        };\n        this.hasAnimated = false;\n        this.setCurrent(init);\n        this.owner = options.owner;\n    }\n    setCurrent(current) {\n        this.current = current;\n        this.updatedAt = time.now();\n        if (this.canTrackVelocity === null && current !== undefined) {\n            this.canTrackVelocity = isFloat(this.current);\n        }\n    }\n    setPrevFrameValue(prevFrameValue = this.current) {\n        this.prevFrameValue = prevFrameValue;\n        this.prevUpdatedAt = this.updatedAt;\n    }\n    /**\n     * Adds a function that will be notified when the `MotionValue` is updated.\n     *\n     * It returns a function that, when called, will cancel the subscription.\n     *\n     * When calling `onChange` inside a React component, it should be wrapped with the\n     * `useEffect` hook. As it returns an unsubscribe function, this should be returned\n     * from the `useEffect` function to ensure you don't add duplicate subscribers..\n     *\n     * ```jsx\n     * export const MyComponent = () => {\n     *   const x = useMotionValue(0)\n     *   const y = useMotionValue(0)\n     *   const opacity = useMotionValue(1)\n     *\n     *   useEffect(() => {\n     *     function updateOpacity() {\n     *       const maxXY = Math.max(x.get(), y.get())\n     *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n     *       opacity.set(newOpacity)\n     *     }\n     *\n     *     const unsubscribeX = x.on(\"change\", updateOpacity)\n     *     const unsubscribeY = y.on(\"change\", updateOpacity)\n     *\n     *     return () => {\n     *       unsubscribeX()\n     *       unsubscribeY()\n     *     }\n     *   }, [])\n     *\n     *   return <motion.div style={{ x }} />\n     * }\n     * ```\n     *\n     * @param subscriber - A function that receives the latest value.\n     * @returns A function that, when called, will cancel this subscription.\n     *\n     * @deprecated\n     */\n    onChange(subscription) {\n        if (process.env.NODE_ENV !== \"production\") {\n            warnOnce(false, `value.onChange(callback) is deprecated. Switch to value.on(\"change\", callback).`);\n        }\n        return this.on(\"change\", subscription);\n    }\n    on(eventName, callback) {\n        if (!this.events[eventName]) {\n            this.events[eventName] = new SubscriptionManager();\n        }\n        const unsubscribe = this.events[eventName].add(callback);\n        if (eventName === \"change\") {\n            return () => {\n                unsubscribe();\n                /**\n                 * If we have no more change listeners by the start\n                 * of the next frame, stop active animations.\n                 */\n                frame.read(() => {\n                    if (!this.events.change.getSize()) {\n                        this.stop();\n                    }\n                });\n            };\n        }\n        return unsubscribe;\n    }\n    clearListeners() {\n        for (const eventManagers in this.events) {\n            this.events[eventManagers].clear();\n        }\n    }\n    /**\n     * Attaches a passive effect to the `MotionValue`.\n     *\n     * @internal\n     */\n    attach(passiveEffect, stopPassiveEffect) {\n        this.passiveEffect = passiveEffect;\n        this.stopPassiveEffect = stopPassiveEffect;\n    }\n    /**\n     * Sets the state of the `MotionValue`.\n     *\n     * @remarks\n     *\n     * ```jsx\n     * const x = useMotionValue(0)\n     * x.set(10)\n     * ```\n     *\n     * @param latest - Latest value to set.\n     * @param render - Whether to notify render subscribers. Defaults to `true`\n     *\n     * @public\n     */\n    set(v, render = true) {\n        if (!render || !this.passiveEffect) {\n            this.updateAndNotify(v, render);\n        }\n        else {\n            this.passiveEffect(v, this.updateAndNotify);\n        }\n    }\n    setWithVelocity(prev, current, delta) {\n        this.set(current);\n        this.prev = undefined;\n        this.prevFrameValue = prev;\n        this.prevUpdatedAt = this.updatedAt - delta;\n    }\n    /**\n     * Set the state of the `MotionValue`, stopping any active animations,\n     * effects, and resets velocity to `0`.\n     */\n    jump(v, endAnimation = true) {\n        this.updateAndNotify(v);\n        this.prev = v;\n        this.prevUpdatedAt = this.prevFrameValue = undefined;\n        endAnimation && this.stop();\n        if (this.stopPassiveEffect)\n            this.stopPassiveEffect();\n    }\n    /**\n     * Returns the latest state of `MotionValue`\n     *\n     * @returns - The latest state of `MotionValue`\n     *\n     * @public\n     */\n    get() {\n        if (collectMotionValues.current) {\n            collectMotionValues.current.push(this);\n        }\n        return this.current;\n    }\n    /**\n     * @public\n     */\n    getPrevious() {\n        return this.prev;\n    }\n    /**\n     * Returns the latest velocity of `MotionValue`\n     *\n     * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.\n     *\n     * @public\n     */\n    getVelocity() {\n        const currentTime = time.now();\n        if (!this.canTrackVelocity ||\n            this.prevFrameValue === undefined ||\n            currentTime - this.updatedAt > MAX_VELOCITY_DELTA) {\n            return 0;\n        }\n        const delta = Math.min(this.updatedAt - this.prevUpdatedAt, MAX_VELOCITY_DELTA);\n        // Casts because of parseFloat's poor typing\n        return velocityPerSecond(parseFloat(this.current) -\n            parseFloat(this.prevFrameValue), delta);\n    }\n    /**\n     * Registers a new animation to control this `MotionValue`. Only one\n     * animation can drive a `MotionValue` at one time.\n     *\n     * ```jsx\n     * value.start()\n     * ```\n     *\n     * @param animation - A function that starts the provided animation\n     *\n     * @internal\n     */\n    start(startAnimation) {\n        this.stop();\n        return new Promise((resolve) => {\n            this.hasAnimated = true;\n            this.animation = startAnimation(resolve);\n            if (this.events.animationStart) {\n                this.events.animationStart.notify();\n            }\n        }).then(() => {\n            if (this.events.animationComplete) {\n                this.events.animationComplete.notify();\n            }\n            this.clearAnimation();\n        });\n    }\n    /**\n     * Stop the currently active animation.\n     *\n     * @public\n     */\n    stop() {\n        if (this.animation) {\n            this.animation.stop();\n            if (this.events.animationCancel) {\n                this.events.animationCancel.notify();\n            }\n        }\n        this.clearAnimation();\n    }\n    /**\n     * Returns `true` if this value is currently animating.\n     *\n     * @public\n     */\n    isAnimating() {\n        return !!this.animation;\n    }\n    clearAnimation() {\n        delete this.animation;\n    }\n    /**\n     * Destroy and clean up subscribers to this `MotionValue`.\n     *\n     * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically\n     * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually\n     * created a `MotionValue` via the `motionValue` function.\n     *\n     * @public\n     */\n    destroy() {\n        this.clearListeners();\n        this.stop();\n        if (this.stopPassiveEffect) {\n            this.stopPassiveEffect();\n        }\n    }\n}\nfunction motionValue(init, options) {\n    return new MotionValue(init, options);\n}\n\nexport { MotionValue, collectMotionValues, motionValue };\n","import { resolveFinalValueInKeyframes } from '../../utils/resolve-value.mjs';\nimport { motionValue } from '../../value/index.mjs';\nimport { resolveVariant } from './resolve-dynamic-variants.mjs';\n\n/**\n * Set VisualElement's MotionValue, creating a new MotionValue for it if\n * it doesn't exist.\n */\nfunction setMotionValue(visualElement, key, value) {\n    if (visualElement.hasValue(key)) {\n        visualElement.getValue(key).set(value);\n    }\n    else {\n        visualElement.addValue(key, motionValue(value));\n    }\n}\nfunction setTarget(visualElement, definition) {\n    const resolved = resolveVariant(visualElement, definition);\n    let { transitionEnd = {}, transition = {}, ...target } = resolved || {};\n    target = { ...target, ...transitionEnd };\n    for (const key in target) {\n        const value = resolveFinalValueInKeyframes(target[key]);\n        setMotionValue(visualElement, key, value);\n    }\n}\n\nexport { setTarget };\n","import { optimizedAppearDataAttribute } from './data-id.mjs';\n\nfunction getOptimisedAppearId(visualElement) {\n    return visualElement.getProps()[optimizedAppearDataAttribute];\n}\n\nexport { getOptimisedAppearId };\n","import { transformProps } from '../../render/html/utils/transform.mjs';\nimport { animateMotionValue } from './motion-value.mjs';\nimport { isWillChangeMotionValue } from '../../value/use-will-change/is.mjs';\nimport { setTarget } from '../../render/utils/setters.mjs';\nimport { getValueTransition } from '../utils/transitions.mjs';\nimport { getOptimisedAppearId } from '../optimized-appear/get-appear-id.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\n\n/**\n * Decide whether we should block this animation. Previously, we achieved this\n * just by checking whether the key was listed in protectedKeys, but this\n * posed problems if an animation was triggered by afterChildren and protectedKeys\n * had been set to true in the meantime.\n */\nfunction shouldBlockAnimation({ protectedKeys, needsAnimating }, key) {\n    const shouldBlock = protectedKeys.hasOwnProperty(key) && needsAnimating[key] !== true;\n    needsAnimating[key] = false;\n    return shouldBlock;\n}\nfunction animateTarget(visualElement, targetAndTransition, { delay = 0, transitionOverride, type } = {}) {\n    var _a;\n    let { transition = visualElement.getDefaultTransition(), transitionEnd, ...target } = targetAndTransition;\n    const willChange = visualElement.getValue(\"willChange\");\n    if (transitionOverride)\n        transition = transitionOverride;\n    const animations = [];\n    const animationTypeState = type &&\n        visualElement.animationState &&\n        visualElement.animationState.getState()[type];\n    for (const key in target) {\n        const value = visualElement.getValue(key, (_a = visualElement.latestValues[key]) !== null && _a !== void 0 ? _a : null);\n        const valueTarget = target[key];\n        if (valueTarget === undefined ||\n            (animationTypeState &&\n                shouldBlockAnimation(animationTypeState, key))) {\n            continue;\n        }\n        const valueTransition = {\n            delay,\n            elapsed: 0,\n            ...getValueTransition(transition || {}, key),\n        };\n        /**\n         * If this is the first time a value is being animated, check\n         * to see if we're handling off from an existing animation.\n         */\n        let isHandoff = false;\n        if (window.HandoffAppearAnimations) {\n            const appearId = getOptimisedAppearId(visualElement);\n            if (appearId) {\n                const elapsed = window.HandoffAppearAnimations(appearId, key, value, frame);\n                if (elapsed !== null) {\n                    valueTransition.elapsed = elapsed;\n                    isHandoff = true;\n                }\n            }\n        }\n        value.start(animateMotionValue(key, value, valueTarget, visualElement.shouldReduceMotion && transformProps.has(key)\n            ? { type: false }\n            : valueTransition, visualElement, isHandoff));\n        const animation = value.animation;\n        if (animation) {\n            if (isWillChangeMotionValue(willChange)) {\n                willChange.add(key);\n                animation.then(() => willChange.remove(key));\n            }\n            animations.push(animation);\n        }\n    }\n    if (transitionEnd) {\n        Promise.all(animations).then(() => {\n            frame.update(() => {\n                transitionEnd && setTarget(visualElement, transitionEnd);\n            });\n        });\n    }\n    return animations;\n}\n\nexport { animateTarget };\n","import { resolveVariant } from '../../render/utils/resolve-dynamic-variants.mjs';\nimport { animateTarget } from './visual-element-target.mjs';\n\nfunction animateVariant(visualElement, variant, options = {}) {\n    var _a;\n    const resolved = resolveVariant(visualElement, variant, options.type === \"exit\"\n        ? (_a = visualElement.presenceContext) === null || _a === void 0 ? void 0 : _a.custom\n        : undefined);\n    let { transition = visualElement.getDefaultTransition() || {} } = resolved || {};\n    if (options.transitionOverride) {\n        transition = options.transitionOverride;\n    }\n    /**\n     * If we have a variant, create a callback that runs it as an animation.\n     * Otherwise, we resolve a Promise immediately for a composable no-op.\n     */\n    const getAnimation = resolved\n        ? () => Promise.all(animateTarget(visualElement, resolved, options))\n        : () => Promise.resolve();\n    /**\n     * If we have children, create a callback that runs all their animations.\n     * Otherwise, we resolve a Promise immediately for a composable no-op.\n     */\n    const getChildAnimations = visualElement.variantChildren && visualElement.variantChildren.size\n        ? (forwardDelay = 0) => {\n            const { delayChildren = 0, staggerChildren, staggerDirection, } = transition;\n            return animateChildren(visualElement, variant, delayChildren + forwardDelay, staggerChildren, staggerDirection, options);\n        }\n        : () => Promise.resolve();\n    /**\n     * If the transition explicitly defines a \"when\" option, we need to resolve either\n     * this animation or all children animations before playing the other.\n     */\n    const { when } = transition;\n    if (when) {\n        const [first, last] = when === \"beforeChildren\"\n            ? [getAnimation, getChildAnimations]\n            : [getChildAnimations, getAnimation];\n        return first().then(() => last());\n    }\n    else {\n        return Promise.all([getAnimation(), getChildAnimations(options.delay)]);\n    }\n}\nfunction animateChildren(visualElement, variant, delayChildren = 0, staggerChildren = 0, staggerDirection = 1, options) {\n    const animations = [];\n    const maxStaggerDuration = (visualElement.variantChildren.size - 1) * staggerChildren;\n    const generateStaggerDuration = staggerDirection === 1\n        ? (i = 0) => i * staggerChildren\n        : (i = 0) => maxStaggerDuration - i * staggerChildren;\n    Array.from(visualElement.variantChildren)\n        .sort(sortByTreeOrder)\n        .forEach((child, i) => {\n        child.notify(\"AnimationStart\", variant);\n        animations.push(animateVariant(child, variant, {\n            ...options,\n            delay: delayChildren + generateStaggerDuration(i),\n        }).then(() => child.notify(\"AnimationComplete\", variant)));\n    });\n    return Promise.all(animations);\n}\nfunction sortByTreeOrder(a, b) {\n    return a.sortNodePosition(b);\n}\n\nexport { animateVariant, sortByTreeOrder };\n","import { resolveVariant } from '../../render/utils/resolve-dynamic-variants.mjs';\nimport { animateTarget } from './visual-element-target.mjs';\nimport { animateVariant } from './visual-element-variant.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\n\nfunction animateVisualElement(visualElement, definition, options = {}) {\n    visualElement.notify(\"AnimationStart\", definition);\n    let animation;\n    if (Array.isArray(definition)) {\n        const animations = definition.map((variant) => animateVariant(visualElement, variant, options));\n        animation = Promise.all(animations);\n    }\n    else if (typeof definition === \"string\") {\n        animation = animateVariant(visualElement, definition, options);\n    }\n    else {\n        const resolvedDefinition = typeof definition === \"function\"\n            ? resolveVariant(visualElement, definition, options.custom)\n            : definition;\n        animation = Promise.all(animateTarget(visualElement, resolvedDefinition, options));\n    }\n    return animation.then(() => {\n        frame.postRender(() => {\n            visualElement.notify(\"AnimationComplete\", definition);\n        });\n    });\n}\n\nexport { animateVisualElement };\n","import { isAnimationControls } from '../../animation/utils/is-animation-controls.mjs';\nimport { isKeyframesTarget } from '../../animation/utils/is-keyframes-target.mjs';\nimport { shallowCompare } from '../../utils/shallow-compare.mjs';\nimport { isVariantLabel } from './is-variant-label.mjs';\nimport { resolveVariant } from './resolve-dynamic-variants.mjs';\nimport { variantPriorityOrder } from './variant-props.mjs';\nimport { animateVisualElement } from '../../animation/interfaces/visual-element.mjs';\n\nconst reversePriorityOrder = [...variantPriorityOrder].reverse();\nconst numAnimationTypes = variantPriorityOrder.length;\nfunction animateList(visualElement) {\n    return (animations) => Promise.all(animations.map(({ animation, options }) => animateVisualElement(visualElement, animation, options)));\n}\nfunction createAnimationState(visualElement) {\n    let animate = animateList(visualElement);\n    let state = createState();\n    let isInitialRender = true;\n    /**\n     * This function will be used to reduce the animation definitions for\n     * each active animation type into an object of resolved values for it.\n     */\n    const buildResolvedTypeValues = (type) => (acc, definition) => {\n        var _a;\n        const resolved = resolveVariant(visualElement, definition, type === \"exit\"\n            ? (_a = visualElement.presenceContext) === null || _a === void 0 ? void 0 : _a.custom\n            : undefined);\n        if (resolved) {\n            const { transition, transitionEnd, ...target } = resolved;\n            acc = { ...acc, ...target, ...transitionEnd };\n        }\n        return acc;\n    };\n    /**\n     * This just allows us to inject mocked animation functions\n     * @internal\n     */\n    function setAnimateFunction(makeAnimator) {\n        animate = makeAnimator(visualElement);\n    }\n    /**\n     * When we receive new props, we need to:\n     * 1. Create a list of protected keys for each type. This is a directory of\n     *    value keys that are currently being \"handled\" by types of a higher priority\n     *    so that whenever an animation is played of a given type, these values are\n     *    protected from being animated.\n     * 2. Determine if an animation type needs animating.\n     * 3. Determine if any values have been removed from a type and figure out\n     *    what to animate those to.\n     */\n    function animateChanges(changedActiveType) {\n        const props = visualElement.getProps();\n        const context = visualElement.getVariantContext(true) || {};\n        /**\n         * A list of animations that we'll build into as we iterate through the animation\n         * types. This will get executed at the end of the function.\n         */\n        const animations = [];\n        /**\n         * Keep track of which values have been removed. Then, as we hit lower priority\n         * animation types, we can check if they contain removed values and animate to that.\n         */\n        const removedKeys = new Set();\n        /**\n         * A dictionary of all encountered keys. This is an object to let us build into and\n         * copy it without iteration. Each time we hit an animation type we set its protected\n         * keys - the keys its not allowed to animate - to the latest version of this object.\n         */\n        let encounteredKeys = {};\n        /**\n         * If a variant has been removed at a given index, and this component is controlling\n         * variant animations, we want to ensure lower-priority variants are forced to animate.\n         */\n        let removedVariantIndex = Infinity;\n        /**\n         * Iterate through all animation types in reverse priority order. For each, we want to\n         * detect which values it's handling and whether or not they've changed (and therefore\n         * need to be animated). If any values have been removed, we want to detect those in\n         * lower priority props and flag for animation.\n         */\n        for (let i = 0; i < numAnimationTypes; i++) {\n            const type = reversePriorityOrder[i];\n            const typeState = state[type];\n            const prop = props[type] !== undefined\n                ? props[type]\n                : context[type];\n            const propIsVariant = isVariantLabel(prop);\n            /**\n             * If this type has *just* changed isActive status, set activeDelta\n             * to that status. Otherwise set to null.\n             */\n            const activeDelta = type === changedActiveType ? typeState.isActive : null;\n            if (activeDelta === false)\n                removedVariantIndex = i;\n            /**\n             * If this prop is an inherited variant, rather than been set directly on the\n             * component itself, we want to make sure we allow the parent to trigger animations.\n             *\n             * TODO: Can probably change this to a !isControllingVariants check\n             */\n            let isInherited = prop === context[type] &&\n                prop !== props[type] &&\n                propIsVariant;\n            /**\n             *\n             */\n            if (isInherited &&\n                isInitialRender &&\n                visualElement.manuallyAnimateOnMount) {\n                isInherited = false;\n            }\n            /**\n             * Set all encountered keys so far as the protected keys for this type. This will\n             * be any key that has been animated or otherwise handled by active, higher-priortiy types.\n             */\n            typeState.protectedKeys = { ...encounteredKeys };\n            // Check if we can skip analysing this prop early\n            if (\n            // If it isn't active and hasn't *just* been set as inactive\n            (!typeState.isActive && activeDelta === null) ||\n                // If we didn't and don't have any defined prop for this animation type\n                (!prop && !typeState.prevProp) ||\n                // Or if the prop doesn't define an animation\n                isAnimationControls(prop) ||\n                typeof prop === \"boolean\") {\n                continue;\n            }\n            /**\n             * As we go look through the values defined on this type, if we detect\n             * a changed value or a value that was removed in a higher priority, we set\n             * this to true and add this prop to the animation list.\n             */\n            const variantDidChange = checkVariantsDidChange(typeState.prevProp, prop);\n            let shouldAnimateType = variantDidChange ||\n                // If we're making this variant active, we want to always make it active\n                (type === changedActiveType &&\n                    typeState.isActive &&\n                    !isInherited &&\n                    propIsVariant) ||\n                // If we removed a higher-priority variant (i is in reverse order)\n                (i > removedVariantIndex && propIsVariant);\n            let handledRemovedValues = false;\n            /**\n             * As animations can be set as variant lists, variants or target objects, we\n             * coerce everything to an array if it isn't one already\n             */\n            const definitionList = Array.isArray(prop) ? prop : [prop];\n            /**\n             * Build an object of all the resolved values. We'll use this in the subsequent\n             * animateChanges calls to determine whether a value has changed.\n             */\n            let resolvedValues = definitionList.reduce(buildResolvedTypeValues(type), {});\n            if (activeDelta === false)\n                resolvedValues = {};\n            /**\n             * Now we need to loop through all the keys in the prev prop and this prop,\n             * and decide:\n             * 1. If the value has changed, and needs animating\n             * 2. If it has been removed, and needs adding to the removedKeys set\n             * 3. If it has been removed in a higher priority type and needs animating\n             * 4. If it hasn't been removed in a higher priority but hasn't changed, and\n             *    needs adding to the type's protectedKeys list.\n             */\n            const { prevResolvedValues = {} } = typeState;\n            const allKeys = {\n                ...prevResolvedValues,\n                ...resolvedValues,\n            };\n            const markToAnimate = (key) => {\n                shouldAnimateType = true;\n                if (removedKeys.has(key)) {\n                    handledRemovedValues = true;\n                    removedKeys.delete(key);\n                }\n                typeState.needsAnimating[key] = true;\n                const motionValue = visualElement.getValue(key);\n                if (motionValue)\n                    motionValue.liveStyle = false;\n            };\n            for (const key in allKeys) {\n                const next = resolvedValues[key];\n                const prev = prevResolvedValues[key];\n                // If we've already handled this we can just skip ahead\n                if (encounteredKeys.hasOwnProperty(key))\n                    continue;\n                /**\n                 * If the value has changed, we probably want to animate it.\n                 */\n                let valueHasChanged = false;\n                if (isKeyframesTarget(next) && isKeyframesTarget(prev)) {\n                    valueHasChanged = !shallowCompare(next, prev);\n                }\n                else {\n                    valueHasChanged = next !== prev;\n                }\n                if (valueHasChanged) {\n                    if (next !== undefined && next !== null) {\n                        // If next is defined and doesn't equal prev, it needs animating\n                        markToAnimate(key);\n                    }\n                    else {\n                        // If it's undefined, it's been removed.\n                        removedKeys.add(key);\n                    }\n                }\n                else if (next !== undefined && removedKeys.has(key)) {\n                    /**\n                     * If next hasn't changed and it isn't undefined, we want to check if it's\n                     * been removed by a higher priority\n                     */\n                    markToAnimate(key);\n                }\n                else {\n                    /**\n                     * If it hasn't changed, we add it to the list of protected values\n                     * to ensure it doesn't get animated.\n                     */\n                    typeState.protectedKeys[key] = true;\n                }\n            }\n            /**\n             * Update the typeState so next time animateChanges is called we can compare the\n             * latest prop and resolvedValues to these.\n             */\n            typeState.prevProp = prop;\n            typeState.prevResolvedValues = resolvedValues;\n            /**\n             *\n             */\n            if (typeState.isActive) {\n                encounteredKeys = { ...encounteredKeys, ...resolvedValues };\n            }\n            if (isInitialRender && visualElement.blockInitialAnimation) {\n                shouldAnimateType = false;\n            }\n            /**\n             * If this is an inherited prop we want to hard-block animations\n             */\n            if (shouldAnimateType && (!isInherited || handledRemovedValues)) {\n                animations.push(...definitionList.map((animation) => ({\n                    animation: animation,\n                    options: { type },\n                })));\n            }\n        }\n        /**\n         * If there are some removed value that haven't been dealt with,\n         * we need to create a new animation that falls back either to the value\n         * defined in the style prop, or the last read value.\n         */\n        if (removedKeys.size) {\n            const fallbackAnimation = {};\n            removedKeys.forEach((key) => {\n                const fallbackTarget = visualElement.getBaseTarget(key);\n                const motionValue = visualElement.getValue(key);\n                if (motionValue)\n                    motionValue.liveStyle = true;\n                // @ts-expect-error - @mattgperry to figure if we should do something here\n                fallbackAnimation[key] = fallbackTarget !== null && fallbackTarget !== void 0 ? fallbackTarget : null;\n            });\n            animations.push({ animation: fallbackAnimation });\n        }\n        let shouldAnimate = Boolean(animations.length);\n        if (isInitialRender &&\n            (props.initial === false || props.initial === props.animate) &&\n            !visualElement.manuallyAnimateOnMount) {\n            shouldAnimate = false;\n        }\n        isInitialRender = false;\n        return shouldAnimate ? animate(animations) : Promise.resolve();\n    }\n    /**\n     * Change whether a certain animation type is active.\n     */\n    function setActive(type, isActive) {\n        var _a;\n        // If the active state hasn't changed, we can safely do nothing here\n        if (state[type].isActive === isActive)\n            return Promise.resolve();\n        // Propagate active change to children\n        (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach((child) => { var _a; return (_a = child.animationState) === null || _a === void 0 ? void 0 : _a.setActive(type, isActive); });\n        state[type].isActive = isActive;\n        const animations = animateChanges(type);\n        for (const key in state) {\n            state[key].protectedKeys = {};\n        }\n        return animations;\n    }\n    return {\n        animateChanges,\n        setActive,\n        setAnimateFunction,\n        getState: () => state,\n        reset: () => {\n            state = createState();\n            isInitialRender = true;\n        },\n    };\n}\nfunction checkVariantsDidChange(prev, next) {\n    if (typeof next === \"string\") {\n        return next !== prev;\n    }\n    else if (Array.isArray(next)) {\n        return !shallowCompare(next, prev);\n    }\n    return false;\n}\nfunction createTypeState(isActive = false) {\n    return {\n        isActive,\n        protectedKeys: {},\n        needsAnimating: {},\n        prevResolvedValues: {},\n    };\n}\nfunction createState() {\n    return {\n        animate: createTypeState(true),\n        whileInView: createTypeState(),\n        whileHover: createTypeState(),\n        whileTap: createTypeState(),\n        whileDrag: createTypeState(),\n        whileFocus: createTypeState(),\n        exit: createTypeState(),\n    };\n}\n\nexport { checkVariantsDidChange, createAnimationState };\n","import { isAnimationControls } from '../../../animation/utils/is-animation-controls.mjs';\nimport { createAnimationState } from '../../../render/utils/animation-state.mjs';\nimport { Feature } from '../Feature.mjs';\n\nclass AnimationFeature extends Feature {\n    /**\n     * We dynamically generate the AnimationState manager as it contains a reference\n     * to the underlying animation library. We only want to load that if we load this,\n     * so people can optionally code split it out using the `m` component.\n     */\n    constructor(node) {\n        super(node);\n        node.animationState || (node.animationState = createAnimationState(node));\n    }\n    updateAnimationControlsSubscription() {\n        const { animate } = this.node.getProps();\n        if (isAnimationControls(animate)) {\n            this.unmountControls = animate.subscribe(this.node);\n        }\n    }\n    /**\n     * Subscribe any provided AnimationControls to the component's VisualElement\n     */\n    mount() {\n        this.updateAnimationControlsSubscription();\n    }\n    update() {\n        const { animate } = this.node.getProps();\n        const { animate: prevAnimate } = this.node.prevProps || {};\n        if (animate !== prevAnimate) {\n            this.updateAnimationControlsSubscription();\n        }\n    }\n    unmount() {\n        var _a;\n        this.node.animationState.reset();\n        (_a = this.unmountControls) === null || _a === void 0 ? void 0 : _a.call(this);\n    }\n}\n\nexport { AnimationFeature };\n","import { Feature } from '../Feature.mjs';\n\nlet id = 0;\nclass ExitAnimationFeature extends Feature {\n    constructor() {\n        super(...arguments);\n        this.id = id++;\n    }\n    update() {\n        if (!this.node.presenceContext)\n            return;\n        const { isPresent, onExitComplete } = this.node.presenceContext;\n        const { isPresent: prevIsPresent } = this.node.prevPresenceContext || {};\n        if (!this.node.animationState || isPresent === prevIsPresent) {\n            return;\n        }\n        const exitAnimation = this.node.animationState.setActive(\"exit\", !isPresent);\n        if (onExitComplete && !isPresent) {\n            exitAnimation.then(() => onExitComplete(this.id));\n        }\n    }\n    mount() {\n        const { register } = this.node.presenceContext || {};\n        if (register) {\n            this.unmount = register(this.id);\n        }\n    }\n    unmount() { }\n}\n\nexport { ExitAnimationFeature };\n","import { AnimationFeature } from './animation/index.mjs';\nimport { ExitAnimationFeature } from './animation/exit.mjs';\n\nconst animations = {\n    animation: {\n        Feature: AnimationFeature,\n    },\n    exit: {\n        Feature: ExitAnimationFeature,\n    },\n};\n\nexport { animations };\n","const distance = (a, b) => Math.abs(a - b);\nfunction distance2D(a, b) {\n    // Multi-dimensional\n    const xDelta = distance(a.x, b.x);\n    const yDelta = distance(a.y, b.y);\n    return Math.sqrt(xDelta ** 2 + yDelta ** 2);\n}\n\nexport { distance, distance2D };\n","import { extractEventInfo } from '../../events/event-info.mjs';\nimport { secondsToMilliseconds, millisecondsToSeconds } from '../../utils/time-conversion.mjs';\nimport { addPointerEvent } from '../../events/add-pointer-event.mjs';\nimport { pipe } from '../../utils/pipe.mjs';\nimport { distance2D } from '../../utils/distance.mjs';\nimport { isPrimaryPointer } from '../../events/utils/is-primary-pointer.mjs';\nimport { frame, cancelFrame, frameData } from '../../frameloop/frame.mjs';\n\n/**\n * @internal\n */\nclass PanSession {\n    constructor(event, handlers, { transformPagePoint, contextWindow, dragSnapToOrigin = false } = {}) {\n        /**\n         * @internal\n         */\n        this.startEvent = null;\n        /**\n         * @internal\n         */\n        this.lastMoveEvent = null;\n        /**\n         * @internal\n         */\n        this.lastMoveEventInfo = null;\n        /**\n         * @internal\n         */\n        this.handlers = {};\n        /**\n         * @internal\n         */\n        this.contextWindow = window;\n        this.updatePoint = () => {\n            if (!(this.lastMoveEvent && this.lastMoveEventInfo))\n                return;\n            const info = getPanInfo(this.lastMoveEventInfo, this.history);\n            const isPanStarted = this.startEvent !== null;\n            // Only start panning if the offset is larger than 3 pixels. If we make it\n            // any larger than this we'll want to reset the pointer history\n            // on the first update to avoid visual snapping to the cursoe.\n            const isDistancePastThreshold = distance2D(info.offset, { x: 0, y: 0 }) >= 3;\n            if (!isPanStarted && !isDistancePastThreshold)\n                return;\n            const { point } = info;\n            const { timestamp } = frameData;\n            this.history.push({ ...point, timestamp });\n            const { onStart, onMove } = this.handlers;\n            if (!isPanStarted) {\n                onStart && onStart(this.lastMoveEvent, info);\n                this.startEvent = this.lastMoveEvent;\n            }\n            onMove && onMove(this.lastMoveEvent, info);\n        };\n        this.handlePointerMove = (event, info) => {\n            this.lastMoveEvent = event;\n            this.lastMoveEventInfo = transformPoint(info, this.transformPagePoint);\n            // Throttle mouse move event to once per frame\n            frame.update(this.updatePoint, true);\n        };\n        this.handlePointerUp = (event, info) => {\n            this.end();\n            const { onEnd, onSessionEnd, resumeAnimation } = this.handlers;\n            if (this.dragSnapToOrigin)\n                resumeAnimation && resumeAnimation();\n            if (!(this.lastMoveEvent && this.lastMoveEventInfo))\n                return;\n            const panInfo = getPanInfo(event.type === \"pointercancel\"\n                ? this.lastMoveEventInfo\n                : transformPoint(info, this.transformPagePoint), this.history);\n            if (this.startEvent && onEnd) {\n                onEnd(event, panInfo);\n            }\n            onSessionEnd && onSessionEnd(event, panInfo);\n        };\n        // If we have more than one touch, don't start detecting this gesture\n        if (!isPrimaryPointer(event))\n            return;\n        this.dragSnapToOrigin = dragSnapToOrigin;\n        this.handlers = handlers;\n        this.transformPagePoint = transformPagePoint;\n        this.contextWindow = contextWindow || window;\n        const info = extractEventInfo(event);\n        const initialInfo = transformPoint(info, this.transformPagePoint);\n        const { point } = initialInfo;\n        const { timestamp } = frameData;\n        this.history = [{ ...point, timestamp }];\n        const { onSessionStart } = handlers;\n        onSessionStart &&\n            onSessionStart(event, getPanInfo(initialInfo, this.history));\n        this.removeListeners = pipe(addPointerEvent(this.contextWindow, \"pointermove\", this.handlePointerMove), addPointerEvent(this.contextWindow, \"pointerup\", this.handlePointerUp), addPointerEvent(this.contextWindow, \"pointercancel\", this.handlePointerUp));\n    }\n    updateHandlers(handlers) {\n        this.handlers = handlers;\n    }\n    end() {\n        this.removeListeners && this.removeListeners();\n        cancelFrame(this.updatePoint);\n    }\n}\nfunction transformPoint(info, transformPagePoint) {\n    return transformPagePoint ? { point: transformPagePoint(info.point) } : info;\n}\nfunction subtractPoint(a, b) {\n    return { x: a.x - b.x, y: a.y - b.y };\n}\nfunction getPanInfo({ point }, history) {\n    return {\n        point,\n        delta: subtractPoint(point, lastDevicePoint(history)),\n        offset: subtractPoint(point, startDevicePoint(history)),\n        velocity: getVelocity(history, 0.1),\n    };\n}\nfunction startDevicePoint(history) {\n    return history[0];\n}\nfunction lastDevicePoint(history) {\n    return history[history.length - 1];\n}\nfunction getVelocity(history, timeDelta) {\n    if (history.length < 2) {\n        return { x: 0, y: 0 };\n    }\n    let i = history.length - 1;\n    let timestampedPoint = null;\n    const lastPoint = lastDevicePoint(history);\n    while (i >= 0) {\n        timestampedPoint = history[i];\n        if (lastPoint.timestamp - timestampedPoint.timestamp >\n            secondsToMilliseconds(timeDelta)) {\n            break;\n        }\n        i--;\n    }\n    if (!timestampedPoint) {\n        return { x: 0, y: 0 };\n    }\n    const time = millisecondsToSeconds(lastPoint.timestamp - timestampedPoint.timestamp);\n    if (time === 0) {\n        return { x: 0, y: 0 };\n    }\n    const currentVelocity = {\n        x: (lastPoint.x - timestampedPoint.x) / time,\n        y: (lastPoint.y - timestampedPoint.y) / time,\n    };\n    if (currentVelocity.x === Infinity) {\n        currentVelocity.x = 0;\n    }\n    if (currentVelocity.y === Infinity) {\n        currentVelocity.y = 0;\n    }\n    return currentVelocity;\n}\n\nexport { PanSession };\n","import { mixNumber } from '../../utils/mix/number.mjs';\n\nfunction calcLength(axis) {\n    return axis.max - axis.min;\n}\nfunction isNear(value, target = 0, maxDistance = 0.01) {\n    return Math.abs(value - target) <= maxDistance;\n}\nfunction calcAxisDelta(delta, source, target, origin = 0.5) {\n    delta.origin = origin;\n    delta.originPoint = mixNumber(source.min, source.max, delta.origin);\n    delta.scale = calcLength(target) / calcLength(source);\n    if (isNear(delta.scale, 1, 0.0001) || isNaN(delta.scale))\n        delta.scale = 1;\n    delta.translate =\n        mixNumber(target.min, target.max, delta.origin) - delta.originPoint;\n    if (isNear(delta.translate) || isNaN(delta.translate))\n        delta.translate = 0;\n}\nfunction calcBoxDelta(delta, source, target, origin) {\n    calcAxisDelta(delta.x, source.x, target.x, origin ? origin.originX : undefined);\n    calcAxisDelta(delta.y, source.y, target.y, origin ? origin.originY : undefined);\n}\nfunction calcRelativeAxis(target, relative, parent) {\n    target.min = parent.min + relative.min;\n    target.max = target.min + calcLength(relative);\n}\nfunction calcRelativeBox(target, relative, parent) {\n    calcRelativeAxis(target.x, relative.x, parent.x);\n    calcRelativeAxis(target.y, relative.y, parent.y);\n}\nfunction calcRelativeAxisPosition(target, layout, parent) {\n    target.min = layout.min - parent.min;\n    target.max = target.min + calcLength(layout);\n}\nfunction calcRelativePosition(target, layout, parent) {\n    calcRelativeAxisPosition(target.x, layout.x, parent.x);\n    calcRelativeAxisPosition(target.y, layout.y, parent.y);\n}\n\nexport { calcAxisDelta, calcBoxDelta, calcLength, calcRelativeAxis, calcRelativeAxisPosition, calcRelativeBox, calcRelativePosition, isNear };\n","import { progress } from '../../../utils/progress.mjs';\nimport { calcLength } from '../../../projection/geometry/delta-calc.mjs';\nimport { clamp } from '../../../utils/clamp.mjs';\nimport { mixNumber } from '../../../utils/mix/number.mjs';\n\n/**\n * Apply constraints to a point. These constraints are both physical along an\n * axis, and an elastic factor that determines how much to constrain the point\n * by if it does lie outside the defined parameters.\n */\nfunction applyConstraints(point, { min, max }, elastic) {\n    if (min !== undefined && point < min) {\n        // If we have a min point defined, and this is outside of that, constrain\n        point = elastic\n            ? mixNumber(min, point, elastic.min)\n            : Math.max(point, min);\n    }\n    else if (max !== undefined && point > max) {\n        // If we have a max point defined, and this is outside of that, constrain\n        point = elastic\n            ? mixNumber(max, point, elastic.max)\n            : Math.min(point, max);\n    }\n    return point;\n}\n/**\n * Calculate constraints in terms of the viewport when defined relatively to the\n * measured axis. This is measured from the nearest edge, so a max constraint of 200\n * on an axis with a max value of 300 would return a constraint of 500 - axis length\n */\nfunction calcRelativeAxisConstraints(axis, min, max) {\n    return {\n        min: min !== undefined ? axis.min + min : undefined,\n        max: max !== undefined\n            ? axis.max + max - (axis.max - axis.min)\n            : undefined,\n    };\n}\n/**\n * Calculate constraints in terms of the viewport when\n * defined relatively to the measured bounding box.\n */\nfunction calcRelativeConstraints(layoutBox, { top, left, bottom, right }) {\n    return {\n        x: calcRelativeAxisConstraints(layoutBox.x, left, right),\n        y: calcRelativeAxisConstraints(layoutBox.y, top, bottom),\n    };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative axis\n */\nfunction calcViewportAxisConstraints(layoutAxis, constraintsAxis) {\n    let min = constraintsAxis.min - layoutAxis.min;\n    let max = constraintsAxis.max - layoutAxis.max;\n    // If the constraints axis is actually smaller than the layout axis then we can\n    // flip the constraints\n    if (constraintsAxis.max - constraintsAxis.min <\n        layoutAxis.max - layoutAxis.min) {\n        [min, max] = [max, min];\n    }\n    return { min, max };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative box\n */\nfunction calcViewportConstraints(layoutBox, constraintsBox) {\n    return {\n        x: calcViewportAxisConstraints(layoutBox.x, constraintsBox.x),\n        y: calcViewportAxisConstraints(layoutBox.y, constraintsBox.y),\n    };\n}\n/**\n * Calculate a transform origin relative to the source axis, between 0-1, that results\n * in an asthetically pleasing scale/transform needed to project from source to target.\n */\nfunction calcOrigin(source, target) {\n    let origin = 0.5;\n    const sourceLength = calcLength(source);\n    const targetLength = calcLength(target);\n    if (targetLength > sourceLength) {\n        origin = progress(target.min, target.max - sourceLength, source.min);\n    }\n    else if (sourceLength > targetLength) {\n        origin = progress(source.min, source.max - targetLength, target.min);\n    }\n    return clamp(0, 1, origin);\n}\n/**\n * Rebase the calculated viewport constraints relative to the layout.min point.\n */\nfunction rebaseAxisConstraints(layout, constraints) {\n    const relativeConstraints = {};\n    if (constraints.min !== undefined) {\n        relativeConstraints.min = constraints.min - layout.min;\n    }\n    if (constraints.max !== undefined) {\n        relativeConstraints.max = constraints.max - layout.min;\n    }\n    return relativeConstraints;\n}\nconst defaultElastic = 0.35;\n/**\n * Accepts a dragElastic prop and returns resolved elastic values for each axis.\n */\nfunction resolveDragElastic(dragElastic = defaultElastic) {\n    if (dragElastic === false) {\n        dragElastic = 0;\n    }\n    else if (dragElastic === true) {\n        dragElastic = defaultElastic;\n    }\n    return {\n        x: resolveAxisElastic(dragElastic, \"left\", \"right\"),\n        y: resolveAxisElastic(dragElastic, \"top\", \"bottom\"),\n    };\n}\nfunction resolveAxisElastic(dragElastic, minLabel, maxLabel) {\n    return {\n        min: resolvePointElastic(dragElastic, minLabel),\n        max: resolvePointElastic(dragElastic, maxLabel),\n    };\n}\nfunction resolvePointElastic(dragElastic, label) {\n    return typeof dragElastic === \"number\"\n        ? dragElastic\n        : dragElastic[label] || 0;\n}\n\nexport { applyConstraints, calcOrigin, calcRelativeAxisConstraints, calcRelativeConstraints, calcViewportAxisConstraints, calcViewportConstraints, defaultElastic, rebaseAxisConstraints, resolveAxisElastic, resolveDragElastic, resolvePointElastic };\n","const createAxisDelta = () => ({\n    translate: 0,\n    scale: 1,\n    origin: 0,\n    originPoint: 0,\n});\nconst createDelta = () => ({\n    x: createAxisDelta(),\n    y: createAxisDelta(),\n});\nconst createAxis = () => ({ min: 0, max: 0 });\nconst createBox = () => ({\n    x: createAxis(),\n    y: createAxis(),\n});\n\nexport { createAxis, createAxisDelta, createBox, createDelta };\n","function eachAxis(callback) {\n    return [callback(\"x\"), callback(\"y\")];\n}\n\nexport { eachAxis };\n","/**\n * Bounding boxes tend to be defined as top, left, right, bottom. For various operations\n * it's easier to consider each axis individually. This function returns a bounding box\n * as a map of single-axis min/max values.\n */\nfunction convertBoundingBoxToBox({ top, left, right, bottom, }) {\n    return {\n        x: { min: left, max: right },\n        y: { min: top, max: bottom },\n    };\n}\nfunction convertBoxToBoundingBox({ x, y }) {\n    return { top: y.min, right: x.max, bottom: y.max, left: x.min };\n}\n/**\n * Applies a TransformPoint function to a bounding box. TransformPoint is usually a function\n * provided by Framer to allow measured points to be corrected for device scaling. This is used\n * when measuring DOM elements and DOM event points.\n */\nfunction transformBoxPoints(point, transformPoint) {\n    if (!transformPoint)\n        return point;\n    const topLeft = transformPoint({ x: point.left, y: point.top });\n    const bottomRight = transformPoint({ x: point.right, y: point.bottom });\n    return {\n        top: topLeft.y,\n        left: topLeft.x,\n        bottom: bottomRight.y,\n        right: bottomRight.x,\n    };\n}\n\nexport { convertBoundingBoxToBox, convertBoxToBoundingBox, transformBoxPoints };\n","function isIdentityScale(scale) {\n    return scale === undefined || scale === 1;\n}\nfunction hasScale({ scale, scaleX, scaleY }) {\n    return (!isIdentityScale(scale) ||\n        !isIdentityScale(scaleX) ||\n        !isIdentityScale(scaleY));\n}\nfunction hasTransform(values) {\n    return (hasScale(values) ||\n        has2DTranslate(values) ||\n        values.z ||\n        values.rotate ||\n        values.rotateX ||\n        values.rotateY ||\n        values.skewX ||\n        values.skewY);\n}\nfunction has2DTranslate(values) {\n    return is2DTranslate(values.x) || is2DTranslate(values.y);\n}\nfunction is2DTranslate(value) {\n    return value && value !== \"0%\";\n}\n\nexport { has2DTranslate, hasScale, hasTransform };\n","import { mixNumber } from '../../utils/mix/number.mjs';\nimport { hasTransform } from '../utils/has-transform.mjs';\n\n/**\n * Scales a point based on a factor and an originPoint\n */\nfunction scalePoint(point, scale, originPoint) {\n    const distanceFromOrigin = point - originPoint;\n    const scaled = scale * distanceFromOrigin;\n    return originPoint + scaled;\n}\n/**\n * Applies a translate/scale delta to a point\n */\nfunction applyPointDelta(point, translate, scale, originPoint, boxScale) {\n    if (boxScale !== undefined) {\n        point = scalePoint(point, boxScale, originPoint);\n    }\n    return scalePoint(point, scale, originPoint) + translate;\n}\n/**\n * Applies a translate/scale delta to an axis\n */\nfunction applyAxisDelta(axis, translate = 0, scale = 1, originPoint, boxScale) {\n    axis.min = applyPointDelta(axis.min, translate, scale, originPoint, boxScale);\n    axis.max = applyPointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Applies a translate/scale delta to a box\n */\nfunction applyBoxDelta(box, { x, y }) {\n    applyAxisDelta(box.x, x.translate, x.scale, x.originPoint);\n    applyAxisDelta(box.y, y.translate, y.scale, y.originPoint);\n}\n/**\n * Apply a tree of deltas to a box. We do this to calculate the effect of all the transforms\n * in a tree upon our box before then calculating how to project it into our desired viewport-relative box\n *\n * This is the final nested loop within updateLayoutDelta for future refactoring\n */\nfunction applyTreeDeltas(box, treeScale, treePath, isSharedTransition = false) {\n    const treeLength = treePath.length;\n    if (!treeLength)\n        return;\n    // Reset the treeScale\n    treeScale.x = treeScale.y = 1;\n    let node;\n    let delta;\n    for (let i = 0; i < treeLength; i++) {\n        node = treePath[i];\n        delta = node.projectionDelta;\n        /**\n         * TODO: Prefer to remove this, but currently we have motion components with\n         * display: contents in Framer.\n         */\n        const instance = node.instance;\n        if (instance &&\n            instance.style &&\n            instance.style.display === \"contents\") {\n            continue;\n        }\n        if (isSharedTransition &&\n            node.options.layoutScroll &&\n            node.scroll &&\n            node !== node.root) {\n            transformBox(box, {\n                x: -node.scroll.offset.x,\n                y: -node.scroll.offset.y,\n            });\n        }\n        if (delta) {\n            // Incoporate each ancestor's scale into a culmulative treeScale for this component\n            treeScale.x *= delta.x.scale;\n            treeScale.y *= delta.y.scale;\n            // Apply each ancestor's calculated delta into this component's recorded layout box\n            applyBoxDelta(box, delta);\n        }\n        if (isSharedTransition && hasTransform(node.latestValues)) {\n            transformBox(box, node.latestValues);\n        }\n    }\n    /**\n     * Snap tree scale back to 1 if it's within a non-perceivable threshold.\n     * This will help reduce useless scales getting rendered.\n     */\n    treeScale.x = snapToDefault(treeScale.x);\n    treeScale.y = snapToDefault(treeScale.y);\n}\nfunction snapToDefault(scale) {\n    if (Number.isInteger(scale))\n        return scale;\n    return scale > 1.0000000000001 || scale < 0.999999999999 ? scale : 1;\n}\nfunction translateAxis(axis, distance) {\n    axis.min = axis.min + distance;\n    axis.max = axis.max + distance;\n}\n/**\n * Apply a transform to an axis from the latest resolved motion values.\n * This function basically acts as a bridge between a flat motion value map\n * and applyAxisDelta\n */\nfunction transformAxis(axis, transforms, [key, scaleKey, originKey]) {\n    const axisOrigin = transforms[originKey] !== undefined ? transforms[originKey] : 0.5;\n    const originPoint = mixNumber(axis.min, axis.max, axisOrigin);\n    // Apply the axis delta to the final axis\n    applyAxisDelta(axis, transforms[key], transforms[scaleKey], originPoint, transforms.scale);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\nconst xKeys = [\"x\", \"scaleX\", \"originX\"];\nconst yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Apply a transform to a box from the latest resolved motion values.\n */\nfunction transformBox(box, transform) {\n    transformAxis(box.x, transform, xKeys);\n    transformAxis(box.y, transform, yKeys);\n}\n\nexport { applyAxisDelta, applyBoxDelta, applyPointDelta, applyTreeDeltas, scalePoint, transformAxis, transformBox, translateAxis };\n","import { convertBoundingBoxToBox, transformBoxPoints } from '../geometry/conversion.mjs';\nimport { translateAxis } from '../geometry/delta-apply.mjs';\n\nfunction measureViewportBox(instance, transformPoint) {\n    return convertBoundingBoxToBox(transformBoxPoints(instance.getBoundingClientRect(), transformPoint));\n}\nfunction measurePageBox(element, rootProjectionNode, transformPagePoint) {\n    const viewportBox = measureViewportBox(element, transformPagePoint);\n    const { scroll } = rootProjectionNode;\n    if (scroll) {\n        translateAxis(viewportBox.x, scroll.offset.x);\n        translateAxis(viewportBox.y, scroll.offset.y);\n    }\n    return viewportBox;\n}\n\nexport { measurePageBox, measureViewportBox };\n","// Fixes https://github.com/framer/motion/issues/2270\nconst getContextWindow = ({ current }) => {\n    return current ? current.ownerDocument.defaultView : null;\n};\n\nexport { getContextWindow };\n","import { invariant } from '../../utils/errors.mjs';\nimport { PanSession } from '../pan/PanSession.mjs';\nimport { getGlobalLock } from './utils/lock.mjs';\nimport { isRefObject } from '../../utils/is-ref-object.mjs';\nimport { addPointerEvent } from '../../events/add-pointer-event.mjs';\nimport { applyConstraints, calcRelativeConstraints, resolveDragElastic, rebaseAxisConstraints, calcViewportConstraints, calcOrigin, defaultElastic } from './utils/constraints.mjs';\nimport { createBox } from '../../projection/geometry/models.mjs';\nimport { eachAxis } from '../../projection/utils/each-axis.mjs';\nimport { measurePageBox } from '../../projection/utils/measure.mjs';\nimport { extractEventInfo } from '../../events/event-info.mjs';\nimport { convertBoxToBoundingBox, convertBoundingBoxToBox } from '../../projection/geometry/conversion.mjs';\nimport { addDomEvent } from '../../events/add-dom-event.mjs';\nimport { calcLength } from '../../projection/geometry/delta-calc.mjs';\nimport { mixNumber } from '../../utils/mix/number.mjs';\nimport { percent } from '../../value/types/numbers/units.mjs';\nimport { animateMotionValue } from '../../animation/interfaces/motion-value.mjs';\nimport { getContextWindow } from '../../utils/get-context-window.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\n\nconst elementDragControls = new WeakMap();\n/**\n *\n */\n// let latestPointerEvent: PointerEvent\nclass VisualElementDragControls {\n    constructor(visualElement) {\n        // This is a reference to the global drag gesture lock, ensuring only one component\n        // can \"capture\" the drag of one or both axes.\n        // TODO: Look into moving this into pansession?\n        this.openGlobalLock = null;\n        this.isDragging = false;\n        this.currentDirection = null;\n        this.originPoint = { x: 0, y: 0 };\n        /**\n         * The permitted boundaries of travel, in pixels.\n         */\n        this.constraints = false;\n        this.hasMutatedConstraints = false;\n        /**\n         * The per-axis resolved elastic values.\n         */\n        this.elastic = createBox();\n        this.visualElement = visualElement;\n    }\n    start(originEvent, { snapToCursor = false } = {}) {\n        /**\n         * Don't start dragging if this component is exiting\n         */\n        const { presenceContext } = this.visualElement;\n        if (presenceContext && presenceContext.isPresent === false)\n            return;\n        const onSessionStart = (event) => {\n            const { dragSnapToOrigin } = this.getProps();\n            // Stop or pause any animations on both axis values immediately. This allows the user to throw and catch\n            // the component.\n            dragSnapToOrigin ? this.pauseAnimation() : this.stopAnimation();\n            if (snapToCursor) {\n                this.snapToCursor(extractEventInfo(event, \"page\").point);\n            }\n        };\n        const onStart = (event, info) => {\n            // Attempt to grab the global drag gesture lock - maybe make this part of PanSession\n            const { drag, dragPropagation, onDragStart } = this.getProps();\n            if (drag && !dragPropagation) {\n                if (this.openGlobalLock)\n                    this.openGlobalLock();\n                this.openGlobalLock = getGlobalLock(drag);\n                // If we don 't have the lock, don't start dragging\n                if (!this.openGlobalLock)\n                    return;\n            }\n            this.isDragging = true;\n            this.currentDirection = null;\n            this.resolveConstraints();\n            if (this.visualElement.projection) {\n                this.visualElement.projection.isAnimationBlocked = true;\n                this.visualElement.projection.target = undefined;\n            }\n            /**\n             * Record gesture origin\n             */\n            eachAxis((axis) => {\n                let current = this.getAxisMotionValue(axis).get() || 0;\n                /**\n                 * If the MotionValue is a percentage value convert to px\n                 */\n                if (percent.test(current)) {\n                    const { projection } = this.visualElement;\n                    if (projection && projection.layout) {\n                        const measuredAxis = projection.layout.layoutBox[axis];\n                        if (measuredAxis) {\n                            const length = calcLength(measuredAxis);\n                            current = length * (parseFloat(current) / 100);\n                        }\n                    }\n                }\n                this.originPoint[axis] = current;\n            });\n            // Fire onDragStart event\n            if (onDragStart) {\n                frame.postRender(() => onDragStart(event, info));\n            }\n            const { animationState } = this.visualElement;\n            animationState && animationState.setActive(\"whileDrag\", true);\n        };\n        const onMove = (event, info) => {\n            // latestPointerEvent = event\n            const { dragPropagation, dragDirectionLock, onDirectionLock, onDrag, } = this.getProps();\n            // If we didn't successfully receive the gesture lock, early return.\n            if (!dragPropagation && !this.openGlobalLock)\n                return;\n            const { offset } = info;\n            // Attempt to detect drag direction if directionLock is true\n            if (dragDirectionLock && this.currentDirection === null) {\n                this.currentDirection = getCurrentDirection(offset);\n                // If we've successfully set a direction, notify listener\n                if (this.currentDirection !== null) {\n                    onDirectionLock && onDirectionLock(this.currentDirection);\n                }\n                return;\n            }\n            // Update each point with the latest position\n            this.updateAxis(\"x\", info.point, offset);\n            this.updateAxis(\"y\", info.point, offset);\n            /**\n             * Ideally we would leave the renderer to fire naturally at the end of\n             * this frame but if the element is about to change layout as the result\n             * of a re-render we want to ensure the browser can read the latest\n             * bounding box to ensure the pointer and element don't fall out of sync.\n             */\n            this.visualElement.render();\n            /**\n             * This must fire after the render call as it might trigger a state\n             * change which itself might trigger a layout update.\n             */\n            onDrag && onDrag(event, info);\n        };\n        const onSessionEnd = (event, info) => this.stop(event, info);\n        const resumeAnimation = () => eachAxis((axis) => {\n            var _a;\n            return this.getAnimationState(axis) === \"paused\" &&\n                ((_a = this.getAxisMotionValue(axis).animation) === null || _a === void 0 ? void 0 : _a.play());\n        });\n        const { dragSnapToOrigin } = this.getProps();\n        this.panSession = new PanSession(originEvent, {\n            onSessionStart,\n            onStart,\n            onMove,\n            onSessionEnd,\n            resumeAnimation,\n        }, {\n            transformPagePoint: this.visualElement.getTransformPagePoint(),\n            dragSnapToOrigin,\n            contextWindow: getContextWindow(this.visualElement),\n        });\n    }\n    stop(event, info) {\n        const isDragging = this.isDragging;\n        this.cancel();\n        if (!isDragging)\n            return;\n        const { velocity } = info;\n        this.startAnimation(velocity);\n        const { onDragEnd } = this.getProps();\n        if (onDragEnd) {\n            frame.postRender(() => onDragEnd(event, info));\n        }\n    }\n    cancel() {\n        this.isDragging = false;\n        const { projection, animationState } = this.visualElement;\n        if (projection) {\n            projection.isAnimationBlocked = false;\n        }\n        this.panSession && this.panSession.end();\n        this.panSession = undefined;\n        const { dragPropagation } = this.getProps();\n        if (!dragPropagation && this.openGlobalLock) {\n            this.openGlobalLock();\n            this.openGlobalLock = null;\n        }\n        animationState && animationState.setActive(\"whileDrag\", false);\n    }\n    updateAxis(axis, _point, offset) {\n        const { drag } = this.getProps();\n        // If we're not dragging this axis, do an early return.\n        if (!offset || !shouldDrag(axis, drag, this.currentDirection))\n            return;\n        const axisValue = this.getAxisMotionValue(axis);\n        let next = this.originPoint[axis] + offset[axis];\n        // Apply constraints\n        if (this.constraints && this.constraints[axis]) {\n            next = applyConstraints(next, this.constraints[axis], this.elastic[axis]);\n        }\n        axisValue.set(next);\n    }\n    resolveConstraints() {\n        var _a;\n        const { dragConstraints, dragElastic } = this.getProps();\n        const layout = this.visualElement.projection &&\n            !this.visualElement.projection.layout\n            ? this.visualElement.projection.measure(false)\n            : (_a = this.visualElement.projection) === null || _a === void 0 ? void 0 : _a.layout;\n        const prevConstraints = this.constraints;\n        if (dragConstraints && isRefObject(dragConstraints)) {\n            if (!this.constraints) {\n                this.constraints = this.resolveRefConstraints();\n            }\n        }\n        else {\n            if (dragConstraints && layout) {\n                this.constraints = calcRelativeConstraints(layout.layoutBox, dragConstraints);\n            }\n            else {\n                this.constraints = false;\n            }\n        }\n        this.elastic = resolveDragElastic(dragElastic);\n        /**\n         * If we're outputting to external MotionValues, we want to rebase the measured constraints\n         * from viewport-relative to component-relative.\n         */\n        if (prevConstraints !== this.constraints &&\n            layout &&\n            this.constraints &&\n            !this.hasMutatedConstraints) {\n            eachAxis((axis) => {\n                if (this.constraints !== false &&\n                    this.getAxisMotionValue(axis)) {\n                    this.constraints[axis] = rebaseAxisConstraints(layout.layoutBox[axis], this.constraints[axis]);\n                }\n            });\n        }\n    }\n    resolveRefConstraints() {\n        const { dragConstraints: constraints, onMeasureDragConstraints } = this.getProps();\n        if (!constraints || !isRefObject(constraints))\n            return false;\n        const constraintsElement = constraints.current;\n        invariant(constraintsElement !== null, \"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.\");\n        const { projection } = this.visualElement;\n        // TODO\n        if (!projection || !projection.layout)\n            return false;\n        const constraintsBox = measurePageBox(constraintsElement, projection.root, this.visualElement.getTransformPagePoint());\n        let measuredConstraints = calcViewportConstraints(projection.layout.layoutBox, constraintsBox);\n        /**\n         * If there's an onMeasureDragConstraints listener we call it and\n         * if different constraints are returned, set constraints to that\n         */\n        if (onMeasureDragConstraints) {\n            const userConstraints = onMeasureDragConstraints(convertBoxToBoundingBox(measuredConstraints));\n            this.hasMutatedConstraints = !!userConstraints;\n            if (userConstraints) {\n                measuredConstraints = convertBoundingBoxToBox(userConstraints);\n            }\n        }\n        return measuredConstraints;\n    }\n    startAnimation(velocity) {\n        const { drag, dragMomentum, dragElastic, dragTransition, dragSnapToOrigin, onDragTransitionEnd, } = this.getProps();\n        const constraints = this.constraints || {};\n        const momentumAnimations = eachAxis((axis) => {\n            if (!shouldDrag(axis, drag, this.currentDirection)) {\n                return;\n            }\n            let transition = (constraints && constraints[axis]) || {};\n            if (dragSnapToOrigin)\n                transition = { min: 0, max: 0 };\n            /**\n             * Overdamp the boundary spring if `dragElastic` is disabled. There's still a frame\n             * of spring animations so we should look into adding a disable spring option to `inertia`.\n             * We could do something here where we affect the `bounceStiffness` and `bounceDamping`\n             * using the value of `dragElastic`.\n             */\n            const bounceStiffness = dragElastic ? 200 : 1000000;\n            const bounceDamping = dragElastic ? 40 : 10000000;\n            const inertia = {\n                type: \"inertia\",\n                velocity: dragMomentum ? velocity[axis] : 0,\n                bounceStiffness,\n                bounceDamping,\n                timeConstant: 750,\n                restDelta: 1,\n                restSpeed: 10,\n                ...dragTransition,\n                ...transition,\n            };\n            // If we're not animating on an externally-provided `MotionValue` we can use the\n            // component's animation controls which will handle interactions with whileHover (etc),\n            // otherwise we just have to animate the `MotionValue` itself.\n            return this.startAxisValueAnimation(axis, inertia);\n        });\n        // Run all animations and then resolve the new drag constraints.\n        return Promise.all(momentumAnimations).then(onDragTransitionEnd);\n    }\n    startAxisValueAnimation(axis, transition) {\n        const axisValue = this.getAxisMotionValue(axis);\n        return axisValue.start(animateMotionValue(axis, axisValue, 0, transition, this.visualElement));\n    }\n    stopAnimation() {\n        eachAxis((axis) => this.getAxisMotionValue(axis).stop());\n    }\n    pauseAnimation() {\n        eachAxis((axis) => { var _a; return (_a = this.getAxisMotionValue(axis).animation) === null || _a === void 0 ? void 0 : _a.pause(); });\n    }\n    getAnimationState(axis) {\n        var _a;\n        return (_a = this.getAxisMotionValue(axis).animation) === null || _a === void 0 ? void 0 : _a.state;\n    }\n    /**\n     * Drag works differently depending on which props are provided.\n     *\n     * - If _dragX and _dragY are provided, we output the gesture delta directly to those motion values.\n     * - Otherwise, we apply the delta to the x/y motion values.\n     */\n    getAxisMotionValue(axis) {\n        const dragKey = `_drag${axis.toUpperCase()}`;\n        const props = this.visualElement.getProps();\n        const externalMotionValue = props[dragKey];\n        return externalMotionValue\n            ? externalMotionValue\n            : this.visualElement.getValue(axis, (props.initial\n                ? props.initial[axis]\n                : undefined) || 0);\n    }\n    snapToCursor(point) {\n        eachAxis((axis) => {\n            const { drag } = this.getProps();\n            // If we're not dragging this axis, do an early return.\n            if (!shouldDrag(axis, drag, this.currentDirection))\n                return;\n            const { projection } = this.visualElement;\n            const axisValue = this.getAxisMotionValue(axis);\n            if (projection && projection.layout) {\n                const { min, max } = projection.layout.layoutBox[axis];\n                axisValue.set(point[axis] - mixNumber(min, max, 0.5));\n            }\n        });\n    }\n    /**\n     * When the viewport resizes we want to check if the measured constraints\n     * have changed and, if so, reposition the element within those new constraints\n     * relative to where it was before the resize.\n     */\n    scalePositionWithinConstraints() {\n        if (!this.visualElement.current)\n            return;\n        const { drag, dragConstraints } = this.getProps();\n        const { projection } = this.visualElement;\n        if (!isRefObject(dragConstraints) || !projection || !this.constraints)\n            return;\n        /**\n         * Stop current animations as there can be visual glitching if we try to do\n         * this mid-animation\n         */\n        this.stopAnimation();\n        /**\n         * Record the relative position of the dragged element relative to the\n         * constraints box and save as a progress value.\n         */\n        const boxProgress = { x: 0, y: 0 };\n        eachAxis((axis) => {\n            const axisValue = this.getAxisMotionValue(axis);\n            if (axisValue && this.constraints !== false) {\n                const latest = axisValue.get();\n                boxProgress[axis] = calcOrigin({ min: latest, max: latest }, this.constraints[axis]);\n            }\n        });\n        /**\n         * Update the layout of this element and resolve the latest drag constraints\n         */\n        const { transformTemplate } = this.visualElement.getProps();\n        this.visualElement.current.style.transform = transformTemplate\n            ? transformTemplate({}, \"\")\n            : \"none\";\n        projection.root && projection.root.updateScroll();\n        projection.updateLayout();\n        this.resolveConstraints();\n        /**\n         * For each axis, calculate the current progress of the layout axis\n         * within the new constraints.\n         */\n        eachAxis((axis) => {\n            if (!shouldDrag(axis, drag, null))\n                return;\n            /**\n             * Calculate a new transform based on the previous box progress\n             */\n            const axisValue = this.getAxisMotionValue(axis);\n            const { min, max } = this.constraints[axis];\n            axisValue.set(mixNumber(min, max, boxProgress[axis]));\n        });\n    }\n    addListeners() {\n        if (!this.visualElement.current)\n            return;\n        elementDragControls.set(this.visualElement, this);\n        const element = this.visualElement.current;\n        /**\n         * Attach a pointerdown event listener on this DOM element to initiate drag tracking.\n         */\n        const stopPointerListener = addPointerEvent(element, \"pointerdown\", (event) => {\n            const { drag, dragListener = true } = this.getProps();\n            drag && dragListener && this.start(event);\n        });\n        const measureDragConstraints = () => {\n            const { dragConstraints } = this.getProps();\n            if (isRefObject(dragConstraints) && dragConstraints.current) {\n                this.constraints = this.resolveRefConstraints();\n            }\n        };\n        const { projection } = this.visualElement;\n        const stopMeasureLayoutListener = projection.addEventListener(\"measure\", measureDragConstraints);\n        if (projection && !projection.layout) {\n            projection.root && projection.root.updateScroll();\n            projection.updateLayout();\n        }\n        frame.read(measureDragConstraints);\n        /**\n         * Attach a window resize listener to scale the draggable target within its defined\n         * constraints as the window resizes.\n         */\n        const stopResizeListener = addDomEvent(window, \"resize\", () => this.scalePositionWithinConstraints());\n        /**\n         * If the element's layout changes, calculate the delta and apply that to\n         * the drag gesture's origin point.\n         */\n        const stopLayoutUpdateListener = projection.addEventListener(\"didUpdate\", (({ delta, hasLayoutChanged }) => {\n            if (this.isDragging && hasLayoutChanged) {\n                eachAxis((axis) => {\n                    const motionValue = this.getAxisMotionValue(axis);\n                    if (!motionValue)\n                        return;\n                    this.originPoint[axis] += delta[axis].translate;\n                    motionValue.set(motionValue.get() + delta[axis].translate);\n                });\n                this.visualElement.render();\n            }\n        }));\n        return () => {\n            stopResizeListener();\n            stopPointerListener();\n            stopMeasureLayoutListener();\n            stopLayoutUpdateListener && stopLayoutUpdateListener();\n        };\n    }\n    getProps() {\n        const props = this.visualElement.getProps();\n        const { drag = false, dragDirectionLock = false, dragPropagation = false, dragConstraints = false, dragElastic = defaultElastic, dragMomentum = true, } = props;\n        return {\n            ...props,\n            drag,\n            dragDirectionLock,\n            dragPropagation,\n            dragConstraints,\n            dragElastic,\n            dragMomentum,\n        };\n    }\n}\nfunction shouldDrag(direction, drag, currentDirection) {\n    return ((drag === true || drag === direction) &&\n        (currentDirection === null || currentDirection === direction));\n}\n/**\n * Based on an x/y offset determine the current drag direction. If both axis' offsets are lower\n * than the provided threshold, return `null`.\n *\n * @param offset - The x/y offset from origin.\n * @param lockThreshold - (Optional) - the minimum absolute offset before we can determine a drag direction.\n */\nfunction getCurrentDirection(offset, lockThreshold = 10) {\n    let direction = null;\n    if (Math.abs(offset.y) > lockThreshold) {\n        direction = \"y\";\n    }\n    else if (Math.abs(offset.x) > lockThreshold) {\n        direction = \"x\";\n    }\n    return direction;\n}\n\nexport { VisualElementDragControls, elementDragControls };\n","import { Feature } from '../../motion/features/Feature.mjs';\nimport { noop } from '../../utils/noop.mjs';\nimport { VisualElementDragControls } from './VisualElementDragControls.mjs';\n\nclass DragGesture extends Feature {\n    constructor(node) {\n        super(node);\n        this.removeGroupControls = noop;\n        this.removeListeners = noop;\n        this.controls = new VisualElementDragControls(node);\n    }\n    mount() {\n        // If we've been provided a DragControls for manual control over the drag gesture,\n        // subscribe this component to it on mount.\n        const { dragControls } = this.node.getProps();\n        if (dragControls) {\n            this.removeGroupControls = dragControls.subscribe(this.controls);\n        }\n        this.removeListeners = this.controls.addListeners() || noop;\n    }\n    unmount() {\n        this.removeGroupControls();\n        this.removeListeners();\n    }\n}\n\nexport { DragGesture };\n","import { PanSession } from './PanSession.mjs';\nimport { addPointerEvent } from '../../events/add-pointer-event.mjs';\nimport { Feature } from '../../motion/features/Feature.mjs';\nimport { noop } from '../../utils/noop.mjs';\nimport { getContextWindow } from '../../utils/get-context-window.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\n\nconst asyncHandler = (handler) => (event, info) => {\n    if (handler) {\n        frame.postRender(() => handler(event, info));\n    }\n};\nclass PanGesture extends Feature {\n    constructor() {\n        super(...arguments);\n        this.removePointerDownListener = noop;\n    }\n    onPointerDown(pointerDownEvent) {\n        this.session = new PanSession(pointerDownEvent, this.createPanHandlers(), {\n            transformPagePoint: this.node.getTransformPagePoint(),\n            contextWindow: getContextWindow(this.node),\n        });\n    }\n    createPanHandlers() {\n        const { onPanSessionStart, onPanStart, onPan, onPanEnd } = this.node.getProps();\n        return {\n            onSessionStart: asyncHandler(onPanSessionStart),\n            onStart: asyncHandler(onPanStart),\n            onMove: onPan,\n            onEnd: (event, info) => {\n                delete this.session;\n                if (onPanEnd) {\n                    frame.postRender(() => onPanEnd(event, info));\n                }\n            },\n        };\n    }\n    mount() {\n        this.removePointerDownListener = addPointerEvent(this.node.current, \"pointerdown\", (event) => this.onPointerDown(event));\n    }\n    update() {\n        this.session && this.session.updateHandlers(this.createPanHandlers());\n    }\n    unmount() {\n        this.removePointerDownListener();\n        this.session && this.session.end();\n    }\n}\n\nexport { PanGesture };\n","import { useContext, useId, useEffect } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\n\n/**\n * When a component is the child of `AnimatePresence`, it can use `usePresence`\n * to access information about whether it's still present in the React tree.\n *\n * ```jsx\n * import { usePresence } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const [isPresent, safeToRemove] = usePresence()\n *\n *   useEffect(() => {\n *     !isPresent && setTimeout(safeToRemove, 1000)\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * If `isPresent` is `false`, it means that a component has been removed the tree, but\n * `AnimatePresence` won't really remove it until `safeToRemove` has been called.\n *\n * @public\n */\nfunction usePresence() {\n    const context = useContext(PresenceContext);\n    if (context === null)\n        return [true, null];\n    const { isPresent, onExitComplete, register } = context;\n    // It's safe to call the following hooks conditionally (after an early return) because the context will always\n    // either be null or non-null for the lifespan of the component.\n    const id = useId();\n    useEffect(() => register(id), []);\n    const safeToRemove = () => onExitComplete && onExitComplete(id);\n    return !isPresent && onExitComplete ? [false, safeToRemove] : [true];\n}\n/**\n * Similar to `usePresence`, except `useIsPresent` simply returns whether or not the component is present.\n * There is no `safeToRemove` function.\n *\n * ```jsx\n * import { useIsPresent } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const isPresent = useIsPresent()\n *\n *   useEffect(() => {\n *     !isPresent && console.log(\"I've been removed!\")\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * @public\n */\nfunction useIsPresent() {\n    return isPresent(useContext(PresenceContext));\n}\nfunction isPresent(context) {\n    return context === null ? true : context.isPresent;\n}\n\nexport { isPresent, useIsPresent, usePresence };\n","/**\n * This should only ever be modified on the client otherwise it'll\n * persist through server requests. If we need instanced states we\n * could lazy-init via root.\n */\nconst globalProjectionState = {\n    /**\n     * Global flag as to whether the tree has animated since the last time\n     * we resized the window\n     */\n    hasAnimatedSinceResize: true,\n    /**\n     * We set this to true once, on the first update. Any nodes added to the tree beyond that\n     * update will be given a `data-projection-id` attribute.\n     */\n    hasEverUpdated: false,\n};\n\nexport { globalProjectionState };\n","import { px } from '../../value/types/numbers/units.mjs';\n\nfunction pixelsToPercent(pixels, axis) {\n    if (axis.max === axis.min)\n        return 0;\n    return (pixels / (axis.max - axis.min)) * 100;\n}\n/**\n * We always correct borderRadius as a percentage rather than pixels to reduce paints.\n * For example, if you are projecting a box that is 100px wide with a 10px borderRadius\n * into a box that is 200px wide with a 20px borderRadius, that is actually a 10%\n * borderRadius in both states. If we animate between the two in pixels that will trigger\n * a paint each time. If we animate between the two in percentage we'll avoid a paint.\n */\nconst correctBorderRadius = {\n    correct: (latest, node) => {\n        if (!node.target)\n            return latest;\n        /**\n         * If latest is a string, if it's a percentage we can return immediately as it's\n         * going to be stretched appropriately. Otherwise, if it's a pixel, convert it to a number.\n         */\n        if (typeof latest === \"string\") {\n            if (px.test(latest)) {\n                latest = parseFloat(latest);\n            }\n            else {\n                return latest;\n            }\n        }\n        /**\n         * If latest is a number, it's a pixel value. We use the current viewportBox to calculate that\n         * pixel value as a percentage of each axis\n         */\n        const x = pixelsToPercent(latest, node.target.x);\n        const y = pixelsToPercent(latest, node.target.y);\n        return `${x}% ${y}%`;\n    },\n};\n\nexport { correctBorderRadius, pixelsToPercent };\n","import { mixNumber } from '../../utils/mix/number.mjs';\nimport { complex } from '../../value/types/complex/index.mjs';\n\nconst correctBoxShadow = {\n    correct: (latest, { treeScale, projectionDelta }) => {\n        const original = latest;\n        const shadow = complex.parse(latest);\n        // TODO: Doesn't support multiple shadows\n        if (shadow.length > 5)\n            return original;\n        const template = complex.createTransformer(latest);\n        const offset = typeof shadow[0] !== \"number\" ? 1 : 0;\n        // Calculate the overall context scale\n        const xScale = projectionDelta.x.scale * treeScale.x;\n        const yScale = projectionDelta.y.scale * treeScale.y;\n        shadow[0 + offset] /= xScale;\n        shadow[1 + offset] /= yScale;\n        /**\n         * Ideally we'd correct x and y scales individually, but because blur and\n         * spread apply to both we have to take a scale average and apply that instead.\n         * We could potentially improve the outcome of this by incorporating the ratio between\n         * the two scales.\n         */\n        const averageScale = mixNumber(xScale, yScale, 0.5);\n        // Blur\n        if (typeof shadow[2 + offset] === \"number\")\n            shadow[2 + offset] /= averageScale;\n        // Spread\n        if (typeof shadow[3 + offset] === \"number\")\n            shadow[3 + offset] /= averageScale;\n        return template(shadow);\n    },\n};\n\nexport { correctBoxShadow };\n","import { jsx } from 'react/jsx-runtime';\nimport { useContext, Component } from 'react';\nimport { usePresence } from '../../../components/AnimatePresence/use-presence.mjs';\nimport { LayoutGroupContext } from '../../../context/LayoutGroupContext.mjs';\nimport { SwitchLayoutGroupContext } from '../../../context/SwitchLayoutGroupContext.mjs';\nimport { globalProjectionState } from '../../../projection/node/state.mjs';\nimport { correctBorderRadius } from '../../../projection/styles/scale-border-radius.mjs';\nimport { correctBoxShadow } from '../../../projection/styles/scale-box-shadow.mjs';\nimport { addScaleCorrector } from '../../../projection/styles/scale-correction.mjs';\nimport { microtask } from '../../../frameloop/microtask.mjs';\nimport { frame } from '../../../frameloop/frame.mjs';\n\nclass MeasureLayoutWithContext extends Component {\n    /**\n     * This only mounts projection nodes for components that\n     * need measuring, we might want to do it for all components\n     * in order to incorporate transforms\n     */\n    componentDidMount() {\n        const { visualElement, layoutGroup, switchLayoutGroup, layoutId } = this.props;\n        const { projection } = visualElement;\n        addScaleCorrector(defaultScaleCorrectors);\n        if (projection) {\n            if (layoutGroup.group)\n                layoutGroup.group.add(projection);\n            if (switchLayoutGroup && switchLayoutGroup.register && layoutId) {\n                switchLayoutGroup.register(projection);\n            }\n            projection.root.didUpdate();\n            projection.addEventListener(\"animationComplete\", () => {\n                this.safeToRemove();\n            });\n            projection.setOptions({\n                ...projection.options,\n                onExitComplete: () => this.safeToRemove(),\n            });\n        }\n        globalProjectionState.hasEverUpdated = true;\n    }\n    getSnapshotBeforeUpdate(prevProps) {\n        const { layoutDependency, visualElement, drag, isPresent } = this.props;\n        const projection = visualElement.projection;\n        if (!projection)\n            return null;\n        /**\n         * TODO: We use this data in relegate to determine whether to\n         * promote a previous element. There's no guarantee its presence data\n         * will have updated by this point - if a bug like this arises it will\n         * have to be that we markForRelegation and then find a new lead some other way,\n         * perhaps in didUpdate\n         */\n        projection.isPresent = isPresent;\n        if (drag ||\n            prevProps.layoutDependency !== layoutDependency ||\n            layoutDependency === undefined) {\n            projection.willUpdate();\n        }\n        else {\n            this.safeToRemove();\n        }\n        if (prevProps.isPresent !== isPresent) {\n            if (isPresent) {\n                projection.promote();\n            }\n            else if (!projection.relegate()) {\n                /**\n                 * If there's another stack member taking over from this one,\n                 * it's in charge of the exit animation and therefore should\n                 * be in charge of the safe to remove. Otherwise we call it here.\n                 */\n                frame.postRender(() => {\n                    const stack = projection.getStack();\n                    if (!stack || !stack.members.length) {\n                        this.safeToRemove();\n                    }\n                });\n            }\n        }\n        return null;\n    }\n    componentDidUpdate() {\n        const { projection } = this.props.visualElement;\n        if (projection) {\n            projection.root.didUpdate();\n            microtask.postRender(() => {\n                if (!projection.currentAnimation && projection.isLead()) {\n                    this.safeToRemove();\n                }\n            });\n        }\n    }\n    componentWillUnmount() {\n        const { visualElement, layoutGroup, switchLayoutGroup: promoteContext, } = this.props;\n        const { projection } = visualElement;\n        if (projection) {\n            projection.scheduleCheckAfterUnmount();\n            if (layoutGroup && layoutGroup.group)\n                layoutGroup.group.remove(projection);\n            if (promoteContext && promoteContext.deregister)\n                promoteContext.deregister(projection);\n        }\n    }\n    safeToRemove() {\n        const { safeToRemove } = this.props;\n        safeToRemove && safeToRemove();\n    }\n    render() {\n        return null;\n    }\n}\nfunction MeasureLayout(props) {\n    const [isPresent, safeToRemove] = usePresence();\n    const layoutGroup = useContext(LayoutGroupContext);\n    return (jsx(MeasureLayoutWithContext, { ...props, layoutGroup: layoutGroup, switchLayoutGroup: useContext(SwitchLayoutGroupContext), isPresent: isPresent, safeToRemove: safeToRemove }));\n}\nconst defaultScaleCorrectors = {\n    borderRadius: {\n        ...correctBorderRadius,\n        applyTo: [\n            \"borderTopLeftRadius\",\n            \"borderTopRightRadius\",\n            \"borderBottomLeftRadius\",\n            \"borderBottomRightRadius\",\n        ],\n    },\n    borderTopLeftRadius: correctBorderRadius,\n    borderTopRightRadius: correctBorderRadius,\n    borderBottomLeftRadius: correctBorderRadius,\n    borderBottomRightRadius: correctBorderRadius,\n    boxShadow: correctBoxShadow,\n};\n\nexport { MeasureLayout };\n","import { circOut } from '../../easing/circ.mjs';\nimport { progress } from '../../utils/progress.mjs';\nimport { mixNumber } from '../../utils/mix/number.mjs';\nimport { noop } from '../../utils/noop.mjs';\nimport { percent, px } from '../../value/types/numbers/units.mjs';\n\nconst borders = [\"TopLeft\", \"TopRight\", \"BottomLeft\", \"BottomRight\"];\nconst numBorders = borders.length;\nconst asNumber = (value) => typeof value === \"string\" ? parseFloat(value) : value;\nconst isPx = (value) => typeof value === \"number\" || px.test(value);\nfunction mixValues(target, follow, lead, progress, shouldCrossfadeOpacity, isOnlyMember) {\n    if (shouldCrossfadeOpacity) {\n        target.opacity = mixNumber(0, \n        // TODO Reinstate this if only child\n        lead.opacity !== undefined ? lead.opacity : 1, easeCrossfadeIn(progress));\n        target.opacityExit = mixNumber(follow.opacity !== undefined ? follow.opacity : 1, 0, easeCrossfadeOut(progress));\n    }\n    else if (isOnlyMember) {\n        target.opacity = mixNumber(follow.opacity !== undefined ? follow.opacity : 1, lead.opacity !== undefined ? lead.opacity : 1, progress);\n    }\n    /**\n     * Mix border radius\n     */\n    for (let i = 0; i < numBorders; i++) {\n        const borderLabel = `border${borders[i]}Radius`;\n        let followRadius = getRadius(follow, borderLabel);\n        let leadRadius = getRadius(lead, borderLabel);\n        if (followRadius === undefined && leadRadius === undefined)\n            continue;\n        followRadius || (followRadius = 0);\n        leadRadius || (leadRadius = 0);\n        const canMix = followRadius === 0 ||\n            leadRadius === 0 ||\n            isPx(followRadius) === isPx(leadRadius);\n        if (canMix) {\n            target[borderLabel] = Math.max(mixNumber(asNumber(followRadius), asNumber(leadRadius), progress), 0);\n            if (percent.test(leadRadius) || percent.test(followRadius)) {\n                target[borderLabel] += \"%\";\n            }\n        }\n        else {\n            target[borderLabel] = leadRadius;\n        }\n    }\n    /**\n     * Mix rotation\n     */\n    if (follow.rotate || lead.rotate) {\n        target.rotate = mixNumber(follow.rotate || 0, lead.rotate || 0, progress);\n    }\n}\nfunction getRadius(values, radiusName) {\n    return values[radiusName] !== undefined\n        ? values[radiusName]\n        : values.borderRadius;\n}\n// /**\n//  * We only want to mix the background color if there's a follow element\n//  * that we're not crossfading opacity between. For instance with switch\n//  * AnimateSharedLayout animations, this helps the illusion of a continuous\n//  * element being animated but also cuts down on the number of paints triggered\n//  * for elements where opacity is doing that work for us.\n//  */\n// if (\n//     !hasFollowElement &&\n//     latestLeadValues.backgroundColor &&\n//     latestFollowValues.backgroundColor\n// ) {\n//     /**\n//      * This isn't ideal performance-wise as mixColor is creating a new function every frame.\n//      * We could probably create a mixer that runs at the start of the animation but\n//      * the idea behind the crossfader is that it runs dynamically between two potentially\n//      * changing targets (ie opacity or borderRadius may be animating independently via variants)\n//      */\n//     leadState.backgroundColor = followState.backgroundColor = mixColor(\n//         latestFollowValues.backgroundColor as string,\n//         latestLeadValues.backgroundColor as string\n//     )(p)\n// }\nconst easeCrossfadeIn = compress(0, 0.5, circOut);\nconst easeCrossfadeOut = compress(0.5, 0.95, noop);\nfunction compress(min, max, easing) {\n    return (p) => {\n        // Could replace ifs with clamp\n        if (p < min)\n            return 0;\n        if (p > max)\n            return 1;\n        return easing(progress(min, max, p));\n    };\n}\n\nexport { mixValues };\n","/**\n * Reset an axis to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction copyAxisInto(axis, originAxis) {\n    axis.min = originAxis.min;\n    axis.max = originAxis.max;\n}\n/**\n * Reset a box to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction copyBoxInto(box, originBox) {\n    copyAxisInto(box.x, originBox.x);\n    copyAxisInto(box.y, originBox.y);\n}\n\nexport { copyAxisInto, copyBoxInto };\n","import { mixNumber } from '../../utils/mix/number.mjs';\nimport { percent } from '../../value/types/numbers/units.mjs';\nimport { scalePoint } from './delta-apply.mjs';\n\n/**\n * Remove a delta from a point. This is essentially the steps of applyPointDelta in reverse\n */\nfunction removePointDelta(point, translate, scale, originPoint, boxScale) {\n    point -= translate;\n    point = scalePoint(point, 1 / scale, originPoint);\n    if (boxScale !== undefined) {\n        point = scalePoint(point, 1 / boxScale, originPoint);\n    }\n    return point;\n}\n/**\n * Remove a delta from an axis. This is essentially the steps of applyAxisDelta in reverse\n */\nfunction removeAxisDelta(axis, translate = 0, scale = 1, origin = 0.5, boxScale, originAxis = axis, sourceAxis = axis) {\n    if (percent.test(translate)) {\n        translate = parseFloat(translate);\n        const relativeProgress = mixNumber(sourceAxis.min, sourceAxis.max, translate / 100);\n        translate = relativeProgress - sourceAxis.min;\n    }\n    if (typeof translate !== \"number\")\n        return;\n    let originPoint = mixNumber(originAxis.min, originAxis.max, origin);\n    if (axis === originAxis)\n        originPoint -= translate;\n    axis.min = removePointDelta(axis.min, translate, scale, originPoint, boxScale);\n    axis.max = removePointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Remove a transforms from an axis. This is essentially the steps of applyAxisTransforms in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeAxisTransforms(axis, transforms, [key, scaleKey, originKey], origin, sourceAxis) {\n    removeAxisDelta(axis, transforms[key], transforms[scaleKey], transforms[originKey], transforms.scale, origin, sourceAxis);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\nconst xKeys = [\"x\", \"scaleX\", \"originX\"];\nconst yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Remove a transforms from an box. This is essentially the steps of applyAxisBox in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeBoxTransforms(box, transforms, originBox, sourceBox) {\n    removeAxisTransforms(box.x, transforms, xKeys, originBox ? originBox.x : undefined, sourceBox ? sourceBox.x : undefined);\n    removeAxisTransforms(box.y, transforms, yKeys, originBox ? originBox.y : undefined, sourceBox ? sourceBox.y : undefined);\n}\n\nexport { removeAxisDelta, removeAxisTransforms, removeBoxTransforms, removePointDelta };\n","import { calcLength } from './delta-calc.mjs';\n\nfunction isAxisDeltaZero(delta) {\n    return delta.translate === 0 && delta.scale === 1;\n}\nfunction isDeltaZero(delta) {\n    return isAxisDeltaZero(delta.x) && isAxisDeltaZero(delta.y);\n}\nfunction boxEquals(a, b) {\n    return (a.x.min === b.x.min &&\n        a.x.max === b.x.max &&\n        a.y.min === b.y.min &&\n        a.y.max === b.y.max);\n}\nfunction boxEqualsRounded(a, b) {\n    return (Math.round(a.x.min) === Math.round(b.x.min) &&\n        Math.round(a.x.max) === Math.round(b.x.max) &&\n        Math.round(a.y.min) === Math.round(b.y.min) &&\n        Math.round(a.y.max) === Math.round(b.y.max));\n}\nfunction aspectRatio(box) {\n    return calcLength(box.x) / calcLength(box.y);\n}\n\nexport { aspectRatio, boxEquals, boxEqualsRounded, isDeltaZero };\n","import { addUniqueItem, removeItem } from '../../utils/array.mjs';\n\nclass NodeStack {\n    constructor() {\n        this.members = [];\n    }\n    add(node) {\n        addUniqueItem(this.members, node);\n        node.scheduleRender();\n    }\n    remove(node) {\n        removeItem(this.members, node);\n        if (node === this.prevLead) {\n            this.prevLead = undefined;\n        }\n        if (node === this.lead) {\n            const prevLead = this.members[this.members.length - 1];\n            if (prevLead) {\n                this.promote(prevLead);\n            }\n        }\n    }\n    relegate(node) {\n        const indexOfNode = this.members.findIndex((member) => node === member);\n        if (indexOfNode === 0)\n            return false;\n        /**\n         * Find the next projection node that is present\n         */\n        let prevLead;\n        for (let i = indexOfNode; i >= 0; i--) {\n            const member = this.members[i];\n            if (member.isPresent !== false) {\n                prevLead = member;\n                break;\n            }\n        }\n        if (prevLead) {\n            this.promote(prevLead);\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    promote(node, preserveFollowOpacity) {\n        const prevLead = this.lead;\n        if (node === prevLead)\n            return;\n        this.prevLead = prevLead;\n        this.lead = node;\n        node.show();\n        if (prevLead) {\n            prevLead.instance && prevLead.scheduleRender();\n            node.scheduleRender();\n            node.resumeFrom = prevLead;\n            if (preserveFollowOpacity) {\n                node.resumeFrom.preserveOpacity = true;\n            }\n            if (prevLead.snapshot) {\n                node.snapshot = prevLead.snapshot;\n                node.snapshot.latestValues =\n                    prevLead.animationValues || prevLead.latestValues;\n            }\n            if (node.root && node.root.isUpdating) {\n                node.isLayoutDirty = true;\n            }\n            const { crossfade } = node.options;\n            if (crossfade === false) {\n                prevLead.hide();\n            }\n            /**\n             * TODO:\n             *   - Test border radius when previous node was deleted\n             *   - boxShadow mixing\n             *   - Shared between element A in scrolled container and element B (scroll stays the same or changes)\n             *   - Shared between element A in transformed container and element B (transform stays the same or changes)\n             *   - Shared between element A in scrolled page and element B (scroll stays the same or changes)\n             * ---\n             *   - Crossfade opacity of root nodes\n             *   - layoutId changes after animation\n             *   - layoutId changes mid animation\n             */\n        }\n    }\n    exitAnimationComplete() {\n        this.members.forEach((node) => {\n            const { options, resumingFrom } = node;\n            options.onExitComplete && options.onExitComplete();\n            if (resumingFrom) {\n                resumingFrom.options.onExitComplete &&\n                    resumingFrom.options.onExitComplete();\n            }\n        });\n    }\n    scheduleRender() {\n        this.members.forEach((node) => {\n            node.instance && node.scheduleRender(false);\n        });\n    }\n    /**\n     * Clear any leads that have been removed this render to prevent them from being\n     * used in future animations and to prevent memory leaks\n     */\n    removeLeadSnapshot() {\n        if (this.lead && this.lead.snapshot) {\n            this.lead.snapshot = undefined;\n        }\n    }\n}\n\nexport { NodeStack };\n","function buildProjectionTransform(delta, treeScale, latestTransform) {\n    let transform = \"\";\n    /**\n     * The translations we use to calculate are always relative to the viewport coordinate space.\n     * But when we apply scales, we also scale the coordinate space of an element and its children.\n     * For instance if we have a treeScale (the culmination of all parent scales) of 0.5 and we need\n     * to move an element 100 pixels, we actually need to move it 200 in within that scaled space.\n     */\n    const xTranslate = delta.x.translate / treeScale.x;\n    const yTranslate = delta.y.translate / treeScale.y;\n    const zTranslate = (latestTransform === null || latestTransform === void 0 ? void 0 : latestTransform.z) || 0;\n    if (xTranslate || yTranslate || zTranslate) {\n        transform = `translate3d(${xTranslate}px, ${yTranslate}px, ${zTranslate}px) `;\n    }\n    /**\n     * Apply scale correction for the tree transform.\n     * This will apply scale to the screen-orientated axes.\n     */\n    if (treeScale.x !== 1 || treeScale.y !== 1) {\n        transform += `scale(${1 / treeScale.x}, ${1 / treeScale.y}) `;\n    }\n    if (latestTransform) {\n        const { transformPerspective, rotate, rotateX, rotateY, skewX, skewY } = latestTransform;\n        if (transformPerspective)\n            transform = `perspective(${transformPerspective}px) ${transform}`;\n        if (rotate)\n            transform += `rotate(${rotate}deg) `;\n        if (rotateX)\n            transform += `rotateX(${rotateX}deg) `;\n        if (rotateY)\n            transform += `rotateY(${rotateY}deg) `;\n        if (skewX)\n            transform += `skewX(${skewX}deg) `;\n        if (skewY)\n            transform += `skewY(${skewY}deg) `;\n    }\n    /**\n     * Apply scale to match the size of the element to the size we want it.\n     * This will apply scale to the element-orientated axes.\n     */\n    const elementScaleX = delta.x.scale * treeScale.x;\n    const elementScaleY = delta.y.scale * treeScale.y;\n    if (elementScaleX !== 1 || elementScaleY !== 1) {\n        transform += `scale(${elementScaleX}, ${elementScaleY})`;\n    }\n    return transform || \"none\";\n}\n\nexport { buildProjectionTransform };\n","const compareByDepth = (a, b) => a.depth - b.depth;\n\nexport { compareByDepth };\n","import { addUniqueItem, removeItem } from '../../utils/array.mjs';\nimport { compareByDepth } from './compare-by-depth.mjs';\n\nclass FlatTree {\n    constructor() {\n        this.children = [];\n        this.isDirty = false;\n    }\n    add(child) {\n        addUniqueItem(this.children, child);\n        this.isDirty = true;\n    }\n    remove(child) {\n        removeItem(this.children, child);\n        this.isDirty = true;\n    }\n    forEach(callback) {\n        this.isDirty && this.children.sort(compareByDepth);\n        this.isDirty = false;\n        this.children.forEach(callback);\n    }\n}\n\nexport { FlatTree };\n","import { time } from '../frameloop/sync-time.mjs';\nimport { frame, cancelFrame } from '../frameloop/frame.mjs';\n\n/**\n * Timeout defined in ms\n */\nfunction delay(callback, timeout) {\n    const start = time.now();\n    const checkElapsed = ({ timestamp }) => {\n        const elapsed = timestamp - start;\n        if (elapsed >= timeout) {\n            cancelFrame(checkElapsed);\n            callback(elapsed - timeout);\n        }\n    };\n    frame.read(checkElapsed, true);\n    return () => cancelFrame(checkElapsed);\n}\n\nexport { delay };\n","function record(data) {\n    if (window.MotionDebug) {\n        window.MotionDebug.record(data);\n    }\n}\n\nexport { record };\n","function isSVGElement(element) {\n    return element instanceof SVGElement && element.tagName !== \"svg\";\n}\n\nexport { isSVGElement };\n","import { animateMotionValue } from './motion-value.mjs';\nimport { motionValue } from '../../value/index.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\n\nfunction animateSingleValue(value, keyframes, options) {\n    const motionValue$1 = isMotionValue(value) ? value : motionValue(value);\n    motionValue$1.start(animateMotionValue(\"\", motionValue$1, keyframes, options));\n    return motionValue$1.animation;\n}\n\nexport { animateSingleValue };\n","import { SubscriptionManager } from '../../utils/subscription-manager.mjs';\nimport { mixValues } from '../animation/mix-values.mjs';\nimport { copyBoxInto } from '../geometry/copy.mjs';\nimport { translateAxis, transformBox, applyBoxDelta, applyTreeDeltas } from '../geometry/delta-apply.mjs';\nimport { calcRelativePosition, calcRelativeBox, calcBoxDelta, calcLength, isNear } from '../geometry/delta-calc.mjs';\nimport { removeBoxTransforms } from '../geometry/delta-remove.mjs';\nimport { createBox, createDelta } from '../geometry/models.mjs';\nimport { getValueTransition } from '../../animation/utils/transitions.mjs';\nimport { boxEqualsRounded, isDeltaZero, aspectRatio, boxEquals } from '../geometry/utils.mjs';\nimport { NodeStack } from '../shared/stack.mjs';\nimport { scaleCorrectors } from '../styles/scale-correction.mjs';\nimport { buildProjectionTransform } from '../styles/transform.mjs';\nimport { eachAxis } from '../utils/each-axis.mjs';\nimport { hasTransform, hasScale, has2DTranslate } from '../utils/has-transform.mjs';\nimport { FlatTree } from '../../render/utils/flat-tree.mjs';\nimport { resolveMotionValue } from '../../value/utils/resolve-motion-value.mjs';\nimport { globalProjectionState } from './state.mjs';\nimport { delay } from '../../utils/delay.mjs';\nimport { mixNumber } from '../../utils/mix/number.mjs';\nimport { record } from '../../debug/record.mjs';\nimport { isSVGElement } from '../../render/dom/utils/is-svg-element.mjs';\nimport { animateSingleValue } from '../../animation/interfaces/single-value.mjs';\nimport { clamp } from '../../utils/clamp.mjs';\nimport { cancelFrame, frameData, steps, frame } from '../../frameloop/frame.mjs';\nimport { noop } from '../../utils/noop.mjs';\nimport { time } from '../../frameloop/sync-time.mjs';\nimport { microtask } from '../../frameloop/microtask.mjs';\nimport { getOptimisedAppearId } from '../../animation/optimized-appear/get-appear-id.mjs';\n\nconst transformAxes = [\"\", \"X\", \"Y\", \"Z\"];\nconst hiddenVisibility = { visibility: \"hidden\" };\n/**\n * We use 1000 as the animation target as 0-1000 maps better to pixels than 0-1\n * which has a noticeable difference in spring animations\n */\nconst animationTarget = 1000;\nlet id = 0;\n/**\n * Use a mutable data object for debug data so as to not create a new\n * object every frame.\n */\nconst projectionFrameData = {\n    type: \"projectionFrame\",\n    totalNodes: 0,\n    resolvedTargetDeltas: 0,\n    recalculatedProjection: 0,\n};\nfunction resetDistortingTransform(key, visualElement, values, sharedAnimationValues) {\n    const { latestValues } = visualElement;\n    // Record the distorting transform and then temporarily set it to 0\n    if (latestValues[key]) {\n        values[key] = latestValues[key];\n        visualElement.setStaticValue(key, 0);\n        if (sharedAnimationValues) {\n            sharedAnimationValues[key] = 0;\n        }\n    }\n}\nfunction isOptimisedAppearTree(projectionNode) {\n    projectionNode.hasCheckedOptimisedAppear = true;\n    if (projectionNode.root === projectionNode)\n        return false;\n    const { visualElement } = projectionNode.options;\n    if (!visualElement) {\n        return false;\n    }\n    else if (getOptimisedAppearId(visualElement)) {\n        return true;\n    }\n    else if (projectionNode.parent &&\n        !projectionNode.parent.hasCheckedOptimisedAppear) {\n        return isOptimisedAppearTree(projectionNode.parent);\n    }\n    else {\n        return false;\n    }\n}\nfunction createProjectionNode({ attachResizeListener, defaultParent, measureScroll, checkIsScrollRoot, resetTransform, }) {\n    return class ProjectionNode {\n        constructor(latestValues = {}, parent = defaultParent === null || defaultParent === void 0 ? void 0 : defaultParent()) {\n            /**\n             * A unique ID generated for every projection node.\n             */\n            this.id = id++;\n            /**\n             * An id that represents a unique session instigated by startUpdate.\n             */\n            this.animationId = 0;\n            /**\n             * A Set containing all this component's children. This is used to iterate\n             * through the children.\n             *\n             * TODO: This could be faster to iterate as a flat array stored on the root node.\n             */\n            this.children = new Set();\n            /**\n             * Options for the node. We use this to configure what kind of layout animations\n             * we should perform (if any).\n             */\n            this.options = {};\n            /**\n             * We use this to detect when its safe to shut down part of a projection tree.\n             * We have to keep projecting children for scale correction and relative projection\n             * until all their parents stop performing layout animations.\n             */\n            this.isTreeAnimating = false;\n            this.isAnimationBlocked = false;\n            /**\n             * Flag to true if we think this layout has been changed. We can't always know this,\n             * currently we set it to true every time a component renders, or if it has a layoutDependency\n             * if that has changed between renders. Additionally, components can be grouped by LayoutGroup\n             * and if one node is dirtied, they all are.\n             */\n            this.isLayoutDirty = false;\n            /**\n             * Flag to true if we think the projection calculations for this node needs\n             * recalculating as a result of an updated transform or layout animation.\n             */\n            this.isProjectionDirty = false;\n            /**\n             * Flag to true if the layout *or* transform has changed. This then gets propagated\n             * throughout the projection tree, forcing any element below to recalculate on the next frame.\n             */\n            this.isSharedProjectionDirty = false;\n            /**\n             * Flag transform dirty. This gets propagated throughout the whole tree but is only\n             * respected by shared nodes.\n             */\n            this.isTransformDirty = false;\n            /**\n             * Block layout updates for instant layout transitions throughout the tree.\n             */\n            this.updateManuallyBlocked = false;\n            this.updateBlockedByResize = false;\n            /**\n             * Set to true between the start of the first `willUpdate` call and the end of the `didUpdate`\n             * call.\n             */\n            this.isUpdating = false;\n            /**\n             * If this is an SVG element we currently disable projection transforms\n             */\n            this.isSVG = false;\n            /**\n             * Flag to true (during promotion) if a node doing an instant layout transition needs to reset\n             * its projection styles.\n             */\n            this.needsReset = false;\n            /**\n             * Flags whether this node should have its transform reset prior to measuring.\n             */\n            this.shouldResetTransform = false;\n            /**\n             * Store whether this node has been checked for optimised appear animations. As\n             * effects fire bottom-up, and we want to look up the tree for appear animations,\n             * this makes sure we only check each path once, stopping at nodes that\n             * have already been checked.\n             */\n            this.hasCheckedOptimisedAppear = false;\n            /**\n             * An object representing the calculated contextual/accumulated/tree scale.\n             * This will be used to scale calculcated projection transforms, as these are\n             * calculated in screen-space but need to be scaled for elements to layoutly\n             * make it to their calculated destinations.\n             *\n             * TODO: Lazy-init\n             */\n            this.treeScale = { x: 1, y: 1 };\n            /**\n             *\n             */\n            this.eventHandlers = new Map();\n            this.hasTreeAnimated = false;\n            // Note: Currently only running on root node\n            this.updateScheduled = false;\n            this.scheduleUpdate = () => this.update();\n            this.projectionUpdateScheduled = false;\n            this.checkUpdateFailed = () => {\n                if (this.isUpdating) {\n                    this.isUpdating = false;\n                    this.clearAllSnapshots();\n                }\n            };\n            /**\n             * This is a multi-step process as shared nodes might be of different depths. Nodes\n             * are sorted by depth order, so we need to resolve the entire tree before moving to\n             * the next step.\n             */\n            this.updateProjection = () => {\n                this.projectionUpdateScheduled = false;\n                /**\n                 * Reset debug counts. Manually resetting rather than creating a new\n                 * object each frame.\n                 */\n                projectionFrameData.totalNodes =\n                    projectionFrameData.resolvedTargetDeltas =\n                        projectionFrameData.recalculatedProjection =\n                            0;\n                this.nodes.forEach(propagateDirtyNodes);\n                this.nodes.forEach(resolveTargetDelta);\n                this.nodes.forEach(calcProjection);\n                this.nodes.forEach(cleanDirtyNodes);\n                record(projectionFrameData);\n            };\n            this.hasProjected = false;\n            this.isVisible = true;\n            this.animationProgress = 0;\n            /**\n             * Shared layout\n             */\n            // TODO Only running on root node\n            this.sharedNodes = new Map();\n            this.latestValues = latestValues;\n            this.root = parent ? parent.root || parent : this;\n            this.path = parent ? [...parent.path, parent] : [];\n            this.parent = parent;\n            this.depth = parent ? parent.depth + 1 : 0;\n            for (let i = 0; i < this.path.length; i++) {\n                this.path[i].shouldResetTransform = true;\n            }\n            if (this.root === this)\n                this.nodes = new FlatTree();\n        }\n        addEventListener(name, handler) {\n            if (!this.eventHandlers.has(name)) {\n                this.eventHandlers.set(name, new SubscriptionManager());\n            }\n            return this.eventHandlers.get(name).add(handler);\n        }\n        notifyListeners(name, ...args) {\n            const subscriptionManager = this.eventHandlers.get(name);\n            subscriptionManager && subscriptionManager.notify(...args);\n        }\n        hasListeners(name) {\n            return this.eventHandlers.has(name);\n        }\n        /**\n         * Lifecycles\n         */\n        mount(instance, isLayoutDirty = this.root.hasTreeAnimated) {\n            if (this.instance)\n                return;\n            this.isSVG = isSVGElement(instance);\n            this.instance = instance;\n            const { layoutId, layout, visualElement } = this.options;\n            if (visualElement && !visualElement.current) {\n                visualElement.mount(instance);\n            }\n            this.root.nodes.add(this);\n            this.parent && this.parent.children.add(this);\n            if (isLayoutDirty && (layout || layoutId)) {\n                this.isLayoutDirty = true;\n            }\n            if (attachResizeListener) {\n                let cancelDelay;\n                const resizeUnblockUpdate = () => (this.root.updateBlockedByResize = false);\n                attachResizeListener(instance, () => {\n                    this.root.updateBlockedByResize = true;\n                    cancelDelay && cancelDelay();\n                    cancelDelay = delay(resizeUnblockUpdate, 250);\n                    if (globalProjectionState.hasAnimatedSinceResize) {\n                        globalProjectionState.hasAnimatedSinceResize = false;\n                        this.nodes.forEach(finishAnimation);\n                    }\n                });\n            }\n            if (layoutId) {\n                this.root.registerSharedNode(layoutId, this);\n            }\n            // Only register the handler if it requires layout animation\n            if (this.options.animate !== false &&\n                visualElement &&\n                (layoutId || layout)) {\n                this.addEventListener(\"didUpdate\", ({ delta, hasLayoutChanged, hasRelativeTargetChanged, layout: newLayout, }) => {\n                    if (this.isTreeAnimationBlocked()) {\n                        this.target = undefined;\n                        this.relativeTarget = undefined;\n                        return;\n                    }\n                    // TODO: Check here if an animation exists\n                    const layoutTransition = this.options.transition ||\n                        visualElement.getDefaultTransition() ||\n                        defaultLayoutTransition;\n                    const { onLayoutAnimationStart, onLayoutAnimationComplete, } = visualElement.getProps();\n                    /**\n                     * The target layout of the element might stay the same,\n                     * but its position relative to its parent has changed.\n                     */\n                    const targetChanged = !this.targetLayout ||\n                        !boxEqualsRounded(this.targetLayout, newLayout) ||\n                        hasRelativeTargetChanged;\n                    /**\n                     * If the layout hasn't seemed to have changed, it might be that the\n                     * element is visually in the same place in the document but its position\n                     * relative to its parent has indeed changed. So here we check for that.\n                     */\n                    const hasOnlyRelativeTargetChanged = !hasLayoutChanged && hasRelativeTargetChanged;\n                    if (this.options.layoutRoot ||\n                        (this.resumeFrom && this.resumeFrom.instance) ||\n                        hasOnlyRelativeTargetChanged ||\n                        (hasLayoutChanged &&\n                            (targetChanged || !this.currentAnimation))) {\n                        if (this.resumeFrom) {\n                            this.resumingFrom = this.resumeFrom;\n                            this.resumingFrom.resumingFrom = undefined;\n                        }\n                        this.setAnimationOrigin(delta, hasOnlyRelativeTargetChanged);\n                        const animationOptions = {\n                            ...getValueTransition(layoutTransition, \"layout\"),\n                            onPlay: onLayoutAnimationStart,\n                            onComplete: onLayoutAnimationComplete,\n                        };\n                        if (visualElement.shouldReduceMotion ||\n                            this.options.layoutRoot) {\n                            animationOptions.delay = 0;\n                            animationOptions.type = false;\n                        }\n                        this.startAnimation(animationOptions);\n                    }\n                    else {\n                        /**\n                         * If the layout hasn't changed and we have an animation that hasn't started yet,\n                         * finish it immediately. Otherwise it will be animating from a location\n                         * that was probably never commited to screen and look like a jumpy box.\n                         */\n                        if (!hasLayoutChanged) {\n                            finishAnimation(this);\n                        }\n                        if (this.isLead() && this.options.onExitComplete) {\n                            this.options.onExitComplete();\n                        }\n                    }\n                    this.targetLayout = newLayout;\n                });\n            }\n        }\n        unmount() {\n            this.options.layoutId && this.willUpdate();\n            this.root.nodes.remove(this);\n            const stack = this.getStack();\n            stack && stack.remove(this);\n            this.parent && this.parent.children.delete(this);\n            this.instance = undefined;\n            cancelFrame(this.updateProjection);\n        }\n        // only on the root\n        blockUpdate() {\n            this.updateManuallyBlocked = true;\n        }\n        unblockUpdate() {\n            this.updateManuallyBlocked = false;\n        }\n        isUpdateBlocked() {\n            return this.updateManuallyBlocked || this.updateBlockedByResize;\n        }\n        isTreeAnimationBlocked() {\n            return (this.isAnimationBlocked ||\n                (this.parent && this.parent.isTreeAnimationBlocked()) ||\n                false);\n        }\n        // Note: currently only running on root node\n        startUpdate() {\n            if (this.isUpdateBlocked())\n                return;\n            this.isUpdating = true;\n            this.nodes && this.nodes.forEach(resetSkewAndRotation);\n            this.animationId++;\n        }\n        getTransformTemplate() {\n            const { visualElement } = this.options;\n            return visualElement && visualElement.getProps().transformTemplate;\n        }\n        willUpdate(shouldNotifyListeners = true) {\n            this.root.hasTreeAnimated = true;\n            if (this.root.isUpdateBlocked()) {\n                this.options.onExitComplete && this.options.onExitComplete();\n                return;\n            }\n            /**\n             * If we're running optimised appear animations then these must be\n             * cancelled before measuring the DOM. This is so we can measure\n             * the true layout of the element rather than the WAAPI animation\n             * which will be unaffected by the resetSkewAndRotate step.\n             *\n             * Note: This is a DOM write. Worst case scenario is this is sandwiched\n             * between other snapshot reads which will cause unnecessary style recalculations.\n             * This has to happen here though, as we don't yet know which nodes will need\n             * snapshots in startUpdate(), but we only want to cancel optimised animations\n             * if a layout animation measurement is actually going to be affected by them.\n             */\n            if (window.HandoffCancelAllAnimations &&\n                isOptimisedAppearTree(this)) {\n                window.HandoffCancelAllAnimations();\n            }\n            !this.root.isUpdating && this.root.startUpdate();\n            if (this.isLayoutDirty)\n                return;\n            this.isLayoutDirty = true;\n            for (let i = 0; i < this.path.length; i++) {\n                const node = this.path[i];\n                node.shouldResetTransform = true;\n                node.updateScroll(\"snapshot\");\n                if (node.options.layoutRoot) {\n                    node.willUpdate(false);\n                }\n            }\n            const { layoutId, layout } = this.options;\n            if (layoutId === undefined && !layout)\n                return;\n            const transformTemplate = this.getTransformTemplate();\n            this.prevTransformTemplateValue = transformTemplate\n                ? transformTemplate(this.latestValues, \"\")\n                : undefined;\n            this.updateSnapshot();\n            shouldNotifyListeners && this.notifyListeners(\"willUpdate\");\n        }\n        update() {\n            this.updateScheduled = false;\n            const updateWasBlocked = this.isUpdateBlocked();\n            // When doing an instant transition, we skip the layout update,\n            // but should still clean up the measurements so that the next\n            // snapshot could be taken correctly.\n            if (updateWasBlocked) {\n                this.unblockUpdate();\n                this.clearAllSnapshots();\n                this.nodes.forEach(clearMeasurements);\n                return;\n            }\n            if (!this.isUpdating) {\n                this.nodes.forEach(clearIsLayoutDirty);\n            }\n            this.isUpdating = false;\n            /**\n             * Write\n             */\n            this.nodes.forEach(resetTransformStyle);\n            /**\n             * Read ==================\n             */\n            // Update layout measurements of updated children\n            this.nodes.forEach(updateLayout);\n            /**\n             * Write\n             */\n            // Notify listeners that the layout is updated\n            this.nodes.forEach(notifyLayoutUpdate);\n            this.clearAllSnapshots();\n            /**\n             * Manually flush any pending updates. Ideally\n             * we could leave this to the following requestAnimationFrame but this seems\n             * to leave a flash of incorrectly styled content.\n             */\n            const now = time.now();\n            frameData.delta = clamp(0, 1000 / 60, now - frameData.timestamp);\n            frameData.timestamp = now;\n            frameData.isProcessing = true;\n            steps.update.process(frameData);\n            steps.preRender.process(frameData);\n            steps.render.process(frameData);\n            frameData.isProcessing = false;\n        }\n        didUpdate() {\n            if (!this.updateScheduled) {\n                this.updateScheduled = true;\n                microtask.read(this.scheduleUpdate);\n            }\n        }\n        clearAllSnapshots() {\n            this.nodes.forEach(clearSnapshot);\n            this.sharedNodes.forEach(removeLeadSnapshots);\n        }\n        scheduleUpdateProjection() {\n            if (!this.projectionUpdateScheduled) {\n                this.projectionUpdateScheduled = true;\n                frame.preRender(this.updateProjection, false, true);\n            }\n        }\n        scheduleCheckAfterUnmount() {\n            /**\n             * If the unmounting node is in a layoutGroup and did trigger a willUpdate,\n             * we manually call didUpdate to give a chance to the siblings to animate.\n             * Otherwise, cleanup all snapshots to prevents future nodes from reusing them.\n             */\n            frame.postRender(() => {\n                if (this.isLayoutDirty) {\n                    this.root.didUpdate();\n                }\n                else {\n                    this.root.checkUpdateFailed();\n                }\n            });\n        }\n        /**\n         * Update measurements\n         */\n        updateSnapshot() {\n            if (this.snapshot || !this.instance)\n                return;\n            this.snapshot = this.measure();\n        }\n        updateLayout() {\n            if (!this.instance)\n                return;\n            // TODO: Incorporate into a forwarded scroll offset\n            this.updateScroll();\n            if (!(this.options.alwaysMeasureLayout && this.isLead()) &&\n                !this.isLayoutDirty) {\n                return;\n            }\n            /**\n             * When a node is mounted, it simply resumes from the prevLead's\n             * snapshot instead of taking a new one, but the ancestors scroll\n             * might have updated while the prevLead is unmounted. We need to\n             * update the scroll again to make sure the layout we measure is\n             * up to date.\n             */\n            if (this.resumeFrom && !this.resumeFrom.instance) {\n                for (let i = 0; i < this.path.length; i++) {\n                    const node = this.path[i];\n                    node.updateScroll();\n                }\n            }\n            const prevLayout = this.layout;\n            this.layout = this.measure(false);\n            this.layoutCorrected = createBox();\n            this.isLayoutDirty = false;\n            this.projectionDelta = undefined;\n            this.notifyListeners(\"measure\", this.layout.layoutBox);\n            const { visualElement } = this.options;\n            visualElement &&\n                visualElement.notify(\"LayoutMeasure\", this.layout.layoutBox, prevLayout ? prevLayout.layoutBox : undefined);\n        }\n        updateScroll(phase = \"measure\") {\n            let needsMeasurement = Boolean(this.options.layoutScroll && this.instance);\n            if (this.scroll &&\n                this.scroll.animationId === this.root.animationId &&\n                this.scroll.phase === phase) {\n                needsMeasurement = false;\n            }\n            if (needsMeasurement) {\n                this.scroll = {\n                    animationId: this.root.animationId,\n                    phase,\n                    isRoot: checkIsScrollRoot(this.instance),\n                    offset: measureScroll(this.instance),\n                };\n            }\n        }\n        resetTransform() {\n            if (!resetTransform)\n                return;\n            const isResetRequested = this.isLayoutDirty ||\n                this.shouldResetTransform ||\n                this.options.alwaysMeasureLayout;\n            const hasProjection = this.projectionDelta && !isDeltaZero(this.projectionDelta);\n            const transformTemplate = this.getTransformTemplate();\n            const transformTemplateValue = transformTemplate\n                ? transformTemplate(this.latestValues, \"\")\n                : undefined;\n            const transformTemplateHasChanged = transformTemplateValue !== this.prevTransformTemplateValue;\n            if (isResetRequested &&\n                (hasProjection ||\n                    hasTransform(this.latestValues) ||\n                    transformTemplateHasChanged)) {\n                resetTransform(this.instance, transformTemplateValue);\n                this.shouldResetTransform = false;\n                this.scheduleRender();\n            }\n        }\n        measure(removeTransform = true) {\n            const pageBox = this.measurePageBox();\n            let layoutBox = this.removeElementScroll(pageBox);\n            /**\n             * Measurements taken during the pre-render stage\n             * still have transforms applied so we remove them\n             * via calculation.\n             */\n            if (removeTransform) {\n                layoutBox = this.removeTransform(layoutBox);\n            }\n            roundBox(layoutBox);\n            return {\n                animationId: this.root.animationId,\n                measuredBox: pageBox,\n                layoutBox,\n                latestValues: {},\n                source: this.id,\n            };\n        }\n        measurePageBox() {\n            const { visualElement } = this.options;\n            if (!visualElement)\n                return createBox();\n            const box = visualElement.measureViewportBox();\n            // Remove viewport scroll to give page-relative coordinates\n            const { scroll } = this.root;\n            if (scroll) {\n                translateAxis(box.x, scroll.offset.x);\n                translateAxis(box.y, scroll.offset.y);\n            }\n            return box;\n        }\n        removeElementScroll(box) {\n            const boxWithoutScroll = createBox();\n            copyBoxInto(boxWithoutScroll, box);\n            /**\n             * Performance TODO: Keep a cumulative scroll offset down the tree\n             * rather than loop back up the path.\n             */\n            for (let i = 0; i < this.path.length; i++) {\n                const node = this.path[i];\n                const { scroll, options } = node;\n                if (node !== this.root && scroll && options.layoutScroll) {\n                    /**\n                     * If this is a new scroll root, we want to remove all previous scrolls\n                     * from the viewport box.\n                     */\n                    if (scroll.isRoot) {\n                        copyBoxInto(boxWithoutScroll, box);\n                        const { scroll: rootScroll } = this.root;\n                        /**\n                         * Undo the application of page scroll that was originally added\n                         * to the measured bounding box.\n                         */\n                        if (rootScroll) {\n                            translateAxis(boxWithoutScroll.x, -rootScroll.offset.x);\n                            translateAxis(boxWithoutScroll.y, -rootScroll.offset.y);\n                        }\n                    }\n                    translateAxis(boxWithoutScroll.x, scroll.offset.x);\n                    translateAxis(boxWithoutScroll.y, scroll.offset.y);\n                }\n            }\n            return boxWithoutScroll;\n        }\n        applyTransform(box, transformOnly = false) {\n            const withTransforms = createBox();\n            copyBoxInto(withTransforms, box);\n            for (let i = 0; i < this.path.length; i++) {\n                const node = this.path[i];\n                if (!transformOnly &&\n                    node.options.layoutScroll &&\n                    node.scroll &&\n                    node !== node.root) {\n                    transformBox(withTransforms, {\n                        x: -node.scroll.offset.x,\n                        y: -node.scroll.offset.y,\n                    });\n                }\n                if (!hasTransform(node.latestValues))\n                    continue;\n                transformBox(withTransforms, node.latestValues);\n            }\n            if (hasTransform(this.latestValues)) {\n                transformBox(withTransforms, this.latestValues);\n            }\n            return withTransforms;\n        }\n        removeTransform(box) {\n            const boxWithoutTransform = createBox();\n            copyBoxInto(boxWithoutTransform, box);\n            for (let i = 0; i < this.path.length; i++) {\n                const node = this.path[i];\n                if (!node.instance)\n                    continue;\n                if (!hasTransform(node.latestValues))\n                    continue;\n                hasScale(node.latestValues) && node.updateSnapshot();\n                const sourceBox = createBox();\n                const nodeBox = node.measurePageBox();\n                copyBoxInto(sourceBox, nodeBox);\n                removeBoxTransforms(boxWithoutTransform, node.latestValues, node.snapshot ? node.snapshot.layoutBox : undefined, sourceBox);\n            }\n            if (hasTransform(this.latestValues)) {\n                removeBoxTransforms(boxWithoutTransform, this.latestValues);\n            }\n            return boxWithoutTransform;\n        }\n        setTargetDelta(delta) {\n            this.targetDelta = delta;\n            this.root.scheduleUpdateProjection();\n            this.isProjectionDirty = true;\n        }\n        setOptions(options) {\n            this.options = {\n                ...this.options,\n                ...options,\n                crossfade: options.crossfade !== undefined ? options.crossfade : true,\n            };\n        }\n        clearMeasurements() {\n            this.scroll = undefined;\n            this.layout = undefined;\n            this.snapshot = undefined;\n            this.prevTransformTemplateValue = undefined;\n            this.targetDelta = undefined;\n            this.target = undefined;\n            this.isLayoutDirty = false;\n        }\n        forceRelativeParentToResolveTarget() {\n            if (!this.relativeParent)\n                return;\n            /**\n             * If the parent target isn't up-to-date, force it to update.\n             * This is an unfortunate de-optimisation as it means any updating relative\n             * projection will cause all the relative parents to recalculate back\n             * up the tree.\n             */\n            if (this.relativeParent.resolvedRelativeTargetAt !==\n                frameData.timestamp) {\n                this.relativeParent.resolveTargetDelta(true);\n            }\n        }\n        resolveTargetDelta(forceRecalculation = false) {\n            var _a;\n            /**\n             * Once the dirty status of nodes has been spread through the tree, we also\n             * need to check if we have a shared node of a different depth that has itself\n             * been dirtied.\n             */\n            const lead = this.getLead();\n            this.isProjectionDirty || (this.isProjectionDirty = lead.isProjectionDirty);\n            this.isTransformDirty || (this.isTransformDirty = lead.isTransformDirty);\n            this.isSharedProjectionDirty || (this.isSharedProjectionDirty = lead.isSharedProjectionDirty);\n            const isShared = Boolean(this.resumingFrom) || this !== lead;\n            /**\n             * We don't use transform for this step of processing so we don't\n             * need to check whether any nodes have changed transform.\n             */\n            const canSkip = !(forceRecalculation ||\n                (isShared && this.isSharedProjectionDirty) ||\n                this.isProjectionDirty ||\n                ((_a = this.parent) === null || _a === void 0 ? void 0 : _a.isProjectionDirty) ||\n                this.attemptToResolveRelativeTarget);\n            if (canSkip)\n                return;\n            const { layout, layoutId } = this.options;\n            /**\n             * If we have no layout, we can't perform projection, so early return\n             */\n            if (!this.layout || !(layout || layoutId))\n                return;\n            this.resolvedRelativeTargetAt = frameData.timestamp;\n            /**\n             * If we don't have a targetDelta but do have a layout, we can attempt to resolve\n             * a relativeParent. This will allow a component to perform scale correction\n             * even if no animation has started.\n             */\n            if (!this.targetDelta && !this.relativeTarget) {\n                const relativeParent = this.getClosestProjectingParent();\n                if (relativeParent &&\n                    relativeParent.layout &&\n                    this.animationProgress !== 1) {\n                    this.relativeParent = relativeParent;\n                    this.forceRelativeParentToResolveTarget();\n                    this.relativeTarget = createBox();\n                    this.relativeTargetOrigin = createBox();\n                    calcRelativePosition(this.relativeTargetOrigin, this.layout.layoutBox, relativeParent.layout.layoutBox);\n                    copyBoxInto(this.relativeTarget, this.relativeTargetOrigin);\n                }\n                else {\n                    this.relativeParent = this.relativeTarget = undefined;\n                }\n            }\n            /**\n             * If we have no relative target or no target delta our target isn't valid\n             * for this frame.\n             */\n            if (!this.relativeTarget && !this.targetDelta)\n                return;\n            /**\n             * Lazy-init target data structure\n             */\n            if (!this.target) {\n                this.target = createBox();\n                this.targetWithTransforms = createBox();\n            }\n            /**\n             * If we've got a relative box for this component, resolve it into a target relative to the parent.\n             */\n            if (this.relativeTarget &&\n                this.relativeTargetOrigin &&\n                this.relativeParent &&\n                this.relativeParent.target) {\n                this.forceRelativeParentToResolveTarget();\n                calcRelativeBox(this.target, this.relativeTarget, this.relativeParent.target);\n                /**\n                 * If we've only got a targetDelta, resolve it into a target\n                 */\n            }\n            else if (this.targetDelta) {\n                if (Boolean(this.resumingFrom)) {\n                    // TODO: This is creating a new object every frame\n                    this.target = this.applyTransform(this.layout.layoutBox);\n                }\n                else {\n                    copyBoxInto(this.target, this.layout.layoutBox);\n                }\n                applyBoxDelta(this.target, this.targetDelta);\n            }\n            else {\n                /**\n                 * If no target, use own layout as target\n                 */\n                copyBoxInto(this.target, this.layout.layoutBox);\n            }\n            /**\n             * If we've been told to attempt to resolve a relative target, do so.\n             */\n            if (this.attemptToResolveRelativeTarget) {\n                this.attemptToResolveRelativeTarget = false;\n                const relativeParent = this.getClosestProjectingParent();\n                if (relativeParent &&\n                    Boolean(relativeParent.resumingFrom) ===\n                        Boolean(this.resumingFrom) &&\n                    !relativeParent.options.layoutScroll &&\n                    relativeParent.target &&\n                    this.animationProgress !== 1) {\n                    this.relativeParent = relativeParent;\n                    this.forceRelativeParentToResolveTarget();\n                    this.relativeTarget = createBox();\n                    this.relativeTargetOrigin = createBox();\n                    calcRelativePosition(this.relativeTargetOrigin, this.target, relativeParent.target);\n                    copyBoxInto(this.relativeTarget, this.relativeTargetOrigin);\n                }\n                else {\n                    this.relativeParent = this.relativeTarget = undefined;\n                }\n            }\n            /**\n             * Increase debug counter for resolved target deltas\n             */\n            projectionFrameData.resolvedTargetDeltas++;\n        }\n        getClosestProjectingParent() {\n            if (!this.parent ||\n                hasScale(this.parent.latestValues) ||\n                has2DTranslate(this.parent.latestValues)) {\n                return undefined;\n            }\n            if (this.parent.isProjecting()) {\n                return this.parent;\n            }\n            else {\n                return this.parent.getClosestProjectingParent();\n            }\n        }\n        isProjecting() {\n            return Boolean((this.relativeTarget ||\n                this.targetDelta ||\n                this.options.layoutRoot) &&\n                this.layout);\n        }\n        calcProjection() {\n            var _a;\n            const lead = this.getLead();\n            const isShared = Boolean(this.resumingFrom) || this !== lead;\n            let canSkip = true;\n            /**\n             * If this is a normal layout animation and neither this node nor its nearest projecting\n             * is dirty then we can't skip.\n             */\n            if (this.isProjectionDirty || ((_a = this.parent) === null || _a === void 0 ? void 0 : _a.isProjectionDirty)) {\n                canSkip = false;\n            }\n            /**\n             * If this is a shared layout animation and this node's shared projection is dirty then\n             * we can't skip.\n             */\n            if (isShared &&\n                (this.isSharedProjectionDirty || this.isTransformDirty)) {\n                canSkip = false;\n            }\n            /**\n             * If we have resolved the target this frame we must recalculate the\n             * projection to ensure it visually represents the internal calculations.\n             */\n            if (this.resolvedRelativeTargetAt === frameData.timestamp) {\n                canSkip = false;\n            }\n            if (canSkip)\n                return;\n            const { layout, layoutId } = this.options;\n            /**\n             * If this section of the tree isn't animating we can\n             * delete our target sources for the following frame.\n             */\n            this.isTreeAnimating = Boolean((this.parent && this.parent.isTreeAnimating) ||\n                this.currentAnimation ||\n                this.pendingAnimation);\n            if (!this.isTreeAnimating) {\n                this.targetDelta = this.relativeTarget = undefined;\n            }\n            if (!this.layout || !(layout || layoutId))\n                return;\n            /**\n             * Reset the corrected box with the latest values from box, as we're then going\n             * to perform mutative operations on it.\n             */\n            copyBoxInto(this.layoutCorrected, this.layout.layoutBox);\n            /**\n             * Record previous tree scales before updating.\n             */\n            const prevTreeScaleX = this.treeScale.x;\n            const prevTreeScaleY = this.treeScale.y;\n            /**\n             * Apply all the parent deltas to this box to produce the corrected box. This\n             * is the layout box, as it will appear on screen as a result of the transforms of its parents.\n             */\n            applyTreeDeltas(this.layoutCorrected, this.treeScale, this.path, isShared);\n            /**\n             * If this layer needs to perform scale correction but doesn't have a target,\n             * use the layout as the target.\n             */\n            if (lead.layout &&\n                !lead.target &&\n                (this.treeScale.x !== 1 || this.treeScale.y !== 1)) {\n                lead.target = lead.layout.layoutBox;\n                lead.targetWithTransforms = createBox();\n            }\n            const { target } = lead;\n            if (!target) {\n                /**\n                 * If we don't have a target to project into, but we were previously\n                 * projecting, we want to remove the stored transform and schedule\n                 * a render to ensure the elements reflect the removed transform.\n                 */\n                if (this.projectionTransform) {\n                    this.projectionDelta = createDelta();\n                    this.projectionTransform = \"none\";\n                    this.scheduleRender();\n                }\n                return;\n            }\n            if (!this.projectionDelta) {\n                this.projectionDelta = createDelta();\n                this.projectionDeltaWithTransform = createDelta();\n            }\n            const prevProjectionTransform = this.projectionTransform;\n            /**\n             * Update the delta between the corrected box and the target box before user-set transforms were applied.\n             * This will allow us to calculate the corrected borderRadius and boxShadow to compensate\n             * for our layout reprojection, but still allow them to be scaled correctly by the user.\n             * It might be that to simplify this we may want to accept that user-set scale is also corrected\n             * and we wouldn't have to keep and calc both deltas, OR we could support a user setting\n             * to allow people to choose whether these styles are corrected based on just the\n             * layout reprojection or the final bounding box.\n             */\n            calcBoxDelta(this.projectionDelta, this.layoutCorrected, target, this.latestValues);\n            this.projectionTransform = buildProjectionTransform(this.projectionDelta, this.treeScale);\n            if (this.projectionTransform !== prevProjectionTransform ||\n                this.treeScale.x !== prevTreeScaleX ||\n                this.treeScale.y !== prevTreeScaleY) {\n                this.hasProjected = true;\n                this.scheduleRender();\n                this.notifyListeners(\"projectionUpdate\", target);\n            }\n            /**\n             * Increase debug counter for recalculated projections\n             */\n            projectionFrameData.recalculatedProjection++;\n        }\n        hide() {\n            this.isVisible = false;\n            // TODO: Schedule render\n        }\n        show() {\n            this.isVisible = true;\n            // TODO: Schedule render\n        }\n        scheduleRender(notifyAll = true) {\n            this.options.scheduleRender && this.options.scheduleRender();\n            if (notifyAll) {\n                const stack = this.getStack();\n                stack && stack.scheduleRender();\n            }\n            if (this.resumingFrom && !this.resumingFrom.instance) {\n                this.resumingFrom = undefined;\n            }\n        }\n        setAnimationOrigin(delta, hasOnlyRelativeTargetChanged = false) {\n            const snapshot = this.snapshot;\n            const snapshotLatestValues = snapshot\n                ? snapshot.latestValues\n                : {};\n            const mixedValues = { ...this.latestValues };\n            const targetDelta = createDelta();\n            if (!this.relativeParent ||\n                !this.relativeParent.options.layoutRoot) {\n                this.relativeTarget = this.relativeTargetOrigin = undefined;\n            }\n            this.attemptToResolveRelativeTarget = !hasOnlyRelativeTargetChanged;\n            const relativeLayout = createBox();\n            const snapshotSource = snapshot ? snapshot.source : undefined;\n            const layoutSource = this.layout ? this.layout.source : undefined;\n            const isSharedLayoutAnimation = snapshotSource !== layoutSource;\n            const stack = this.getStack();\n            const isOnlyMember = !stack || stack.members.length <= 1;\n            const shouldCrossfadeOpacity = Boolean(isSharedLayoutAnimation &&\n                !isOnlyMember &&\n                this.options.crossfade === true &&\n                !this.path.some(hasOpacityCrossfade));\n            this.animationProgress = 0;\n            let prevRelativeTarget;\n            this.mixTargetDelta = (latest) => {\n                const progress = latest / 1000;\n                mixAxisDelta(targetDelta.x, delta.x, progress);\n                mixAxisDelta(targetDelta.y, delta.y, progress);\n                this.setTargetDelta(targetDelta);\n                if (this.relativeTarget &&\n                    this.relativeTargetOrigin &&\n                    this.layout &&\n                    this.relativeParent &&\n                    this.relativeParent.layout) {\n                    calcRelativePosition(relativeLayout, this.layout.layoutBox, this.relativeParent.layout.layoutBox);\n                    mixBox(this.relativeTarget, this.relativeTargetOrigin, relativeLayout, progress);\n                    /**\n                     * If this is an unchanged relative target we can consider the\n                     * projection not dirty.\n                     */\n                    if (prevRelativeTarget &&\n                        boxEquals(this.relativeTarget, prevRelativeTarget)) {\n                        this.isProjectionDirty = false;\n                    }\n                    if (!prevRelativeTarget)\n                        prevRelativeTarget = createBox();\n                    copyBoxInto(prevRelativeTarget, this.relativeTarget);\n                }\n                if (isSharedLayoutAnimation) {\n                    this.animationValues = mixedValues;\n                    mixValues(mixedValues, snapshotLatestValues, this.latestValues, progress, shouldCrossfadeOpacity, isOnlyMember);\n                }\n                this.root.scheduleUpdateProjection();\n                this.scheduleRender();\n                this.animationProgress = progress;\n            };\n            this.mixTargetDelta(this.options.layoutRoot ? 1000 : 0);\n        }\n        startAnimation(options) {\n            this.notifyListeners(\"animationStart\");\n            this.currentAnimation && this.currentAnimation.stop();\n            if (this.resumingFrom && this.resumingFrom.currentAnimation) {\n                this.resumingFrom.currentAnimation.stop();\n            }\n            if (this.pendingAnimation) {\n                cancelFrame(this.pendingAnimation);\n                this.pendingAnimation = undefined;\n            }\n            /**\n             * Start the animation in the next frame to have a frame with progress 0,\n             * where the target is the same as when the animation started, so we can\n             * calculate the relative positions correctly for instant transitions.\n             */\n            this.pendingAnimation = frame.update(() => {\n                globalProjectionState.hasAnimatedSinceResize = true;\n                this.currentAnimation = animateSingleValue(0, animationTarget, {\n                    ...options,\n                    onUpdate: (latest) => {\n                        this.mixTargetDelta(latest);\n                        options.onUpdate && options.onUpdate(latest);\n                    },\n                    onComplete: () => {\n                        options.onComplete && options.onComplete();\n                        this.completeAnimation();\n                    },\n                });\n                if (this.resumingFrom) {\n                    this.resumingFrom.currentAnimation = this.currentAnimation;\n                }\n                this.pendingAnimation = undefined;\n            });\n        }\n        completeAnimation() {\n            if (this.resumingFrom) {\n                this.resumingFrom.currentAnimation = undefined;\n                this.resumingFrom.preserveOpacity = undefined;\n            }\n            const stack = this.getStack();\n            stack && stack.exitAnimationComplete();\n            this.resumingFrom =\n                this.currentAnimation =\n                    this.animationValues =\n                        undefined;\n            this.notifyListeners(\"animationComplete\");\n        }\n        finishAnimation() {\n            if (this.currentAnimation) {\n                this.mixTargetDelta && this.mixTargetDelta(animationTarget);\n                this.currentAnimation.stop();\n            }\n            this.completeAnimation();\n        }\n        applyTransformsToTarget() {\n            const lead = this.getLead();\n            let { targetWithTransforms, target, layout, latestValues } = lead;\n            if (!targetWithTransforms || !target || !layout)\n                return;\n            /**\n             * If we're only animating position, and this element isn't the lead element,\n             * then instead of projecting into the lead box we instead want to calculate\n             * a new target that aligns the two boxes but maintains the layout shape.\n             */\n            if (this !== lead &&\n                this.layout &&\n                layout &&\n                shouldAnimatePositionOnly(this.options.animationType, this.layout.layoutBox, layout.layoutBox)) {\n                target = this.target || createBox();\n                const xLength = calcLength(this.layout.layoutBox.x);\n                target.x.min = lead.target.x.min;\n                target.x.max = target.x.min + xLength;\n                const yLength = calcLength(this.layout.layoutBox.y);\n                target.y.min = lead.target.y.min;\n                target.y.max = target.y.min + yLength;\n            }\n            copyBoxInto(targetWithTransforms, target);\n            /**\n             * Apply the latest user-set transforms to the targetBox to produce the targetBoxFinal.\n             * This is the final box that we will then project into by calculating a transform delta and\n             * applying it to the corrected box.\n             */\n            transformBox(targetWithTransforms, latestValues);\n            /**\n             * Update the delta between the corrected box and the final target box, after\n             * user-set transforms are applied to it. This will be used by the renderer to\n             * create a transform style that will reproject the element from its layout layout\n             * into the desired bounding box.\n             */\n            calcBoxDelta(this.projectionDeltaWithTransform, this.layoutCorrected, targetWithTransforms, latestValues);\n        }\n        registerSharedNode(layoutId, node) {\n            if (!this.sharedNodes.has(layoutId)) {\n                this.sharedNodes.set(layoutId, new NodeStack());\n            }\n            const stack = this.sharedNodes.get(layoutId);\n            stack.add(node);\n            const config = node.options.initialPromotionConfig;\n            node.promote({\n                transition: config ? config.transition : undefined,\n                preserveFollowOpacity: config && config.shouldPreserveFollowOpacity\n                    ? config.shouldPreserveFollowOpacity(node)\n                    : undefined,\n            });\n        }\n        isLead() {\n            const stack = this.getStack();\n            return stack ? stack.lead === this : true;\n        }\n        getLead() {\n            var _a;\n            const { layoutId } = this.options;\n            return layoutId ? ((_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.lead) || this : this;\n        }\n        getPrevLead() {\n            var _a;\n            const { layoutId } = this.options;\n            return layoutId ? (_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.prevLead : undefined;\n        }\n        getStack() {\n            const { layoutId } = this.options;\n            if (layoutId)\n                return this.root.sharedNodes.get(layoutId);\n        }\n        promote({ needsReset, transition, preserveFollowOpacity, } = {}) {\n            const stack = this.getStack();\n            if (stack)\n                stack.promote(this, preserveFollowOpacity);\n            if (needsReset) {\n                this.projectionDelta = undefined;\n                this.needsReset = true;\n            }\n            if (transition)\n                this.setOptions({ transition });\n        }\n        relegate() {\n            const stack = this.getStack();\n            if (stack) {\n                return stack.relegate(this);\n            }\n            else {\n                return false;\n            }\n        }\n        resetSkewAndRotation() {\n            const { visualElement } = this.options;\n            if (!visualElement)\n                return;\n            // If there's no detected skew or rotation values, we can early return without a forced render.\n            let hasDistortingTransform = false;\n            /**\n             * An unrolled check for rotation values. Most elements don't have any rotation and\n             * skipping the nested loop and new object creation is 50% faster.\n             */\n            const { latestValues } = visualElement;\n            if (latestValues.z ||\n                latestValues.rotate ||\n                latestValues.rotateX ||\n                latestValues.rotateY ||\n                latestValues.rotateZ ||\n                latestValues.skewX ||\n                latestValues.skewY) {\n                hasDistortingTransform = true;\n            }\n            // If there's no distorting values, we don't need to do any more.\n            if (!hasDistortingTransform)\n                return;\n            const resetValues = {};\n            if (latestValues.z) {\n                resetDistortingTransform(\"z\", visualElement, resetValues, this.animationValues);\n            }\n            // Check the skew and rotate value of all axes and reset to 0\n            for (let i = 0; i < transformAxes.length; i++) {\n                resetDistortingTransform(`rotate${transformAxes[i]}`, visualElement, resetValues, this.animationValues);\n                resetDistortingTransform(`skew${transformAxes[i]}`, visualElement, resetValues, this.animationValues);\n            }\n            // Force a render of this element to apply the transform with all skews and rotations\n            // set to 0.\n            visualElement.render();\n            // Put back all the values we reset\n            for (const key in resetValues) {\n                visualElement.setStaticValue(key, resetValues[key]);\n                if (this.animationValues) {\n                    this.animationValues[key] = resetValues[key];\n                }\n            }\n            // Schedule a render for the next frame. This ensures we won't visually\n            // see the element with the reset rotate value applied.\n            visualElement.scheduleRender();\n        }\n        getProjectionStyles(styleProp) {\n            var _a, _b;\n            if (!this.instance || this.isSVG)\n                return undefined;\n            if (!this.isVisible) {\n                return hiddenVisibility;\n            }\n            const styles = {\n                visibility: \"\",\n            };\n            const transformTemplate = this.getTransformTemplate();\n            if (this.needsReset) {\n                this.needsReset = false;\n                styles.opacity = \"\";\n                styles.pointerEvents =\n                    resolveMotionValue(styleProp === null || styleProp === void 0 ? void 0 : styleProp.pointerEvents) || \"\";\n                styles.transform = transformTemplate\n                    ? transformTemplate(this.latestValues, \"\")\n                    : \"none\";\n                return styles;\n            }\n            const lead = this.getLead();\n            if (!this.projectionDelta || !this.layout || !lead.target) {\n                const emptyStyles = {};\n                if (this.options.layoutId) {\n                    emptyStyles.opacity =\n                        this.latestValues.opacity !== undefined\n                            ? this.latestValues.opacity\n                            : 1;\n                    emptyStyles.pointerEvents =\n                        resolveMotionValue(styleProp === null || styleProp === void 0 ? void 0 : styleProp.pointerEvents) || \"\";\n                }\n                if (this.hasProjected && !hasTransform(this.latestValues)) {\n                    emptyStyles.transform = transformTemplate\n                        ? transformTemplate({}, \"\")\n                        : \"none\";\n                    this.hasProjected = false;\n                }\n                return emptyStyles;\n            }\n            const valuesToRender = lead.animationValues || lead.latestValues;\n            this.applyTransformsToTarget();\n            styles.transform = buildProjectionTransform(this.projectionDeltaWithTransform, this.treeScale, valuesToRender);\n            if (transformTemplate) {\n                styles.transform = transformTemplate(valuesToRender, styles.transform);\n            }\n            const { x, y } = this.projectionDelta;\n            styles.transformOrigin = `${x.origin * 100}% ${y.origin * 100}% 0`;\n            if (lead.animationValues) {\n                /**\n                 * If the lead component is animating, assign this either the entering/leaving\n                 * opacity\n                 */\n                styles.opacity =\n                    lead === this\n                        ? (_b = (_a = valuesToRender.opacity) !== null && _a !== void 0 ? _a : this.latestValues.opacity) !== null && _b !== void 0 ? _b : 1\n                        : this.preserveOpacity\n                            ? this.latestValues.opacity\n                            : valuesToRender.opacityExit;\n            }\n            else {\n                /**\n                 * Or we're not animating at all, set the lead component to its layout\n                 * opacity and other components to hidden.\n                 */\n                styles.opacity =\n                    lead === this\n                        ? valuesToRender.opacity !== undefined\n                            ? valuesToRender.opacity\n                            : \"\"\n                        : valuesToRender.opacityExit !== undefined\n                            ? valuesToRender.opacityExit\n                            : 0;\n            }\n            /**\n             * Apply scale correction\n             */\n            for (const key in scaleCorrectors) {\n                if (valuesToRender[key] === undefined)\n                    continue;\n                const { correct, applyTo } = scaleCorrectors[key];\n                /**\n                 * Only apply scale correction to the value if we have an\n                 * active projection transform. Otherwise these values become\n                 * vulnerable to distortion if the element changes size without\n                 * a corresponding layout animation.\n                 */\n                const corrected = styles.transform === \"none\"\n                    ? valuesToRender[key]\n                    : correct(valuesToRender[key], lead);\n                if (applyTo) {\n                    const num = applyTo.length;\n                    for (let i = 0; i < num; i++) {\n                        styles[applyTo[i]] = corrected;\n                    }\n                }\n                else {\n                    styles[key] = corrected;\n                }\n            }\n            /**\n             * Disable pointer events on follow components. This is to ensure\n             * that if a follow component covers a lead component it doesn't block\n             * pointer events on the lead.\n             */\n            if (this.options.layoutId) {\n                styles.pointerEvents =\n                    lead === this\n                        ? resolveMotionValue(styleProp === null || styleProp === void 0 ? void 0 : styleProp.pointerEvents) || \"\"\n                        : \"none\";\n            }\n            return styles;\n        }\n        clearSnapshot() {\n            this.resumeFrom = this.snapshot = undefined;\n        }\n        // Only run on root\n        resetTree() {\n            this.root.nodes.forEach((node) => { var _a; return (_a = node.currentAnimation) === null || _a === void 0 ? void 0 : _a.stop(); });\n            this.root.nodes.forEach(clearMeasurements);\n            this.root.sharedNodes.clear();\n        }\n    };\n}\nfunction updateLayout(node) {\n    node.updateLayout();\n}\nfunction notifyLayoutUpdate(node) {\n    var _a;\n    const snapshot = ((_a = node.resumeFrom) === null || _a === void 0 ? void 0 : _a.snapshot) || node.snapshot;\n    if (node.isLead() &&\n        node.layout &&\n        snapshot &&\n        node.hasListeners(\"didUpdate\")) {\n        const { layoutBox: layout, measuredBox: measuredLayout } = node.layout;\n        const { animationType } = node.options;\n        const isShared = snapshot.source !== node.layout.source;\n        // TODO Maybe we want to also resize the layout snapshot so we don't trigger\n        // animations for instance if layout=\"size\" and an element has only changed position\n        if (animationType === \"size\") {\n            eachAxis((axis) => {\n                const axisSnapshot = isShared\n                    ? snapshot.measuredBox[axis]\n                    : snapshot.layoutBox[axis];\n                const length = calcLength(axisSnapshot);\n                axisSnapshot.min = layout[axis].min;\n                axisSnapshot.max = axisSnapshot.min + length;\n            });\n        }\n        else if (shouldAnimatePositionOnly(animationType, snapshot.layoutBox, layout)) {\n            eachAxis((axis) => {\n                const axisSnapshot = isShared\n                    ? snapshot.measuredBox[axis]\n                    : snapshot.layoutBox[axis];\n                const length = calcLength(layout[axis]);\n                axisSnapshot.max = axisSnapshot.min + length;\n                /**\n                 * Ensure relative target gets resized and rerendererd\n                 */\n                if (node.relativeTarget && !node.currentAnimation) {\n                    node.isProjectionDirty = true;\n                    node.relativeTarget[axis].max =\n                        node.relativeTarget[axis].min + length;\n                }\n            });\n        }\n        const layoutDelta = createDelta();\n        calcBoxDelta(layoutDelta, layout, snapshot.layoutBox);\n        const visualDelta = createDelta();\n        if (isShared) {\n            calcBoxDelta(visualDelta, node.applyTransform(measuredLayout, true), snapshot.measuredBox);\n        }\n        else {\n            calcBoxDelta(visualDelta, layout, snapshot.layoutBox);\n        }\n        const hasLayoutChanged = !isDeltaZero(layoutDelta);\n        let hasRelativeTargetChanged = false;\n        if (!node.resumeFrom) {\n            const relativeParent = node.getClosestProjectingParent();\n            /**\n             * If the relativeParent is itself resuming from a different element then\n             * the relative snapshot is not relavent\n             */\n            if (relativeParent && !relativeParent.resumeFrom) {\n                const { snapshot: parentSnapshot, layout: parentLayout } = relativeParent;\n                if (parentSnapshot && parentLayout) {\n                    const relativeSnapshot = createBox();\n                    calcRelativePosition(relativeSnapshot, snapshot.layoutBox, parentSnapshot.layoutBox);\n                    const relativeLayout = createBox();\n                    calcRelativePosition(relativeLayout, layout, parentLayout.layoutBox);\n                    if (!boxEqualsRounded(relativeSnapshot, relativeLayout)) {\n                        hasRelativeTargetChanged = true;\n                    }\n                    if (relativeParent.options.layoutRoot) {\n                        node.relativeTarget = relativeLayout;\n                        node.relativeTargetOrigin = relativeSnapshot;\n                        node.relativeParent = relativeParent;\n                    }\n                }\n            }\n        }\n        node.notifyListeners(\"didUpdate\", {\n            layout,\n            snapshot,\n            delta: visualDelta,\n            layoutDelta,\n            hasLayoutChanged,\n            hasRelativeTargetChanged,\n        });\n    }\n    else if (node.isLead()) {\n        const { onExitComplete } = node.options;\n        onExitComplete && onExitComplete();\n    }\n    /**\n     * Clearing transition\n     * TODO: Investigate why this transition is being passed in as {type: false } from Framer\n     * and why we need it at all\n     */\n    node.options.transition = undefined;\n}\nfunction propagateDirtyNodes(node) {\n    /**\n     * Increase debug counter for nodes encountered this frame\n     */\n    projectionFrameData.totalNodes++;\n    if (!node.parent)\n        return;\n    /**\n     * If this node isn't projecting, propagate isProjectionDirty. It will have\n     * no performance impact but it will allow the next child that *is* projecting\n     * but *isn't* dirty to just check its parent to see if *any* ancestor needs\n     * correcting.\n     */\n    if (!node.isProjecting()) {\n        node.isProjectionDirty = node.parent.isProjectionDirty;\n    }\n    /**\n     * Propagate isSharedProjectionDirty and isTransformDirty\n     * throughout the whole tree. A future revision can take another look at\n     * this but for safety we still recalcualte shared nodes.\n     */\n    node.isSharedProjectionDirty || (node.isSharedProjectionDirty = Boolean(node.isProjectionDirty ||\n        node.parent.isProjectionDirty ||\n        node.parent.isSharedProjectionDirty));\n    node.isTransformDirty || (node.isTransformDirty = node.parent.isTransformDirty);\n}\nfunction cleanDirtyNodes(node) {\n    node.isProjectionDirty =\n        node.isSharedProjectionDirty =\n            node.isTransformDirty =\n                false;\n}\nfunction clearSnapshot(node) {\n    node.clearSnapshot();\n}\nfunction clearMeasurements(node) {\n    node.clearMeasurements();\n}\nfunction clearIsLayoutDirty(node) {\n    node.isLayoutDirty = false;\n}\nfunction resetTransformStyle(node) {\n    const { visualElement } = node.options;\n    if (visualElement && visualElement.getProps().onBeforeLayoutMeasure) {\n        visualElement.notify(\"BeforeLayoutMeasure\");\n    }\n    node.resetTransform();\n}\nfunction finishAnimation(node) {\n    node.finishAnimation();\n    node.targetDelta = node.relativeTarget = node.target = undefined;\n    node.isProjectionDirty = true;\n}\nfunction resolveTargetDelta(node) {\n    node.resolveTargetDelta();\n}\nfunction calcProjection(node) {\n    node.calcProjection();\n}\nfunction resetSkewAndRotation(node) {\n    node.resetSkewAndRotation();\n}\nfunction removeLeadSnapshots(stack) {\n    stack.removeLeadSnapshot();\n}\nfunction mixAxisDelta(output, delta, p) {\n    output.translate = mixNumber(delta.translate, 0, p);\n    output.scale = mixNumber(delta.scale, 1, p);\n    output.origin = delta.origin;\n    output.originPoint = delta.originPoint;\n}\nfunction mixAxis(output, from, to, p) {\n    output.min = mixNumber(from.min, to.min, p);\n    output.max = mixNumber(from.max, to.max, p);\n}\nfunction mixBox(output, from, to, p) {\n    mixAxis(output.x, from.x, to.x, p);\n    mixAxis(output.y, from.y, to.y, p);\n}\nfunction hasOpacityCrossfade(node) {\n    return (node.animationValues && node.animationValues.opacityExit !== undefined);\n}\nconst defaultLayoutTransition = {\n    duration: 0.45,\n    ease: [0.4, 0, 0.1, 1],\n};\nconst userAgentContains = (string) => typeof navigator !== \"undefined\" &&\n    navigator.userAgent &&\n    navigator.userAgent.toLowerCase().includes(string);\n/**\n * Measured bounding boxes must be rounded in Safari and\n * left untouched in Chrome, otherwise non-integer layouts within scaled-up elements\n * can appear to jump.\n */\nconst roundPoint = userAgentContains(\"applewebkit/\") && !userAgentContains(\"chrome/\")\n    ? Math.round\n    : noop;\nfunction roundAxis(axis) {\n    // Round to the nearest .5 pixels to support subpixel layouts\n    axis.min = roundPoint(axis.min);\n    axis.max = roundPoint(axis.max);\n}\nfunction roundBox(box) {\n    roundAxis(box.x);\n    roundAxis(box.y);\n}\nfunction shouldAnimatePositionOnly(animationType, snapshot, layout) {\n    return (animationType === \"position\" ||\n        (animationType === \"preserve-aspect\" &&\n            !isNear(aspectRatio(snapshot), aspectRatio(layout), 0.2)));\n}\n\nexport { cleanDirtyNodes, createProjectionNode, mixAxis, mixAxisDelta, mixBox, propagateDirtyNodes };\n","import { createProjectionNode } from './create-projection-node.mjs';\nimport { addDomEvent } from '../../events/add-dom-event.mjs';\n\nconst DocumentProjectionNode = createProjectionNode({\n    attachResizeListener: (ref, notify) => addDomEvent(ref, \"resize\", notify),\n    measureScroll: () => ({\n        x: document.documentElement.scrollLeft || document.body.scrollLeft,\n        y: document.documentElement.scrollTop || document.body.scrollTop,\n    }),\n    checkIsScrollRoot: () => true,\n});\n\nexport { DocumentProjectionNode };\n","import { createProjectionNode } from './create-projection-node.mjs';\nimport { DocumentProjectionNode } from './DocumentProjectionNode.mjs';\n\nconst rootProjectionNode = {\n    current: undefined,\n};\nconst HTMLProjectionNode = createProjectionNode({\n    measureScroll: (instance) => ({\n        x: instance.scrollLeft,\n        y: instance.scrollTop,\n    }),\n    defaultParent: () => {\n        if (!rootProjectionNode.current) {\n            const documentNode = new DocumentProjectionNode({});\n            documentNode.mount(window);\n            documentNode.setOptions({ layoutScroll: true });\n            rootProjectionNode.current = documentNode;\n        }\n        return rootProjectionNode.current;\n    },\n    resetTransform: (instance, value) => {\n        instance.style.transform = value !== undefined ? value : \"none\";\n    },\n    checkIsScrollRoot: (instance) => Boolean(window.getComputedStyle(instance).position === \"fixed\"),\n});\n\nexport { HTMLProjectionNode, rootProjectionNode };\n","import { DragGesture } from '../../gestures/drag/index.mjs';\nimport { PanGesture } from '../../gestures/pan/index.mjs';\nimport { MeasureLayout } from './layout/MeasureLayout.mjs';\nimport { HTMLProjectionNode } from '../../projection/node/HTMLProjectionNode.mjs';\n\nconst drag = {\n    pan: {\n        Feature: PanGesture,\n    },\n    drag: {\n        Feature: DragGesture,\n        ProjectionNode: HTMLProjectionNode,\n        MeasureLayout,\n    },\n};\n\nexport { drag };\n","// Does this device prefer reduced motion? Returns `null` server-side.\nconst prefersReducedMotion = { current: null };\nconst hasReducedMotionListener = { current: false };\n\nexport { hasReducedMotionListener, prefersReducedMotion };\n","import { isBrowser } from '../is-browser.mjs';\nimport { hasReducedMotionListener, prefersReducedMotion } from './state.mjs';\n\nfunction initPrefersReducedMotion() {\n    hasReducedMotionListener.current = true;\n    if (!isBrowser)\n        return;\n    if (window.matchMedia) {\n        const motionMediaQuery = window.matchMedia(\"(prefers-reduced-motion)\");\n        const setReducedMotionPreferences = () => (prefersReducedMotion.current = motionMediaQuery.matches);\n        motionMediaQuery.addListener(setReducedMotionPreferences);\n        setReducedMotionPreferences();\n    }\n    else {\n        prefersReducedMotion.current = false;\n    }\n}\n\nexport { initPrefersReducedMotion };\n","import { isWillChangeMotionValue } from '../../value/use-will-change/is.mjs';\nimport { warnOnce } from '../../utils/warn-once.mjs';\nimport { motionValue } from '../../value/index.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\n\nfunction updateMotionValuesFromProps(element, next, prev) {\n    const { willChange } = next;\n    for (const key in next) {\n        const nextValue = next[key];\n        const prevValue = prev[key];\n        if (isMotionValue(nextValue)) {\n            /**\n             * If this is a motion value found in props or style, we want to add it\n             * to our visual element's motion value map.\n             */\n            element.addValue(key, nextValue);\n            if (isWillChangeMotionValue(willChange)) {\n                willChange.add(key);\n            }\n            /**\n             * Check the version of the incoming motion value with this version\n             * and warn against mismatches.\n             */\n            if (process.env.NODE_ENV === \"development\") {\n                warnOnce(nextValue.version === \"11.2.12\", `Attempting to mix Framer Motion versions ${nextValue.version} with 11.2.12 may not work as expected.`);\n            }\n        }\n        else if (isMotionValue(prevValue)) {\n            /**\n             * If we're swapping from a motion value to a static value,\n             * create a new motion value from that\n             */\n            element.addValue(key, motionValue(nextValue, { owner: element }));\n            if (isWillChangeMotionValue(willChange)) {\n                willChange.remove(key);\n            }\n        }\n        else if (prevValue !== nextValue) {\n            /**\n             * If this is a flat value that has changed, update the motion value\n             * or create one if it doesn't exist. We only want to do this if we're\n             * not handling the value with our animation state.\n             */\n            if (element.hasValue(key)) {\n                const existingValue = element.getValue(key);\n                if (existingValue.liveStyle === true) {\n                    existingValue.jump(nextValue);\n                }\n                else if (!existingValue.hasAnimated) {\n                    existingValue.set(nextValue);\n                }\n            }\n            else {\n                const latestValue = element.getStaticValue(key);\n                element.addValue(key, motionValue(latestValue !== undefined ? latestValue : nextValue, { owner: element }));\n            }\n        }\n    }\n    // Handle removed values\n    for (const key in prev) {\n        if (next[key] === undefined)\n            element.removeValue(key);\n    }\n    return next;\n}\n\nexport { updateMotionValuesFromProps };\n","const visualElementStore = new WeakMap();\n\nexport { visualElementStore };\n","import { color } from '../../../value/types/color/index.mjs';\nimport { complex } from '../../../value/types/complex/index.mjs';\nimport { dimensionValueTypes } from './dimensions.mjs';\nimport { testValueType } from './test.mjs';\n\n/**\n * A list of all ValueTypes\n */\nconst valueTypes = [...dimensionValueTypes, color, complex];\n/**\n * Tests a value against the list of ValueTypes\n */\nconst findValueType = (v) => valueTypes.find(testValueType(v));\n\nexport { findValueType };\n","import { createBox } from '../projection/geometry/models.mjs';\nimport { initPrefersReducedMotion } from '../utils/reduced-motion/index.mjs';\nimport { hasReducedMotionListener, prefersReducedMotion } from '../utils/reduced-motion/state.mjs';\nimport { SubscriptionManager } from '../utils/subscription-manager.mjs';\nimport { motionValue } from '../value/index.mjs';\nimport { isWillChangeMotionValue } from '../value/use-will-change/is.mjs';\nimport { isMotionValue } from '../value/utils/is-motion-value.mjs';\nimport { transformProps } from './html/utils/transform.mjs';\nimport { isControllingVariants, isVariantNode } from './utils/is-controlling-variants.mjs';\nimport { isVariantLabel } from './utils/is-variant-label.mjs';\nimport { updateMotionValuesFromProps } from './utils/motion-values.mjs';\nimport { resolveVariantFromProps } from './utils/resolve-variants.mjs';\nimport { warnOnce } from '../utils/warn-once.mjs';\nimport { featureDefinitions } from '../motion/features/definitions.mjs';\nimport { variantProps } from './utils/variant-props.mjs';\nimport { visualElementStore } from './store.mjs';\nimport { KeyframeResolver } from './utils/KeyframesResolver.mjs';\nimport { isNumericalString } from '../utils/is-numerical-string.mjs';\nimport { isZeroValueString } from '../utils/is-zero-value-string.mjs';\nimport { findValueType } from './dom/value-types/find.mjs';\nimport { complex } from '../value/types/complex/index.mjs';\nimport { getAnimatableNone } from './dom/value-types/animatable-none.mjs';\nimport { frame, cancelFrame } from '../frameloop/frame.mjs';\n\nconst propEventHandlers = [\n    \"AnimationStart\",\n    \"AnimationComplete\",\n    \"Update\",\n    \"BeforeLayoutMeasure\",\n    \"LayoutMeasure\",\n    \"LayoutAnimationStart\",\n    \"LayoutAnimationComplete\",\n];\nconst numVariantProps = variantProps.length;\n/**\n * A VisualElement is an imperative abstraction around UI elements such as\n * HTMLElement, SVGElement, Three.Object3D etc.\n */\nclass VisualElement {\n    /**\n     * This method takes React props and returns found MotionValues. For example, HTML\n     * MotionValues will be found within the style prop, whereas for Three.js within attribute arrays.\n     *\n     * This isn't an abstract method as it needs calling in the constructor, but it is\n     * intended to be one.\n     */\n    scrapeMotionValuesFromProps(_props, _prevProps, _visualElement) {\n        return {};\n    }\n    constructor({ parent, props, presenceContext, reducedMotionConfig, blockInitialAnimation, visualState, }, options = {}) {\n        this.resolveKeyframes = (keyframes, \n        // We use an onComplete callback here rather than a Promise as a Promise\n        // resolution is a microtask and we want to retain the ability to force\n        // the resolution of keyframes synchronously.\n        onComplete, name, value) => {\n            return new this.KeyframeResolver(keyframes, onComplete, name, value, this);\n        };\n        /**\n         * A reference to the current underlying Instance, e.g. a HTMLElement\n         * or Three.Mesh etc.\n         */\n        this.current = null;\n        /**\n         * A set containing references to this VisualElement's children.\n         */\n        this.children = new Set();\n        /**\n         * Determine what role this visual element should take in the variant tree.\n         */\n        this.isVariantNode = false;\n        this.isControllingVariants = false;\n        /**\n         * Decides whether this VisualElement should animate in reduced motion\n         * mode.\n         *\n         * TODO: This is currently set on every individual VisualElement but feels\n         * like it could be set globally.\n         */\n        this.shouldReduceMotion = null;\n        /**\n         * A map of all motion values attached to this visual element. Motion\n         * values are source of truth for any given animated value. A motion\n         * value might be provided externally by the component via props.\n         */\n        this.values = new Map();\n        this.KeyframeResolver = KeyframeResolver;\n        /**\n         * Cleanup functions for active features (hover/tap/exit etc)\n         */\n        this.features = {};\n        /**\n         * A map of every subscription that binds the provided or generated\n         * motion values onChange listeners to this visual element.\n         */\n        this.valueSubscriptions = new Map();\n        /**\n         * A reference to the previously-provided motion values as returned\n         * from scrapeMotionValuesFromProps. We use the keys in here to determine\n         * if any motion values need to be removed after props are updated.\n         */\n        this.prevMotionValues = {};\n        /**\n         * An object containing a SubscriptionManager for each active event.\n         */\n        this.events = {};\n        /**\n         * An object containing an unsubscribe function for each prop event subscription.\n         * For example, every \"Update\" event can have multiple subscribers via\n         * VisualElement.on(), but only one of those can be defined via the onUpdate prop.\n         */\n        this.propEventSubscriptions = {};\n        this.notifyUpdate = () => this.notify(\"Update\", this.latestValues);\n        this.render = () => {\n            if (!this.current)\n                return;\n            this.triggerBuild();\n            this.renderInstance(this.current, this.renderState, this.props.style, this.projection);\n        };\n        this.scheduleRender = () => frame.render(this.render, false, true);\n        const { latestValues, renderState } = visualState;\n        this.latestValues = latestValues;\n        this.baseTarget = { ...latestValues };\n        this.initialValues = props.initial ? { ...latestValues } : {};\n        this.renderState = renderState;\n        this.parent = parent;\n        this.props = props;\n        this.presenceContext = presenceContext;\n        this.depth = parent ? parent.depth + 1 : 0;\n        this.reducedMotionConfig = reducedMotionConfig;\n        this.options = options;\n        this.blockInitialAnimation = Boolean(blockInitialAnimation);\n        this.isControllingVariants = isControllingVariants(props);\n        this.isVariantNode = isVariantNode(props);\n        if (this.isVariantNode) {\n            this.variantChildren = new Set();\n        }\n        this.manuallyAnimateOnMount = Boolean(parent && parent.current);\n        /**\n         * Any motion values that are provided to the element when created\n         * aren't yet bound to the element, as this would technically be impure.\n         * However, we iterate through the motion values and set them to the\n         * initial values for this component.\n         *\n         * TODO: This is impure and we should look at changing this to run on mount.\n         * Doing so will break some tests but this isn't neccessarily a breaking change,\n         * more a reflection of the test.\n         */\n        const { willChange, ...initialMotionValues } = this.scrapeMotionValuesFromProps(props, {}, this);\n        for (const key in initialMotionValues) {\n            const value = initialMotionValues[key];\n            if (latestValues[key] !== undefined && isMotionValue(value)) {\n                value.set(latestValues[key], false);\n                if (isWillChangeMotionValue(willChange)) {\n                    willChange.add(key);\n                }\n            }\n        }\n    }\n    mount(instance) {\n        this.current = instance;\n        visualElementStore.set(instance, this);\n        if (this.projection && !this.projection.instance) {\n            this.projection.mount(instance);\n        }\n        if (this.parent && this.isVariantNode && !this.isControllingVariants) {\n            this.removeFromVariantTree = this.parent.addVariantChild(this);\n        }\n        this.values.forEach((value, key) => this.bindToMotionValue(key, value));\n        if (!hasReducedMotionListener.current) {\n            initPrefersReducedMotion();\n        }\n        this.shouldReduceMotion =\n            this.reducedMotionConfig === \"never\"\n                ? false\n                : this.reducedMotionConfig === \"always\"\n                    ? true\n                    : prefersReducedMotion.current;\n        if (process.env.NODE_ENV !== \"production\") {\n            warnOnce(this.shouldReduceMotion !== true, \"You have Reduced Motion enabled on your device. Animations may not appear as expected.\");\n        }\n        if (this.parent)\n            this.parent.children.add(this);\n        this.update(this.props, this.presenceContext);\n    }\n    unmount() {\n        visualElementStore.delete(this.current);\n        this.projection && this.projection.unmount();\n        cancelFrame(this.notifyUpdate);\n        cancelFrame(this.render);\n        this.valueSubscriptions.forEach((remove) => remove());\n        this.removeFromVariantTree && this.removeFromVariantTree();\n        this.parent && this.parent.children.delete(this);\n        for (const key in this.events) {\n            this.events[key].clear();\n        }\n        for (const key in this.features) {\n            const feature = this.features[key];\n            if (feature) {\n                feature.unmount();\n                feature.isMounted = false;\n            }\n        }\n        this.current = null;\n    }\n    bindToMotionValue(key, value) {\n        const valueIsTransform = transformProps.has(key);\n        const removeOnChange = value.on(\"change\", (latestValue) => {\n            this.latestValues[key] = latestValue;\n            this.props.onUpdate && frame.preRender(this.notifyUpdate);\n            if (valueIsTransform && this.projection) {\n                this.projection.isTransformDirty = true;\n            }\n        });\n        const removeOnRenderRequest = value.on(\"renderRequest\", this.scheduleRender);\n        this.valueSubscriptions.set(key, () => {\n            removeOnChange();\n            removeOnRenderRequest();\n            if (value.owner)\n                value.stop();\n        });\n    }\n    sortNodePosition(other) {\n        /**\n         * If these nodes aren't even of the same type we can't compare their depth.\n         */\n        if (!this.current ||\n            !this.sortInstanceNodePosition ||\n            this.type !== other.type) {\n            return 0;\n        }\n        return this.sortInstanceNodePosition(this.current, other.current);\n    }\n    updateFeatures() {\n        let key = \"animation\";\n        for (key in featureDefinitions) {\n            const featureDefinition = featureDefinitions[key];\n            if (!featureDefinition)\n                continue;\n            const { isEnabled, Feature: FeatureConstructor } = featureDefinition;\n            /**\n             * If this feature is enabled but not active, make a new instance.\n             */\n            if (!this.features[key] &&\n                FeatureConstructor &&\n                isEnabled(this.props)) {\n                this.features[key] = new FeatureConstructor(this);\n            }\n            /**\n             * If we have a feature, mount or update it.\n             */\n            if (this.features[key]) {\n                const feature = this.features[key];\n                if (feature.isMounted) {\n                    feature.update();\n                }\n                else {\n                    feature.mount();\n                    feature.isMounted = true;\n                }\n            }\n        }\n    }\n    triggerBuild() {\n        this.build(this.renderState, this.latestValues, this.options, this.props);\n    }\n    /**\n     * Measure the current viewport box with or without transforms.\n     * Only measures axis-aligned boxes, rotate and skew must be manually\n     * removed with a re-render to work.\n     */\n    measureViewportBox() {\n        return this.current\n            ? this.measureInstanceViewportBox(this.current, this.props)\n            : createBox();\n    }\n    getStaticValue(key) {\n        return this.latestValues[key];\n    }\n    setStaticValue(key, value) {\n        this.latestValues[key] = value;\n    }\n    /**\n     * Update the provided props. Ensure any newly-added motion values are\n     * added to our map, old ones removed, and listeners updated.\n     */\n    update(props, presenceContext) {\n        if (props.transformTemplate || this.props.transformTemplate) {\n            this.scheduleRender();\n        }\n        this.prevProps = this.props;\n        this.props = props;\n        this.prevPresenceContext = this.presenceContext;\n        this.presenceContext = presenceContext;\n        /**\n         * Update prop event handlers ie onAnimationStart, onAnimationComplete\n         */\n        for (let i = 0; i < propEventHandlers.length; i++) {\n            const key = propEventHandlers[i];\n            if (this.propEventSubscriptions[key]) {\n                this.propEventSubscriptions[key]();\n                delete this.propEventSubscriptions[key];\n            }\n            const listenerName = (\"on\" + key);\n            const listener = props[listenerName];\n            if (listener) {\n                this.propEventSubscriptions[key] = this.on(key, listener);\n            }\n        }\n        this.prevMotionValues = updateMotionValuesFromProps(this, this.scrapeMotionValuesFromProps(props, this.prevProps, this), this.prevMotionValues);\n        if (this.handleChildMotionValue) {\n            this.handleChildMotionValue();\n        }\n    }\n    getProps() {\n        return this.props;\n    }\n    /**\n     * Returns the variant definition with a given name.\n     */\n    getVariant(name) {\n        return this.props.variants ? this.props.variants[name] : undefined;\n    }\n    /**\n     * Returns the defined default transition on this component.\n     */\n    getDefaultTransition() {\n        return this.props.transition;\n    }\n    getTransformPagePoint() {\n        return this.props.transformPagePoint;\n    }\n    getClosestVariantNode() {\n        return this.isVariantNode\n            ? this\n            : this.parent\n                ? this.parent.getClosestVariantNode()\n                : undefined;\n    }\n    getVariantContext(startAtParent = false) {\n        if (startAtParent) {\n            return this.parent ? this.parent.getVariantContext() : undefined;\n        }\n        if (!this.isControllingVariants) {\n            const context = this.parent\n                ? this.parent.getVariantContext() || {}\n                : {};\n            if (this.props.initial !== undefined) {\n                context.initial = this.props.initial;\n            }\n            return context;\n        }\n        const context = {};\n        for (let i = 0; i < numVariantProps; i++) {\n            const name = variantProps[i];\n            const prop = this.props[name];\n            if (isVariantLabel(prop) || prop === false) {\n                context[name] = prop;\n            }\n        }\n        return context;\n    }\n    /**\n     * Add a child visual element to our set of children.\n     */\n    addVariantChild(child) {\n        const closestVariantNode = this.getClosestVariantNode();\n        if (closestVariantNode) {\n            closestVariantNode.variantChildren &&\n                closestVariantNode.variantChildren.add(child);\n            return () => closestVariantNode.variantChildren.delete(child);\n        }\n    }\n    /**\n     * Add a motion value and bind it to this visual element.\n     */\n    addValue(key, value) {\n        // Remove existing value if it exists\n        const existingValue = this.values.get(key);\n        if (value !== existingValue) {\n            if (existingValue)\n                this.removeValue(key);\n            this.bindToMotionValue(key, value);\n            this.values.set(key, value);\n            this.latestValues[key] = value.get();\n        }\n    }\n    /**\n     * Remove a motion value and unbind any active subscriptions.\n     */\n    removeValue(key) {\n        this.values.delete(key);\n        const unsubscribe = this.valueSubscriptions.get(key);\n        if (unsubscribe) {\n            unsubscribe();\n            this.valueSubscriptions.delete(key);\n        }\n        delete this.latestValues[key];\n        this.removeValueFromRenderState(key, this.renderState);\n    }\n    /**\n     * Check whether we have a motion value for this key\n     */\n    hasValue(key) {\n        return this.values.has(key);\n    }\n    getValue(key, defaultValue) {\n        if (this.props.values && this.props.values[key]) {\n            return this.props.values[key];\n        }\n        let value = this.values.get(key);\n        if (value === undefined && defaultValue !== undefined) {\n            value = motionValue(defaultValue === null ? undefined : defaultValue, { owner: this });\n            this.addValue(key, value);\n        }\n        return value;\n    }\n    /**\n     * If we're trying to animate to a previously unencountered value,\n     * we need to check for it in our state and as a last resort read it\n     * directly from the instance (which might have performance implications).\n     */\n    readValue(key, target) {\n        var _a;\n        let value = this.latestValues[key] !== undefined || !this.current\n            ? this.latestValues[key]\n            : (_a = this.getBaseTargetFromProps(this.props, key)) !== null && _a !== void 0 ? _a : this.readValueFromInstance(this.current, key, this.options);\n        if (value !== undefined && value !== null) {\n            if (typeof value === \"string\" &&\n                (isNumericalString(value) || isZeroValueString(value))) {\n                // If this is a number read as a string, ie \"0\" or \"200\", convert it to a number\n                value = parseFloat(value);\n            }\n            else if (!findValueType(value) && complex.test(target)) {\n                value = getAnimatableNone(key, target);\n            }\n            this.setBaseTarget(key, isMotionValue(value) ? value.get() : value);\n        }\n        return isMotionValue(value) ? value.get() : value;\n    }\n    /**\n     * Set the base target to later animate back to. This is currently\n     * only hydrated on creation and when we first read a value.\n     */\n    setBaseTarget(key, value) {\n        this.baseTarget[key] = value;\n    }\n    /**\n     * Find the base target for a value thats been removed from all animation\n     * props.\n     */\n    getBaseTarget(key) {\n        var _a;\n        const { initial } = this.props;\n        let valueFromInitial;\n        if (typeof initial === \"string\" || typeof initial === \"object\") {\n            const variant = resolveVariantFromProps(this.props, initial, (_a = this.presenceContext) === null || _a === void 0 ? void 0 : _a.custom);\n            if (variant) {\n                valueFromInitial = variant[key];\n            }\n        }\n        /**\n         * If this value still exists in the current initial variant, read that.\n         */\n        if (initial && valueFromInitial !== undefined) {\n            return valueFromInitial;\n        }\n        /**\n         * Alternatively, if this VisualElement config has defined a getBaseTarget\n         * so we can read the value from an alternative source, try that.\n         */\n        const target = this.getBaseTargetFromProps(this.props, key);\n        if (target !== undefined && !isMotionValue(target))\n            return target;\n        /**\n         * If the value was initially defined on initial, but it doesn't any more,\n         * return undefined. Otherwise return the value as initially read from the DOM.\n         */\n        return this.initialValues[key] !== undefined &&\n            valueFromInitial === undefined\n            ? undefined\n            : this.baseTarget[key];\n    }\n    on(eventName, callback) {\n        if (!this.events[eventName]) {\n            this.events[eventName] = new SubscriptionManager();\n        }\n        return this.events[eventName].add(callback);\n    }\n    notify(eventName, ...args) {\n        if (this.events[eventName]) {\n            this.events[eventName].notify(...args);\n        }\n    }\n}\n\nexport { VisualElement };\n","import { VisualElement } from '../VisualElement.mjs';\nimport { DOMKeyframesResolver } from './DOMKeyframesResolver.mjs';\n\nclass DOMVisualElement extends VisualElement {\n    constructor() {\n        super(...arguments);\n        this.KeyframeResolver = DOMKeyframesResolver;\n    }\n    sortInstanceNodePosition(a, b) {\n        /**\n         * compareDocumentPosition returns a bitmask, by using the bitwise &\n         * we're returning true if 2 in that bitmask is set to true. 2 is set\n         * to true if b preceeds a.\n         */\n        return a.compareDocumentPosition(b) & 2 ? 1 : -1;\n    }\n    getBaseTargetFromProps(props, key) {\n        return props.style\n            ? props.style[key]\n            : undefined;\n    }\n    removeValueFromRenderState(key, { vars, style }) {\n        delete vars[key];\n        delete style[key];\n    }\n}\n\nexport { DOMVisualElement };\n","import { buildHTMLStyles } from './utils/build-styles.mjs';\nimport { isCSSVariableName } from '../dom/utils/is-css-variable.mjs';\nimport { transformProps } from './utils/transform.mjs';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\nimport { renderHTML } from './utils/render.mjs';\nimport { getDefaultValueType } from '../dom/value-types/defaults.mjs';\nimport { measureViewportBox } from '../../projection/utils/measure.mjs';\nimport { DOMVisualElement } from '../dom/DOMVisualElement.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\n\nfunction getComputedStyle(element) {\n    return window.getComputedStyle(element);\n}\nclass HTMLVisualElement extends DOMVisualElement {\n    constructor() {\n        super(...arguments);\n        this.type = \"html\";\n    }\n    readValueFromInstance(instance, key) {\n        if (transformProps.has(key)) {\n            const defaultType = getDefaultValueType(key);\n            return defaultType ? defaultType.default || 0 : 0;\n        }\n        else {\n            const computedStyle = getComputedStyle(instance);\n            const value = (isCSSVariableName(key)\n                ? computedStyle.getPropertyValue(key)\n                : computedStyle[key]) || 0;\n            return typeof value === \"string\" ? value.trim() : value;\n        }\n    }\n    measureInstanceViewportBox(instance, { transformPagePoint }) {\n        return measureViewportBox(instance, transformPagePoint);\n    }\n    build(renderState, latestValues, options, props) {\n        buildHTMLStyles(renderState, latestValues, options, props.transformTemplate);\n    }\n    scrapeMotionValuesFromProps(props, prevProps, visualElement) {\n        return scrapeMotionValuesFromProps(props, prevProps, visualElement);\n    }\n    handleChildMotionValue() {\n        if (this.childSubscription) {\n            this.childSubscription();\n            delete this.childSubscription;\n        }\n        const { children } = this.props;\n        if (isMotionValue(children)) {\n            this.childSubscription = children.on(\"change\", (latest) => {\n                if (this.current)\n                    this.current.textContent = `${latest}`;\n            });\n        }\n    }\n    renderInstance(instance, renderState, styleProp, projection) {\n        renderHTML(instance, renderState, styleProp, projection);\n    }\n}\n\nexport { HTMLVisualElement, getComputedStyle };\n","import { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\nimport { DOMVisualElement } from '../dom/DOMVisualElement.mjs';\nimport { buildSVGAttrs } from './utils/build-attrs.mjs';\nimport { camelToDash } from '../dom/utils/camel-to-dash.mjs';\nimport { camelCaseAttributes } from './utils/camel-case-attrs.mjs';\nimport { transformProps } from '../html/utils/transform.mjs';\nimport { renderSVG } from './utils/render.mjs';\nimport { getDefaultValueType } from '../dom/value-types/defaults.mjs';\nimport { createBox } from '../../projection/geometry/models.mjs';\nimport { isSVGTag } from './utils/is-svg-tag.mjs';\n\nclass SVGVisualElement extends DOMVisualElement {\n    constructor() {\n        super(...arguments);\n        this.type = \"svg\";\n        this.isSVGTag = false;\n    }\n    getBaseTargetFromProps(props, key) {\n        return props[key];\n    }\n    readValueFromInstance(instance, key) {\n        if (transformProps.has(key)) {\n            const defaultType = getDefaultValueType(key);\n            return defaultType ? defaultType.default || 0 : 0;\n        }\n        key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n        return instance.getAttribute(key);\n    }\n    measureInstanceViewportBox() {\n        return createBox();\n    }\n    scrapeMotionValuesFromProps(props, prevProps, visualElement) {\n        return scrapeMotionValuesFromProps(props, prevProps, visualElement);\n    }\n    build(renderState, latestValues, options, props) {\n        buildSVGAttrs(renderState, latestValues, options, this.isSVGTag, props.transformTemplate);\n    }\n    renderInstance(instance, renderState, styleProp, projection) {\n        renderSVG(instance, renderState, styleProp, projection);\n    }\n    mount(instance) {\n        this.isSVGTag = isSVGTag(instance.tagName);\n        super.mount(instance);\n    }\n}\n\nexport { SVGVisualElement };\n","import { Fragment } from 'react';\nimport { HTMLVisualElement } from '../html/HTMLVisualElement.mjs';\nimport { SVGVisualElement } from '../svg/SVGVisualElement.mjs';\nimport { isSVGComponent } from './utils/is-svg-component.mjs';\n\nconst createDomVisualElement = (Component, options) => {\n    return isSVGComponent(Component)\n        ? new SVGVisualElement(options, { enableHardwareAcceleration: false })\n        : new HTMLVisualElement(options, {\n            allowProjection: Component !== Fragment,\n            enableHardwareAcceleration: true,\n        });\n};\n\nexport { createDomVisualElement };\n","import { createMotionComponent } from '../../motion/index.mjs';\nimport { createMotionProxy } from './motion-proxy.mjs';\nimport { createDomMotionConfig } from './utils/create-config.mjs';\nimport { gestureAnimations } from '../../motion/features/gestures.mjs';\nimport { animations } from '../../motion/features/animations.mjs';\nimport { drag } from '../../motion/features/drag.mjs';\nimport { createDomVisualElement } from './create-visual-element.mjs';\nimport { layout } from '../../motion/features/layout.mjs';\n\nconst preloadedFeatures = {\n    ...animations,\n    ...gestureAnimations,\n    ...drag,\n    ...layout,\n};\n/**\n * HTML & SVG components, optimised for use with gestures and animation. These can be used as\n * drop-in replacements for any HTML & SVG component, all CSS & SVG properties are supported.\n *\n * @public\n */\nconst motion = /*@__PURE__*/ createMotionProxy((Component, config) => createDomMotionConfig(Component, config, preloadedFeatures, createDomVisualElement));\n/**\n * Create a DOM `motion` component with the provided string. This is primarily intended\n * as a full alternative to `motion` for consumers who have to support environments that don't\n * support `Proxy`.\n *\n * ```javascript\n * import { createDomMotionComponent } from \"framer-motion\"\n *\n * const motion = {\n *   div: createDomMotionComponent('div')\n * }\n * ```\n *\n * @public\n */\nfunction createDomMotionComponent(key) {\n    return createMotionComponent(createDomMotionConfig(key, { forwardMotionProps: false }, preloadedFeatures, createDomVisualElement));\n}\n\nexport { createDomMotionComponent, motion };\n","import { HTMLProjectionNode } from '../../projection/node/HTMLProjectionNode.mjs';\nimport { MeasureLayout } from './layout/MeasureLayout.mjs';\n\nconst layout = {\n    layout: {\n        ProjectionNode: HTMLProjectionNode,\n        MeasureLayout,\n    },\n};\n\nexport { layout };\n","import { useRef } from 'react';\nimport { useIsomorphicLayoutEffect } from './use-isomorphic-effect.mjs';\n\nfunction useIsMounted() {\n    const isMounted = useRef(false);\n    useIsomorphicLayoutEffect(() => {\n        isMounted.current = true;\n        return () => {\n            isMounted.current = false;\n        };\n    }, []);\n    return isMounted;\n}\n\nexport { useIsMounted };\n","import { useState, useCallback } from 'react';\nimport { useIsMounted } from './use-is-mounted.mjs';\nimport { frame } from '../frameloop/frame.mjs';\n\nfunction useForceUpdate() {\n    const isMounted = useIsMounted();\n    const [forcedRenderCount, setForcedRenderCount] = useState(0);\n    const forceRender = useCallback(() => {\n        isMounted.current && setForcedRenderCount(forcedRenderCount + 1);\n    }, [forcedRenderCount]);\n    /**\n     * Defer this to the end of the next animation frame in case there are multiple\n     * synchronous calls.\n     */\n    const deferredForceRender = useCallback(() => frame.postRender(forceRender), [forceRender]);\n    return [deferredForceRender, forcedRenderCount];\n}\n\nexport { useForceUpdate };\n","import { jsx } from 'react/jsx-runtime';\nimport * as React from 'react';\nimport { useId, useRef, useContext, useInsertionEffect } from 'react';\nimport { MotionConfigContext } from '../../context/MotionConfigContext.mjs';\n\n/**\n * Measurement functionality has to be within a separate component\n * to leverage snapshot lifecycle.\n */\nclass PopChildMeasure extends React.Component {\n    getSnapshotBeforeUpdate(prevProps) {\n        const element = this.props.childRef.current;\n        if (element && prevProps.isPresent && !this.props.isPresent) {\n            const size = this.props.sizeRef.current;\n            size.height = element.offsetHeight || 0;\n            size.width = element.offsetWidth || 0;\n            size.top = element.offsetTop;\n            size.left = element.offsetLeft;\n        }\n        return null;\n    }\n    /**\n     * Required with getSnapshotBeforeUpdate to stop React complaining.\n     */\n    componentDidUpdate() { }\n    render() {\n        return this.props.children;\n    }\n}\nfunction PopChild({ children, isPresent }) {\n    const id = useId();\n    const ref = useRef(null);\n    const size = useRef({\n        width: 0,\n        height: 0,\n        top: 0,\n        left: 0,\n    });\n    const { nonce } = useContext(MotionConfigContext);\n    /**\n     * We create and inject a style block so we can apply this explicit\n     * sizing in a non-destructive manner by just deleting the style block.\n     *\n     * We can't apply size via render as the measurement happens\n     * in getSnapshotBeforeUpdate (post-render), likewise if we apply the\n     * styles directly on the DOM node, we might be overwriting\n     * styles set via the style prop.\n     */\n    useInsertionEffect(() => {\n        const { width, height, top, left } = size.current;\n        if (isPresent || !ref.current || !width || !height)\n            return;\n        ref.current.dataset.motionPopId = id;\n        const style = document.createElement(\"style\");\n        if (nonce)\n            style.nonce = nonce;\n        document.head.appendChild(style);\n        if (style.sheet) {\n            style.sheet.insertRule(`\n          [data-motion-pop-id=\"${id}\"] {\n            position: absolute !important;\n            width: ${width}px !important;\n            height: ${height}px !important;\n            top: ${top}px !important;\n            left: ${left}px !important;\n          }\n        `);\n        }\n        return () => {\n            document.head.removeChild(style);\n        };\n    }, [isPresent]);\n    return (jsx(PopChildMeasure, { isPresent: isPresent, childRef: ref, sizeRef: size, children: React.cloneElement(children, { ref }) }));\n}\n\nexport { PopChild };\n","import { jsx } from 'react/jsx-runtime';\nimport * as React from 'react';\nimport { useId, useMemo } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\nimport { PopChild } from './PopChild.mjs';\n\nconst PresenceChild = ({ children, initial, isPresent, onExitComplete, custom, presenceAffectsLayout, mode, }) => {\n    const presenceChildren = useConstant(newChildrenMap);\n    const id = useId();\n    const context = useMemo(() => ({\n        id,\n        initial,\n        isPresent,\n        custom,\n        onExitComplete: (childId) => {\n            presenceChildren.set(childId, true);\n            for (const isComplete of presenceChildren.values()) {\n                if (!isComplete)\n                    return; // can stop searching when any is incomplete\n            }\n            onExitComplete && onExitComplete();\n        },\n        register: (childId) => {\n            presenceChildren.set(childId, false);\n            return () => presenceChildren.delete(childId);\n        },\n    }), \n    /**\n     * If the presence of a child affects the layout of the components around it,\n     * we want to make a new context value to ensure they get re-rendered\n     * so they can detect that layout change.\n     */\n    presenceAffectsLayout ? [Math.random()] : [isPresent]);\n    useMemo(() => {\n        presenceChildren.forEach((_, key) => presenceChildren.set(key, false));\n    }, [isPresent]);\n    /**\n     * If there's no `motion` components to fire exit animations, we want to remove this\n     * component immediately.\n     */\n    React.useEffect(() => {\n        !isPresent &&\n            !presenceChildren.size &&\n            onExitComplete &&\n            onExitComplete();\n    }, [isPresent]);\n    if (mode === \"popLayout\") {\n        children = jsx(PopChild, { isPresent: isPresent, children: children });\n    }\n    return (jsx(PresenceContext.Provider, { value: context, children: children }));\n};\nfunction newChildrenMap() {\n    return new Map();\n}\n\nexport { PresenceChild };\n","import { useEffect } from 'react';\n\nfunction useUnmountEffect(callback) {\n    return useEffect(() => () => callback(), []);\n}\n\nexport { useUnmountEffect };\n","import { jsx, Fragment } from 'react/jsx-runtime';\nimport { useContext, useRef, cloneElement, Children, isValidElement } from 'react';\nimport { useForceUpdate } from '../../utils/use-force-update.mjs';\nimport { useIsMounted } from '../../utils/use-is-mounted.mjs';\nimport { PresenceChild } from './PresenceChild.mjs';\nimport { LayoutGroupContext } from '../../context/LayoutGroupContext.mjs';\nimport { useIsomorphicLayoutEffect } from '../../utils/use-isomorphic-effect.mjs';\nimport { useUnmountEffect } from '../../utils/use-unmount-effect.mjs';\nimport { invariant } from '../../utils/errors.mjs';\n\nconst getChildKey = (child) => child.key || \"\";\nfunction updateChildLookup(children, allChildren) {\n    children.forEach((child) => {\n        const key = getChildKey(child);\n        allChildren.set(key, child);\n    });\n}\nfunction onlyElements(children) {\n    const filtered = [];\n    // We use forEach here instead of map as map mutates the component key by preprending `.$`\n    Children.forEach(children, (child) => {\n        if (isValidElement(child))\n            filtered.push(child);\n    });\n    return filtered;\n}\n/**\n * `AnimatePresence` enables the animation of components that have been removed from the tree.\n *\n * When adding/removing more than a single child, every child **must** be given a unique `key` prop.\n *\n * Any `motion` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { motion, AnimatePresence } from 'framer-motion'\n *\n * export const Items = ({ items }) => (\n *   <AnimatePresence>\n *     {items.map(item => (\n *       <motion.div\n *         key={item.id}\n *         initial={{ opacity: 0 }}\n *         animate={{ opacity: 1 }}\n *         exit={{ opacity: 0 }}\n *       />\n *     ))}\n *   </AnimatePresence>\n * )\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * If a child contains multiple `motion` components with `exit` props, it will only unmount the child\n * once all `motion` components have finished animating out. Likewise, any components using\n * `usePresence` all need to call `safeToRemove`.\n *\n * @public\n */\nconst AnimatePresence = ({ children, custom, initial = true, onExitComplete, exitBeforeEnter, presenceAffectsLayout = true, mode = \"sync\", }) => {\n    invariant(!exitBeforeEnter, \"Replace exitBeforeEnter with mode='wait'\");\n    // We want to force a re-render once all exiting animations have finished. We\n    // either use a local forceRender function, or one from a parent context if it exists.\n    const forceRender = useContext(LayoutGroupContext).forceRender || useForceUpdate()[0];\n    const isMounted = useIsMounted();\n    // Filter out any children that aren't ReactElements. We can only track ReactElements with a props.key\n    const filteredChildren = onlyElements(children);\n    let childrenToRender = filteredChildren;\n    const exitingChildren = useRef(new Map()).current;\n    // Keep a living record of the children we're actually rendering so we\n    // can diff to figure out which are entering and exiting\n    const presentChildren = useRef(childrenToRender);\n    // A lookup table to quickly reference components by key\n    const allChildren = useRef(new Map()).current;\n    // If this is the initial component render, just deal with logic surrounding whether\n    // we play onMount animations or not.\n    const isInitialRender = useRef(true);\n    useIsomorphicLayoutEffect(() => {\n        isInitialRender.current = false;\n        updateChildLookup(filteredChildren, allChildren);\n        presentChildren.current = childrenToRender;\n    });\n    useUnmountEffect(() => {\n        isInitialRender.current = true;\n        allChildren.clear();\n        exitingChildren.clear();\n    });\n    if (isInitialRender.current) {\n        return (jsx(Fragment, { children: childrenToRender.map((child) => (jsx(PresenceChild, { isPresent: true, initial: initial ? undefined : false, presenceAffectsLayout: presenceAffectsLayout, mode: mode, children: child }, getChildKey(child)))) }));\n    }\n    // If this is a subsequent render, deal with entering and exiting children\n    childrenToRender = [...childrenToRender];\n    // Diff the keys of the currently-present and target children to update our\n    // exiting list.\n    const presentKeys = presentChildren.current.map(getChildKey);\n    const targetKeys = filteredChildren.map(getChildKey);\n    // Diff the present children with our target children and mark those that are exiting\n    const numPresent = presentKeys.length;\n    for (let i = 0; i < numPresent; i++) {\n        const key = presentKeys[i];\n        if (targetKeys.indexOf(key) === -1 && !exitingChildren.has(key)) {\n            exitingChildren.set(key, undefined);\n        }\n    }\n    // If we currently have exiting children, and we're deferring rendering incoming children\n    // until after all current children have exiting, empty the childrenToRender array\n    if (mode === \"wait\" && exitingChildren.size) {\n        childrenToRender = [];\n    }\n    // Loop through all currently exiting components and clone them to overwrite `animate`\n    // with any `exit` prop they might have defined.\n    exitingChildren.forEach((component, key) => {\n        // If this component is actually entering again, early return\n        if (targetKeys.indexOf(key) !== -1)\n            return;\n        const child = allChildren.get(key);\n        if (!child)\n            return;\n        const insertionIndex = presentKeys.indexOf(key);\n        let exitingComponent = component;\n        if (!exitingComponent) {\n            const onExit = () => {\n                // clean up the exiting children map\n                exitingChildren.delete(key);\n                // compute the keys of children that were rendered once but are no longer present\n                // this could happen in case of too many fast consequent renderings\n                // @link https://github.com/framer/motion/issues/2023\n                const leftOverKeys = Array.from(allChildren.keys()).filter((childKey) => !targetKeys.includes(childKey));\n                // clean up the all children map\n                leftOverKeys.forEach((leftOverKey) => allChildren.delete(leftOverKey));\n                // make sure to render only the children that are actually visible\n                presentChildren.current = filteredChildren.filter((presentChild) => {\n                    const presentChildKey = getChildKey(presentChild);\n                    return (\n                    // filter out the node exiting\n                    presentChildKey === key ||\n                        // filter out the leftover children\n                        leftOverKeys.includes(presentChildKey));\n                });\n                // Defer re-rendering until all exiting children have indeed left\n                if (!exitingChildren.size) {\n                    if (isMounted.current === false)\n                        return;\n                    forceRender();\n                    onExitComplete && onExitComplete();\n                }\n            };\n            exitingComponent = (jsx(PresenceChild, { isPresent: false, onExitComplete: onExit, custom: custom, presenceAffectsLayout: presenceAffectsLayout, mode: mode, children: child }, getChildKey(child)));\n            exitingChildren.set(key, exitingComponent);\n        }\n        childrenToRender.splice(insertionIndex, 0, exitingComponent);\n    });\n    // Add `MotionContext` even to children that don't need it to ensure we're rendering\n    // the same tree between renders\n    childrenToRender = childrenToRender.map((child) => {\n        const key = child.key;\n        return exitingChildren.has(key) ? (child) : (jsx(PresenceChild, { isPresent: true, presenceAffectsLayout: presenceAffectsLayout, mode: mode, children: child }, getChildKey(child)));\n    });\n    if (process.env.NODE_ENV !== \"production\" &&\n        mode === \"wait\" &&\n        childrenToRender.length > 1) {\n        console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to \"wait\". This will lead to odd visual behaviour.`);\n    }\n    return (jsx(Fragment, { children: exitingChildren.size\n            ? childrenToRender\n            : childrenToRender.map((child) => cloneElement(child)) }));\n};\n\nexport { AnimatePresence };\n","import { useContext, useState, useEffect } from 'react';\nimport { motionValue } from './index.mjs';\nimport { MotionConfigContext } from '../context/MotionConfigContext.mjs';\nimport { useConstant } from '../utils/use-constant.mjs';\n\n/**\n * Creates a `MotionValue` to track the state and velocity of a value.\n *\n * Usually, these are created automatically. For advanced use-cases, like use with `useTransform`, you can create `MotionValue`s externally and pass them into the animated component via the `style` prop.\n *\n * ```jsx\n * export const MyComponent = () => {\n *   const scale = useMotionValue(1)\n *\n *   return <motion.div style={{ scale }} />\n * }\n * ```\n *\n * @param initial - The initial state.\n *\n * @public\n */\nfunction useMotionValue(initial) {\n    const value = useConstant(() => motionValue(initial));\n    /**\n     * If this motion value is being used in static mode, like on\n     * the Framer canvas, force components to rerender when the motion\n     * value is updated.\n     */\n    const { isStatic } = useContext(MotionConfigContext);\n    if (isStatic) {\n        const [, setLatest] = useState(initial);\n        useEffect(() => value.on(\"change\", setLatest), []);\n    }\n    return value;\n}\n\nexport { useMotionValue };\n","import { interpolate } from './interpolate.mjs';\n\nconst isCustomValueType = (v) => {\n    return v && typeof v === \"object\" && v.mix;\n};\nconst getMixer = (v) => (isCustomValueType(v) ? v.mix : undefined);\nfunction transform(...args) {\n    const useImmediate = !Array.isArray(args[0]);\n    const argOffset = useImmediate ? 0 : -1;\n    const inputValue = args[0 + argOffset];\n    const inputRange = args[1 + argOffset];\n    const outputRange = args[2 + argOffset];\n    const options = args[3 + argOffset];\n    const interpolator = interpolate(inputRange, outputRange, {\n        mixer: getMixer(outputRange[0]),\n        ...options,\n    });\n    return useImmediate ? interpolator(inputValue) : interpolator;\n}\n\nexport { transform };\n","import { useMotionValue } from './use-motion-value.mjs';\nimport { useIsomorphicLayoutEffect } from '../utils/use-isomorphic-effect.mjs';\nimport { cancelFrame, frame } from '../frameloop/frame.mjs';\n\nfunction useCombineMotionValues(values, combineValues) {\n    /**\n     * Initialise the returned motion value. This remains the same between renders.\n     */\n    const value = useMotionValue(combineValues());\n    /**\n     * Create a function that will update the template motion value with the latest values.\n     * This is pre-bound so whenever a motion value updates it can schedule its\n     * execution in Framesync. If it's already been scheduled it won't be fired twice\n     * in a single frame.\n     */\n    const updateValue = () => value.set(combineValues());\n    /**\n     * Synchronously update the motion value with the latest values during the render.\n     * This ensures that within a React render, the styles applied to the DOM are up-to-date.\n     */\n    updateValue();\n    /**\n     * Subscribe to all motion values found within the template. Whenever any of them change,\n     * schedule an update.\n     */\n    useIsomorphicLayoutEffect(() => {\n        const scheduleUpdate = () => frame.preRender(updateValue, false, true);\n        const subscriptions = values.map((v) => v.on(\"change\", scheduleUpdate));\n        return () => {\n            subscriptions.forEach((unsubscribe) => unsubscribe());\n            cancelFrame(updateValue);\n        };\n    });\n    return value;\n}\n\nexport { useCombineMotionValues };\n","import { collectMotionValues } from './index.mjs';\nimport { useCombineMotionValues } from './use-combine-values.mjs';\n\nfunction useComputed(compute) {\n    /**\n     * Open session of collectMotionValues. Any MotionValue that calls get()\n     * will be saved into this array.\n     */\n    collectMotionValues.current = [];\n    compute();\n    const value = useCombineMotionValues(collectMotionValues.current, compute);\n    /**\n     * Synchronously close session of collectMotionValues.\n     */\n    collectMotionValues.current = undefined;\n    return value;\n}\n\nexport { useComputed };\n","import { transform } from '../utils/transform.mjs';\nimport { useCombineMotionValues } from './use-combine-values.mjs';\nimport { useConstant } from '../utils/use-constant.mjs';\nimport { useComputed } from './use-computed.mjs';\n\nfunction useTransform(input, inputRangeOrTransformer, outputRange, options) {\n    if (typeof input === \"function\") {\n        return useComputed(input);\n    }\n    const transformer = typeof inputRangeOrTransformer === \"function\"\n        ? inputRangeOrTransformer\n        : transform(inputRangeOrTransformer, outputRange, options);\n    return Array.isArray(input)\n        ? useListTransform(input, transformer)\n        : useListTransform([input], ([latest]) => transformer(latest));\n}\nfunction useListTransform(values, transformer) {\n    const latest = useConstant(() => []);\n    return useCombineMotionValues(values, () => {\n        latest.length = 0;\n        const numValues = values.length;\n        for (let i = 0; i < numValues; i++) {\n            latest[i] = values[i].get();\n        }\n        return transformer(latest);\n    });\n}\n\nexport { useTransform };\n","import { invariant } from '../../../utils/errors.mjs';\n\nfunction resolveElements(elements, scope, selectorCache) {\n    var _a;\n    if (typeof elements === \"string\") {\n        let root = document;\n        if (scope) {\n            invariant(Boolean(scope.current), \"Scope provided, but no element detected.\");\n            root = scope.current;\n        }\n        if (selectorCache) {\n            (_a = selectorCache[elements]) !== null && _a !== void 0 ? _a : (selectorCache[elements] = root.querySelectorAll(elements));\n            elements = selectorCache[elements];\n        }\n        else {\n            elements = root.querySelectorAll(elements);\n        }\n    }\n    else if (elements instanceof Element) {\n        elements = [elements];\n    }\n    /**\n     * Return an empty array\n     */\n    return Array.from(elements || []);\n}\n\nexport { resolveElements };\n","import { useState } from 'react';\nimport { initPrefersReducedMotion } from './index.mjs';\nimport { warnOnce } from '../warn-once.mjs';\nimport { hasReducedMotionListener, prefersReducedMotion } from './state.mjs';\n\n/**\n * A hook that returns `true` if we should be using reduced motion based on the current device's Reduced Motion setting.\n *\n * This can be used to implement changes to your UI based on Reduced Motion. For instance, replacing motion-sickness inducing\n * `x`/`y` animations with `opacity`, disabling the autoplay of background videos, or turning off parallax motion.\n *\n * It will actively respond to changes and re-render your components with the latest setting.\n *\n * ```jsx\n * export function Sidebar({ isOpen }) {\n *   const shouldReduceMotion = useReducedMotion()\n *   const closedX = shouldReduceMotion ? 0 : \"-100%\"\n *\n *   return (\n *     <motion.div animate={{\n *       opacity: isOpen ? 1 : 0,\n *       x: isOpen ? 0 : closedX\n *     }} />\n *   )\n * }\n * ```\n *\n * @return boolean\n *\n * @public\n */\nfunction useReducedMotion() {\n    /**\n     * Lazy initialisation of prefersReducedMotion\n     */\n    !hasReducedMotionListener.current && initPrefersReducedMotion();\n    const [shouldReduceMotion] = useState(prefersReducedMotion.current);\n    if (process.env.NODE_ENV !== \"production\") {\n        warnOnce(shouldReduceMotion !== true, \"You have Reduced Motion enabled on your device. Animations may not appear as expected.\");\n    }\n    /**\n     * TODO See if people miss automatically updating shouldReduceMotion setting\n     */\n    return shouldReduceMotion;\n}\n\nexport { useReducedMotion };\n","function isDOMKeyframes(keyframes) {\n    return typeof keyframes === \"object\" && !Array.isArray(keyframes);\n}\n\nexport { isDOMKeyframes };\n","import { isSVGElement } from '../../render/dom/utils/is-svg-element.mjs';\nimport { SVGVisualElement } from '../../render/svg/SVGVisualElement.mjs';\nimport { HTMLVisualElement } from '../../render/html/HTMLVisualElement.mjs';\nimport { visualElementStore } from '../../render/store.mjs';\n\nfunction createVisualElement(element) {\n    const options = {\n        presenceContext: null,\n        props: {},\n        visualState: {\n            renderState: {\n                transform: {},\n                transformOrigin: {},\n                style: {},\n                vars: {},\n                attrs: {},\n            },\n            latestValues: {},\n        },\n    };\n    const node = isSVGElement(element)\n        ? new SVGVisualElement(options, {\n            enableHardwareAcceleration: false,\n        })\n        : new HTMLVisualElement(options, {\n            enableHardwareAcceleration: true,\n        });\n    node.mount(element);\n    visualElementStore.set(element, node);\n}\n\nexport { createVisualElement };\n","import { spring } from '../../animation/generators/spring/index.mjs';\nimport { calcGeneratorDuration, maxGeneratorDuration } from '../../animation/generators/utils/calc-duration.mjs';\nimport { millisecondsToSeconds } from '../../utils/time-conversion.mjs';\n\n/**\n * Create a progress => progress easing function from a generator.\n */\nfunction createGeneratorEasing(options, scale = 100) {\n    const generator = spring({ keyframes: [0, scale], ...options });\n    const duration = Math.min(calcGeneratorDuration(generator), maxGeneratorDuration);\n    return {\n        type: \"keyframes\",\n        ease: (progress) => generator.next(duration * progress).value / scale,\n        duration: millisecondsToSeconds(duration),\n    };\n}\n\nexport { createGeneratorEasing };\n","/**\n * Given a absolute or relative time definition and current/prev time state of the sequence,\n * calculate an absolute time for the next keyframes.\n */\nfunction calcNextTime(current, next, prev, labels) {\n    var _a;\n    if (typeof next === \"number\") {\n        return next;\n    }\n    else if (next.startsWith(\"-\") || next.startsWith(\"+\")) {\n        return Math.max(0, current + parseFloat(next));\n    }\n    else if (next === \"<\") {\n        return prev;\n    }\n    else {\n        return (_a = labels.get(next)) !== null && _a !== void 0 ? _a : current;\n    }\n}\n\nexport { calcNextTime };\n","const wrap = (min, max, v) => {\n    const rangeSize = max - min;\n    return ((((v - min) % rangeSize) + rangeSize) % rangeSize) + min;\n};\n\nexport { wrap };\n","import { wrap } from '../../utils/wrap.mjs';\nimport { isEasingArray } from './is-easing-array.mjs';\n\nfunction getEasingForSegment(easing, i) {\n    return isEasingArray(easing) ? easing[wrap(0, easing.length, i)] : easing;\n}\n\nexport { getEasingForSegment };\n","import { getEasingForSegment } from '../../../easing/utils/get-easing-for-segment.mjs';\nimport { removeItem } from '../../../utils/array.mjs';\nimport { mixNumber } from '../../../utils/mix/number.mjs';\n\nfunction eraseKeyframes(sequence, startTime, endTime) {\n    for (let i = 0; i < sequence.length; i++) {\n        const keyframe = sequence[i];\n        if (keyframe.at > startTime && keyframe.at < endTime) {\n            removeItem(sequence, keyframe);\n            // If we remove this item we have to push the pointer back one\n            i--;\n        }\n    }\n}\nfunction addKeyframes(sequence, keyframes, easing, offset, startTime, endTime) {\n    /**\n     * Erase every existing value between currentTime and targetTime,\n     * this will essentially splice this timeline into any currently\n     * defined ones.\n     */\n    eraseKeyframes(sequence, startTime, endTime);\n    for (let i = 0; i < keyframes.length; i++) {\n        sequence.push({\n            value: keyframes[i],\n            at: mixNumber(startTime, endTime, offset[i]),\n            easing: getEasingForSegment(easing, i),\n        });\n    }\n}\n\nexport { addKeyframes, eraseKeyframes };\n","function compareByTime(a, b) {\n    if (a.at === b.at) {\n        if (a.value === null)\n            return 1;\n        if (b.value === null)\n            return -1;\n        return 0;\n    }\n    else {\n        return a.at - b.at;\n    }\n}\n\nexport { compareByTime };\n","import { createGeneratorEasing } from '../../easing/utils/create-generator-easing.mjs';\nimport { resolveElements } from '../../render/dom/utils/resolve-element.mjs';\nimport { defaultOffset } from '../../utils/offsets/default.mjs';\nimport { fillOffset } from '../../utils/offsets/fill.mjs';\nimport { progress } from '../../utils/progress.mjs';\nimport { secondsToMilliseconds } from '../../utils/time-conversion.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\nimport { calcNextTime } from './utils/calc-time.mjs';\nimport { addKeyframes } from './utils/edit.mjs';\nimport { compareByTime } from './utils/sort.mjs';\n\nconst defaultSegmentEasing = \"easeInOut\";\nfunction createAnimationsFromSequence(sequence, { defaultTransition = {}, ...sequenceTransition } = {}, scope) {\n    const defaultDuration = defaultTransition.duration || 0.3;\n    const animationDefinitions = new Map();\n    const sequences = new Map();\n    const elementCache = {};\n    const timeLabels = new Map();\n    let prevTime = 0;\n    let currentTime = 0;\n    let totalDuration = 0;\n    /**\n     * Build the timeline by mapping over the sequence array and converting\n     * the definitions into keyframes and offsets with absolute time values.\n     * These will later get converted into relative offsets in a second pass.\n     */\n    for (let i = 0; i < sequence.length; i++) {\n        const segment = sequence[i];\n        /**\n         * If this is a timeline label, mark it and skip the rest of this iteration.\n         */\n        if (typeof segment === \"string\") {\n            timeLabels.set(segment, currentTime);\n            continue;\n        }\n        else if (!Array.isArray(segment)) {\n            timeLabels.set(segment.name, calcNextTime(currentTime, segment.at, prevTime, timeLabels));\n            continue;\n        }\n        let [subject, keyframes, transition = {}] = segment;\n        /**\n         * If a relative or absolute time value has been specified we need to resolve\n         * it in relation to the currentTime.\n         */\n        if (transition.at !== undefined) {\n            currentTime = calcNextTime(currentTime, transition.at, prevTime, timeLabels);\n        }\n        /**\n         * Keep track of the maximum duration in this definition. This will be\n         * applied to currentTime once the definition has been parsed.\n         */\n        let maxDuration = 0;\n        const resolveValueSequence = (valueKeyframes, valueTransition, valueSequence, elementIndex = 0, numElements = 0) => {\n            const valueKeyframesAsList = keyframesAsList(valueKeyframes);\n            const { delay = 0, times = defaultOffset(valueKeyframesAsList), type = \"keyframes\", ...remainingTransition } = valueTransition;\n            let { ease = defaultTransition.ease || \"easeOut\", duration } = valueTransition;\n            /**\n             * Resolve stagger() if defined.\n             */\n            const calculatedDelay = typeof delay === \"function\"\n                ? delay(elementIndex, numElements)\n                : delay;\n            /**\n             * If this animation should and can use a spring, generate a spring easing function.\n             */\n            const numKeyframes = valueKeyframesAsList.length;\n            if (numKeyframes <= 2 && type === \"spring\") {\n                /**\n                 * As we're creating an easing function from a spring,\n                 * ideally we want to generate it using the real distance\n                 * between the two keyframes. However this isn't always\n                 * possible - in these situations we use 0-100.\n                 */\n                let absoluteDelta = 100;\n                if (numKeyframes === 2 &&\n                    isNumberKeyframesArray(valueKeyframesAsList)) {\n                    const delta = valueKeyframesAsList[1] - valueKeyframesAsList[0];\n                    absoluteDelta = Math.abs(delta);\n                }\n                const springTransition = { ...remainingTransition };\n                if (duration !== undefined) {\n                    springTransition.duration = secondsToMilliseconds(duration);\n                }\n                const springEasing = createGeneratorEasing(springTransition, absoluteDelta);\n                ease = springEasing.ease;\n                duration = springEasing.duration;\n            }\n            duration !== null && duration !== void 0 ? duration : (duration = defaultDuration);\n            const startTime = currentTime + calculatedDelay;\n            const targetTime = startTime + duration;\n            /**\n             * If there's only one time offset of 0, fill in a second with length 1\n             */\n            if (times.length === 1 && times[0] === 0) {\n                times[1] = 1;\n            }\n            /**\n             * Fill out if offset if fewer offsets than keyframes\n             */\n            const remainder = times.length - valueKeyframesAsList.length;\n            remainder > 0 && fillOffset(times, remainder);\n            /**\n             * If only one value has been set, ie [1], push a null to the start of\n             * the keyframe array. This will let us mark a keyframe at this point\n             * that will later be hydrated with the previous value.\n             */\n            valueKeyframesAsList.length === 1 &&\n                valueKeyframesAsList.unshift(null);\n            /**\n             * Add keyframes, mapping offsets to absolute time.\n             */\n            addKeyframes(valueSequence, valueKeyframesAsList, ease, times, startTime, targetTime);\n            maxDuration = Math.max(calculatedDelay + duration, maxDuration);\n            totalDuration = Math.max(targetTime, totalDuration);\n        };\n        if (isMotionValue(subject)) {\n            const subjectSequence = getSubjectSequence(subject, sequences);\n            resolveValueSequence(keyframes, transition, getValueSequence(\"default\", subjectSequence));\n        }\n        else {\n            /**\n             * Find all the elements specified in the definition and parse value\n             * keyframes from their timeline definitions.\n             */\n            const elements = resolveElements(subject, scope, elementCache);\n            const numElements = elements.length;\n            /**\n             * For every element in this segment, process the defined values.\n             */\n            for (let elementIndex = 0; elementIndex < numElements; elementIndex++) {\n                /**\n                 * Cast necessary, but we know these are of this type\n                 */\n                keyframes = keyframes;\n                transition = transition;\n                const element = elements[elementIndex];\n                const subjectSequence = getSubjectSequence(element, sequences);\n                for (const key in keyframes) {\n                    resolveValueSequence(keyframes[key], getValueTransition(transition, key), getValueSequence(key, subjectSequence), elementIndex, numElements);\n                }\n            }\n        }\n        prevTime = currentTime;\n        currentTime += maxDuration;\n    }\n    /**\n     * For every element and value combination create a new animation.\n     */\n    sequences.forEach((valueSequences, element) => {\n        for (const key in valueSequences) {\n            const valueSequence = valueSequences[key];\n            /**\n             * Arrange all the keyframes in ascending time order.\n             */\n            valueSequence.sort(compareByTime);\n            const keyframes = [];\n            const valueOffset = [];\n            const valueEasing = [];\n            /**\n             * For each keyframe, translate absolute times into\n             * relative offsets based on the total duration of the timeline.\n             */\n            for (let i = 0; i < valueSequence.length; i++) {\n                const { at, value, easing } = valueSequence[i];\n                keyframes.push(value);\n                valueOffset.push(progress(0, totalDuration, at));\n                valueEasing.push(easing || \"easeOut\");\n            }\n            /**\n             * If the first keyframe doesn't land on offset: 0\n             * provide one by duplicating the initial keyframe. This ensures\n             * it snaps to the first keyframe when the animation starts.\n             */\n            if (valueOffset[0] !== 0) {\n                valueOffset.unshift(0);\n                keyframes.unshift(keyframes[0]);\n                valueEasing.unshift(defaultSegmentEasing);\n            }\n            /**\n             * If the last keyframe doesn't land on offset: 1\n             * provide one with a null wildcard value. This will ensure it\n             * stays static until the end of the animation.\n             */\n            if (valueOffset[valueOffset.length - 1] !== 1) {\n                valueOffset.push(1);\n                keyframes.push(null);\n            }\n            if (!animationDefinitions.has(element)) {\n                animationDefinitions.set(element, {\n                    keyframes: {},\n                    transition: {},\n                });\n            }\n            const definition = animationDefinitions.get(element);\n            definition.keyframes[key] = keyframes;\n            definition.transition[key] = {\n                ...defaultTransition,\n                duration: totalDuration,\n                ease: valueEasing,\n                times: valueOffset,\n                ...sequenceTransition,\n            };\n        }\n    });\n    return animationDefinitions;\n}\nfunction getSubjectSequence(subject, sequences) {\n    !sequences.has(subject) && sequences.set(subject, {});\n    return sequences.get(subject);\n}\nfunction getValueSequence(name, sequences) {\n    if (!sequences[name])\n        sequences[name] = [];\n    return sequences[name];\n}\nfunction keyframesAsList(keyframes) {\n    return Array.isArray(keyframes) ? keyframes : [keyframes];\n}\nfunction getValueTransition(transition, key) {\n    return transition[key]\n        ? {\n            ...transition,\n            ...transition[key],\n        }\n        : { ...transition };\n}\nconst isNumber = (keyframe) => typeof keyframe === \"number\";\nconst isNumberKeyframesArray = (keyframes) => keyframes.every(isNumber);\n\nexport { createAnimationsFromSequence, getValueTransition };\n","import { resolveElements } from '../render/dom/utils/resolve-element.mjs';\nimport { visualElementStore } from '../render/store.mjs';\nimport { invariant } from '../utils/errors.mjs';\nimport { GroupPlaybackControls } from './GroupPlaybackControls.mjs';\nimport { isDOMKeyframes } from './utils/is-dom-keyframes.mjs';\nimport { animateTarget } from './interfaces/visual-element-target.mjs';\nimport { createVisualElement } from './utils/create-visual-element.mjs';\nimport { animateSingleValue } from './interfaces/single-value.mjs';\nimport { createAnimationsFromSequence } from './sequence/create.mjs';\nimport { isMotionValue } from '../value/utils/is-motion-value.mjs';\n\nfunction animateElements(elementOrSelector, keyframes, options, scope) {\n    const elements = resolveElements(elementOrSelector, scope);\n    const numElements = elements.length;\n    invariant(Boolean(numElements), \"No valid element provided.\");\n    const animations = [];\n    for (let i = 0; i < numElements; i++) {\n        const element = elements[i];\n        /**\n         * Check each element for an associated VisualElement. If none exists,\n         * we need to create one.\n         */\n        if (!visualElementStore.has(element)) {\n            /**\n             * TODO: We only need render-specific parts of the VisualElement.\n             * With some additional work the size of the animate() function\n             * could be reduced significantly.\n             */\n            createVisualElement(element);\n        }\n        const visualElement = visualElementStore.get(element);\n        const transition = { ...options };\n        /**\n         * Resolve stagger function if provided.\n         */\n        if (typeof transition.delay === \"function\") {\n            transition.delay = transition.delay(i, numElements);\n        }\n        animations.push(...animateTarget(visualElement, { ...keyframes, transition }, {}));\n    }\n    return new GroupPlaybackControls(animations);\n}\nconst isSequence = (value) => Array.isArray(value) && Array.isArray(value[0]);\nfunction animateSequence(sequence, options, scope) {\n    const animations = [];\n    const animationDefinitions = createAnimationsFromSequence(sequence, options, scope);\n    animationDefinitions.forEach(({ keyframes, transition }, subject) => {\n        let animation;\n        if (isMotionValue(subject)) {\n            animation = animateSingleValue(subject, keyframes.default, transition.default);\n        }\n        else {\n            animation = animateElements(subject, keyframes, transition);\n        }\n        animations.push(animation);\n    });\n    return new GroupPlaybackControls(animations);\n}\nconst createScopedAnimate = (scope) => {\n    /**\n     * Implementation\n     */\n    function scopedAnimate(valueOrElementOrSequence, keyframes, options) {\n        let animation;\n        if (isSequence(valueOrElementOrSequence)) {\n            animation = animateSequence(valueOrElementOrSequence, keyframes, scope);\n        }\n        else if (isDOMKeyframes(keyframes)) {\n            animation = animateElements(valueOrElementOrSequence, keyframes, options, scope);\n        }\n        else {\n            animation = animateSingleValue(valueOrElementOrSequence, keyframes, options);\n        }\n        if (scope) {\n            scope.animations.push(animation);\n        }\n        return animation;\n    }\n    return scopedAnimate;\n};\nconst animate = createScopedAnimate();\n\nexport { animate, createScopedAnimate };\n","import $HgANd$react from \"react\";\n\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ \nconst $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c = typeof document !== \"undefined\" ? (0, $HgANd$react).useLayoutEffect : ()=>{};\n\n\nexport {$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c as useLayoutEffect};\n//# sourceMappingURL=useLayoutEffect.mjs.map\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ /**\n * Calls all functions in the order they were chained with the same arguments.\n */ function $ff5963eb1fccf552$export$e08e3b67e392101e(...callbacks) {\n    return (...args)=>{\n        for (let callback of callbacks)if (typeof callback === \"function\") callback(...args);\n    };\n}\n\n\nexport {$ff5963eb1fccf552$export$e08e3b67e392101e as chain};\n//# sourceMappingURL=chain.mjs.map\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ function $c87311424ea30a05$var$testUserAgent(re) {\n    var _window_navigator_userAgentData;\n    if (typeof window === \"undefined\" || window.navigator == null) return false;\n    return ((_window_navigator_userAgentData = window.navigator[\"userAgentData\"]) === null || _window_navigator_userAgentData === void 0 ? void 0 : _window_navigator_userAgentData.brands.some((brand)=>re.test(brand.brand))) || re.test(window.navigator.userAgent);\n}\nfunction $c87311424ea30a05$var$testPlatform(re) {\n    var _window_navigator_userAgentData;\n    return typeof window !== \"undefined\" && window.navigator != null ? re.test(((_window_navigator_userAgentData = window.navigator[\"userAgentData\"]) === null || _window_navigator_userAgentData === void 0 ? void 0 : _window_navigator_userAgentData.platform) || window.navigator.platform) : false;\n}\nfunction $c87311424ea30a05$export$9ac100e40613ea10() {\n    return $c87311424ea30a05$var$testPlatform(/^Mac/i);\n}\nfunction $c87311424ea30a05$export$186c6964ca17d99() {\n    return $c87311424ea30a05$var$testPlatform(/^iPhone/i);\n}\nfunction $c87311424ea30a05$export$7bef049ce92e4224() {\n    return $c87311424ea30a05$var$testPlatform(/^iPad/i) || // iPadOS 13 lies and says it's a Mac, but we can distinguish by detecting touch support.\n    $c87311424ea30a05$export$9ac100e40613ea10() && navigator.maxTouchPoints > 1;\n}\nfunction $c87311424ea30a05$export$fedb369cb70207f1() {\n    return $c87311424ea30a05$export$186c6964ca17d99() || $c87311424ea30a05$export$7bef049ce92e4224();\n}\nfunction $c87311424ea30a05$export$e1865c3bedcd822b() {\n    return $c87311424ea30a05$export$9ac100e40613ea10() || $c87311424ea30a05$export$fedb369cb70207f1();\n}\nfunction $c87311424ea30a05$export$78551043582a6a98() {\n    return $c87311424ea30a05$var$testUserAgent(/AppleWebKit/i) && !$c87311424ea30a05$export$6446a186d09e379e();\n}\nfunction $c87311424ea30a05$export$6446a186d09e379e() {\n    return $c87311424ea30a05$var$testUserAgent(/Chrome/i);\n}\nfunction $c87311424ea30a05$export$a11b0059900ceec8() {\n    return $c87311424ea30a05$var$testUserAgent(/Android/i);\n}\nfunction $c87311424ea30a05$export$b7d78993b74f766d() {\n    return $c87311424ea30a05$var$testUserAgent(/Firefox/i);\n}\n\n\nexport {$c87311424ea30a05$export$9ac100e40613ea10 as isMac, $c87311424ea30a05$export$186c6964ca17d99 as isIPhone, $c87311424ea30a05$export$7bef049ce92e4224 as isIPad, $c87311424ea30a05$export$fedb369cb70207f1 as isIOS, $c87311424ea30a05$export$e1865c3bedcd822b as isAppleDevice, $c87311424ea30a05$export$78551043582a6a98 as isWebKit, $c87311424ea30a05$export$6446a186d09e379e as isChrome, $c87311424ea30a05$export$a11b0059900ceec8 as isAndroid, $c87311424ea30a05$export$b7d78993b74f766d as isFirefox};\n//# sourceMappingURL=platform.mjs.map\n","/*\n * Copyright 2024 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ function $cc38e7bd3fc7b213$export$2bb74740c4e19def(node, checkForOverflow) {\n    let style = window.getComputedStyle(node);\n    let isScrollable = /(auto|scroll)/.test(style.overflow + style.overflowX + style.overflowY);\n    if (isScrollable && checkForOverflow) isScrollable = node.scrollHeight !== node.clientHeight || node.scrollWidth !== node.clientWidth;\n    return isScrollable;\n}\n\n\nexport {$cc38e7bd3fc7b213$export$2bb74740c4e19def as isScrollable};\n//# sourceMappingURL=isScrollable.mjs.map\n","import {isScrollable as $cc38e7bd3fc7b213$export$2bb74740c4e19def} from \"./isScrollable.mjs\";\n\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ \nfunction $62d8ded9296f3872$export$cfa2225e87938781(node, checkForOverflow) {\n    let scrollableNode = node;\n    if ((0, $cc38e7bd3fc7b213$export$2bb74740c4e19def)(scrollableNode, checkForOverflow)) scrollableNode = scrollableNode.parentElement;\n    while(scrollableNode && !(0, $cc38e7bd3fc7b213$export$2bb74740c4e19def)(scrollableNode, checkForOverflow))scrollableNode = scrollableNode.parentElement;\n    return scrollableNode || document.scrollingElement || document.documentElement;\n}\n\n\nexport {$62d8ded9296f3872$export$cfa2225e87938781 as getScrollParent};\n//# sourceMappingURL=getScrollParent.mjs.map\n","import React2, { createContext, forwardRef, useRef, useEffect, useImperativeHandle, useMemo, Children, cloneElement, useLayoutEffect, useCallback, useState, useContext } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useMotionValue, useReducedMotion, useTransform, animate, motion, AnimatePresence } from 'framer-motion';\nimport { useLayoutEffect as useLayoutEffect$1, isIOS, chain, getScrollParent } from '@react-aria/utils';\n\n// src/sheet.tsx\n\n// src/constants.ts\nvar MAX_HEIGHT = \"calc(100% - env(safe-area-inset-top) - 34px)\";\nvar IS_SSR = typeof window === \"undefined\";\nvar DEFAULT_TWEEN_CONFIG = {\n  ease: \"easeOut\",\n  duration: 0.2\n};\nvar REDUCED_MOTION_TWEEN_CONFIG = {\n  ease: \"linear\",\n  duration: 0.01\n};\nvar DRAG_CLOSE_THRESHOLD = 0.6;\nvar DRAG_VELOCITY_THRESHOLD = 500;\n\n// src/utils.ts\nfunction getClosest(nums, goal) {\n  let closest = nums[0];\n  let minDifference = Math.abs(nums[0] - goal);\n  for (let i = 1; i < nums.length; i++) {\n    const difference = Math.abs(nums[i] - goal);\n    if (difference < minDifference) {\n      closest = nums[i];\n      minDifference = difference;\n    }\n  }\n  return closest;\n}\nfunction applyRootStyles(rootId) {\n  const body = document.querySelector(\"body\");\n  const root = document.querySelector(`#${rootId}`);\n  if (root) {\n    const p = 24;\n    const h = window.innerHeight;\n    const s = (h - p) / h;\n    body.style.backgroundColor = \"#000\";\n    root.style.overflow = \"hidden\";\n    root.style.willChange = \"transform\";\n    root.style.transition = \"transform 200ms ease-in-out, border-radius 200ms linear\";\n    root.style.transform = `translateY(calc(env(safe-area-inset-top) + ${p / 2}px)) scale(${s})`;\n    root.style.borderTopRightRadius = \"10px\";\n    root.style.borderTopLeftRadius = \"10px\";\n  }\n}\nfunction cleanupRootStyles(rootId) {\n  const body = document.querySelector(\"body\");\n  const root = document.getElementById(rootId);\n  function onTransitionEnd() {\n    root.style.removeProperty(\"overflow\");\n    root.style.removeProperty(\"will-change\");\n    root.style.removeProperty(\"transition\");\n    body.style.removeProperty(\"background-color\");\n    root.removeEventListener(\"transitionend\", onTransitionEnd);\n  }\n  if (root) {\n    root.style.removeProperty(\"border-top-right-radius\");\n    root.style.removeProperty(\"border-top-left-radius\");\n    root.style.removeProperty(\"transform\");\n    root.addEventListener(\"transitionend\", onTransitionEnd);\n  }\n}\nfunction inDescendingOrder(arr) {\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i + 1] > arr[i])\n      return false;\n  }\n  return true;\n}\nfunction validateSnapTo({\n  snapTo,\n  sheetHeight\n}) {\n  if (snapTo < 0) {\n    console.warn(\n      `Snap point is out of bounds. Sheet height is ${sheetHeight} but snap point is ${sheetHeight + Math.abs(snapTo)}.`\n    );\n  }\n  return Math.max(Math.round(snapTo), 0);\n}\nfunction mergeRefs(refs) {\n  return (value) => {\n    refs.forEach((ref) => {\n      if (typeof ref === \"function\") {\n        ref(value);\n      } else if (ref) {\n        ref.current = value;\n      }\n    });\n  };\n}\nfunction isTouchDevice() {\n  if (typeof window === \"undefined\")\n    return false;\n  return \"ontouchstart\" in window || navigator.maxTouchPoints > 0;\n}\n\n// src/hooks.tsx\nvar useIsomorphicLayoutEffect = IS_SSR ? useEffect : useLayoutEffect;\nfunction useModalEffect(isOpen, rootId) {\n  const prevOpen = usePrevious(isOpen);\n  useEffect(() => {\n    if (rootId && !prevOpen && isOpen) {\n      applyRootStyles(rootId);\n    } else if (rootId && !isOpen && prevOpen) {\n      cleanupRootStyles(rootId);\n    }\n  }, [isOpen, prevOpen]);\n  useEffect(() => {\n    return () => {\n      if (rootId && isOpen)\n        cleanupRootStyles(rootId);\n    };\n  }, [isOpen]);\n}\nfunction useEventCallbacks(isOpen, callbacks) {\n  const prevOpen = usePrevious(isOpen);\n  const didOpen = useRef(false);\n  const handleAnimationComplete = useCallback(() => {\n    var _a, _b, _c, _d;\n    if (!didOpen.current) {\n      (_b = (_a = callbacks.current).onOpenEnd) == null ? void 0 : _b.call(_a);\n      didOpen.current = true;\n    } else {\n      (_d = (_c = callbacks.current).onCloseEnd) == null ? void 0 : _d.call(_c);\n      didOpen.current = false;\n    }\n  }, [isOpen, prevOpen]);\n  useEffect(() => {\n    var _a, _b, _c, _d;\n    if (!prevOpen && isOpen) {\n      (_b = (_a = callbacks.current).onOpenStart) == null ? void 0 : _b.call(_a);\n    } else if (!isOpen && prevOpen) {\n      (_d = (_c = callbacks.current).onCloseStart) == null ? void 0 : _d.call(_c);\n    }\n  }, [isOpen, prevOpen]);\n  return { handleAnimationComplete };\n}\nfunction useDimensions() {\n  const [dimensions, setDimensions] = useState({ height: 0, width: 0 });\n  useIsomorphicLayoutEffect(() => {\n    function handler() {\n      setDimensions({\n        height: window.innerHeight,\n        width: window.innerWidth\n      });\n    }\n    handler();\n    window.addEventListener(\"resize\", handler);\n    return () => {\n      window.removeEventListener(\"resize\", handler);\n    };\n  }, []);\n  return dimensions;\n}\nfunction usePrevious(state) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = state;\n  });\n  return ref.current;\n}\nfunction useEffectEvent(handler) {\n  const handlerRef = useRef();\n  useIsomorphicLayoutEffect(() => {\n    handlerRef.current = handler;\n  });\n  return useCallback((...args) => {\n    const fn = handlerRef.current;\n    return fn == null ? void 0 : fn(...args);\n  }, []);\n}\nvar constraints = { bottom: 0, top: 0, left: 0, right: 0 };\nfunction useDragConstraints() {\n  const constraintsRef = useRef(null);\n  const onMeasureDragConstraints = useCallback(() => constraints, []);\n  return { constraintsRef, onMeasureDragConstraints };\n}\nvar SheetContext = createContext(\n  void 0\n);\nvar useSheetContext = () => {\n  const context = useContext(SheetContext);\n  if (!context)\n    throw Error(\"Sheet context error\");\n  return context;\n};\nvar SheetScrollerContext = createContext(void 0);\nfunction SheetScrollerContextProvider({\n  children\n}) {\n  const sheetContext = useSheetContext();\n  const [disableDrag, setDisableDrag] = useState(!!sheetContext.disableDrag);\n  function setDragEnabled() {\n    if (!sheetContext.disableDrag)\n      setDisableDrag(false);\n  }\n  function setDragDisabled() {\n    if (!disableDrag)\n      setDisableDrag(true);\n  }\n  return /* @__PURE__ */ React2.createElement(\n    SheetScrollerContext.Provider,\n    {\n      value: { disableDrag, setDragEnabled, setDragDisabled }\n    },\n    children\n  );\n}\nvar useSheetScrollerContext = () => {\n  const context = useContext(SheetScrollerContext);\n  if (!context)\n    throw Error(\"Sheet scroller context error\");\n  return context;\n};\nvar visualViewport = typeof window !== \"undefined\" ? window.visualViewport : void 0;\nvar nonTextInputTypes = /* @__PURE__ */ new Set([\n  \"checkbox\",\n  \"radio\",\n  \"range\",\n  \"color\",\n  \"file\",\n  \"image\",\n  \"button\",\n  \"submit\",\n  \"reset\"\n]);\nvar preventScrollCount = 0;\nvar restore;\nfunction usePreventScroll(options = {}) {\n  const { isDisabled } = options;\n  useLayoutEffect$1(() => {\n    if (isDisabled) {\n      return;\n    }\n    preventScrollCount++;\n    if (preventScrollCount === 1) {\n      if (isIOS()) {\n        restore = preventScrollMobileSafari();\n      } else {\n        restore = preventScrollStandard();\n      }\n    }\n    return () => {\n      preventScrollCount--;\n      if (preventScrollCount === 0) {\n        restore();\n      }\n    };\n  }, [isDisabled]);\n}\nfunction preventScrollStandard() {\n  return chain(\n    setStyle(\n      document.documentElement,\n      \"paddingRight\",\n      `${window.innerWidth - document.documentElement.clientWidth}px`\n    ),\n    setStyle(document.documentElement, \"overflow\", \"hidden\")\n  );\n}\nfunction preventScrollMobileSafari() {\n  let scrollable;\n  let lastY = 0;\n  const onTouchStart = (e) => {\n    scrollable = getScrollParent(e.target);\n    if (scrollable === document.documentElement && scrollable === document.body) {\n      return;\n    }\n    lastY = e.changedTouches[0].pageY;\n  };\n  const onTouchMove = (e) => {\n    if (scrollable === void 0) {\n      return;\n    }\n    if (scrollable === document.documentElement || scrollable === document.body) {\n      e.preventDefault();\n      return;\n    }\n    const y = e.changedTouches[0].pageY;\n    const scrollTop = scrollable.scrollTop;\n    const bottom = scrollable.scrollHeight - scrollable.clientHeight;\n    if (bottom === 0) {\n      return;\n    }\n    if (scrollTop <= 0 && y > lastY || scrollTop >= bottom && y < lastY) {\n      e.preventDefault();\n    }\n    lastY = y;\n  };\n  const onTouchEnd = (e) => {\n    const target = e.target;\n    if (willOpenKeyboard(target) && target !== document.activeElement) {\n      e.preventDefault();\n      target.style.transform = \"translateY(-2000px)\";\n      target.focus();\n      requestAnimationFrame(() => {\n        target.style.transform = \"\";\n      });\n    }\n  };\n  const onFocus = (e) => {\n    const target = e.target;\n    if (willOpenKeyboard(target)) {\n      target.style.transform = \"translateY(-2000px)\";\n      requestAnimationFrame(() => {\n        target.style.transform = \"\";\n        if (visualViewport) {\n          if (visualViewport.height < window.innerHeight) {\n            requestAnimationFrame(() => {\n              scrollIntoView(target);\n            });\n          } else {\n            visualViewport.addEventListener(\n              \"resize\",\n              () => {\n                scrollIntoView(target);\n              },\n              { once: true }\n            );\n          }\n        }\n      });\n    }\n  };\n  const onWindowScroll = () => {\n    window.scrollTo(0, 0);\n  };\n  const scrollX = window.pageXOffset;\n  const scrollY = window.pageYOffset;\n  const restoreStyles = chain(\n    setStyle(\n      document.documentElement,\n      \"paddingRight\",\n      `${window.innerWidth - document.documentElement.clientWidth}px`\n    ),\n    setStyle(document.documentElement, \"overflow\", \"hidden\"),\n    setStyle(document.body, \"marginTop\", `-${scrollY}px`)\n  );\n  window.scrollTo(0, 0);\n  const removeEvents = chain(\n    addEvent(document, \"touchstart\", onTouchStart, {\n      passive: false,\n      capture: true\n    }),\n    addEvent(document, \"touchmove\", onTouchMove, {\n      passive: false,\n      capture: true\n    }),\n    addEvent(document, \"touchend\", onTouchEnd, {\n      passive: false,\n      capture: true\n    }),\n    addEvent(document, \"focus\", onFocus, true),\n    addEvent(window, \"scroll\", onWindowScroll)\n  );\n  return () => {\n    restoreStyles();\n    removeEvents();\n    window.scrollTo(scrollX, scrollY);\n  };\n}\nfunction setStyle(element, style, value) {\n  const cur = element.style[style];\n  element.style[style] = value;\n  return () => {\n    element.style[style] = cur;\n  };\n}\nfunction addEvent(target, event, handler, options) {\n  target.addEventListener(event, handler, options);\n  return () => {\n    target.removeEventListener(event, handler, options);\n  };\n}\nfunction scrollIntoView(target) {\n  const root = document.scrollingElement || document.documentElement;\n  while (target && target !== root) {\n    const scrollable = getScrollParent(target);\n    if (scrollable !== document.documentElement && scrollable !== document.body && scrollable !== target) {\n      const scrollableTop = scrollable.getBoundingClientRect().top;\n      const targetTop = target.getBoundingClientRect().top;\n      if (targetTop > scrollableTop + target.clientHeight) {\n        scrollable.scrollTop += targetTop - scrollableTop;\n      }\n    }\n    target = scrollable.parentElement;\n  }\n}\nfunction willOpenKeyboard(target) {\n  return target instanceof HTMLInputElement && !nonTextInputTypes.has(target.type) || target instanceof HTMLTextAreaElement || target instanceof HTMLElement && target.isContentEditable;\n}\n\n// src/styles.ts\nvar styles = {\n  wrapper: {\n    position: \"fixed\",\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    overflow: \"hidden\",\n    pointerEvents: \"none\"\n  },\n  backdrop: {\n    zIndex: 1,\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    width: \"100%\",\n    height: \"100%\",\n    backgroundColor: \"rgba(0, 0, 0, 0.2)\",\n    touchAction: \"none\",\n    // Disable iOS body scrolling\n    border: \"none\"\n  },\n  container: {\n    zIndex: 2,\n    position: \"absolute\",\n    left: 0,\n    bottom: 0,\n    width: \"100%\",\n    backgroundColor: \"#fff\",\n    borderTopRightRadius: \"8px\",\n    borderTopLeftRadius: \"8px\",\n    boxShadow: \"0px -2px 16px rgba(0, 0, 0, 0.3)\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    pointerEvents: \"auto\"\n  },\n  headerWrapper: {\n    width: \"100%\"\n  },\n  header: {\n    height: \"40px\",\n    width: \"100%\",\n    position: \"relative\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  indicator: {\n    width: \"18px\",\n    height: \"4px\",\n    borderRadius: \"99px\",\n    backgroundColor: \"#ddd\"\n  },\n  content: {\n    flexGrow: 1,\n    display: \"flex\",\n    flexDirection: \"column\",\n    minHeight: \"0px\",\n    position: \"relative\"\n  },\n  scroller: {\n    height: \"100%\",\n    overflowY: \"auto\"\n  }\n};\nvar styles_default = styles;\n\n// src/sheet.tsx\nvar Sheet = forwardRef(\n  ({\n    onOpenStart,\n    onOpenEnd,\n    onClose,\n    onCloseStart,\n    onCloseEnd,\n    onSnap,\n    children,\n    disableScrollLocking = false,\n    isOpen,\n    snapPoints,\n    rootId,\n    mountPoint,\n    style,\n    detent = \"full-height\",\n    initialSnap = 0,\n    disableDrag = false,\n    prefersReducedMotion = false,\n    tweenConfig = DEFAULT_TWEEN_CONFIG,\n    ...rest\n  }, ref) => {\n    const sheetRef = useRef(null);\n    const indicatorRotation = useMotionValue(0);\n    const { height: windowHeight } = useDimensions();\n    const shouldReduceMotion = useReducedMotion();\n    const reduceMotion = Boolean(prefersReducedMotion || shouldReduceMotion);\n    const animationOptions = {\n      type: \"tween\",\n      ...reduceMotion ? REDUCED_MOTION_TWEEN_CONFIG : tweenConfig\n    };\n    const y = useMotionValue(0);\n    const zIndex = useTransform(\n      y,\n      (value) => value + 2 >= windowHeight ? -1 : 9999999\n    );\n    const visibility = useTransform(\n      y,\n      (value) => value + 2 >= windowHeight ? \"hidden\" : \"visible\"\n    );\n    const callbacks = useRef({\n      onOpenStart,\n      onOpenEnd,\n      onCloseStart,\n      onCloseEnd\n    });\n    useIsomorphicLayoutEffect(() => {\n      callbacks.current = {\n        onOpenStart,\n        onOpenEnd,\n        onCloseStart,\n        onCloseEnd\n      };\n    });\n    if (snapPoints) {\n      snapPoints = snapPoints.map((point) => {\n        if (point > 0 && point <= 1)\n          return Math.round(point * windowHeight);\n        return point < 0 ? windowHeight + point : point;\n      });\n      console.assert(\n        inDescendingOrder(snapPoints) || windowHeight === 0,\n        `Snap points need to be in descending order got: [${snapPoints.join(\n          \", \"\n        )}]`\n      );\n    }\n    const onDrag = useEffectEvent((_, { delta }) => {\n      const velocity = y.getVelocity();\n      if (velocity > 0)\n        indicatorRotation.set(10);\n      if (velocity < 0)\n        indicatorRotation.set(-10);\n      y.set(Math.max(y.get() + delta.y, 0));\n    });\n    const onDragStart = useEffectEvent(() => {\n      const focusedElement = document.activeElement;\n      if (!focusedElement || !sheetRef.current)\n        return;\n      const isInput = focusedElement.tagName === \"INPUT\" || focusedElement.tagName === \"TEXTAREA\";\n      if (isInput && sheetRef.current.contains(focusedElement)) {\n        focusedElement.blur();\n      }\n    });\n    const onDragEnd = useEffectEvent((_, { velocity }) => {\n      if (velocity.y > DRAG_VELOCITY_THRESHOLD) {\n        onClose();\n      } else {\n        const sheetHeight = sheetRef.current.getBoundingClientRect().height;\n        const currentY = y.get();\n        let snapTo = 0;\n        if (snapPoints) {\n          const snapToValues = snapPoints.map(\n            (p) => sheetHeight - Math.min(p, sheetHeight)\n          );\n          if (detent === \"content-height\" && !snapToValues.includes(0)) {\n            snapToValues.unshift(0);\n          }\n          snapTo = getClosest(snapToValues, currentY);\n        } else if (currentY / sheetHeight > DRAG_CLOSE_THRESHOLD) {\n          snapTo = sheetHeight;\n        }\n        snapTo = validateSnapTo({ snapTo, sheetHeight });\n        void animate(y, snapTo, animationOptions);\n        if (snapPoints && onSnap) {\n          const snapValue = Math.abs(Math.round(snapPoints[0] - snapTo));\n          const snapIndex = snapPoints.indexOf(getClosest(snapPoints, snapValue));\n          onSnap(snapIndex);\n        }\n        const roundedSheetHeight = Math.round(sheetHeight);\n        const shouldClose = snapTo + 2 >= roundedSheetHeight;\n        if (shouldClose)\n          onClose();\n      }\n      indicatorRotation.set(0);\n    });\n    useEffect(() => {\n      if (!snapPoints || !onSnap)\n        return;\n      const snapIndex = isOpen ? initialSnap : snapPoints.length - 1;\n      onSnap(snapIndex);\n    }, [isOpen]);\n    useImperativeHandle(ref, () => ({\n      y,\n      snapTo: (snapIndex) => {\n        const sheetEl = sheetRef.current;\n        if ((snapPoints == null ? void 0 : snapPoints[snapIndex]) !== void 0 && sheetEl) {\n          const sheetHeight = sheetEl.getBoundingClientRect().height;\n          const snapPoint = snapPoints[snapIndex];\n          const snapTo = validateSnapTo({\n            snapTo: sheetHeight - snapPoint,\n            sheetHeight\n          });\n          void animate(y, snapTo, animationOptions);\n          if (onSnap)\n            onSnap(snapIndex);\n          if (snapTo >= sheetHeight)\n            onClose();\n        }\n      }\n    }));\n    useModalEffect(isOpen, rootId);\n    usePreventScroll({ isDisabled: disableScrollLocking || !isOpen });\n    const dragProps = useMemo(() => {\n      const dragProps2 = {\n        drag: \"y\",\n        dragElastic: 0,\n        dragMomentum: false,\n        dragPropagation: false,\n        onDrag,\n        onDragStart,\n        onDragEnd\n      };\n      return disableDrag ? void 0 : dragProps2;\n    }, [disableDrag, windowHeight]);\n    const context = {\n      y,\n      sheetRef,\n      isOpen,\n      initialSnap,\n      snapPoints,\n      detent,\n      indicatorRotation,\n      callbacks,\n      dragProps,\n      windowHeight,\n      animationOptions,\n      reduceMotion,\n      disableDrag\n    };\n    const sheet = /* @__PURE__ */ React2.createElement(SheetContext.Provider, { value: context }, /* @__PURE__ */ React2.createElement(\n      motion.div,\n      {\n        ...rest,\n        ref,\n        style: { ...styles_default.wrapper, zIndex, visibility, ...style }\n      },\n      /* @__PURE__ */ React2.createElement(AnimatePresence, null, isOpen ? /* @__PURE__ */ React2.createElement(SheetScrollerContextProvider, null, Children.map(\n        children,\n        (child, i) => cloneElement(child, { key: `sheet-child-${i}` })\n      )) : null)\n    ));\n    if (IS_SSR)\n      return sheet;\n    return createPortal(sheet, mountPoint ?? document.body);\n  }\n);\nSheet.displayName = \"Sheet\";\nvar sheet_default = Sheet;\nvar SheetContainer = forwardRef(\n  ({ children, style = {}, className = \"\", ...rest }, ref) => {\n    const {\n      y,\n      isOpen,\n      callbacks,\n      snapPoints,\n      initialSnap = 0,\n      sheetRef,\n      windowHeight,\n      detent,\n      animationOptions,\n      reduceMotion\n    } = useSheetContext();\n    const { handleAnimationComplete } = useEventCallbacks(isOpen, callbacks);\n    const initialY = snapPoints ? snapPoints[0] - snapPoints[initialSnap] : 0;\n    const maxSnapHeight = snapPoints ? snapPoints[0] : null;\n    const height = maxSnapHeight !== null ? `min(${maxSnapHeight}px, ${MAX_HEIGHT})` : MAX_HEIGHT;\n    return /* @__PURE__ */ React2.createElement(\n      motion.div,\n      {\n        ...rest,\n        ref: mergeRefs([sheetRef, ref]),\n        className: `react-modal-sheet-container ${className}`,\n        style: {\n          ...styles_default.container,\n          ...style,\n          ...detent === \"full-height\" && { height },\n          ...detent === \"content-height\" && { maxHeight: height },\n          y\n        },\n        initial: reduceMotion ? false : { y: windowHeight },\n        animate: { y: initialY, transition: animationOptions },\n        exit: { y: windowHeight, transition: animationOptions },\n        onAnimationComplete: handleAnimationComplete\n      },\n      children\n    );\n  }\n);\nSheetContainer.displayName = \"SheetContainer\";\nvar SheetContainer_default = SheetContainer;\nvar SheetContent = forwardRef(\n  ({ children, style, disableDrag, className = \"\", ...rest }, ref) => {\n    const sheetContext = useSheetContext();\n    const sheetScrollerContext = useSheetScrollerContext();\n    const { constraintsRef, onMeasureDragConstraints } = useDragConstraints();\n    const dragProps = disableDrag || sheetScrollerContext.disableDrag ? void 0 : sheetContext.dragProps;\n    return /* @__PURE__ */ React2.createElement(\n      motion.div,\n      {\n        ...rest,\n        ref: mergeRefs([ref, constraintsRef]),\n        className: `react-modal-sheet-content ${className}`,\n        style: { ...styles_default.content, ...style },\n        ...dragProps,\n        dragConstraints: constraintsRef,\n        onMeasureDragConstraints\n      },\n      children\n    );\n  }\n);\nSheetContent.displayName = \"SheetContent\";\nvar SheetContent_default = SheetContent;\nvar SheetHeader = forwardRef(\n  ({ children, style, disableDrag, ...rest }, ref) => {\n    const { indicatorRotation, dragProps } = useSheetContext();\n    const { constraintsRef, onMeasureDragConstraints } = useDragConstraints();\n    const _dragProps = disableDrag ? void 0 : dragProps;\n    const indicator1Transform = useTransform(\n      indicatorRotation,\n      (r) => `translateX(2px) rotate(${r}deg)`\n    );\n    const indicator2Transform = useTransform(\n      indicatorRotation,\n      (r) => `translateX(-2px) rotate(${-1 * r}deg)`\n    );\n    return /* @__PURE__ */ React2.createElement(\n      motion.div,\n      {\n        ...rest,\n        ref: mergeRefs([ref, constraintsRef]),\n        style: { ...styles_default.headerWrapper, ...style },\n        ..._dragProps,\n        dragConstraints: constraintsRef,\n        onMeasureDragConstraints\n      },\n      children || /* @__PURE__ */ React2.createElement(\"div\", { className: \"react-modal-sheet-header\", style: styles_default.header }, /* @__PURE__ */ React2.createElement(\n        motion.span,\n        {\n          className: \"react-modal-sheet-drag-indicator\",\n          style: { ...styles_default.indicator, transform: indicator1Transform }\n        }\n      ), /* @__PURE__ */ React2.createElement(\n        motion.span,\n        {\n          className: \"react-modal-sheet-drag-indicator\",\n          style: { ...styles_default.indicator, transform: indicator2Transform }\n        }\n      ))\n    );\n  }\n);\nSheetHeader.displayName = \"SheetHeader\";\nvar SheetHeader_default = SheetHeader;\nvar isClickable = (props) => !!props.onClick || !!props.onTap;\nvar SheetBackdrop = forwardRef(\n  ({ style = {}, className = \"\", ...rest }, ref) => {\n    const Comp = isClickable(rest) ? motion.button : motion.div;\n    const pointerEvents = isClickable(rest) ? \"auto\" : \"none\";\n    return /* @__PURE__ */ React2.createElement(\n      Comp,\n      {\n        ...rest,\n        ref,\n        className: `react-modal-sheet-backdrop ${className}`,\n        style: { ...styles_default.backdrop, ...style, pointerEvents },\n        initial: { opacity: 0 },\n        animate: { opacity: 1 },\n        exit: { opacity: 0 }\n      }\n    );\n  }\n);\nSheetBackdrop.displayName = \"SheetBackdrop\";\nvar SheetBackdrop_default = SheetBackdrop;\nvar SheetScroller = forwardRef(\n  ({ draggableAt = \"top\", children, style, className = \"\", ...rest }, ref) => {\n    const sheetScrollerContext = useSheetScrollerContext();\n    function determineDragState(element) {\n      const { scrollTop, scrollHeight, clientHeight } = element;\n      const isScrollable = scrollHeight > clientHeight;\n      if (!isScrollable)\n        return;\n      const isAtTop = scrollTop <= 0;\n      const isAtBottom = scrollHeight - scrollTop === clientHeight;\n      const shouldEnable = draggableAt === \"top\" && isAtTop || draggableAt === \"bottom\" && isAtBottom || draggableAt === \"both\" && (isAtTop || isAtBottom);\n      if (shouldEnable) {\n        sheetScrollerContext.setDragEnabled();\n      } else {\n        sheetScrollerContext.setDragDisabled();\n      }\n    }\n    function onScroll(e) {\n      determineDragState(e.currentTarget);\n    }\n    function onTouchStart(e) {\n      determineDragState(e.currentTarget);\n    }\n    const scrollProps = isTouchDevice() ? { onScroll, onTouchStart } : void 0;\n    return /* @__PURE__ */ React2.createElement(\n      \"div\",\n      {\n        ...rest,\n        ref,\n        className: `react-modal-sheet-scroller ${className}`,\n        style: { ...styles_default.scroller, ...style },\n        ...scrollProps\n      },\n      children\n    );\n  }\n);\nSheetScroller.displayName = \"SheetScroller\";\nvar SheetScroller_default = SheetScroller;\n\n// src/index.tsx\nvar _SheetCompound = sheet_default;\n_SheetCompound.Container = SheetContainer_default;\n_SheetCompound.Header = SheetHeader_default;\n_SheetCompound.Content = SheetContent_default;\n_SheetCompound.Backdrop = SheetBackdrop_default;\n_SheetCompound.Scroller = SheetScroller_default;\nvar Sheet2 = _SheetCompound;\n\nexport { Sheet2 as Sheet };\n//# sourceMappingURL=out.js.map\n//# sourceMappingURL=index.mjs.map","import { useEffect, useState } from \"react\";\n\nfunction getWindowDimensions() {\n    const { innerWidth: width, innerHeight: height } = window;\n    return {\n        width,\n        height,\n    };\n}\n\nexport default function useWindowDimensions() {\n    const [windowDimensions, setWindowDimensions] = useState(\n        getWindowDimensions(),\n    );\n\n    useEffect(() => {\n        function handleResize() {\n            setWindowDimensions(getWindowDimensions());\n        }\n\n        window.addEventListener(\"resize\", handleResize);\n        return () => window.removeEventListener(\"resize\", handleResize);\n    }, []);\n\n    return windowDimensions;\n}\n","import { FC, PropsWithChildren } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styles from \"./styles.module.css\";\nimport { Sheet } from \"react-modal-sheet\";\nimport useWindowDimensions from \"../../hooks/useWindowDimensions\";\n\ninterface Props extends PropsWithChildren {\n    isVisible: boolean;\n    onClose: () => void;\n}\n\nexport const Modal: FC<Props> = ({ isVisible, onClose, children }) => {\n    const { width } = useWindowDimensions();\n\n    if (width < 640) {\n        return (\n            <Sheet isOpen={isVisible} onClose={onClose} detent='content-height'>\n                <Sheet.Container>\n                    <Sheet.Header />\n                    <Sheet.Content>{children}</Sheet.Content>\n                </Sheet.Container>\n                <Sheet.Backdrop onTap={onClose} />\n            </Sheet>\n        );\n    }\n\n    if (!isVisible) return null;\n\n    return createPortal(\n        <div\n            className={styles.modal}\n            onMouseDown={(e) => {\n                if (e.target === e.currentTarget) {\n                    onClose();\n                }\n            }}\n        >\n            {children}\n        </div>,\n        document.body,\n    );\n};\n","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import terrible from \"../../assets/terrible.png\";\nimport bad from \"../../assets/bad.png\";\nimport neutral from \"../../assets/neutral.png\";\nimport good from \"../../assets/good.png\";\nimport excelent from \"../../assets/excelent.png\";\nimport { Stages } from \"../types\";\n\nexport const GREEN_COLOR = \"#66B22C\";\n\nexport const MASK_PLACEHOLDER = '+7 (___) ___-__-__';\n\nexport const RATES = [\n    {\n        id: 1,\n        value: 1,\n        image: terrible,\n        text: \"\",\n    },\n    {\n        id: 2,\n        value: 2,\n        image: bad,\n        text: \"\",\n    },\n    {\n        id: 3,\n        value: 3,\n        image: neutral,\n        text: \"\",\n    },\n    {\n        id: 4,\n        value: 4,\n        image: good,\n        text: \"\",\n    },\n    {\n        id: 5,\n        value: 5,\n        image: excelent,\n        text: \"\",\n    },\n];\n\nexport const STAGES: Stages[] = [\n    {\n        id: \"1\",\n        title: \"    ?\",\n        text: \"  ,       \",\n        button: null,\n        placeholder: null,\n        borderColor: \"#66B22C\",\n        buttonColor: \"#66B22C\",\n    },\n    {\n        id: \"2\",\n        title: \"   ?\",\n        text: null,\n        button: \"  \",\n        placeholder: \"  , \",\n        borderColor: \"#66B22C\",\n        buttonColor: \"#66B22C\",\n    },\n    {\n        id: \"3\",\n        title: \"  \",\n        text: \"       ,     \",\n        button: \"  \",\n        placeholder: \"+7 (___) ___-__-__\",\n        borderColor: \"#66B22C\",\n        buttonColor: \"#66B22C\",\n    },\n];\n","import { ComponentProps, forwardRef } from \"react\";\nimport { GREEN_COLOR } from \"../../constants\";\n\ninterface InputProps extends ComponentProps<\"input\"> {\n    borderColor?: string;\n}\n\nexport const Input = forwardRef<HTMLInputElement, InputProps>(\n    ({ borderColor = GREEN_COLOR, readOnly, className, ...props }, ref) => {\n        return (\n            <input\n                {...props}\n                ref={ref}\n                className={`border-2 border-[${borderColor}] border-solid h-10 rounded-xl py-3 px-4 outline-none ${\n                    readOnly && \"cursor-default\"\n                } ${className}`}\n            />\n        );\n    },\n);\n","/** Checks if value is string */\nfunction isString(str) {\n  return typeof str === 'string' || str instanceof String;\n}\n\n/** Checks if value is object */\nfunction isObject(obj) {\n  var _obj$constructor;\n  return typeof obj === 'object' && obj != null && (obj == null || (_obj$constructor = obj.constructor) == null ? void 0 : _obj$constructor.name) === 'Object';\n}\nfunction pick(obj, keys) {\n  if (Array.isArray(keys)) return pick(obj, (_, k) => keys.includes(k));\n  return Object.entries(obj).reduce((acc, _ref) => {\n    let [k, v] = _ref;\n    if (keys(v, k)) acc[k] = v;\n    return acc;\n  }, {});\n}\n\n/** Direction */\nconst DIRECTION = {\n  NONE: 'NONE',\n  LEFT: 'LEFT',\n  FORCE_LEFT: 'FORCE_LEFT',\n  RIGHT: 'RIGHT',\n  FORCE_RIGHT: 'FORCE_RIGHT'\n};\n\n/** Direction */\n\nfunction forceDirection(direction) {\n  switch (direction) {\n    case DIRECTION.LEFT:\n      return DIRECTION.FORCE_LEFT;\n    case DIRECTION.RIGHT:\n      return DIRECTION.FORCE_RIGHT;\n    default:\n      return direction;\n  }\n}\n\n/** Escapes regular expression control chars */\nfunction escapeRegExp(str) {\n  return str.replace(/([.*+?^=!:${}()|[\\]/\\\\])/g, '\\\\$1');\n}\n\n// cloned from https://github.com/epoberezkin/fast-deep-equal with small changes\nfunction objectIncludes(b, a) {\n  if (a === b) return true;\n  const arrA = Array.isArray(a),\n    arrB = Array.isArray(b);\n  let i;\n  if (arrA && arrB) {\n    if (a.length != b.length) return false;\n    for (i = 0; i < a.length; i++) if (!objectIncludes(a[i], b[i])) return false;\n    return true;\n  }\n  if (arrA != arrB) return false;\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\n    const dateA = a instanceof Date,\n      dateB = b instanceof Date;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n    if (dateA != dateB) return false;\n    const regexpA = a instanceof RegExp,\n      regexpB = b instanceof RegExp;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n    if (regexpA != regexpB) return false;\n    const keys = Object.keys(a);\n    // if (keys.length !== Object.keys(b).length) return false;\n\n    for (i = 0; i < keys.length; i++) if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    for (i = 0; i < keys.length; i++) if (!objectIncludes(b[keys[i]], a[keys[i]])) return false;\n    return true;\n  } else if (a && b && typeof a === 'function' && typeof b === 'function') {\n    return a.toString() === b.toString();\n  }\n  return false;\n}\n\n/** Selection range */\n\nexport { DIRECTION, escapeRegExp, forceDirection, isObject, isString, objectIncludes, pick };\n","import { DIRECTION } from './utils.js';\n\n/** Provides details of changing input */\nclass ActionDetails {\n  /** Current input value */\n\n  /** Current cursor position */\n\n  /** Old input value */\n\n  /** Old selection */\n\n  constructor(opts) {\n    Object.assign(this, opts);\n\n    // double check if left part was changed (autofilling, other non-standard input triggers)\n    while (this.value.slice(0, this.startChangePos) !== this.oldValue.slice(0, this.startChangePos)) {\n      --this.oldSelection.start;\n    }\n    if (this.insertedCount) {\n      // double check right part\n      while (this.value.slice(this.cursorPos) !== this.oldValue.slice(this.oldSelection.end)) {\n        if (this.value.length - this.cursorPos < this.oldValue.length - this.oldSelection.end) ++this.oldSelection.end;else ++this.cursorPos;\n      }\n    }\n  }\n\n  /** Start changing position */\n  get startChangePos() {\n    return Math.min(this.cursorPos, this.oldSelection.start);\n  }\n\n  /** Inserted symbols count */\n  get insertedCount() {\n    return this.cursorPos - this.startChangePos;\n  }\n\n  /** Inserted symbols */\n  get inserted() {\n    return this.value.substr(this.startChangePos, this.insertedCount);\n  }\n\n  /** Removed symbols count */\n  get removedCount() {\n    // Math.max for opposite operation\n    return Math.max(this.oldSelection.end - this.startChangePos ||\n    // for Delete\n    this.oldValue.length - this.value.length, 0);\n  }\n\n  /** Removed symbols */\n  get removed() {\n    return this.oldValue.substr(this.startChangePos, this.removedCount);\n  }\n\n  /** Unchanged head symbols */\n  get head() {\n    return this.value.substring(0, this.startChangePos);\n  }\n\n  /** Unchanged tail symbols */\n  get tail() {\n    return this.value.substring(this.startChangePos + this.insertedCount);\n  }\n\n  /** Remove direction */\n  get removeDirection() {\n    if (!this.removedCount || this.insertedCount) return DIRECTION.NONE;\n\n    // align right if delete at right\n    return (this.oldSelection.end === this.cursorPos || this.oldSelection.start === this.cursorPos) &&\n    // if not range removed (event with backspace)\n    this.oldSelection.end === this.oldSelection.start ? DIRECTION.RIGHT : DIRECTION.LEFT;\n  }\n}\n\nexport { ActionDetails as default };\n","/** Applies mask on element */\nfunction IMask(el, opts) {\n  // currently available only for input-like elements\n  return new IMask.InputMask(el, opts);\n}\n\nexport { IMask as default };\n","import { isString, isObject, pick } from '../core/utils.js';\nimport IMask from '../core/holder.js';\n\n// TODO can't use overloads here because of https://github.com/microsoft/TypeScript/issues/50754\n// export function maskedClass(mask: string): typeof MaskedPattern;\n// export function maskedClass(mask: DateConstructor): typeof MaskedDate;\n// export function maskedClass(mask: NumberConstructor): typeof MaskedNumber;\n// export function maskedClass(mask: Array<any> | ArrayConstructor): typeof MaskedDynamic;\n// export function maskedClass(mask: MaskedDate): typeof MaskedDate;\n// export function maskedClass(mask: MaskedNumber): typeof MaskedNumber;\n// export function maskedClass(mask: MaskedEnum): typeof MaskedEnum;\n// export function maskedClass(mask: MaskedRange): typeof MaskedRange;\n// export function maskedClass(mask: MaskedRegExp): typeof MaskedRegExp;\n// export function maskedClass(mask: MaskedFunction): typeof MaskedFunction;\n// export function maskedClass(mask: MaskedPattern): typeof MaskedPattern;\n// export function maskedClass(mask: MaskedDynamic): typeof MaskedDynamic;\n// export function maskedClass(mask: Masked): typeof Masked;\n// export function maskedClass(mask: typeof Masked): typeof Masked;\n// export function maskedClass(mask: typeof MaskedDate): typeof MaskedDate;\n// export function maskedClass(mask: typeof MaskedNumber): typeof MaskedNumber;\n// export function maskedClass(mask: typeof MaskedEnum): typeof MaskedEnum;\n// export function maskedClass(mask: typeof MaskedRange): typeof MaskedRange;\n// export function maskedClass(mask: typeof MaskedRegExp): typeof MaskedRegExp;\n// export function maskedClass(mask: typeof MaskedFunction): typeof MaskedFunction;\n// export function maskedClass(mask: typeof MaskedPattern): typeof MaskedPattern;\n// export function maskedClass(mask: typeof MaskedDynamic): typeof MaskedDynamic;\n// export function maskedClass<Mask extends typeof Masked> (mask: Mask): Mask;\n// export function maskedClass(mask: RegExp): typeof MaskedRegExp;\n// export function maskedClass(mask: (value: string, ...args: any[]) => boolean): typeof MaskedFunction;\n\n/** Get Masked class by mask type */\nfunction maskedClass(mask) /* TODO */{\n  if (mask == null) throw new Error('mask property should be defined');\n  if (mask instanceof RegExp) return IMask.MaskedRegExp;\n  if (isString(mask)) return IMask.MaskedPattern;\n  if (mask === Date) return IMask.MaskedDate;\n  if (mask === Number) return IMask.MaskedNumber;\n  if (Array.isArray(mask) || mask === Array) return IMask.MaskedDynamic;\n  if (IMask.Masked && mask.prototype instanceof IMask.Masked) return mask;\n  if (IMask.Masked && mask instanceof IMask.Masked) return mask.constructor;\n  if (mask instanceof Function) return IMask.MaskedFunction;\n  console.warn('Mask not found for mask', mask); // eslint-disable-line no-console\n  return IMask.Masked;\n}\nfunction normalizeOpts(opts) {\n  if (!opts) throw new Error('Options in not defined');\n  if (IMask.Masked) {\n    if (opts.prototype instanceof IMask.Masked) return {\n      mask: opts\n    };\n\n    /*\n      handle cases like:\n      1) opts = Masked\n      2) opts = { mask: Masked, ...instanceOpts }\n    */\n    const {\n      mask = undefined,\n      ...instanceOpts\n    } = opts instanceof IMask.Masked ? {\n      mask: opts\n    } : isObject(opts) && opts.mask instanceof IMask.Masked ? opts : {};\n    if (mask) {\n      const _mask = mask.mask;\n      return {\n        ...pick(mask, (_, k) => !k.startsWith('_')),\n        mask: mask.constructor,\n        _mask,\n        ...instanceOpts\n      };\n    }\n  }\n  if (!isObject(opts)) return {\n    mask: opts\n  };\n  return {\n    ...opts\n  };\n}\n\n// TODO can't use overloads here because of https://github.com/microsoft/TypeScript/issues/50754\n\n// From masked\n// export default function createMask<Opts extends Masked, ReturnMasked=Opts> (opts: Opts): ReturnMasked;\n// // From masked class\n// export default function createMask<Opts extends MaskedOptions<typeof Masked>, ReturnMasked extends Masked=InstanceType<Opts['mask']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedDate>, ReturnMasked extends MaskedDate=MaskedDate<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedNumber>, ReturnMasked extends MaskedNumber=MaskedNumber<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedEnum>, ReturnMasked extends MaskedEnum=MaskedEnum<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedRange>, ReturnMasked extends MaskedRange=MaskedRange<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedRegExp>, ReturnMasked extends MaskedRegExp=MaskedRegExp<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedFunction>, ReturnMasked extends MaskedFunction=MaskedFunction<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedPattern>, ReturnMasked extends MaskedPattern=MaskedPattern<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<typeof MaskedDynamic>, ReturnMasked extends MaskedDynamic=MaskedDynamic<Opts['parent']>> (opts: Opts): ReturnMasked;\n// // From mask opts\n// export default function createMask<Opts extends MaskedOptions<Masked>, ReturnMasked=Opts extends MaskedOptions<infer M> ? M : never> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedNumberOptions, ReturnMasked extends MaskedNumber=MaskedNumber<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedDateFactoryOptions, ReturnMasked extends MaskedDate=MaskedDate<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedEnumOptions, ReturnMasked extends MaskedEnum=MaskedEnum<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedRangeOptions, ReturnMasked extends MaskedRange=MaskedRange<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedPatternOptions, ReturnMasked extends MaskedPattern=MaskedPattern<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedDynamicOptions, ReturnMasked extends MaskedDynamic=MaskedDynamic<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<RegExp>, ReturnMasked extends MaskedRegExp=MaskedRegExp<Opts['parent']>> (opts: Opts): ReturnMasked;\n// export default function createMask<Opts extends MaskedOptions<Function>, ReturnMasked extends MaskedFunction=MaskedFunction<Opts['parent']>> (opts: Opts): ReturnMasked;\n\n/** Creates new {@link Masked} depending on mask type */\nfunction createMask(opts) {\n  if (IMask.Masked && opts instanceof IMask.Masked) return opts;\n  const nOpts = normalizeOpts(opts);\n  const MaskedClass = maskedClass(nOpts.mask);\n  if (!MaskedClass) throw new Error(\"Masked class is not found for provided mask \" + nOpts.mask + \", appropriate module needs to be imported manually before creating mask.\");\n  if (nOpts.mask === MaskedClass) delete nOpts.mask;\n  if (nOpts._mask) {\n    nOpts.mask = nOpts._mask;\n    delete nOpts._mask;\n  }\n  return new MaskedClass(nOpts);\n}\nIMask.createMask = createMask;\n\nexport { createMask as default, maskedClass, normalizeOpts };\n","import IMask from '../core/holder.js';\n\n/**  Generic element API to use with mask */\nclass MaskElement {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** Safely returns selection start */\n  get selectionStart() {\n    let start;\n    try {\n      start = this._unsafeSelectionStart;\n    } catch {}\n    return start != null ? start : this.value.length;\n  }\n\n  /** Safely returns selection end */\n  get selectionEnd() {\n    let end;\n    try {\n      end = this._unsafeSelectionEnd;\n    } catch {}\n    return end != null ? end : this.value.length;\n  }\n\n  /** Safely sets element selection */\n  select(start, end) {\n    if (start == null || end == null || start === this.selectionStart && end === this.selectionEnd) return;\n    try {\n      this._unsafeSelect(start, end);\n    } catch {}\n  }\n\n  /** */\n  get isActive() {\n    return false;\n  }\n  /** */\n\n  /** */\n\n  /** */\n}\nIMask.MaskElement = MaskElement;\n\nexport { MaskElement as default };\n","import MaskElement from './mask-element.js';\nimport IMask from '../core/holder.js';\n\nconst KEY_Z = 90;\nconst KEY_Y = 89;\n\n/** Bridge between HTMLElement and {@link Masked} */\nclass HTMLMaskElement extends MaskElement {\n  /** HTMLElement to use mask on */\n\n  constructor(input) {\n    super();\n    this.input = input;\n    this._onKeydown = this._onKeydown.bind(this);\n    this._onInput = this._onInput.bind(this);\n    this._onBeforeinput = this._onBeforeinput.bind(this);\n    this._onCompositionEnd = this._onCompositionEnd.bind(this);\n  }\n  get rootElement() {\n    var _this$input$getRootNo, _this$input$getRootNo2, _this$input;\n    return (_this$input$getRootNo = (_this$input$getRootNo2 = (_this$input = this.input).getRootNode) == null ? void 0 : _this$input$getRootNo2.call(_this$input)) != null ? _this$input$getRootNo : document;\n  }\n\n  /** Is element in focus */\n  get isActive() {\n    return this.input === this.rootElement.activeElement;\n  }\n\n  /** Binds HTMLElement events to mask internal events */\n  bindEvents(handlers) {\n    this.input.addEventListener('keydown', this._onKeydown);\n    this.input.addEventListener('input', this._onInput);\n    this.input.addEventListener('beforeinput', this._onBeforeinput);\n    this.input.addEventListener('compositionend', this._onCompositionEnd);\n    this.input.addEventListener('drop', handlers.drop);\n    this.input.addEventListener('click', handlers.click);\n    this.input.addEventListener('focus', handlers.focus);\n    this.input.addEventListener('blur', handlers.commit);\n    this._handlers = handlers;\n  }\n  _onKeydown(e) {\n    if (this._handlers.redo && (e.keyCode === KEY_Z && e.shiftKey && (e.metaKey || e.ctrlKey) || e.keyCode === KEY_Y && e.ctrlKey)) {\n      e.preventDefault();\n      return this._handlers.redo(e);\n    }\n    if (this._handlers.undo && e.keyCode === KEY_Z && (e.metaKey || e.ctrlKey)) {\n      e.preventDefault();\n      return this._handlers.undo(e);\n    }\n    if (!e.isComposing) this._handlers.selectionChange(e);\n  }\n  _onBeforeinput(e) {\n    if (e.inputType === 'historyUndo' && this._handlers.undo) {\n      e.preventDefault();\n      return this._handlers.undo(e);\n    }\n    if (e.inputType === 'historyRedo' && this._handlers.redo) {\n      e.preventDefault();\n      return this._handlers.redo(e);\n    }\n  }\n  _onCompositionEnd(e) {\n    this._handlers.input(e);\n  }\n  _onInput(e) {\n    if (!e.isComposing) this._handlers.input(e);\n  }\n\n  /** Unbinds HTMLElement events to mask internal events */\n  unbindEvents() {\n    this.input.removeEventListener('keydown', this._onKeydown);\n    this.input.removeEventListener('input', this._onInput);\n    this.input.removeEventListener('beforeinput', this._onBeforeinput);\n    this.input.removeEventListener('compositionend', this._onCompositionEnd);\n    this.input.removeEventListener('drop', this._handlers.drop);\n    this.input.removeEventListener('click', this._handlers.click);\n    this.input.removeEventListener('focus', this._handlers.focus);\n    this.input.removeEventListener('blur', this._handlers.commit);\n    this._handlers = {};\n  }\n}\nIMask.HTMLMaskElement = HTMLMaskElement;\n\nexport { HTMLMaskElement as default };\n","import HTMLMaskElement from './html-mask-element.js';\nimport IMask from '../core/holder.js';\nimport './mask-element.js';\n\n/** Bridge between InputElement and {@link Masked} */\nclass HTMLInputMaskElement extends HTMLMaskElement {\n  /** InputElement to use mask on */\n\n  constructor(input) {\n    super(input);\n    this.input = input;\n  }\n\n  /** Returns InputElement selection start */\n  get _unsafeSelectionStart() {\n    return this.input.selectionStart != null ? this.input.selectionStart : this.value.length;\n  }\n\n  /** Returns InputElement selection end */\n  get _unsafeSelectionEnd() {\n    return this.input.selectionEnd;\n  }\n\n  /** Sets InputElement selection */\n  _unsafeSelect(start, end) {\n    this.input.setSelectionRange(start, end);\n  }\n  get value() {\n    return this.input.value;\n  }\n  set value(value) {\n    this.input.value = value;\n  }\n}\nIMask.HTMLMaskElement = HTMLMaskElement;\n\nexport { HTMLInputMaskElement as default };\n","import HTMLMaskElement from './html-mask-element.js';\nimport IMask from '../core/holder.js';\nimport './mask-element.js';\n\nclass HTMLContenteditableMaskElement extends HTMLMaskElement {\n  /** Returns HTMLElement selection start */\n  get _unsafeSelectionStart() {\n    const root = this.rootElement;\n    const selection = root.getSelection && root.getSelection();\n    const anchorOffset = selection && selection.anchorOffset;\n    const focusOffset = selection && selection.focusOffset;\n    if (focusOffset == null || anchorOffset == null || anchorOffset < focusOffset) {\n      return anchorOffset;\n    }\n    return focusOffset;\n  }\n\n  /** Returns HTMLElement selection end */\n  get _unsafeSelectionEnd() {\n    const root = this.rootElement;\n    const selection = root.getSelection && root.getSelection();\n    const anchorOffset = selection && selection.anchorOffset;\n    const focusOffset = selection && selection.focusOffset;\n    if (focusOffset == null || anchorOffset == null || anchorOffset > focusOffset) {\n      return anchorOffset;\n    }\n    return focusOffset;\n  }\n\n  /** Sets HTMLElement selection */\n  _unsafeSelect(start, end) {\n    if (!this.rootElement.createRange) return;\n    const range = this.rootElement.createRange();\n    range.setStart(this.input.firstChild || this.input, start);\n    range.setEnd(this.input.lastChild || this.input, end);\n    const root = this.rootElement;\n    const selection = root.getSelection && root.getSelection();\n    if (selection) {\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n  }\n\n  /** HTMLElement value */\n  get value() {\n    return this.input.textContent || '';\n  }\n  set value(value) {\n    this.input.textContent = value;\n  }\n}\nIMask.HTMLContenteditableMaskElement = HTMLContenteditableMaskElement;\n\nexport { HTMLContenteditableMaskElement as default };\n","class InputHistory {\n  constructor() {\n    this.states = [];\n    this.currentIndex = 0;\n  }\n  get currentState() {\n    return this.states[this.currentIndex];\n  }\n  get isEmpty() {\n    return this.states.length === 0;\n  }\n  push(state) {\n    // if current index points before the last element then remove the future\n    if (this.currentIndex < this.states.length - 1) this.states.length = this.currentIndex + 1;\n    this.states.push(state);\n    if (this.states.length > InputHistory.MAX_LENGTH) this.states.shift();\n    this.currentIndex = this.states.length - 1;\n  }\n  go(steps) {\n    this.currentIndex = Math.min(Math.max(this.currentIndex + steps, 0), this.states.length - 1);\n    return this.currentState;\n  }\n  undo() {\n    return this.go(-1);\n  }\n  redo() {\n    return this.go(+1);\n  }\n  clear() {\n    this.states.length = 0;\n    this.currentIndex = 0;\n  }\n}\nInputHistory.MAX_LENGTH = 100;\n\nexport { InputHistory as default };\n","import { DIRECTION } from '../core/utils.js';\nimport ActionDetails from '../core/action-details.js';\nimport createMask, { maskedClass } from '../masked/factory.js';\nimport MaskElement from './mask-element.js';\nimport HTMLInputMaskElement from './html-input-mask-element.js';\nimport HTMLContenteditableMaskElement from './html-contenteditable-mask-element.js';\nimport IMask from '../core/holder.js';\nimport InputHistory from './input-history.js';\nimport './html-mask-element.js';\n\n/** Listens to element events and controls changes between element and {@link Masked} */\nclass InputMask {\n  /**\n    View element\n  */\n\n  /** Internal {@link Masked} model */\n\n  constructor(el, opts) {\n    this.el = el instanceof MaskElement ? el : el.isContentEditable && el.tagName !== 'INPUT' && el.tagName !== 'TEXTAREA' ? new HTMLContenteditableMaskElement(el) : new HTMLInputMaskElement(el);\n    this.masked = createMask(opts);\n    this._listeners = {};\n    this._value = '';\n    this._unmaskedValue = '';\n    this._rawInputValue = '';\n    this.history = new InputHistory();\n    this._saveSelection = this._saveSelection.bind(this);\n    this._onInput = this._onInput.bind(this);\n    this._onChange = this._onChange.bind(this);\n    this._onDrop = this._onDrop.bind(this);\n    this._onFocus = this._onFocus.bind(this);\n    this._onClick = this._onClick.bind(this);\n    this._onUndo = this._onUndo.bind(this);\n    this._onRedo = this._onRedo.bind(this);\n    this.alignCursor = this.alignCursor.bind(this);\n    this.alignCursorFriendly = this.alignCursorFriendly.bind(this);\n    this._bindEvents();\n\n    // refresh\n    this.updateValue();\n    this._onChange();\n  }\n  maskEquals(mask) {\n    var _this$masked;\n    return mask == null || ((_this$masked = this.masked) == null ? void 0 : _this$masked.maskEquals(mask));\n  }\n\n  /** Masked */\n  get mask() {\n    return this.masked.mask;\n  }\n  set mask(mask) {\n    if (this.maskEquals(mask)) return;\n    if (!(mask instanceof IMask.Masked) && this.masked.constructor === maskedClass(mask)) {\n      // TODO \"any\" no idea\n      this.masked.updateOptions({\n        mask\n      });\n      return;\n    }\n    const masked = mask instanceof IMask.Masked ? mask : createMask({\n      mask\n    });\n    masked.unmaskedValue = this.masked.unmaskedValue;\n    this.masked = masked;\n  }\n\n  /** Raw value */\n  get value() {\n    return this._value;\n  }\n  set value(str) {\n    if (this.value === str) return;\n    this.masked.value = str;\n    this.updateControl('auto');\n  }\n\n  /** Unmasked value */\n  get unmaskedValue() {\n    return this._unmaskedValue;\n  }\n  set unmaskedValue(str) {\n    if (this.unmaskedValue === str) return;\n    this.masked.unmaskedValue = str;\n    this.updateControl('auto');\n  }\n\n  /** Raw input value */\n  get rawInputValue() {\n    return this._rawInputValue;\n  }\n  set rawInputValue(str) {\n    if (this.rawInputValue === str) return;\n    this.masked.rawInputValue = str;\n    this.updateControl();\n    this.alignCursor();\n  }\n\n  /** Typed unmasked value */\n  get typedValue() {\n    return this.masked.typedValue;\n  }\n  set typedValue(val) {\n    if (this.masked.typedValueEquals(val)) return;\n    this.masked.typedValue = val;\n    this.updateControl('auto');\n  }\n\n  /** Display value */\n  get displayValue() {\n    return this.masked.displayValue;\n  }\n\n  /** Starts listening to element events */\n  _bindEvents() {\n    this.el.bindEvents({\n      selectionChange: this._saveSelection,\n      input: this._onInput,\n      drop: this._onDrop,\n      click: this._onClick,\n      focus: this._onFocus,\n      commit: this._onChange,\n      undo: this._onUndo,\n      redo: this._onRedo\n    });\n  }\n\n  /** Stops listening to element events */\n  _unbindEvents() {\n    if (this.el) this.el.unbindEvents();\n  }\n\n  /** Fires custom event */\n  _fireEvent(ev, e) {\n    const listeners = this._listeners[ev];\n    if (!listeners) return;\n    listeners.forEach(l => l(e));\n  }\n\n  /** Current selection start */\n  get selectionStart() {\n    return this._cursorChanging ? this._changingCursorPos : this.el.selectionStart;\n  }\n\n  /** Current cursor position */\n  get cursorPos() {\n    return this._cursorChanging ? this._changingCursorPos : this.el.selectionEnd;\n  }\n  set cursorPos(pos) {\n    if (!this.el || !this.el.isActive) return;\n    this.el.select(pos, pos);\n    this._saveSelection();\n  }\n\n  /** Stores current selection */\n  _saveSelection( /* ev */\n  ) {\n    if (this.displayValue !== this.el.value) {\n      console.warn('Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly.'); // eslint-disable-line no-console\n    }\n    this._selection = {\n      start: this.selectionStart,\n      end: this.cursorPos\n    };\n  }\n\n  /** Syncronizes model value from view */\n  updateValue() {\n    this.masked.value = this.el.value;\n    this._value = this.masked.value;\n    this._unmaskedValue = this.masked.unmaskedValue;\n    this._rawInputValue = this.masked.rawInputValue;\n  }\n\n  /** Syncronizes view from model value, fires change events */\n  updateControl(cursorPos) {\n    const newUnmaskedValue = this.masked.unmaskedValue;\n    const newValue = this.masked.value;\n    const newRawInputValue = this.masked.rawInputValue;\n    const newDisplayValue = this.displayValue;\n    const isChanged = this.unmaskedValue !== newUnmaskedValue || this.value !== newValue || this._rawInputValue !== newRawInputValue;\n    this._unmaskedValue = newUnmaskedValue;\n    this._value = newValue;\n    this._rawInputValue = newRawInputValue;\n    if (this.el.value !== newDisplayValue) this.el.value = newDisplayValue;\n    if (cursorPos === 'auto') this.alignCursor();else if (cursorPos != null) this.cursorPos = cursorPos;\n    if (isChanged) this._fireChangeEvents();\n    if (!this._historyChanging && (isChanged || this.history.isEmpty)) this.history.push({\n      unmaskedValue: newUnmaskedValue,\n      selection: {\n        start: this.selectionStart,\n        end: this.cursorPos\n      }\n    });\n  }\n\n  /** Updates options with deep equal check, recreates {@link Masked} model if mask type changes */\n  updateOptions(opts) {\n    const {\n      mask,\n      ...restOpts\n    } = opts; // TODO types, yes, mask is optional\n\n    const updateMask = !this.maskEquals(mask);\n    const updateOpts = this.masked.optionsIsChanged(restOpts);\n    if (updateMask) this.mask = mask;\n    if (updateOpts) this.masked.updateOptions(restOpts); // TODO\n\n    if (updateMask || updateOpts) this.updateControl();\n  }\n\n  /** Updates cursor */\n  updateCursor(cursorPos) {\n    if (cursorPos == null) return;\n    this.cursorPos = cursorPos;\n\n    // also queue change cursor for mobile browsers\n    this._delayUpdateCursor(cursorPos);\n  }\n\n  /** Delays cursor update to support mobile browsers */\n  _delayUpdateCursor(cursorPos) {\n    this._abortUpdateCursor();\n    this._changingCursorPos = cursorPos;\n    this._cursorChanging = setTimeout(() => {\n      if (!this.el) return; // if was destroyed\n      this.cursorPos = this._changingCursorPos;\n      this._abortUpdateCursor();\n    }, 10);\n  }\n\n  /** Fires custom events */\n  _fireChangeEvents() {\n    this._fireEvent('accept', this._inputEvent);\n    if (this.masked.isComplete) this._fireEvent('complete', this._inputEvent);\n  }\n\n  /** Aborts delayed cursor update */\n  _abortUpdateCursor() {\n    if (this._cursorChanging) {\n      clearTimeout(this._cursorChanging);\n      delete this._cursorChanging;\n    }\n  }\n\n  /** Aligns cursor to nearest available position */\n  alignCursor() {\n    this.cursorPos = this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos, DIRECTION.LEFT));\n  }\n\n  /** Aligns cursor only if selection is empty */\n  alignCursorFriendly() {\n    if (this.selectionStart !== this.cursorPos) return; // skip if range is selected\n    this.alignCursor();\n  }\n\n  /** Adds listener on custom event */\n  on(ev, handler) {\n    if (!this._listeners[ev]) this._listeners[ev] = [];\n    this._listeners[ev].push(handler);\n    return this;\n  }\n\n  /** Removes custom event listener */\n  off(ev, handler) {\n    if (!this._listeners[ev]) return this;\n    if (!handler) {\n      delete this._listeners[ev];\n      return this;\n    }\n    const hIndex = this._listeners[ev].indexOf(handler);\n    if (hIndex >= 0) this._listeners[ev].splice(hIndex, 1);\n    return this;\n  }\n\n  /** Handles view input event */\n  _onInput(e) {\n    this._inputEvent = e;\n    this._abortUpdateCursor();\n    const details = new ActionDetails({\n      // new state\n      value: this.el.value,\n      cursorPos: this.cursorPos,\n      // old state\n      oldValue: this.displayValue,\n      oldSelection: this._selection\n    });\n    const oldRawValue = this.masked.rawInputValue;\n    const offset = this.masked.splice(details.startChangePos, details.removed.length, details.inserted, details.removeDirection, {\n      input: true,\n      raw: true\n    }).offset;\n\n    // force align in remove direction only if no input chars were removed\n    // otherwise we still need to align with NONE (to get out from fixed symbols for instance)\n    const removeDirection = oldRawValue === this.masked.rawInputValue ? details.removeDirection : DIRECTION.NONE;\n    let cursorPos = this.masked.nearestInputPos(details.startChangePos + offset, removeDirection);\n    if (removeDirection !== DIRECTION.NONE) cursorPos = this.masked.nearestInputPos(cursorPos, DIRECTION.NONE);\n    this.updateControl(cursorPos);\n    delete this._inputEvent;\n  }\n\n  /** Handles view change event and commits model value */\n  _onChange() {\n    if (this.displayValue !== this.el.value) this.updateValue();\n    this.masked.doCommit();\n    this.updateControl();\n    this._saveSelection();\n  }\n\n  /** Handles view drop event, prevents by default */\n  _onDrop(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n  }\n\n  /** Restore last selection on focus */\n  _onFocus(ev) {\n    this.alignCursorFriendly();\n  }\n\n  /** Restore last selection on focus */\n  _onClick(ev) {\n    this.alignCursorFriendly();\n  }\n  _onUndo() {\n    this._applyHistoryState(this.history.undo());\n  }\n  _onRedo() {\n    this._applyHistoryState(this.history.redo());\n  }\n  _applyHistoryState(state) {\n    if (!state) return;\n    this._historyChanging = true;\n    this.unmaskedValue = state.unmaskedValue;\n    this.el.select(state.selection.start, state.selection.end);\n    this._saveSelection();\n    this._historyChanging = false;\n  }\n\n  /** Unbind view events and removes element reference */\n  destroy() {\n    this._unbindEvents();\n    this._listeners.length = 0;\n    delete this.el;\n  }\n}\nIMask.InputMask = InputMask;\n\nexport { InputMask as default };\n","import IMask from './holder.js';\n\n/** Provides details of changing model value */\nclass ChangeDetails {\n  /** Inserted symbols */\n\n  /** Additional offset if any changes occurred before tail */\n\n  /** Raw inserted is used by dynamic mask */\n\n  /** Can skip chars */\n\n  static normalize(prep) {\n    return Array.isArray(prep) ? prep : [prep, new ChangeDetails()];\n  }\n  constructor(details) {\n    Object.assign(this, {\n      inserted: '',\n      rawInserted: '',\n      tailShift: 0,\n      skip: false\n    }, details);\n  }\n\n  /** Aggregate changes */\n  aggregate(details) {\n    this.inserted += details.inserted;\n    this.rawInserted += details.rawInserted;\n    this.tailShift += details.tailShift;\n    this.skip = this.skip || details.skip;\n    return this;\n  }\n\n  /** Total offset considering all changes */\n  get offset() {\n    return this.tailShift + this.inserted.length;\n  }\n  get consumed() {\n    return Boolean(this.rawInserted) || this.skip;\n  }\n  equals(details) {\n    return this.inserted === details.inserted && this.tailShift === details.tailShift && this.rawInserted === details.rawInserted && this.skip === details.skip;\n  }\n}\nIMask.ChangeDetails = ChangeDetails;\n\nexport { ChangeDetails as default };\n","/** Provides details of continuous extracted tail */\nclass ContinuousTailDetails {\n  /** Tail value as string */\n\n  /** Tail start position */\n\n  /** Start position */\n\n  constructor(value, from, stop) {\n    if (value === void 0) {\n      value = '';\n    }\n    if (from === void 0) {\n      from = 0;\n    }\n    this.value = value;\n    this.from = from;\n    this.stop = stop;\n  }\n  toString() {\n    return this.value;\n  }\n  extend(tail) {\n    this.value += String(tail);\n  }\n  appendTo(masked) {\n    return masked.append(this.toString(), {\n      tail: true\n    }).aggregate(masked._appendPlaceholder());\n  }\n  get state() {\n    return {\n      value: this.value,\n      from: this.from,\n      stop: this.stop\n    };\n  }\n  set state(state) {\n    Object.assign(this, state);\n  }\n  unshift(beforePos) {\n    if (!this.value.length || beforePos != null && this.from >= beforePos) return '';\n    const shiftChar = this.value[0];\n    this.value = this.value.slice(1);\n    return shiftChar;\n  }\n  shift() {\n    if (!this.value.length) return '';\n    const shiftChar = this.value[this.value.length - 1];\n    this.value = this.value.slice(0, -1);\n    return shiftChar;\n  }\n}\n\nexport { ContinuousTailDetails as default };\n","import ChangeDetails from '../core/change-details.js';\nimport ContinuousTailDetails from '../core/continuous-tail-details.js';\nimport { isString, DIRECTION, objectIncludes, forceDirection } from '../core/utils.js';\nimport IMask from '../core/holder.js';\n\n/** Append flags */\n\n/** Extract flags */\n\n// see https://github.com/microsoft/TypeScript/issues/6223\n\n/** Provides common masking stuff */\nclass Masked {\n  /** */\n\n  /** */\n\n  /** Transforms value before mask processing */\n\n  /** Transforms each char before mask processing */\n\n  /** Validates if value is acceptable */\n\n  /** Does additional processing at the end of editing */\n\n  /** Format typed value to string */\n\n  /** Parse string to get typed value */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    this._value = '';\n    this._update({\n      ...Masked.DEFAULTS,\n      ...opts\n    });\n    this._initialized = true;\n  }\n\n  /** Sets and applies new options */\n  updateOptions(opts) {\n    if (!this.optionsIsChanged(opts)) return;\n    this.withValueRefresh(this._update.bind(this, opts));\n  }\n\n  /** Sets new options */\n  _update(opts) {\n    Object.assign(this, opts);\n  }\n\n  /** Mask state */\n  get state() {\n    return {\n      _value: this.value,\n      _rawInputValue: this.rawInputValue\n    };\n  }\n  set state(state) {\n    this._value = state._value;\n  }\n\n  /** Resets value */\n  reset() {\n    this._value = '';\n  }\n  get value() {\n    return this._value;\n  }\n  set value(value) {\n    this.resolve(value, {\n      input: true\n    });\n  }\n\n  /** Resolve new value */\n  resolve(value, flags) {\n    if (flags === void 0) {\n      flags = {\n        input: true\n      };\n    }\n    this.reset();\n    this.append(value, flags, '');\n    this.doCommit();\n  }\n  get unmaskedValue() {\n    return this.value;\n  }\n  set unmaskedValue(value) {\n    this.resolve(value, {});\n  }\n  get typedValue() {\n    return this.parse ? this.parse(this.value, this) : this.unmaskedValue;\n  }\n  set typedValue(value) {\n    if (this.format) {\n      this.value = this.format(value, this);\n    } else {\n      this.unmaskedValue = String(value);\n    }\n  }\n\n  /** Value that includes raw user input */\n  get rawInputValue() {\n    return this.extractInput(0, this.displayValue.length, {\n      raw: true\n    });\n  }\n  set rawInputValue(value) {\n    this.resolve(value, {\n      raw: true\n    });\n  }\n  get displayValue() {\n    return this.value;\n  }\n  get isComplete() {\n    return true;\n  }\n  get isFilled() {\n    return this.isComplete;\n  }\n\n  /** Finds nearest input position in direction */\n  nearestInputPos(cursorPos, direction) {\n    return cursorPos;\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    return Math.min(this.displayValue.length, toPos - fromPos);\n  }\n\n  /** Extracts value in range considering flags */\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    return this.displayValue.slice(fromPos, toPos);\n  }\n\n  /** Extracts tail in range */\n  extractTail(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    return new ContinuousTailDetails(this.extractInput(fromPos, toPos), fromPos);\n  }\n\n  /** Appends tail */\n  appendTail(tail) {\n    if (isString(tail)) tail = new ContinuousTailDetails(String(tail));\n    return tail.appendTo(this);\n  }\n\n  /** Appends char */\n  _appendCharRaw(ch, flags) {\n    if (!ch) return new ChangeDetails();\n    this._value += ch;\n    return new ChangeDetails({\n      inserted: ch,\n      rawInserted: ch\n    });\n  }\n\n  /** Appends char */\n  _appendChar(ch, flags, checkTail) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const consistentState = this.state;\n    let details;\n    [ch, details] = this.doPrepareChar(ch, flags);\n    if (ch) {\n      details = details.aggregate(this._appendCharRaw(ch, flags));\n\n      // TODO handle `skip`?\n\n      // try `autofix` lookahead\n      if (!details.rawInserted && this.autofix === 'pad') {\n        const noFixState = this.state;\n        this.state = consistentState;\n        let fixDetails = this.pad(flags);\n        const chDetails = this._appendCharRaw(ch, flags);\n        fixDetails = fixDetails.aggregate(chDetails);\n\n        // if fix was applied or\n        // if details are equal use skip restoring state optimization\n        if (chDetails.rawInserted || fixDetails.equals(details)) {\n          details = fixDetails;\n        } else {\n          this.state = noFixState;\n        }\n      }\n    }\n    if (details.inserted) {\n      let consistentTail;\n      let appended = this.doValidate(flags) !== false;\n      if (appended && checkTail != null) {\n        // validation ok, check tail\n        const beforeTailState = this.state;\n        if (this.overwrite === true) {\n          consistentTail = checkTail.state;\n          for (let i = 0; i < details.rawInserted.length; ++i) {\n            checkTail.unshift(this.displayValue.length - details.tailShift);\n          }\n        }\n        let tailDetails = this.appendTail(checkTail);\n        appended = tailDetails.rawInserted.length === checkTail.toString().length;\n\n        // not ok, try shift\n        if (!(appended && tailDetails.inserted) && this.overwrite === 'shift') {\n          this.state = beforeTailState;\n          consistentTail = checkTail.state;\n          for (let i = 0; i < details.rawInserted.length; ++i) {\n            checkTail.shift();\n          }\n          tailDetails = this.appendTail(checkTail);\n          appended = tailDetails.rawInserted.length === checkTail.toString().length;\n        }\n\n        // if ok, rollback state after tail\n        if (appended && tailDetails.inserted) this.state = beforeTailState;\n      }\n\n      // revert all if something went wrong\n      if (!appended) {\n        details = new ChangeDetails();\n        this.state = consistentState;\n        if (checkTail && consistentTail) checkTail.state = consistentTail;\n      }\n    }\n    return details;\n  }\n\n  /** Appends optional placeholder at the end */\n  _appendPlaceholder() {\n    return new ChangeDetails();\n  }\n\n  /** Appends optional eager placeholder at the end */\n  _appendEager() {\n    return new ChangeDetails();\n  }\n\n  /** Appends symbols considering flags */\n  append(str, flags, tail) {\n    if (!isString(str)) throw new Error('value should be string');\n    const checkTail = isString(tail) ? new ContinuousTailDetails(String(tail)) : tail;\n    if (flags != null && flags.tail) flags._beforeTailState = this.state;\n    let details;\n    [str, details] = this.doPrepare(str, flags);\n    for (let ci = 0; ci < str.length; ++ci) {\n      const d = this._appendChar(str[ci], flags, checkTail);\n      if (!d.rawInserted && !this.doSkipInvalid(str[ci], flags, checkTail)) break;\n      details.aggregate(d);\n    }\n    if ((this.eager === true || this.eager === 'append') && flags != null && flags.input && str) {\n      details.aggregate(this._appendEager());\n    }\n\n    // append tail but aggregate only tailShift\n    if (checkTail != null) {\n      details.tailShift += this.appendTail(checkTail).tailShift;\n      // TODO it's a good idea to clear state after appending ends\n      // but it causes bugs when one append calls another (when dynamic dispatch set rawInputValue)\n      // this._resetBeforeTailState();\n    }\n    return details;\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    this._value = this.displayValue.slice(0, fromPos) + this.displayValue.slice(toPos);\n    return new ChangeDetails();\n  }\n\n  /** Calls function and reapplies current value */\n  withValueRefresh(fn) {\n    if (this._refreshing || !this._initialized) return fn();\n    this._refreshing = true;\n    const rawInput = this.rawInputValue;\n    const value = this.value;\n    const ret = fn();\n    this.rawInputValue = rawInput;\n    // append lost trailing chars at the end\n    if (this.value && this.value !== value && value.indexOf(this.value) === 0) {\n      this.append(value.slice(this.displayValue.length), {}, '');\n      this.doCommit();\n    }\n    delete this._refreshing;\n    return ret;\n  }\n  runIsolated(fn) {\n    if (this._isolated || !this._initialized) return fn(this);\n    this._isolated = true;\n    const state = this.state;\n    const ret = fn(this);\n    this.state = state;\n    delete this._isolated;\n    return ret;\n  }\n  doSkipInvalid(ch, flags, checkTail) {\n    return Boolean(this.skipInvalid);\n  }\n\n  /** Prepares string before mask processing */\n  doPrepare(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    return ChangeDetails.normalize(this.prepare ? this.prepare(str, this, flags) : str);\n  }\n\n  /** Prepares each char before mask processing */\n  doPrepareChar(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    return ChangeDetails.normalize(this.prepareChar ? this.prepareChar(str, this, flags) : str);\n  }\n\n  /** Validates if value is acceptable */\n  doValidate(flags) {\n    return (!this.validate || this.validate(this.value, this, flags)) && (!this.parent || this.parent.doValidate(flags));\n  }\n\n  /** Does additional processing at the end of editing */\n  doCommit() {\n    if (this.commit) this.commit(this.value, this);\n  }\n  splice(start, deleteCount, inserted, removeDirection, flags) {\n    if (inserted === void 0) {\n      inserted = '';\n    }\n    if (removeDirection === void 0) {\n      removeDirection = DIRECTION.NONE;\n    }\n    if (flags === void 0) {\n      flags = {\n        input: true\n      };\n    }\n    const tailPos = start + deleteCount;\n    const tail = this.extractTail(tailPos);\n    const eagerRemove = this.eager === true || this.eager === 'remove';\n    let oldRawValue;\n    if (eagerRemove) {\n      removeDirection = forceDirection(removeDirection);\n      oldRawValue = this.extractInput(0, tailPos, {\n        raw: true\n      });\n    }\n    let startChangePos = start;\n    const details = new ChangeDetails();\n\n    // if it is just deletion without insertion\n    if (removeDirection !== DIRECTION.NONE) {\n      startChangePos = this.nearestInputPos(start, deleteCount > 1 && start !== 0 && !eagerRemove ? DIRECTION.NONE : removeDirection);\n\n      // adjust tailShift if start was aligned\n      details.tailShift = startChangePos - start;\n    }\n    details.aggregate(this.remove(startChangePos));\n    if (eagerRemove && removeDirection !== DIRECTION.NONE && oldRawValue === this.rawInputValue) {\n      if (removeDirection === DIRECTION.FORCE_LEFT) {\n        let valLength;\n        while (oldRawValue === this.rawInputValue && (valLength = this.displayValue.length)) {\n          details.aggregate(new ChangeDetails({\n            tailShift: -1\n          })).aggregate(this.remove(valLength - 1));\n        }\n      } else if (removeDirection === DIRECTION.FORCE_RIGHT) {\n        tail.unshift();\n      }\n    }\n    return details.aggregate(this.append(inserted, flags, tail));\n  }\n  maskEquals(mask) {\n    return this.mask === mask;\n  }\n  optionsIsChanged(opts) {\n    return !objectIncludes(this, opts);\n  }\n  typedValueEquals(value) {\n    const tval = this.typedValue;\n    return value === tval || Masked.EMPTY_VALUES.includes(value) && Masked.EMPTY_VALUES.includes(tval) || (this.format ? this.format(value, this) === this.format(this.typedValue, this) : false);\n  }\n  pad(flags) {\n    return new ChangeDetails();\n  }\n}\nMasked.DEFAULTS = {\n  skipInvalid: true\n};\nMasked.EMPTY_VALUES = [undefined, null, ''];\nIMask.Masked = Masked;\n\nexport { Masked as default };\n","import ChangeDetails from '../../core/change-details.js';\nimport { isString } from '../../core/utils.js';\nimport ContinuousTailDetails from '../../core/continuous-tail-details.js';\nimport IMask from '../../core/holder.js';\n\nclass ChunksTailDetails {\n  /** */\n\n  constructor(chunks, from) {\n    if (chunks === void 0) {\n      chunks = [];\n    }\n    if (from === void 0) {\n      from = 0;\n    }\n    this.chunks = chunks;\n    this.from = from;\n  }\n  toString() {\n    return this.chunks.map(String).join('');\n  }\n  extend(tailChunk) {\n    if (!String(tailChunk)) return;\n    tailChunk = isString(tailChunk) ? new ContinuousTailDetails(String(tailChunk)) : tailChunk;\n    const lastChunk = this.chunks[this.chunks.length - 1];\n    const extendLast = lastChunk && (\n    // if stops are same or tail has no stop\n    lastChunk.stop === tailChunk.stop || tailChunk.stop == null) &&\n    // if tail chunk goes just after last chunk\n    tailChunk.from === lastChunk.from + lastChunk.toString().length;\n    if (tailChunk instanceof ContinuousTailDetails) {\n      // check the ability to extend previous chunk\n      if (extendLast) {\n        // extend previous chunk\n        lastChunk.extend(tailChunk.toString());\n      } else {\n        // append new chunk\n        this.chunks.push(tailChunk);\n      }\n    } else if (tailChunk instanceof ChunksTailDetails) {\n      if (tailChunk.stop == null) {\n        // unwrap floating chunks to parent, keeping `from` pos\n        let firstTailChunk;\n        while (tailChunk.chunks.length && tailChunk.chunks[0].stop == null) {\n          firstTailChunk = tailChunk.chunks.shift(); // not possible to be `undefined` because length was checked above\n          firstTailChunk.from += tailChunk.from;\n          this.extend(firstTailChunk);\n        }\n      }\n\n      // if tail chunk still has value\n      if (tailChunk.toString()) {\n        // if chunks contains stops, then popup stop to container\n        tailChunk.stop = tailChunk.blockIndex;\n        this.chunks.push(tailChunk);\n      }\n    }\n  }\n  appendTo(masked) {\n    if (!(masked instanceof IMask.MaskedPattern)) {\n      const tail = new ContinuousTailDetails(this.toString());\n      return tail.appendTo(masked);\n    }\n    const details = new ChangeDetails();\n    for (let ci = 0; ci < this.chunks.length; ++ci) {\n      const chunk = this.chunks[ci];\n      const lastBlockIter = masked._mapPosToBlock(masked.displayValue.length);\n      const stop = chunk.stop;\n      let chunkBlock;\n      if (stop != null && (\n      // if block not found or stop is behind lastBlock\n      !lastBlockIter || lastBlockIter.index <= stop)) {\n        if (chunk instanceof ChunksTailDetails ||\n        // for continuous block also check if stop is exist\n        masked._stops.indexOf(stop) >= 0) {\n          details.aggregate(masked._appendPlaceholder(stop));\n        }\n        chunkBlock = chunk instanceof ChunksTailDetails && masked._blocks[stop];\n      }\n      if (chunkBlock) {\n        const tailDetails = chunkBlock.appendTail(chunk);\n        details.aggregate(tailDetails);\n\n        // get not inserted chars\n        const remainChars = chunk.toString().slice(tailDetails.rawInserted.length);\n        if (remainChars) details.aggregate(masked.append(remainChars, {\n          tail: true\n        }));\n      } else {\n        details.aggregate(masked.append(chunk.toString(), {\n          tail: true\n        }));\n      }\n    }\n    return details;\n  }\n  get state() {\n    return {\n      chunks: this.chunks.map(c => c.state),\n      from: this.from,\n      stop: this.stop,\n      blockIndex: this.blockIndex\n    };\n  }\n  set state(state) {\n    const {\n      chunks,\n      ...props\n    } = state;\n    Object.assign(this, props);\n    this.chunks = chunks.map(cstate => {\n      const chunk = \"chunks\" in cstate ? new ChunksTailDetails() : new ContinuousTailDetails();\n      chunk.state = cstate;\n      return chunk;\n    });\n  }\n  unshift(beforePos) {\n    if (!this.chunks.length || beforePos != null && this.from >= beforePos) return '';\n    const chunkShiftPos = beforePos != null ? beforePos - this.from : beforePos;\n    let ci = 0;\n    while (ci < this.chunks.length) {\n      const chunk = this.chunks[ci];\n      const shiftChar = chunk.unshift(chunkShiftPos);\n      if (chunk.toString()) {\n        // chunk still contains value\n        // but not shifted - means no more available chars to shift\n        if (!shiftChar) break;\n        ++ci;\n      } else {\n        // clean if chunk has no value\n        this.chunks.splice(ci, 1);\n      }\n      if (shiftChar) return shiftChar;\n    }\n    return '';\n  }\n  shift() {\n    if (!this.chunks.length) return '';\n    let ci = this.chunks.length - 1;\n    while (0 <= ci) {\n      const chunk = this.chunks[ci];\n      const shiftChar = chunk.shift();\n      if (chunk.toString()) {\n        // chunk still contains value\n        // but not shifted - means no more available chars to shift\n        if (!shiftChar) break;\n        --ci;\n      } else {\n        // clean if chunk has no value\n        this.chunks.splice(ci, 1);\n      }\n      if (shiftChar) return shiftChar;\n    }\n    return '';\n  }\n}\n\nexport { ChunksTailDetails as default };\n","import { DIRECTION } from '../../core/utils.js';\n\nclass PatternCursor {\n  constructor(masked, pos) {\n    this.masked = masked;\n    this._log = [];\n    const {\n      offset,\n      index\n    } = masked._mapPosToBlock(pos) || (pos < 0 ?\n    // first\n    {\n      index: 0,\n      offset: 0\n    } :\n    // last\n    {\n      index: this.masked._blocks.length,\n      offset: 0\n    });\n    this.offset = offset;\n    this.index = index;\n    this.ok = false;\n  }\n  get block() {\n    return this.masked._blocks[this.index];\n  }\n  get pos() {\n    return this.masked._blockStartPos(this.index) + this.offset;\n  }\n  get state() {\n    return {\n      index: this.index,\n      offset: this.offset,\n      ok: this.ok\n    };\n  }\n  set state(s) {\n    Object.assign(this, s);\n  }\n  pushState() {\n    this._log.push(this.state);\n  }\n  popState() {\n    const s = this._log.pop();\n    if (s) this.state = s;\n    return s;\n  }\n  bindBlock() {\n    if (this.block) return;\n    if (this.index < 0) {\n      this.index = 0;\n      this.offset = 0;\n    }\n    if (this.index >= this.masked._blocks.length) {\n      this.index = this.masked._blocks.length - 1;\n      this.offset = this.block.displayValue.length; // TODO this is stupid type error, `block` depends on index that was changed above\n    }\n  }\n  _pushLeft(fn) {\n    this.pushState();\n    for (this.bindBlock(); 0 <= this.index; --this.index, this.offset = ((_this$block = this.block) == null ? void 0 : _this$block.displayValue.length) || 0) {\n      var _this$block;\n      if (fn()) return this.ok = true;\n    }\n    return this.ok = false;\n  }\n  _pushRight(fn) {\n    this.pushState();\n    for (this.bindBlock(); this.index < this.masked._blocks.length; ++this.index, this.offset = 0) {\n      if (fn()) return this.ok = true;\n    }\n    return this.ok = false;\n  }\n  pushLeftBeforeFilled() {\n    return this._pushLeft(() => {\n      if (this.block.isFixed || !this.block.value) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.FORCE_LEFT);\n      if (this.offset !== 0) return true;\n    });\n  }\n  pushLeftBeforeInput() {\n    // cases:\n    // filled input: 00|\n    // optional empty input: 00[]|\n    // nested block: XX<[]>|\n    return this._pushLeft(() => {\n      if (this.block.isFixed) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.LEFT);\n      return true;\n    });\n  }\n  pushLeftBeforeRequired() {\n    return this._pushLeft(() => {\n      if (this.block.isFixed || this.block.isOptional && !this.block.value) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.LEFT);\n      return true;\n    });\n  }\n  pushRightBeforeFilled() {\n    return this._pushRight(() => {\n      if (this.block.isFixed || !this.block.value) return;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.FORCE_RIGHT);\n      if (this.offset !== this.block.value.length) return true;\n    });\n  }\n  pushRightBeforeInput() {\n    return this._pushRight(() => {\n      if (this.block.isFixed) return;\n\n      // const o = this.offset;\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.NONE);\n      // HACK cases like (STILL DOES NOT WORK FOR NESTED)\n      // aa|X\n      // aa<X|[]>X_    - this will not work\n      // if (o && o === this.offset && this.block instanceof PatternInputDefinition) continue;\n      return true;\n    });\n  }\n  pushRightBeforeRequired() {\n    return this._pushRight(() => {\n      if (this.block.isFixed || this.block.isOptional && !this.block.value) return;\n\n      // TODO check |[*]XX_\n      this.offset = this.block.nearestInputPos(this.offset, DIRECTION.NONE);\n      return true;\n    });\n  }\n}\n\nexport { PatternCursor as default };\n","import ChangeDetails from '../../core/change-details.js';\nimport { DIRECTION, isString } from '../../core/utils.js';\nimport ContinuousTailDetails from '../../core/continuous-tail-details.js';\nimport '../../core/holder.js';\n\nclass PatternFixedDefinition {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    Object.assign(this, opts);\n    this._value = '';\n    this.isFixed = true;\n  }\n  get value() {\n    return this._value;\n  }\n  get unmaskedValue() {\n    return this.isUnmasking ? this.value : '';\n  }\n  get rawInputValue() {\n    return this._isRawInput ? this.value : '';\n  }\n  get displayValue() {\n    return this.value;\n  }\n  reset() {\n    this._isRawInput = false;\n    this._value = '';\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this._value.length;\n    }\n    this._value = this._value.slice(0, fromPos) + this._value.slice(toPos);\n    if (!this._value) this._isRawInput = false;\n    return new ChangeDetails();\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (direction === void 0) {\n      direction = DIRECTION.NONE;\n    }\n    const minPos = 0;\n    const maxPos = this._value.length;\n    switch (direction) {\n      case DIRECTION.LEFT:\n      case DIRECTION.FORCE_LEFT:\n        return minPos;\n      case DIRECTION.NONE:\n      case DIRECTION.RIGHT:\n      case DIRECTION.FORCE_RIGHT:\n      default:\n        return maxPos;\n    }\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this._value.length;\n    }\n    return this._isRawInput ? toPos - fromPos : 0;\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this._value.length;\n    }\n    if (flags === void 0) {\n      flags = {};\n    }\n    return flags.raw && this._isRawInput && this._value.slice(fromPos, toPos) || '';\n  }\n  get isComplete() {\n    return true;\n  }\n  get isFilled() {\n    return Boolean(this._value);\n  }\n  _appendChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (this.isFilled) return new ChangeDetails();\n    const appendEager = this.eager === true || this.eager === 'append';\n    const appended = this.char === ch;\n    const isResolved = appended && (this.isUnmasking || flags.input || flags.raw) && (!flags.raw || !appendEager) && !flags.tail;\n    const details = new ChangeDetails({\n      inserted: this.char,\n      rawInserted: isResolved ? this.char : ''\n    });\n    this._value = this.char;\n    this._isRawInput = isResolved && (flags.raw || flags.input);\n    return details;\n  }\n  _appendEager() {\n    return this._appendChar(this.char, {\n      tail: true\n    });\n  }\n  _appendPlaceholder() {\n    const details = new ChangeDetails();\n    if (this.isFilled) return details;\n    this._value = details.inserted = this.char;\n    return details;\n  }\n  extractTail() {\n    return new ContinuousTailDetails('');\n  }\n  appendTail(tail) {\n    if (isString(tail)) tail = new ContinuousTailDetails(String(tail));\n    return tail.appendTo(this);\n  }\n  append(str, flags, tail) {\n    const details = this._appendChar(str[0], flags);\n    if (tail != null) {\n      details.tailShift += this.appendTail(tail).tailShift;\n    }\n    return details;\n  }\n  doCommit() {}\n  get state() {\n    return {\n      _value: this._value,\n      _rawInputValue: this.rawInputValue\n    };\n  }\n  set state(state) {\n    this._value = state._value;\n    this._isRawInput = Boolean(state._rawInputValue);\n  }\n  pad(flags) {\n    return this._appendPlaceholder();\n  }\n}\n\nexport { PatternFixedDefinition as default };\n","import createMask from '../factory.js';\nimport ChangeDetails from '../../core/change-details.js';\nimport { DIRECTION } from '../../core/utils.js';\nimport '../../core/holder.js';\n\nclass PatternInputDefinition {\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    const {\n      parent,\n      isOptional,\n      placeholderChar,\n      displayChar,\n      lazy,\n      eager,\n      ...maskOpts\n    } = opts;\n    this.masked = createMask(maskOpts);\n    Object.assign(this, {\n      parent,\n      isOptional,\n      placeholderChar,\n      displayChar,\n      lazy,\n      eager\n    });\n  }\n  reset() {\n    this.isFilled = false;\n    this.masked.reset();\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.value.length;\n    }\n    if (fromPos === 0 && toPos >= 1) {\n      this.isFilled = false;\n      return this.masked.remove(fromPos, toPos);\n    }\n    return new ChangeDetails();\n  }\n  get value() {\n    return this.masked.value || (this.isFilled && !this.isOptional ? this.placeholderChar : '');\n  }\n  get unmaskedValue() {\n    return this.masked.unmaskedValue;\n  }\n  get rawInputValue() {\n    return this.masked.rawInputValue;\n  }\n  get displayValue() {\n    return this.masked.value && this.displayChar || this.value;\n  }\n  get isComplete() {\n    return Boolean(this.masked.value) || this.isOptional;\n  }\n  _appendChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (this.isFilled) return new ChangeDetails();\n    const state = this.masked.state;\n    // simulate input\n    let details = this.masked._appendChar(ch, this.currentMaskFlags(flags));\n    if (details.inserted && this.doValidate(flags) === false) {\n      details = new ChangeDetails();\n      this.masked.state = state;\n    }\n    if (!details.inserted && !this.isOptional && !this.lazy && !flags.input) {\n      details.inserted = this.placeholderChar;\n    }\n    details.skip = !details.inserted && !this.isOptional;\n    this.isFilled = Boolean(details.inserted);\n    return details;\n  }\n  append(str, flags, tail) {\n    // TODO probably should be done via _appendChar\n    return this.masked.append(str, this.currentMaskFlags(flags), tail);\n  }\n  _appendPlaceholder() {\n    if (this.isFilled || this.isOptional) return new ChangeDetails();\n    this.isFilled = true;\n    return new ChangeDetails({\n      inserted: this.placeholderChar\n    });\n  }\n  _appendEager() {\n    return new ChangeDetails();\n  }\n  extractTail(fromPos, toPos) {\n    return this.masked.extractTail(fromPos, toPos);\n  }\n  appendTail(tail) {\n    return this.masked.appendTail(tail);\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.value.length;\n    }\n    return this.masked.extractInput(fromPos, toPos, flags);\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (direction === void 0) {\n      direction = DIRECTION.NONE;\n    }\n    const minPos = 0;\n    const maxPos = this.value.length;\n    const boundPos = Math.min(Math.max(cursorPos, minPos), maxPos);\n    switch (direction) {\n      case DIRECTION.LEFT:\n      case DIRECTION.FORCE_LEFT:\n        return this.isComplete ? boundPos : minPos;\n      case DIRECTION.RIGHT:\n      case DIRECTION.FORCE_RIGHT:\n        return this.isComplete ? boundPos : maxPos;\n      case DIRECTION.NONE:\n      default:\n        return boundPos;\n    }\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.value.length;\n    }\n    return this.value.slice(fromPos, toPos).length;\n  }\n  doValidate(flags) {\n    return this.masked.doValidate(this.currentMaskFlags(flags)) && (!this.parent || this.parent.doValidate(this.currentMaskFlags(flags)));\n  }\n  doCommit() {\n    this.masked.doCommit();\n  }\n  get state() {\n    return {\n      _value: this.value,\n      _rawInputValue: this.rawInputValue,\n      masked: this.masked.state,\n      isFilled: this.isFilled\n    };\n  }\n  set state(state) {\n    this.masked.state = state.masked;\n    this.isFilled = state.isFilled;\n  }\n  currentMaskFlags(flags) {\n    var _flags$_beforeTailSta;\n    return {\n      ...flags,\n      _beforeTailState: (flags == null || (_flags$_beforeTailSta = flags._beforeTailState) == null ? void 0 : _flags$_beforeTailSta.masked) || (flags == null ? void 0 : flags._beforeTailState)\n    };\n  }\n  pad(flags) {\n    return new ChangeDetails();\n  }\n}\nPatternInputDefinition.DEFAULT_DEFINITIONS = {\n  '0': /\\d/,\n  'a': /[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/,\n  // http://stackoverflow.com/a/22075070\n  '*': /./\n};\n\nexport { PatternInputDefinition as default };\n","import Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/change-details.js';\nimport '../core/continuous-tail-details.js';\nimport '../core/utils.js';\n\n/** Masking by RegExp */\nclass MaskedRegExp extends Masked {\n  /** */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const mask = opts.mask;\n    if (mask) opts.validate = value => value.search(mask) >= 0;\n    super._update(opts);\n  }\n}\nIMask.MaskedRegExp = MaskedRegExp;\n\nexport { MaskedRegExp as default };\n","import ChangeDetails from '../core/change-details.js';\nimport IMask from '../core/holder.js';\nimport { DIRECTION } from '../core/utils.js';\nimport Masked from './base.js';\nimport createMask, { normalizeOpts } from './factory.js';\nimport ChunksTailDetails from './pattern/chunk-tail-details.js';\nimport PatternCursor from './pattern/cursor.js';\nimport PatternFixedDefinition from './pattern/fixed-definition.js';\nimport PatternInputDefinition from './pattern/input-definition.js';\nimport './regexp.js';\nimport '../core/continuous-tail-details.js';\n\n/** Pattern mask */\nclass MaskedPattern extends Masked {\n  /** */\n\n  /** */\n\n  /** Single char for empty input */\n\n  /** Single char for filled input */\n\n  /** Show placeholder only when needed */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  constructor(opts) {\n    super({\n      ...MaskedPattern.DEFAULTS,\n      ...opts,\n      definitions: Object.assign({}, PatternInputDefinition.DEFAULT_DEFINITIONS, opts == null ? void 0 : opts.definitions)\n    });\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    opts.definitions = Object.assign({}, this.definitions, opts.definitions);\n    super._update(opts);\n    this._rebuildMask();\n  }\n  _rebuildMask() {\n    const defs = this.definitions;\n    this._blocks = [];\n    this.exposeBlock = undefined;\n    this._stops = [];\n    this._maskedBlocks = {};\n    const pattern = this.mask;\n    if (!pattern || !defs) return;\n    let unmaskingBlock = false;\n    let optionalBlock = false;\n    for (let i = 0; i < pattern.length; ++i) {\n      if (this.blocks) {\n        const p = pattern.slice(i);\n        const bNames = Object.keys(this.blocks).filter(bName => p.indexOf(bName) === 0);\n        // order by key length\n        bNames.sort((a, b) => b.length - a.length);\n        // use block name with max length\n        const bName = bNames[0];\n        if (bName) {\n          const {\n            expose,\n            repeat,\n            ...bOpts\n          } = normalizeOpts(this.blocks[bName]); // TODO type Opts<Arg & Extra>\n          const blockOpts = {\n            lazy: this.lazy,\n            eager: this.eager,\n            placeholderChar: this.placeholderChar,\n            displayChar: this.displayChar,\n            overwrite: this.overwrite,\n            autofix: this.autofix,\n            ...bOpts,\n            repeat,\n            parent: this\n          };\n          const maskedBlock = repeat != null ? new IMask.RepeatBlock(blockOpts /* TODO */) : createMask(blockOpts);\n          if (maskedBlock) {\n            this._blocks.push(maskedBlock);\n            if (expose) this.exposeBlock = maskedBlock;\n\n            // store block index\n            if (!this._maskedBlocks[bName]) this._maskedBlocks[bName] = [];\n            this._maskedBlocks[bName].push(this._blocks.length - 1);\n          }\n          i += bName.length - 1;\n          continue;\n        }\n      }\n      let char = pattern[i];\n      let isInput = (char in defs);\n      if (char === MaskedPattern.STOP_CHAR) {\n        this._stops.push(this._blocks.length);\n        continue;\n      }\n      if (char === '{' || char === '}') {\n        unmaskingBlock = !unmaskingBlock;\n        continue;\n      }\n      if (char === '[' || char === ']') {\n        optionalBlock = !optionalBlock;\n        continue;\n      }\n      if (char === MaskedPattern.ESCAPE_CHAR) {\n        ++i;\n        char = pattern[i];\n        if (!char) break;\n        isInput = false;\n      }\n      const def = isInput ? new PatternInputDefinition({\n        isOptional: optionalBlock,\n        lazy: this.lazy,\n        eager: this.eager,\n        placeholderChar: this.placeholderChar,\n        displayChar: this.displayChar,\n        ...normalizeOpts(defs[char]),\n        parent: this\n      }) : new PatternFixedDefinition({\n        char,\n        eager: this.eager,\n        isUnmasking: unmaskingBlock\n      });\n      this._blocks.push(def);\n    }\n  }\n  get state() {\n    return {\n      ...super.state,\n      _blocks: this._blocks.map(b => b.state)\n    };\n  }\n  set state(state) {\n    if (!state) {\n      this.reset();\n      return;\n    }\n    const {\n      _blocks,\n      ...maskedState\n    } = state;\n    this._blocks.forEach((b, bi) => b.state = _blocks[bi]);\n    super.state = maskedState;\n  }\n  reset() {\n    super.reset();\n    this._blocks.forEach(b => b.reset());\n  }\n  get isComplete() {\n    return this.exposeBlock ? this.exposeBlock.isComplete : this._blocks.every(b => b.isComplete);\n  }\n  get isFilled() {\n    return this._blocks.every(b => b.isFilled);\n  }\n  get isFixed() {\n    return this._blocks.every(b => b.isFixed);\n  }\n  get isOptional() {\n    return this._blocks.every(b => b.isOptional);\n  }\n  doCommit() {\n    this._blocks.forEach(b => b.doCommit());\n    super.doCommit();\n  }\n  get unmaskedValue() {\n    return this.exposeBlock ? this.exposeBlock.unmaskedValue : this._blocks.reduce((str, b) => str += b.unmaskedValue, '');\n  }\n  set unmaskedValue(unmaskedValue) {\n    if (this.exposeBlock) {\n      const tail = this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock)) + this.exposeBlock.displayValue.length);\n      this.exposeBlock.unmaskedValue = unmaskedValue;\n      this.appendTail(tail);\n      this.doCommit();\n    } else super.unmaskedValue = unmaskedValue;\n  }\n  get value() {\n    return this.exposeBlock ? this.exposeBlock.value :\n    // TODO return _value when not in change?\n    this._blocks.reduce((str, b) => str += b.value, '');\n  }\n  set value(value) {\n    if (this.exposeBlock) {\n      const tail = this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock)) + this.exposeBlock.displayValue.length);\n      this.exposeBlock.value = value;\n      this.appendTail(tail);\n      this.doCommit();\n    } else super.value = value;\n  }\n  get typedValue() {\n    return this.exposeBlock ? this.exposeBlock.typedValue : super.typedValue;\n  }\n  set typedValue(value) {\n    if (this.exposeBlock) {\n      const tail = this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock)) + this.exposeBlock.displayValue.length);\n      this.exposeBlock.typedValue = value;\n      this.appendTail(tail);\n      this.doCommit();\n    } else super.typedValue = value;\n  }\n  get displayValue() {\n    return this._blocks.reduce((str, b) => str += b.displayValue, '');\n  }\n  appendTail(tail) {\n    return super.appendTail(tail).aggregate(this._appendPlaceholder());\n  }\n  _appendEager() {\n    var _this$_mapPosToBlock;\n    const details = new ChangeDetails();\n    let startBlockIndex = (_this$_mapPosToBlock = this._mapPosToBlock(this.displayValue.length)) == null ? void 0 : _this$_mapPosToBlock.index;\n    if (startBlockIndex == null) return details;\n\n    // TODO test if it works for nested pattern masks\n    if (this._blocks[startBlockIndex].isFilled) ++startBlockIndex;\n    for (let bi = startBlockIndex; bi < this._blocks.length; ++bi) {\n      const d = this._blocks[bi]._appendEager();\n      if (!d.inserted) break;\n      details.aggregate(d);\n    }\n    return details;\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const blockIter = this._mapPosToBlock(this.displayValue.length);\n    const details = new ChangeDetails();\n    if (!blockIter) return details;\n    for (let bi = blockIter.index, block; block = this._blocks[bi]; ++bi) {\n      var _flags$_beforeTailSta;\n      const blockDetails = block._appendChar(ch, {\n        ...flags,\n        _beforeTailState: (_flags$_beforeTailSta = flags._beforeTailState) == null || (_flags$_beforeTailSta = _flags$_beforeTailSta._blocks) == null ? void 0 : _flags$_beforeTailSta[bi]\n      });\n      details.aggregate(blockDetails);\n      if (blockDetails.consumed) break; // go next char\n    }\n    return details;\n  }\n  extractTail(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    const chunkTail = new ChunksTailDetails();\n    if (fromPos === toPos) return chunkTail;\n    this._forEachBlocksInRange(fromPos, toPos, (b, bi, bFromPos, bToPos) => {\n      const blockChunk = b.extractTail(bFromPos, bToPos);\n      blockChunk.stop = this._findStopBefore(bi);\n      blockChunk.from = this._blockStartPos(bi);\n      if (blockChunk instanceof ChunksTailDetails) blockChunk.blockIndex = bi;\n      chunkTail.extend(blockChunk);\n    });\n    return chunkTail;\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (fromPos === toPos) return '';\n    let input = '';\n    this._forEachBlocksInRange(fromPos, toPos, (b, _, fromPos, toPos) => {\n      input += b.extractInput(fromPos, toPos, flags);\n    });\n    return input;\n  }\n  _findStopBefore(blockIndex) {\n    let stopBefore;\n    for (let si = 0; si < this._stops.length; ++si) {\n      const stop = this._stops[si];\n      if (stop <= blockIndex) stopBefore = stop;else break;\n    }\n    return stopBefore;\n  }\n\n  /** Appends placeholder depending on laziness */\n  _appendPlaceholder(toBlockIndex) {\n    const details = new ChangeDetails();\n    if (this.lazy && toBlockIndex == null) return details;\n    const startBlockIter = this._mapPosToBlock(this.displayValue.length);\n    if (!startBlockIter) return details;\n    const startBlockIndex = startBlockIter.index;\n    const endBlockIndex = toBlockIndex != null ? toBlockIndex : this._blocks.length;\n    this._blocks.slice(startBlockIndex, endBlockIndex).forEach(b => {\n      if (!b.lazy || toBlockIndex != null) {\n        var _blocks2;\n        details.aggregate(b._appendPlaceholder((_blocks2 = b._blocks) == null ? void 0 : _blocks2.length));\n      }\n    });\n    return details;\n  }\n\n  /** Finds block in pos */\n  _mapPosToBlock(pos) {\n    let accVal = '';\n    for (let bi = 0; bi < this._blocks.length; ++bi) {\n      const block = this._blocks[bi];\n      const blockStartPos = accVal.length;\n      accVal += block.displayValue;\n      if (pos <= accVal.length) {\n        return {\n          index: bi,\n          offset: pos - blockStartPos\n        };\n      }\n    }\n  }\n  _blockStartPos(blockIndex) {\n    return this._blocks.slice(0, blockIndex).reduce((pos, b) => pos += b.displayValue.length, 0);\n  }\n  _forEachBlocksInRange(fromPos, toPos, fn) {\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    const fromBlockIter = this._mapPosToBlock(fromPos);\n    if (fromBlockIter) {\n      const toBlockIter = this._mapPosToBlock(toPos);\n      // process first block\n      const isSameBlock = toBlockIter && fromBlockIter.index === toBlockIter.index;\n      const fromBlockStartPos = fromBlockIter.offset;\n      const fromBlockEndPos = toBlockIter && isSameBlock ? toBlockIter.offset : this._blocks[fromBlockIter.index].displayValue.length;\n      fn(this._blocks[fromBlockIter.index], fromBlockIter.index, fromBlockStartPos, fromBlockEndPos);\n      if (toBlockIter && !isSameBlock) {\n        // process intermediate blocks\n        for (let bi = fromBlockIter.index + 1; bi < toBlockIter.index; ++bi) {\n          fn(this._blocks[bi], bi, 0, this._blocks[bi].displayValue.length);\n        }\n\n        // process last block\n        fn(this._blocks[toBlockIter.index], toBlockIter.index, 0, toBlockIter.offset);\n      }\n    }\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    const removeDetails = super.remove(fromPos, toPos);\n    this._forEachBlocksInRange(fromPos, toPos, (b, _, bFromPos, bToPos) => {\n      removeDetails.aggregate(b.remove(bFromPos, bToPos));\n    });\n    return removeDetails;\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (direction === void 0) {\n      direction = DIRECTION.NONE;\n    }\n    if (!this._blocks.length) return 0;\n    const cursor = new PatternCursor(this, cursorPos);\n    if (direction === DIRECTION.NONE) {\n      // -------------------------------------------------\n      // NONE should only go out from fixed to the right!\n      // -------------------------------------------------\n      if (cursor.pushRightBeforeInput()) return cursor.pos;\n      cursor.popState();\n      if (cursor.pushLeftBeforeInput()) return cursor.pos;\n      return this.displayValue.length;\n    }\n\n    // FORCE is only about a|* otherwise is 0\n    if (direction === DIRECTION.LEFT || direction === DIRECTION.FORCE_LEFT) {\n      // try to break fast when *|a\n      if (direction === DIRECTION.LEFT) {\n        cursor.pushRightBeforeFilled();\n        if (cursor.ok && cursor.pos === cursorPos) return cursorPos;\n        cursor.popState();\n      }\n\n      // forward flow\n      cursor.pushLeftBeforeInput();\n      cursor.pushLeftBeforeRequired();\n      cursor.pushLeftBeforeFilled();\n\n      // backward flow\n      if (direction === DIRECTION.LEFT) {\n        cursor.pushRightBeforeInput();\n        cursor.pushRightBeforeRequired();\n        if (cursor.ok && cursor.pos <= cursorPos) return cursor.pos;\n        cursor.popState();\n        if (cursor.ok && cursor.pos <= cursorPos) return cursor.pos;\n        cursor.popState();\n      }\n      if (cursor.ok) return cursor.pos;\n      if (direction === DIRECTION.FORCE_LEFT) return 0;\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      return 0;\n    }\n    if (direction === DIRECTION.RIGHT || direction === DIRECTION.FORCE_RIGHT) {\n      // forward flow\n      cursor.pushRightBeforeInput();\n      cursor.pushRightBeforeRequired();\n      if (cursor.pushRightBeforeFilled()) return cursor.pos;\n      if (direction === DIRECTION.FORCE_RIGHT) return this.displayValue.length;\n\n      // backward flow\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      cursor.popState();\n      if (cursor.ok) return cursor.pos;\n      return this.nearestInputPos(cursorPos, DIRECTION.LEFT);\n    }\n    return cursorPos;\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    let total = 0;\n    this._forEachBlocksInRange(fromPos, toPos, (b, _, bFromPos, bToPos) => {\n      total += b.totalInputPositions(bFromPos, bToPos);\n    });\n    return total;\n  }\n\n  /** Get block by name */\n  maskedBlock(name) {\n    return this.maskedBlocks(name)[0];\n  }\n\n  /** Get all blocks by name */\n  maskedBlocks(name) {\n    const indices = this._maskedBlocks[name];\n    if (!indices) return [];\n    return indices.map(gi => this._blocks[gi]);\n  }\n  pad(flags) {\n    const details = new ChangeDetails();\n    this._forEachBlocksInRange(0, this.displayValue.length, b => details.aggregate(b.pad(flags)));\n    return details;\n  }\n}\nMaskedPattern.DEFAULTS = {\n  ...Masked.DEFAULTS,\n  lazy: true,\n  placeholderChar: '_'\n};\nMaskedPattern.STOP_CHAR = '`';\nMaskedPattern.ESCAPE_CHAR = '\\\\';\nMaskedPattern.InputDefinition = PatternInputDefinition;\nMaskedPattern.FixedDefinition = PatternFixedDefinition;\nIMask.MaskedPattern = MaskedPattern;\n\nexport { MaskedPattern as default };\n","import ChangeDetails from '../core/change-details.js';\nimport IMask from '../core/holder.js';\nimport MaskedPattern from './pattern.js';\nimport '../core/utils.js';\nimport './base.js';\nimport '../core/continuous-tail-details.js';\nimport './factory.js';\nimport './pattern/chunk-tail-details.js';\nimport './pattern/cursor.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/input-definition.js';\nimport './regexp.js';\n\n/** Pattern which accepts ranges */\nclass MaskedRange extends MaskedPattern {\n  /**\n    Optionally sets max length of pattern.\n    Used when pattern length is longer then `to` param length. Pads zeros at start in this case.\n  */\n\n  /** Min bound */\n\n  /** Max bound */\n\n  get _matchFrom() {\n    return this.maxLength - String(this.from).length;\n  }\n  constructor(opts) {\n    super(opts); // mask will be created in _update\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const {\n      to = this.to || 0,\n      from = this.from || 0,\n      maxLength = this.maxLength || 0,\n      autofix = this.autofix,\n      ...patternOpts\n    } = opts;\n    this.to = to;\n    this.from = from;\n    this.maxLength = Math.max(String(to).length, maxLength);\n    this.autofix = autofix;\n    const fromStr = String(this.from).padStart(this.maxLength, '0');\n    const toStr = String(this.to).padStart(this.maxLength, '0');\n    let sameCharsCount = 0;\n    while (sameCharsCount < toStr.length && toStr[sameCharsCount] === fromStr[sameCharsCount]) ++sameCharsCount;\n    patternOpts.mask = toStr.slice(0, sameCharsCount).replace(/0/g, '\\\\0') + '0'.repeat(this.maxLength - sameCharsCount);\n    super._update(patternOpts);\n  }\n  get isComplete() {\n    return super.isComplete && Boolean(this.value);\n  }\n  boundaries(str) {\n    let minstr = '';\n    let maxstr = '';\n    const [, placeholder, num] = str.match(/^(\\D*)(\\d*)(\\D*)/) || [];\n    if (num) {\n      minstr = '0'.repeat(placeholder.length) + num;\n      maxstr = '9'.repeat(placeholder.length) + num;\n    }\n    minstr = minstr.padEnd(this.maxLength, '0');\n    maxstr = maxstr.padEnd(this.maxLength, '9');\n    return [minstr, maxstr];\n  }\n  doPrepareChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    let details;\n    [ch, details] = super.doPrepareChar(ch.replace(/\\D/g, ''), flags);\n    if (!ch) details.skip = !this.isComplete;\n    return [ch, details];\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (!this.autofix || this.value.length + 1 > this.maxLength) return super._appendCharRaw(ch, flags);\n    const fromStr = String(this.from).padStart(this.maxLength, '0');\n    const toStr = String(this.to).padStart(this.maxLength, '0');\n    const [minstr, maxstr] = this.boundaries(this.value + ch);\n    if (Number(maxstr) < this.from) return super._appendCharRaw(fromStr[this.value.length], flags);\n    if (Number(minstr) > this.to) {\n      if (!flags.tail && this.autofix === 'pad' && this.value.length + 1 < this.maxLength) {\n        return super._appendCharRaw(fromStr[this.value.length], flags).aggregate(this._appendCharRaw(ch, flags));\n      }\n      return super._appendCharRaw(toStr[this.value.length], flags);\n    }\n    return super._appendCharRaw(ch, flags);\n  }\n  doValidate(flags) {\n    const str = this.value;\n    const firstNonZero = str.search(/[^0]/);\n    if (firstNonZero === -1 && str.length <= this._matchFrom) return true;\n    const [minstr, maxstr] = this.boundaries(str);\n    return this.from <= Number(maxstr) && Number(minstr) <= this.to && super.doValidate(flags);\n  }\n  pad(flags) {\n    const details = new ChangeDetails();\n    if (this.value.length === this.maxLength) return details;\n    const value = this.value;\n    const padLength = this.maxLength - this.value.length;\n    if (padLength) {\n      this.reset();\n      for (let i = 0; i < padLength; ++i) {\n        details.aggregate(super._appendCharRaw('0', flags));\n      }\n\n      // append tail\n      value.split('').forEach(ch => this._appendCharRaw(ch));\n    }\n    return details;\n  }\n}\nIMask.MaskedRange = MaskedRange;\n\nexport { MaskedRange as default };\n","import MaskedPattern from './pattern.js';\nimport MaskedRange from './range.js';\nimport IMask from '../core/holder.js';\nimport { isString } from '../core/utils.js';\nimport '../core/change-details.js';\nimport './base.js';\nimport '../core/continuous-tail-details.js';\nimport './factory.js';\nimport './pattern/chunk-tail-details.js';\nimport './pattern/cursor.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/input-definition.js';\nimport './regexp.js';\n\nconst DefaultPattern = 'd{.}`m{.}`Y';\n\n// Make format and parse required when pattern is provided\n\n/** Date mask */\nclass MaskedDate extends MaskedPattern {\n  static extractPatternOptions(opts) {\n    const {\n      mask,\n      pattern,\n      ...patternOpts\n    } = opts;\n    return {\n      ...patternOpts,\n      mask: isString(mask) ? mask : pattern\n    };\n  }\n\n  /** Pattern mask for date according to {@link MaskedDate#format} */\n\n  /** Start date */\n\n  /** End date */\n\n  /** Format typed value to string */\n\n  /** Parse string to get typed value */\n\n  constructor(opts) {\n    super(MaskedDate.extractPatternOptions({\n      ...MaskedDate.DEFAULTS,\n      ...opts\n    }));\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const {\n      mask,\n      pattern,\n      blocks,\n      ...patternOpts\n    } = {\n      ...MaskedDate.DEFAULTS,\n      ...opts\n    };\n    const patternBlocks = Object.assign({}, MaskedDate.GET_DEFAULT_BLOCKS());\n    // adjust year block\n    if (opts.min) patternBlocks.Y.from = opts.min.getFullYear();\n    if (opts.max) patternBlocks.Y.to = opts.max.getFullYear();\n    if (opts.min && opts.max && patternBlocks.Y.from === patternBlocks.Y.to) {\n      patternBlocks.m.from = opts.min.getMonth() + 1;\n      patternBlocks.m.to = opts.max.getMonth() + 1;\n      if (patternBlocks.m.from === patternBlocks.m.to) {\n        patternBlocks.d.from = opts.min.getDate();\n        patternBlocks.d.to = opts.max.getDate();\n      }\n    }\n    Object.assign(patternBlocks, this.blocks, blocks);\n    super._update({\n      ...patternOpts,\n      mask: isString(mask) ? mask : pattern,\n      blocks: patternBlocks\n    });\n  }\n  doValidate(flags) {\n    const date = this.date;\n    return super.doValidate(flags) && (!this.isComplete || this.isDateExist(this.value) && date != null && (this.min == null || this.min <= date) && (this.max == null || date <= this.max));\n  }\n\n  /** Checks if date is exists */\n  isDateExist(str) {\n    return this.format(this.parse(str, this), this).indexOf(str) >= 0;\n  }\n\n  /** Parsed Date */\n  get date() {\n    return this.typedValue;\n  }\n  set date(date) {\n    this.typedValue = date;\n  }\n  get typedValue() {\n    return this.isComplete ? super.typedValue : null;\n  }\n  set typedValue(value) {\n    super.typedValue = value;\n  }\n  maskEquals(mask) {\n    return mask === Date || super.maskEquals(mask);\n  }\n  optionsIsChanged(opts) {\n    return super.optionsIsChanged(MaskedDate.extractPatternOptions(opts));\n  }\n}\nMaskedDate.GET_DEFAULT_BLOCKS = () => ({\n  d: {\n    mask: MaskedRange,\n    from: 1,\n    to: 31,\n    maxLength: 2\n  },\n  m: {\n    mask: MaskedRange,\n    from: 1,\n    to: 12,\n    maxLength: 2\n  },\n  Y: {\n    mask: MaskedRange,\n    from: 1900,\n    to: 9999\n  }\n});\nMaskedDate.DEFAULTS = {\n  ...MaskedPattern.DEFAULTS,\n  mask: Date,\n  pattern: DefaultPattern,\n  format: (date, masked) => {\n    if (!date) return '';\n    const day = String(date.getDate()).padStart(2, '0');\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const year = date.getFullYear();\n    return [day, month, year].join('.');\n  },\n  parse: (str, masked) => {\n    const [day, month, year] = str.split('.').map(Number);\n    return new Date(year, month - 1, day);\n  }\n};\nIMask.MaskedDate = MaskedDate;\n\nexport { MaskedDate as default };\n","import { DIRECTION, objectIncludes } from '../core/utils.js';\nimport ChangeDetails from '../core/change-details.js';\nimport createMask, { normalizeOpts } from './factory.js';\nimport Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/continuous-tail-details.js';\n\n/** Dynamic mask for choosing appropriate mask in run-time */\nclass MaskedDynamic extends Masked {\n  constructor(opts) {\n    super({\n      ...MaskedDynamic.DEFAULTS,\n      ...opts\n    });\n    this.currentMask = undefined;\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    super._update(opts);\n    if ('mask' in opts) {\n      this.exposeMask = undefined;\n      // mask could be totally dynamic with only `dispatch` option\n      this.compiledMasks = Array.isArray(opts.mask) ? opts.mask.map(m => {\n        const {\n          expose,\n          ...maskOpts\n        } = normalizeOpts(m);\n        const masked = createMask({\n          overwrite: this._overwrite,\n          eager: this._eager,\n          skipInvalid: this._skipInvalid,\n          ...maskOpts\n        });\n        if (expose) this.exposeMask = masked;\n        return masked;\n      }) : [];\n\n      // this.currentMask = this.doDispatch(''); // probably not needed but lets see\n    }\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const details = this._applyDispatch(ch, flags);\n    if (this.currentMask) {\n      details.aggregate(this.currentMask._appendChar(ch, this.currentMaskFlags(flags)));\n    }\n    return details;\n  }\n  _applyDispatch(appended, flags, tail) {\n    if (appended === void 0) {\n      appended = '';\n    }\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (tail === void 0) {\n      tail = '';\n    }\n    const prevValueBeforeTail = flags.tail && flags._beforeTailState != null ? flags._beforeTailState._value : this.value;\n    const inputValue = this.rawInputValue;\n    const insertValue = flags.tail && flags._beforeTailState != null ? flags._beforeTailState._rawInputValue : inputValue;\n    const tailValue = inputValue.slice(insertValue.length);\n    const prevMask = this.currentMask;\n    const details = new ChangeDetails();\n    const prevMaskState = prevMask == null ? void 0 : prevMask.state;\n\n    // clone flags to prevent overwriting `_beforeTailState`\n    this.currentMask = this.doDispatch(appended, {\n      ...flags\n    }, tail);\n\n    // restore state after dispatch\n    if (this.currentMask) {\n      if (this.currentMask !== prevMask) {\n        // if mask changed reapply input\n        this.currentMask.reset();\n        if (insertValue) {\n          this.currentMask.append(insertValue, {\n            raw: true\n          });\n          details.tailShift = this.currentMask.value.length - prevValueBeforeTail.length;\n        }\n        if (tailValue) {\n          details.tailShift += this.currentMask.append(tailValue, {\n            raw: true,\n            tail: true\n          }).tailShift;\n        }\n      } else if (prevMaskState) {\n        // Dispatch can do something bad with state, so\n        // restore prev mask state\n        this.currentMask.state = prevMaskState;\n      }\n    }\n    return details;\n  }\n  _appendPlaceholder() {\n    const details = this._applyDispatch();\n    if (this.currentMask) {\n      details.aggregate(this.currentMask._appendPlaceholder());\n    }\n    return details;\n  }\n  _appendEager() {\n    const details = this._applyDispatch();\n    if (this.currentMask) {\n      details.aggregate(this.currentMask._appendEager());\n    }\n    return details;\n  }\n  appendTail(tail) {\n    const details = new ChangeDetails();\n    if (tail) details.aggregate(this._applyDispatch('', {}, tail));\n    return details.aggregate(this.currentMask ? this.currentMask.appendTail(tail) : super.appendTail(tail));\n  }\n  currentMaskFlags(flags) {\n    var _flags$_beforeTailSta, _flags$_beforeTailSta2;\n    return {\n      ...flags,\n      _beforeTailState: ((_flags$_beforeTailSta = flags._beforeTailState) == null ? void 0 : _flags$_beforeTailSta.currentMaskRef) === this.currentMask && ((_flags$_beforeTailSta2 = flags._beforeTailState) == null ? void 0 : _flags$_beforeTailSta2.currentMask) || flags._beforeTailState\n    };\n  }\n  doDispatch(appended, flags, tail) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    if (tail === void 0) {\n      tail = '';\n    }\n    return this.dispatch(appended, this, flags, tail);\n  }\n  doValidate(flags) {\n    return super.doValidate(flags) && (!this.currentMask || this.currentMask.doValidate(this.currentMaskFlags(flags)));\n  }\n  doPrepare(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    let [s, details] = super.doPrepare(str, flags);\n    if (this.currentMask) {\n      let currentDetails;\n      [s, currentDetails] = super.doPrepare(s, this.currentMaskFlags(flags));\n      details = details.aggregate(currentDetails);\n    }\n    return [s, details];\n  }\n  doPrepareChar(str, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    let [s, details] = super.doPrepareChar(str, flags);\n    if (this.currentMask) {\n      let currentDetails;\n      [s, currentDetails] = super.doPrepareChar(s, this.currentMaskFlags(flags));\n      details = details.aggregate(currentDetails);\n    }\n    return [s, details];\n  }\n  reset() {\n    var _this$currentMask;\n    (_this$currentMask = this.currentMask) == null || _this$currentMask.reset();\n    this.compiledMasks.forEach(m => m.reset());\n  }\n  get value() {\n    return this.exposeMask ? this.exposeMask.value : this.currentMask ? this.currentMask.value : '';\n  }\n  set value(value) {\n    if (this.exposeMask) {\n      this.exposeMask.value = value;\n      this.currentMask = this.exposeMask;\n      this._applyDispatch();\n    } else super.value = value;\n  }\n  get unmaskedValue() {\n    return this.exposeMask ? this.exposeMask.unmaskedValue : this.currentMask ? this.currentMask.unmaskedValue : '';\n  }\n  set unmaskedValue(unmaskedValue) {\n    if (this.exposeMask) {\n      this.exposeMask.unmaskedValue = unmaskedValue;\n      this.currentMask = this.exposeMask;\n      this._applyDispatch();\n    } else super.unmaskedValue = unmaskedValue;\n  }\n  get typedValue() {\n    return this.exposeMask ? this.exposeMask.typedValue : this.currentMask ? this.currentMask.typedValue : '';\n  }\n  set typedValue(typedValue) {\n    if (this.exposeMask) {\n      this.exposeMask.typedValue = typedValue;\n      this.currentMask = this.exposeMask;\n      this._applyDispatch();\n      return;\n    }\n    let unmaskedValue = String(typedValue);\n\n    // double check it\n    if (this.currentMask) {\n      this.currentMask.typedValue = typedValue;\n      unmaskedValue = this.currentMask.unmaskedValue;\n    }\n    this.unmaskedValue = unmaskedValue;\n  }\n  get displayValue() {\n    return this.currentMask ? this.currentMask.displayValue : '';\n  }\n  get isComplete() {\n    var _this$currentMask2;\n    return Boolean((_this$currentMask2 = this.currentMask) == null ? void 0 : _this$currentMask2.isComplete);\n  }\n  get isFilled() {\n    var _this$currentMask3;\n    return Boolean((_this$currentMask3 = this.currentMask) == null ? void 0 : _this$currentMask3.isFilled);\n  }\n  remove(fromPos, toPos) {\n    const details = new ChangeDetails();\n    if (this.currentMask) {\n      details.aggregate(this.currentMask.remove(fromPos, toPos))\n      // update with dispatch\n      .aggregate(this._applyDispatch());\n    }\n    return details;\n  }\n  get state() {\n    var _this$currentMask4;\n    return {\n      ...super.state,\n      _rawInputValue: this.rawInputValue,\n      compiledMasks: this.compiledMasks.map(m => m.state),\n      currentMaskRef: this.currentMask,\n      currentMask: (_this$currentMask4 = this.currentMask) == null ? void 0 : _this$currentMask4.state\n    };\n  }\n  set state(state) {\n    const {\n      compiledMasks,\n      currentMaskRef,\n      currentMask,\n      ...maskedState\n    } = state;\n    if (compiledMasks) this.compiledMasks.forEach((m, mi) => m.state = compiledMasks[mi]);\n    if (currentMaskRef != null) {\n      this.currentMask = currentMaskRef;\n      this.currentMask.state = currentMask;\n    }\n    super.state = maskedState;\n  }\n  extractInput(fromPos, toPos, flags) {\n    return this.currentMask ? this.currentMask.extractInput(fromPos, toPos, flags) : '';\n  }\n  extractTail(fromPos, toPos) {\n    return this.currentMask ? this.currentMask.extractTail(fromPos, toPos) : super.extractTail(fromPos, toPos);\n  }\n  doCommit() {\n    if (this.currentMask) this.currentMask.doCommit();\n    super.doCommit();\n  }\n  nearestInputPos(cursorPos, direction) {\n    return this.currentMask ? this.currentMask.nearestInputPos(cursorPos, direction) : super.nearestInputPos(cursorPos, direction);\n  }\n  get overwrite() {\n    return this.currentMask ? this.currentMask.overwrite : this._overwrite;\n  }\n  set overwrite(overwrite) {\n    this._overwrite = overwrite;\n  }\n  get eager() {\n    return this.currentMask ? this.currentMask.eager : this._eager;\n  }\n  set eager(eager) {\n    this._eager = eager;\n  }\n  get skipInvalid() {\n    return this.currentMask ? this.currentMask.skipInvalid : this._skipInvalid;\n  }\n  set skipInvalid(skipInvalid) {\n    this._skipInvalid = skipInvalid;\n  }\n  get autofix() {\n    return this.currentMask ? this.currentMask.autofix : this._autofix;\n  }\n  set autofix(autofix) {\n    this._autofix = autofix;\n  }\n  maskEquals(mask) {\n    return Array.isArray(mask) ? this.compiledMasks.every((m, mi) => {\n      if (!mask[mi]) return;\n      const {\n        mask: oldMask,\n        ...restOpts\n      } = mask[mi];\n      return objectIncludes(m, restOpts) && m.maskEquals(oldMask);\n    }) : super.maskEquals(mask);\n  }\n  typedValueEquals(value) {\n    var _this$currentMask5;\n    return Boolean((_this$currentMask5 = this.currentMask) == null ? void 0 : _this$currentMask5.typedValueEquals(value));\n  }\n}\n/** Currently chosen mask */\n/** Currently chosen mask */\n/** Compliled {@link Masked} options */\n/** Chooses {@link Masked} depending on input value */\nMaskedDynamic.DEFAULTS = {\n  ...Masked.DEFAULTS,\n  dispatch: (appended, masked, flags, tail) => {\n    if (!masked.compiledMasks.length) return;\n    const inputValue = masked.rawInputValue;\n\n    // simulate input\n    const inputs = masked.compiledMasks.map((m, index) => {\n      const isCurrent = masked.currentMask === m;\n      const startInputPos = isCurrent ? m.displayValue.length : m.nearestInputPos(m.displayValue.length, DIRECTION.FORCE_LEFT);\n      if (m.rawInputValue !== inputValue) {\n        m.reset();\n        m.append(inputValue, {\n          raw: true\n        });\n      } else if (!isCurrent) {\n        m.remove(startInputPos);\n      }\n      m.append(appended, masked.currentMaskFlags(flags));\n      m.appendTail(tail);\n      return {\n        index,\n        weight: m.rawInputValue.length,\n        totalInputPositions: m.totalInputPositions(0, Math.max(startInputPos, m.nearestInputPos(m.displayValue.length, DIRECTION.FORCE_LEFT)))\n      };\n    });\n\n    // pop masks with longer values first\n    inputs.sort((i1, i2) => i2.weight - i1.weight || i2.totalInputPositions - i1.totalInputPositions);\n    return masked.compiledMasks[inputs[0].index];\n  }\n};\nIMask.MaskedDynamic = MaskedDynamic;\n\nexport { MaskedDynamic as default };\n","import MaskedPattern from './pattern.js';\nimport IMask from '../core/holder.js';\nimport ChangeDetails from '../core/change-details.js';\nimport { DIRECTION } from '../core/utils.js';\nimport ContinuousTailDetails from '../core/continuous-tail-details.js';\nimport './base.js';\nimport './factory.js';\nimport './pattern/chunk-tail-details.js';\nimport './pattern/cursor.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/input-definition.js';\nimport './regexp.js';\n\n/** Pattern which validates enum values */\nclass MaskedEnum extends MaskedPattern {\n  constructor(opts) {\n    super({\n      ...MaskedEnum.DEFAULTS,\n      ...opts\n    }); // mask will be created in _update\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    const {\n      enum: enum_,\n      ...eopts\n    } = opts;\n    if (enum_) {\n      const lengths = enum_.map(e => e.length);\n      const requiredLength = Math.min(...lengths);\n      const optionalLength = Math.max(...lengths) - requiredLength;\n      eopts.mask = '*'.repeat(requiredLength);\n      if (optionalLength) eopts.mask += '[' + '*'.repeat(optionalLength) + ']';\n      this.enum = enum_;\n    }\n    super._update(eopts);\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const matchFrom = Math.min(this.nearestInputPos(0, DIRECTION.FORCE_RIGHT), this.value.length);\n    const matches = this.enum.filter(e => this.matchValue(e, this.unmaskedValue + ch, matchFrom));\n    if (matches.length) {\n      if (matches.length === 1) {\n        this._forEachBlocksInRange(0, this.value.length, (b, bi) => {\n          const mch = matches[0][bi];\n          if (bi >= this.value.length || mch === b.value) return;\n          b.reset();\n          b._appendChar(mch, flags);\n        });\n      }\n      const d = super._appendCharRaw(matches[0][this.value.length], flags);\n      if (matches.length === 1) {\n        matches[0].slice(this.unmaskedValue.length).split('').forEach(mch => d.aggregate(super._appendCharRaw(mch)));\n      }\n      return d;\n    }\n    return new ChangeDetails({\n      skip: !this.isComplete\n    });\n  }\n  extractTail(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    // just drop tail\n    return new ContinuousTailDetails('', fromPos);\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    if (fromPos === toPos) return new ChangeDetails();\n    const matchFrom = Math.min(super.nearestInputPos(0, DIRECTION.FORCE_RIGHT), this.value.length);\n    let pos;\n    for (pos = fromPos; pos >= 0; --pos) {\n      const matches = this.enum.filter(e => this.matchValue(e, this.value.slice(matchFrom, pos), matchFrom));\n      if (matches.length > 1) break;\n    }\n    const details = super.remove(pos, toPos);\n    details.tailShift += pos - fromPos;\n    return details;\n  }\n  get isComplete() {\n    return this.enum.indexOf(this.value) >= 0;\n  }\n}\n/** Match enum value */\nMaskedEnum.DEFAULTS = {\n  ...MaskedPattern.DEFAULTS,\n  matchValue: (estr, istr, matchFrom) => estr.indexOf(istr, matchFrom) === matchFrom\n};\nIMask.MaskedEnum = MaskedEnum;\n\nexport { MaskedEnum as default };\n","import Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/change-details.js';\nimport '../core/continuous-tail-details.js';\nimport '../core/utils.js';\n\n/** Masking by custom Function */\nclass MaskedFunction extends Masked {\n  /** */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    super._update({\n      ...opts,\n      validate: opts.mask\n    });\n  }\n}\nIMask.MaskedFunction = MaskedFunction;\n\nexport { MaskedFunction as default };\n","import { escapeRegExp, DIRECTION } from '../core/utils.js';\nimport ChangeDetails from '../core/change-details.js';\nimport Masked from './base.js';\nimport IMask from '../core/holder.js';\nimport '../core/continuous-tail-details.js';\n\nvar _MaskedNumber;\n/** Number mask */\nclass MaskedNumber extends Masked {\n  /** Single char */\n\n  /** Single char */\n\n  /** Array of single chars */\n\n  /** */\n\n  /** */\n\n  /** Digits after point */\n\n  /** Flag to remove leading and trailing zeros in the end of editing */\n\n  /** Flag to pad trailing zeros after point in the end of editing */\n\n  /** Enable characters overwriting */\n\n  /** */\n\n  /** */\n\n  /** */\n\n  /** Format typed value to string */\n\n  /** Parse string to get typed value */\n\n  constructor(opts) {\n    super({\n      ...MaskedNumber.DEFAULTS,\n      ...opts\n    });\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    super._update(opts);\n    this._updateRegExps();\n  }\n  _updateRegExps() {\n    const start = '^' + (this.allowNegative ? '[+|\\\\-]?' : '');\n    const mid = '\\\\d*';\n    const end = (this.scale ? \"(\" + escapeRegExp(this.radix) + \"\\\\d{0,\" + this.scale + \"})?\" : '') + '$';\n    this._numberRegExp = new RegExp(start + mid + end);\n    this._mapToRadixRegExp = new RegExp(\"[\" + this.mapToRadix.map(escapeRegExp).join('') + \"]\", 'g');\n    this._thousandsSeparatorRegExp = new RegExp(escapeRegExp(this.thousandsSeparator), 'g');\n  }\n  _removeThousandsSeparators(value) {\n    return value.replace(this._thousandsSeparatorRegExp, '');\n  }\n  _insertThousandsSeparators(value) {\n    // https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript\n    const parts = value.split(this.radix);\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, this.thousandsSeparator);\n    return parts.join(this.radix);\n  }\n  doPrepareChar(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const [prepCh, details] = super.doPrepareChar(this._removeThousandsSeparators(this.scale && this.mapToRadix.length && (\n    /*\n      radix should be mapped when\n      1) input is done from keyboard = flags.input && flags.raw\n      2) unmasked value is set = !flags.input && !flags.raw\n      and should not be mapped when\n      1) value is set = flags.input && !flags.raw\n      2) raw value is set = !flags.input && flags.raw\n    */\n    flags.input && flags.raw || !flags.input && !flags.raw) ? ch.replace(this._mapToRadixRegExp, this.radix) : ch), flags);\n    if (ch && !prepCh) details.skip = true;\n    if (prepCh && !this.allowPositive && !this.value && prepCh !== '-') details.aggregate(this._appendChar('-'));\n    return [prepCh, details];\n  }\n  _separatorsCount(to, extendOnSeparators) {\n    if (extendOnSeparators === void 0) {\n      extendOnSeparators = false;\n    }\n    let count = 0;\n    for (let pos = 0; pos < to; ++pos) {\n      if (this._value.indexOf(this.thousandsSeparator, pos) === pos) {\n        ++count;\n        if (extendOnSeparators) to += this.thousandsSeparator.length;\n      }\n    }\n    return count;\n  }\n  _separatorsCountFromSlice(slice) {\n    if (slice === void 0) {\n      slice = this._value;\n    }\n    return this._separatorsCount(this._removeThousandsSeparators(slice).length, true);\n  }\n  extractInput(fromPos, toPos, flags) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    [fromPos, toPos] = this._adjustRangeWithSeparators(fromPos, toPos);\n    return this._removeThousandsSeparators(super.extractInput(fromPos, toPos, flags));\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const prevBeforeTailValue = flags.tail && flags._beforeTailState ? flags._beforeTailState._value : this._value;\n    const prevBeforeTailSeparatorsCount = this._separatorsCountFromSlice(prevBeforeTailValue);\n    this._value = this._removeThousandsSeparators(this.value);\n    const oldValue = this._value;\n    this._value += ch;\n    const num = this.number;\n    let accepted = !isNaN(num);\n    let skip = false;\n    if (accepted) {\n      let fixedNum;\n      if (this.min != null && this.min < 0 && this.number < this.min) fixedNum = this.min;\n      if (this.max != null && this.max > 0 && this.number > this.max) fixedNum = this.max;\n      if (fixedNum != null) {\n        if (this.autofix) {\n          this._value = this.format(fixedNum, this).replace(MaskedNumber.UNMASKED_RADIX, this.radix);\n          skip || (skip = oldValue === this._value && !flags.tail); // if not changed on tail it's still ok to proceed\n        } else {\n          accepted = false;\n        }\n      }\n      accepted && (accepted = Boolean(this._value.match(this._numberRegExp)));\n    }\n    let appendDetails;\n    if (!accepted) {\n      this._value = oldValue;\n      appendDetails = new ChangeDetails();\n    } else {\n      appendDetails = new ChangeDetails({\n        inserted: this._value.slice(oldValue.length),\n        rawInserted: skip ? '' : ch,\n        skip\n      });\n    }\n    this._value = this._insertThousandsSeparators(this._value);\n    const beforeTailValue = flags.tail && flags._beforeTailState ? flags._beforeTailState._value : this._value;\n    const beforeTailSeparatorsCount = this._separatorsCountFromSlice(beforeTailValue);\n    appendDetails.tailShift += (beforeTailSeparatorsCount - prevBeforeTailSeparatorsCount) * this.thousandsSeparator.length;\n    return appendDetails;\n  }\n  _findSeparatorAround(pos) {\n    if (this.thousandsSeparator) {\n      const searchFrom = pos - this.thousandsSeparator.length + 1;\n      const separatorPos = this.value.indexOf(this.thousandsSeparator, searchFrom);\n      if (separatorPos <= pos) return separatorPos;\n    }\n    return -1;\n  }\n  _adjustRangeWithSeparators(from, to) {\n    const separatorAroundFromPos = this._findSeparatorAround(from);\n    if (separatorAroundFromPos >= 0) from = separatorAroundFromPos;\n    const separatorAroundToPos = this._findSeparatorAround(to);\n    if (separatorAroundToPos >= 0) to = separatorAroundToPos + this.thousandsSeparator.length;\n    return [from, to];\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    [fromPos, toPos] = this._adjustRangeWithSeparators(fromPos, toPos);\n    const valueBeforePos = this.value.slice(0, fromPos);\n    const valueAfterPos = this.value.slice(toPos);\n    const prevBeforeTailSeparatorsCount = this._separatorsCount(valueBeforePos.length);\n    this._value = this._insertThousandsSeparators(this._removeThousandsSeparators(valueBeforePos + valueAfterPos));\n    const beforeTailSeparatorsCount = this._separatorsCountFromSlice(valueBeforePos);\n    return new ChangeDetails({\n      tailShift: (beforeTailSeparatorsCount - prevBeforeTailSeparatorsCount) * this.thousandsSeparator.length\n    });\n  }\n  nearestInputPos(cursorPos, direction) {\n    if (!this.thousandsSeparator) return cursorPos;\n    switch (direction) {\n      case DIRECTION.NONE:\n      case DIRECTION.LEFT:\n      case DIRECTION.FORCE_LEFT:\n        {\n          const separatorAtLeftPos = this._findSeparatorAround(cursorPos - 1);\n          if (separatorAtLeftPos >= 0) {\n            const separatorAtLeftEndPos = separatorAtLeftPos + this.thousandsSeparator.length;\n            if (cursorPos < separatorAtLeftEndPos || this.value.length <= separatorAtLeftEndPos || direction === DIRECTION.FORCE_LEFT) {\n              return separatorAtLeftPos;\n            }\n          }\n          break;\n        }\n      case DIRECTION.RIGHT:\n      case DIRECTION.FORCE_RIGHT:\n        {\n          const separatorAtRightPos = this._findSeparatorAround(cursorPos);\n          if (separatorAtRightPos >= 0) {\n            return separatorAtRightPos + this.thousandsSeparator.length;\n          }\n        }\n    }\n    return cursorPos;\n  }\n  doCommit() {\n    if (this.value) {\n      const number = this.number;\n      let validnum = number;\n\n      // check bounds\n      if (this.min != null) validnum = Math.max(validnum, this.min);\n      if (this.max != null) validnum = Math.min(validnum, this.max);\n      if (validnum !== number) this.unmaskedValue = this.format(validnum, this);\n      let formatted = this.value;\n      if (this.normalizeZeros) formatted = this._normalizeZeros(formatted);\n      if (this.padFractionalZeros && this.scale > 0) formatted = this._padFractionalZeros(formatted);\n      this._value = formatted;\n    }\n    super.doCommit();\n  }\n  _normalizeZeros(value) {\n    const parts = this._removeThousandsSeparators(value).split(this.radix);\n\n    // remove leading zeros\n    parts[0] = parts[0].replace(/^(\\D*)(0*)(\\d*)/, (match, sign, zeros, num) => sign + num);\n    // add leading zero\n    if (value.length && !/\\d$/.test(parts[0])) parts[0] = parts[0] + '0';\n    if (parts.length > 1) {\n      parts[1] = parts[1].replace(/0*$/, ''); // remove trailing zeros\n      if (!parts[1].length) parts.length = 1; // remove fractional\n    }\n    return this._insertThousandsSeparators(parts.join(this.radix));\n  }\n  _padFractionalZeros(value) {\n    if (!value) return value;\n    const parts = value.split(this.radix);\n    if (parts.length < 2) parts.push('');\n    parts[1] = parts[1].padEnd(this.scale, '0');\n    return parts.join(this.radix);\n  }\n  doSkipInvalid(ch, flags, checkTail) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const dropFractional = this.scale === 0 && ch !== this.thousandsSeparator && (ch === this.radix || ch === MaskedNumber.UNMASKED_RADIX || this.mapToRadix.includes(ch));\n    return super.doSkipInvalid(ch, flags, checkTail) && !dropFractional;\n  }\n  get unmaskedValue() {\n    return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix, MaskedNumber.UNMASKED_RADIX);\n  }\n  set unmaskedValue(unmaskedValue) {\n    super.unmaskedValue = unmaskedValue;\n  }\n  get typedValue() {\n    return this.parse(this.unmaskedValue, this);\n  }\n  set typedValue(n) {\n    this.rawInputValue = this.format(n, this).replace(MaskedNumber.UNMASKED_RADIX, this.radix);\n  }\n\n  /** Parsed Number */\n  get number() {\n    return this.typedValue;\n  }\n  set number(number) {\n    this.typedValue = number;\n  }\n  get allowNegative() {\n    return this.min != null && this.min < 0 || this.max != null && this.max < 0;\n  }\n  get allowPositive() {\n    return this.min != null && this.min > 0 || this.max != null && this.max > 0;\n  }\n  typedValueEquals(value) {\n    // handle  0 -> '' case (typed = 0 even if value = '')\n    // for details see https://github.com/uNmAnNeR/imaskjs/issues/134\n    return (super.typedValueEquals(value) || MaskedNumber.EMPTY_VALUES.includes(value) && MaskedNumber.EMPTY_VALUES.includes(this.typedValue)) && !(value === 0 && this.value === '');\n  }\n}\n_MaskedNumber = MaskedNumber;\nMaskedNumber.UNMASKED_RADIX = '.';\nMaskedNumber.EMPTY_VALUES = [...Masked.EMPTY_VALUES, 0];\nMaskedNumber.DEFAULTS = {\n  ...Masked.DEFAULTS,\n  mask: Number,\n  radix: ',',\n  thousandsSeparator: '',\n  mapToRadix: [_MaskedNumber.UNMASKED_RADIX],\n  min: Number.MIN_SAFE_INTEGER,\n  max: Number.MAX_SAFE_INTEGER,\n  scale: 2,\n  normalizeZeros: true,\n  padFractionalZeros: false,\n  parse: Number,\n  format: n => n.toLocaleString('en-US', {\n    useGrouping: false,\n    maximumFractionDigits: 20\n  })\n};\nIMask.MaskedNumber = MaskedNumber;\n\nexport { MaskedNumber as default };\n","import createMask from './factory.js';\nimport IMask from '../core/holder.js';\nimport '../core/utils.js';\n\n/** Mask pipe source and destination types */\nconst PIPE_TYPE = {\n  MASKED: 'value',\n  UNMASKED: 'unmaskedValue',\n  TYPED: 'typedValue'\n};\n/** Creates new pipe function depending on mask type, source and destination options */\nfunction createPipe(arg, from, to) {\n  if (from === void 0) {\n    from = PIPE_TYPE.MASKED;\n  }\n  if (to === void 0) {\n    to = PIPE_TYPE.MASKED;\n  }\n  const masked = createMask(arg);\n  return value => masked.runIsolated(m => {\n    m[from] = value;\n    return m[to];\n  });\n}\n\n/** Pipes value through mask depending on mask type, source and destination options */\nfunction pipe(value, mask, from, to) {\n  return createPipe(mask, from, to)(value);\n}\nIMask.PIPE_TYPE = PIPE_TYPE;\nIMask.createPipe = createPipe;\nIMask.pipe = pipe;\n\nexport { PIPE_TYPE, createPipe, pipe };\n","import ChangeDetails from '../core/change-details.js';\nimport IMask from '../core/holder.js';\nimport createMask, { normalizeOpts } from './factory.js';\nimport MaskedPattern from './pattern.js';\nimport '../core/utils.js';\nimport './base.js';\nimport '../core/continuous-tail-details.js';\nimport './pattern/chunk-tail-details.js';\nimport './pattern/cursor.js';\nimport './pattern/fixed-definition.js';\nimport './pattern/input-definition.js';\nimport './regexp.js';\n\n/** Pattern mask */\nclass RepeatBlock extends MaskedPattern {\n  get repeatFrom() {\n    var _ref;\n    return (_ref = Array.isArray(this.repeat) ? this.repeat[0] : this.repeat === Infinity ? 0 : this.repeat) != null ? _ref : 0;\n  }\n  get repeatTo() {\n    var _ref2;\n    return (_ref2 = Array.isArray(this.repeat) ? this.repeat[1] : this.repeat) != null ? _ref2 : Infinity;\n  }\n  constructor(opts) {\n    super(opts);\n  }\n  updateOptions(opts) {\n    super.updateOptions(opts);\n  }\n  _update(opts) {\n    var _ref3, _ref4, _this$_blocks;\n    const {\n      repeat,\n      ...blockOpts\n    } = normalizeOpts(opts); // TODO type\n    this._blockOpts = Object.assign({}, this._blockOpts, blockOpts);\n    const block = createMask(this._blockOpts);\n    this.repeat = (_ref3 = (_ref4 = repeat != null ? repeat : block.repeat) != null ? _ref4 : this.repeat) != null ? _ref3 : Infinity; // TODO type\n\n    super._update({\n      mask: 'm'.repeat(Math.max(this.repeatTo === Infinity && ((_this$_blocks = this._blocks) == null ? void 0 : _this$_blocks.length) || 0, this.repeatFrom)),\n      blocks: {\n        m: block\n      },\n      eager: block.eager,\n      overwrite: block.overwrite,\n      skipInvalid: block.skipInvalid,\n      lazy: block.lazy,\n      placeholderChar: block.placeholderChar,\n      displayChar: block.displayChar\n    });\n  }\n  _allocateBlock(bi) {\n    if (bi < this._blocks.length) return this._blocks[bi];\n    if (this.repeatTo === Infinity || this._blocks.length < this.repeatTo) {\n      this._blocks.push(createMask(this._blockOpts));\n      this.mask += 'm';\n      return this._blocks[this._blocks.length - 1];\n    }\n  }\n  _appendCharRaw(ch, flags) {\n    if (flags === void 0) {\n      flags = {};\n    }\n    const details = new ChangeDetails();\n    for (let bi = (_this$_mapPosToBlock$ = (_this$_mapPosToBlock = this._mapPosToBlock(this.displayValue.length)) == null ? void 0 : _this$_mapPosToBlock.index) != null ? _this$_mapPosToBlock$ : Math.max(this._blocks.length - 1, 0), block, allocated;\n    // try to get a block or\n    // try to allocate a new block if not allocated already\n    block = (_this$_blocks$bi = this._blocks[bi]) != null ? _this$_blocks$bi : allocated = !allocated && this._allocateBlock(bi); ++bi) {\n      var _this$_mapPosToBlock$, _this$_mapPosToBlock, _this$_blocks$bi, _flags$_beforeTailSta;\n      const blockDetails = block._appendChar(ch, {\n        ...flags,\n        _beforeTailState: (_flags$_beforeTailSta = flags._beforeTailState) == null || (_flags$_beforeTailSta = _flags$_beforeTailSta._blocks) == null ? void 0 : _flags$_beforeTailSta[bi]\n      });\n      if (blockDetails.skip && allocated) {\n        // remove the last allocated block and break\n        this._blocks.pop();\n        this.mask = this.mask.slice(1);\n        break;\n      }\n      details.aggregate(blockDetails);\n      if (blockDetails.consumed) break; // go next char\n    }\n    return details;\n  }\n  _trimEmptyTail(fromPos, toPos) {\n    var _this$_mapPosToBlock2, _this$_mapPosToBlock3;\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    const firstBlockIndex = Math.max(((_this$_mapPosToBlock2 = this._mapPosToBlock(fromPos)) == null ? void 0 : _this$_mapPosToBlock2.index) || 0, this.repeatFrom, 0);\n    let lastBlockIndex;\n    if (toPos != null) lastBlockIndex = (_this$_mapPosToBlock3 = this._mapPosToBlock(toPos)) == null ? void 0 : _this$_mapPosToBlock3.index;\n    if (lastBlockIndex == null) lastBlockIndex = this._blocks.length - 1;\n    let removeCount = 0;\n    for (let blockIndex = lastBlockIndex; firstBlockIndex <= blockIndex; --blockIndex, ++removeCount) {\n      if (this._blocks[blockIndex].unmaskedValue) break;\n    }\n    if (removeCount) {\n      this._blocks.splice(lastBlockIndex - removeCount + 1, removeCount);\n      this.mask = this.mask.slice(removeCount);\n    }\n  }\n  reset() {\n    super.reset();\n    this._trimEmptyTail();\n  }\n  remove(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos === void 0) {\n      toPos = this.displayValue.length;\n    }\n    const removeDetails = super.remove(fromPos, toPos);\n    this._trimEmptyTail(fromPos, toPos);\n    return removeDetails;\n  }\n  totalInputPositions(fromPos, toPos) {\n    if (fromPos === void 0) {\n      fromPos = 0;\n    }\n    if (toPos == null && this.repeatTo === Infinity) return Infinity;\n    return super.totalInputPositions(fromPos, toPos);\n  }\n  get state() {\n    return super.state;\n  }\n  set state(state) {\n    this._blocks.length = state._blocks.length;\n    this.mask = this.mask.slice(0, this._blocks.length);\n    super.state = state;\n  }\n}\nIMask.RepeatBlock = RepeatBlock;\n\nexport { RepeatBlock as default };\n","export { default as InputMask } from './controls/input.js';\nimport IMask from './core/holder.js';\nexport { default as HTMLContenteditableMaskElement } from './controls/html-contenteditable-mask-element.js';\nexport { default as HTMLInputMaskElement } from './controls/html-input-mask-element.js';\nexport { default as HTMLMaskElement } from './controls/html-mask-element.js';\nexport { default as MaskElement } from './controls/mask-element.js';\nexport { default as ChangeDetails } from './core/change-details.js';\nexport { DIRECTION, forceDirection } from './core/utils.js';\nexport { default as Masked } from './masked/base.js';\nexport { default as MaskedDate } from './masked/date.js';\nexport { default as MaskedDynamic } from './masked/dynamic.js';\nexport { default as MaskedEnum } from './masked/enum.js';\nexport { default as createMask, normalizeOpts } from './masked/factory.js';\nexport { default as MaskedFunction } from './masked/function.js';\nexport { default as MaskedNumber } from './masked/number.js';\nexport { default as MaskedPattern } from './masked/pattern.js';\nexport { default as ChunksTailDetails } from './masked/pattern/chunk-tail-details.js';\nexport { default as PatternFixedDefinition } from './masked/pattern/fixed-definition.js';\nexport { default as PatternInputDefinition } from './masked/pattern/input-definition.js';\nexport { PIPE_TYPE, createPipe, pipe } from './masked/pipe.js';\nexport { default as MaskedRange } from './masked/range.js';\nexport { default as MaskedRegExp } from './masked/regexp.js';\nexport { default as RepeatBlock } from './masked/repeat.js';\nimport './core/action-details.js';\nimport './controls/input-history.js';\nimport './core/continuous-tail-details.js';\nimport './masked/pattern/cursor.js';\n\ntry {\n  globalThis.IMask = IMask;\n} catch {}\n\nexport { IMask as default };\n","/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?\nSymbol.for(\"react.suspense_list\"):60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.block\"):60121,w=b?Symbol.for(\"react.fundamental\"):60117,x=b?Symbol.for(\"react.responder\"):60118,y=b?Symbol.for(\"react.scope\"):60119;\nfunction z(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;\nexports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};\nexports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z;\n","/** @license React v16.13.1\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar hasSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nvar REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\nvar REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\nvar REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\nvar REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\nvar REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n// (unstable) APIs that have been removed. Can we remove the symbols?\n\nvar REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\nvar REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\nvar REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nvar REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\nvar REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nvar REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\nvar REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\nvar REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\nvar REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\nvar REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\nfunction isValidElementType(type) {\n  return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n}\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n} // AsyncMode is deprecated along with isAsyncMode\n\nvar AsyncMode = REACT_ASYNC_MODE_TYPE;\nvar ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n      console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n    }\n  }\n\n  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n}\nfunction isConcurrentMode(object) {\n  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.AsyncMode = AsyncMode;\nexports.ConcurrentMode = ConcurrentMode;\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\nexports.isValidElementType = isValidElementType;\nexports.typeOf = typeOf;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","module.exports = Function.call.bind(Object.prototype.hasOwnProperty);\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n  var loggedTypeFailures = {};\n  var has = require('./lib/has');\n\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) { /**/ }\n  };\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error(\n              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +\n              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' +\n              'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.'\n            );\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        if (error && !(error instanceof Error)) {\n          printWarning(\n            (componentName || 'React class') + ': type specification of ' +\n            location + ' `' + typeSpecName + '` is invalid; the type checker ' +\n            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +\n            'You may have forgotten to pass an argument to the type checker ' +\n            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +\n            'shape all require an argument).'\n          );\n        }\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          printWarning(\n            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')\n          );\n        }\n      }\n    }\n  }\n}\n\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\ncheckPropTypes.resetWarningCache = function() {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n}\n\nmodule.exports = checkPropTypes;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactIs = require('react-is');\nvar assign = require('object-assign');\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\nvar has = require('./lib/has');\nvar checkPropTypes = require('./checkPropTypes');\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bigint: createPrimitiveTypeChecker('bigint'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker,\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message, data) {\n    this.message = message;\n    this.data = data && typeof data === 'object' ? data: {};\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error(\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            printWarning(\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `' + propFullName + '` prop on `' + componentName + '`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError(\n          'Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'),\n          {expectedType: expectedType}\n        );\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!ReactIs.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning(\n            'Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' +\n            'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).'\n          );\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n        if (type === 'symbol') {\n          return String(value);\n        }\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        printWarning(\n          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'\n        );\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var expectedTypes = [];\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        var checkerResult = checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret);\n        if (checkerResult == null) {\n          return null;\n        }\n        if (checkerResult.data && has(checkerResult.data, 'expectedType')) {\n          expectedTypes.push(checkerResult.data.expectedType);\n        }\n      }\n      var expectedTypesMessage = (expectedTypes.length > 0) ? ', expected one of type [' + expectedTypes.join(', ') + ']': '';\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`' + expectedTypesMessage + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function invalidValidatorError(componentName, location, propFullName, key, type) {\n    return new PropTypeError(\n      (componentName || 'React class') + ': ' + location + ' type `' + propFullName + '.' + key + '` is invalid; ' +\n      'it must be a function, usually from the `prop-types` package, but received `' + type + '`.'\n    );\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      // We need to check all keys in case some are required but missing from props.\n      var allKeys = assign({}, props[propName], shapeTypes);\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n        if (has(shapeTypes, key) && typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n        if (!checker) {\n          return new PropTypeError(\n            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n            '\\nValid keys: ' + JSON.stringify(Object.keys(shapeTypes), null, '  ')\n          );\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // falsy value can't be a Symbol\n    if (!propValue) {\n      return false;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport IMask from 'imask/esm/imask';\n\nconst MASK_PROPS = {\n  // common\n  mask: PropTypes.oneOfType([PropTypes.array, PropTypes.func, PropTypes.string, PropTypes.instanceOf(RegExp), PropTypes.oneOf([Date, Number, IMask.Masked]), PropTypes.instanceOf(IMask.Masked)]),\n  value: PropTypes.any,\n  unmask: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['typed'])]),\n  prepare: PropTypes.func,\n  prepareChar: PropTypes.func,\n  validate: PropTypes.func,\n  commit: PropTypes.func,\n  overwrite: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['shift'])]),\n  eager: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['append', 'remove'])]),\n  skipInvalid: PropTypes.bool,\n  // events\n  onAccept: PropTypes.func,\n  onComplete: PropTypes.func,\n  // pattern\n  placeholderChar: PropTypes.string,\n  displayChar: PropTypes.string,\n  lazy: PropTypes.bool,\n  definitions: PropTypes.object,\n  blocks: PropTypes.object,\n  // enum\n  enum: PropTypes.arrayOf(PropTypes.string),\n  // range\n  maxLength: PropTypes.number,\n  from: PropTypes.number,\n  to: PropTypes.number,\n  // date\n  pattern: PropTypes.string,\n  format: PropTypes.func,\n  parse: PropTypes.func,\n  autofix: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['pad'])]),\n  // number\n  radix: PropTypes.string,\n  thousandsSeparator: PropTypes.string,\n  mapToRadix: PropTypes.arrayOf(PropTypes.string),\n  scale: PropTypes.number,\n  normalizeZeros: PropTypes.bool,\n  padFractionalZeros: PropTypes.bool,\n  min: PropTypes.oneOfType([PropTypes.number, PropTypes.instanceOf(Date)]),\n  max: PropTypes.oneOfType([PropTypes.number, PropTypes.instanceOf(Date)]),\n  // dynamic\n  dispatch: PropTypes.func,\n  // ref\n  inputRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: PropTypes.object\n  })])\n};\nconst MASK_PROPS_NAMES = Object.keys(MASK_PROPS).filter(p => p !== 'value');\nconst NON_MASK_OPTIONS_NAMES = ['value', 'unmask', 'onAccept', 'onComplete', 'inputRef'];\nconst MASK_OPTIONS_NAMES = MASK_PROPS_NAMES.filter(pName => NON_MASK_OPTIONS_NAMES.indexOf(pName) < 0);\nfunction IMaskMixin(ComposedComponent) {\n  var _Class;\n  const MaskedComponent = (_Class = class MaskedComponent extends React.Component {\n    constructor(props) {\n      super(props);\n      this._inputRef = this._inputRef.bind(this);\n    }\n    componentDidMount() {\n      if (!this.props.mask) return;\n      this.initMask();\n    }\n    componentDidUpdate() {\n      const props = this.props;\n      const maskOptions = this._extractMaskOptionsFromProps(props);\n      if (maskOptions.mask) {\n        if (this.maskRef) {\n          this.maskRef.updateOptions(maskOptions); // TODO fix\n          if ('value' in props && props.value !== undefined) this.maskValue = props.value;\n        } else {\n          this.initMask(maskOptions);\n        }\n      } else {\n        this.destroyMask();\n        if ('value' in props && props.value !== undefined) {\n          var _this$element;\n          if ((_this$element = this.element) != null && _this$element.isContentEditable && this.element.tagName !== 'INPUT' && this.element.tagName !== 'TEXTAREA') this.element.textContent = props.value;else this.element.value = props.value;\n        }\n      }\n    }\n    componentWillUnmount() {\n      this.destroyMask();\n    }\n    _inputRef(el) {\n      this.element = el;\n      if (this.props.inputRef) {\n        if (Object.prototype.hasOwnProperty.call(this.props.inputRef, 'current')) this.props.inputRef.current = el;else this.props.inputRef(el);\n      }\n    }\n    initMask(maskOptions) {\n      if (maskOptions === void 0) {\n        maskOptions = this._extractMaskOptionsFromProps(this.props);\n      }\n      this.maskRef = IMask(this.element, maskOptions).on('accept', this._onAccept.bind(this)).on('complete', this._onComplete.bind(this));\n      if ('value' in this.props && this.props.value !== undefined) this.maskValue = this.props.value;\n    }\n    destroyMask() {\n      if (this.maskRef) {\n        this.maskRef.destroy();\n        delete this.maskRef;\n      }\n    }\n    _extractMaskOptionsFromProps(props) {\n      const {\n        ...cloneProps\n      } = props;\n\n      // keep only mask options\n      Object.keys(cloneProps).filter(prop => MASK_OPTIONS_NAMES.indexOf(prop) < 0).forEach(nonMaskProp => {\n        delete cloneProps[nonMaskProp];\n      });\n      return cloneProps;\n    }\n    _extractNonMaskProps(props) {\n      const {\n        ...cloneProps\n      } = props;\n      MASK_PROPS_NAMES.forEach(maskProp => {\n        if (maskProp !== 'maxLength') delete cloneProps[maskProp];\n      });\n      if (!('defaultValue' in cloneProps)) cloneProps.defaultValue = props.mask ? '' : cloneProps.value;\n      delete cloneProps.value;\n      return cloneProps;\n    }\n    get maskValue() {\n      if (!this.maskRef) return '';\n      if (this.props.unmask === 'typed') return this.maskRef.typedValue;\n      if (this.props.unmask) return this.maskRef.unmaskedValue;\n      return this.maskRef.value;\n    }\n    set maskValue(value) {\n      if (!this.maskRef) return;\n      value = value == null && this.props.unmask !== 'typed' ? '' : value;\n      if (this.props.unmask === 'typed') this.maskRef.typedValue = value;else if (this.props.unmask) this.maskRef.unmaskedValue = value;else this.maskRef.value = value;\n    }\n    _onAccept(e) {\n      if (this.props.onAccept && this.maskRef) this.props.onAccept(this.maskValue, this.maskRef, e);\n    }\n    _onComplete(e) {\n      if (this.props.onComplete && this.maskRef) this.props.onComplete(this.maskValue, this.maskRef, e);\n    }\n    render() {\n      return React.createElement(ComposedComponent, {\n        ...this._extractNonMaskProps(this.props),\n        inputRef: this._inputRef\n      });\n    }\n  }, _Class.displayName = void 0, _Class.propTypes = void 0, _Class);\n  const nestedComponentName = ComposedComponent.displayName || ComposedComponent.name || 'Component';\n  MaskedComponent.displayName = \"IMask(\" + nestedComponentName + \")\";\n  MaskedComponent.propTypes = MASK_PROPS;\n  return React.forwardRef((props, ref) => React.createElement(MaskedComponent, {\n    ...props,\n    ref\n  }));\n}\n\nexport { IMaskMixin as default };\n","import React from 'react';\nimport IMaskMixin from './mixin.js';\nimport 'prop-types';\nimport 'imask/esm/imask';\n\nconst IMaskInputClass = IMaskMixin(_ref => {\n  let {\n    inputRef,\n    ...props\n  } = _ref;\n  return React.createElement('input', {\n    ...props,\n    ref: inputRef\n  });\n});\nconst IMaskInputFn = (props, ref) => React.createElement(IMaskInputClass, {\n  ...props,\n  ref\n}) // TODO fix no idea\n;\nconst IMaskInput = React.forwardRef(IMaskInputFn);\n\nexport { IMaskInput as default };\n","import { Input } from \"../Input\";\nimport { IMaskMixin } from \"react-imask\";\n\nexport const InputMask = IMaskMixin(({ inputRef, ...props }) => {\n    return <Input {...props} ref={inputRef as React.Ref<HTMLInputElement>} />;\n});\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEhSURBVHgBrVK7cYNAFHzHuAEKgFEHtjuwK7BSaIHAZJDZyiAySkidQSp34IBc7sCiAkQDnPZuDs0TnDQE2pmd+71d9h0naIKu614wvIFrcGW2/ww3ruseeL2YiL8wxHQbhTE6XhhAvMfwRMug0rwqE4d9eamYTO2HmjgQr4jFruuaoiiaKfI8p6qq+Fas7ssZnUa0basLuYkSZ1lGTdNMfde6d1ByJkkicSjDMJRpmup5EARyWgf+K4POcnA2uSHWdOgKhBDW+Qy2Fnhs3o4lwV4ZFNfEtjvhtX3ffz/gYAe+j4k8zyOIqSzLc0qY6tH3/Yv0wzBshGmj4CYLscVLjO/zlBWweFauC8TbUawWs/9jnvYn+MgSHcAfcAfhL68/AdPnFIscUh0eAAAAAElFTkSuQmCC\"","import { ComponentProps, FC } from \"react\";\nimport closeIcon from \"../../../assets/close.png\";\n\ninterface Props extends ComponentProps<\"form\"> {\n    title: string;\n    onClose: () => void;\n}\n\nexport const FormContainer: FC<Props> = ({\n    title,\n    onClose,\n    className,\n    children,\n    ...props\n}) => {\n    return (\n        <form\n            className={`w-full sm:w-[28rem] bg-white rounded-xl pb-6 px-4 sm:py-6 flex flex-col gap-3 relative ${className}`}\n            {...props}\n        >\n            <button\n                onClick={onClose}\n                type='button'\n                className='absolute right-4'\n            >\n                <img src={closeIcon} />\n            </button>\n            <div className='text-2xl text-center w-1/2 self-center'>\n                <h2>{title}</h2>\n            </div>\n            <div className='min-h-px bg-line' />\n            {children}\n        </form>\n    );\n};\n","import { ComponentProps, FC } from \"react\";\nimport { GREEN_COLOR } from \"../../constants\";\n\ninterface Props extends ComponentProps<\"button\"> {\n    bgColor?: string | null;\n}\n\nexport const Button: FC<Props> = ({\n    bgColor = GREEN_COLOR,\n    children,\n    className,\n    ...props\n}) => {\n    return (\n        <button\n            className={`rounded-xl py-3 px-4 text-white bg-[${bgColor}] disabled:bg-[#BFBFBF] disabled:text-opacity-50 outline-none ${className}`}\n            {...props}\n        >\n              \n        </button>\n    );\n};\n","import { FC, useCallback, useState } from \"react\";\nimport { InputMask } from \"../../shared/components/InputMask\";\nimport { FormContainer } from \"../../shared/components/FormContainer\";\nimport { Button } from \"../../shared/components/Button\";\nimport { FeedBackProps, Stages } from \"../../shared/types\";\nimport { MASK_PLACEHOLDER } from \"../../shared/constants\";\n\ninterface Props extends FeedBackProps {\n    item: Stages;\n}\n\nconst BUTTON_TEXT = \"  \";\n\nexport const FinalForm: FC<Props> = ({ onClose, item }) => {\n    const [phone, setPhone] = useState(\"\");\n\n    const handleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n        setPhone(e.target.value);\n    };\n\n    const onSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n        console.log(phone);\n    };\n\n    const validate = useCallback(\n        (phone: string) => {\n            if (!phone.length) return true;\n            if (phone.length < 18) return true;\n            return false;\n        },\n        [phone],\n    );\n\n    return (\n        <FormContainer\n            onSubmit={onSubmit}\n            onClose={onClose}\n            title={item.title}\n        >\n            {item.text && <p className='text-xs'>{item.text}</p>}\n            <InputMask\n                mask={\"+7 (000) 000-00-00\"}\n                placeholder={item.placeholder ?? MASK_PLACEHOLDER}\n                onChange={handleChange}\n                value={phone}\n            />\n            <Button\n                type='submit'\n                disabled={validate(phone)}\n            >\n                {item.text ?? BUTTON_TEXT}\n            </Button>\n        </FormContainer>\n    );\n};\n","import { useContext } from \"react\";\nimport { FeedBackContext, IFeedBackContext } from \"../../context/FeedBackContext\";\n\nexport const useFeedback = (): IFeedBackContext => {\n    const context = useContext(FeedBackContext);\n    if (!context) {\n        throw new Error(\"error\");\n    }\n    return context;\n};\n","import { FC } from \"react\";\nimport styles from \"./styles.module.scss\";\n\ninterface Props {\n    item: any;\n    onClick: (value: number) => void;\n}\n\nexport const RateItem: FC<Props> = ({ item, onClick }) => {\n    return (\n        <div key={item.id} className={styles.item}>\n            <button\n                className={styles.button}\n                onClick={() => onClick(item.value)}\n            >\n                <img\n                    src={item.image}\n                    alt={item.text}\n                    className={styles.image}\n                />\n            </button>\n            <p className={styles.text}>{item.text}</p>\n        </div>\n    );\n};\n","import { FC } from \"react\";\nimport styles from \"./styles.module.scss\";\nimport { RATES } from \"../../shared/constants\";\nimport { RateItem } from \"../../shared/components/RateItem\";\nimport { useFeedback } from \"../../shared/hooks/useFeedback\";\nimport { FeedBackProps, Stages } from \"../../shared/types\";\nimport { FormContainer } from \"../../shared/components/FormContainer\";\n\ninterface Props extends FeedBackProps {\n    item: Stages;\n}\n\nexport const InitialContent: FC<Props> = ({ item, onClose }) => {\n    const { stage, onChangeRate, onChangeStage } = useFeedback();\n\n    const onSubmit = (value: number) => {\n        onChangeRate(value);\n        onChangeStage(stage + 1);\n    };\n\n    return (\n        <FormContainer title={item.title} onClose={onClose}>\n            {item.text && <p className='text-xs'>{item.text}</p>}\n            <p> 1.0.7</p>\n            <div className={styles.list}>\n                {RATES.map((item) => (\n                    <RateItem key={item.id} item={item} onClick={onSubmit} />\n                ))}\n            </div>\n        </FormContainer>\n    );\n};\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAYAAADpwXTaAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAI1SURBVHgBpZWxbhNBEIZn9s5RlOoqRMfRISURh3gBp4xQkGlpHBdEJg3hCQJPgNMgKxQ4FXQnAojS5gEQhxQkyqOlcoUitLvDzK7PXCxzd4GRrPPO7n43M//sHsIlrP92o61JJYpsBIjZmgkmg3vZtJjHJpAH75MEtUkBKb44gzn7Rsc7Z09lFNSBHr5b71oLrxHpqnMQAwAYAjKO+Ne+ff8KfHr14yPWgYzFkU8Bcwb2hjtnExn30yS2gX7GfzsyVghb2BjUCraG21leXrObJtGK0mNekDBoov4VJDaS4iOduOwBEtUUJErunW52FtcTqELNSDUBOREIxrw13U/Xk/IeBBvNqNkcJm/9G6jsX4FWXuwREYDUIzcXYIaF0wTmMwJFVaBy7Zyayox97+FUtYJbLjJx/g+IAj+HUlhfD98r0kdlXxPQiztZ5vYb65tO+qRoSGvx5WVBYiFHc5O8Gl/ksc/nUBsdO1gDkPiJTwIhZCHM+wWmsGCr595XBXJ+gBgsxIoIv3tp6Zo8n/Mi9IcZfrLCe282nlSCCn8Y9hSgdTmTxc4BnzUHVtSbxRtz4Q5rQTO/+mVaI/ApRhzJoSBECGXC60hwJMLIU/qoCjQTkbufU3ER+GgeH9/9OoAlVqemg5WvEp8mjpDoZFWHmVzL/Q83YqvDLtf3QJp7GWgO+wM0A35rFyptOegCbJ7K6eYuAXW5VdqLECA6WrPhoPwRqYQVJsqeh9pfN6HOh9vfcqix31/Wm+B+aGglAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB6SURBVHgB7ZLBCYAwDEV/xaMDdAxX8+QYjuEYruMY5pBCKBJriKCYByG0oT/hN0AQvIlMsVIs8rKHD5mFMx6gTL5xdm3yQ/G54cEt8a46j9A3QtZ2iolzM9p0bp6fCZnFk9JEWgEYbUlKrf4Lk+dXFGvc91wycAQf5QDRWiP2UJqX7wAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGGSURBVHgBrZUvb8JQEMDvHl2WCVhJplA4JF2CJWMWwVcAgZ/iU2CQCMQQCCwCSwgW0W+wKtQWmpFsY396u3sUAmx9bJRf0vB6fe+Xu/fKFSFk7jg2BMEdIZYIwOGQDWZ8BHADxO6V696vgxjKsgHRiIdZOA5PId6mXdfTwqd8/iGGbFt6nXh0nBpbaxAfm7drqRRRFU4EEt1Y4QHscF6pbMYXjQaoZFKPabGAl2Zz82w5GOysExfy/tG+MD2ZAIaSKEQ+LxZ/xNVvk7eziCJqjoIDWbz1ept7KTHgmAnL9DCYzeC13dZiQeSpXA5ArmOECV6Y6nTguV7X0st+X8dMGEsW3kcj/SuHtB6bMGb4OZ2uyuQsBcn0rFAAi6+jhLJQylSZjL63h8ODr5OU7BsnhDLhkExcSlrQfvSDS5UTjkIOSObsg4iuxX/oMRCVth+IzC+X4b8EAF3FNbd47EF8PGm0ipuiL80xptQLHauOvUZ6I2dcJaK/fQJ4z74AxvyqtCQxCX4DHO+Vksdja9oAAAAASUVORK5CYII=\"","import validate from './validate.js';\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  //\n  // Note to future-self: No, you can't remove the `toLowerCase()` call.\n  // REF: https://github.com/uuidjs/uuid/pull/677#issuecomment-1757351351\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n  var uuid = unsafeStringify(arr, offset);\n  // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n  return uuid;\n}\nexport default stringify;","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n  return getRandomValues(rnds8);\n}","var randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    offset = offset || 0;\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n    return buf;\n  }\n  return unsafeStringify(rnds);\n}\nexport default v4;","import { FC, useCallback, useId, useState } from \"react\";\nimport vector from \"../../assets/vector.png\";\nimport check from \"../../assets/check.png\";\nimport deleteIcon from \"../../assets/delete.png\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { FeedBackProps, Stages } from \"../../shared/types\";\nimport { useFeedback } from \"../../shared/hooks/useFeedback\";\nimport { FormContainer } from \"../../shared/components/FormContainer\";\nimport { Button } from \"../../shared/components/Button\";\n\ninterface Files {\n    id: string;\n    name: string;\n}\n\ninterface Props extends FeedBackProps {\n    item: Stages;\n}\n\nexport const FeedbackForm: FC<Props> = ({ item, onClose }) => {\n    const { stage, onChangeStage } = useFeedback();\n    const [text, setText] = useState(\"\");\n    const [file, setFile] = useState<Files[]>([]);\n    const id = useId();\n\n    const onChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n        setText(e.target.value);\n    };\n\n    const handleFileInputChange: React.ChangeEventHandler<\n        HTMLInputElement\n    > = async (event) => {\n        try {\n            if (!event.target.files?.[0]) return;\n            const current: Files = {\n                id: uuidv4(),\n                name: event.target.files[0].name,\n                // image64: await convertFileToBase64(event.target.files[0]),\n            };\n            setFile((prev) => [...prev, current]);\n        } catch {\n            setFile(file);\n        }\n    };\n\n    const handleDeleteFile = (id: string) => {\n        setFile((prev) => [...prev.filter((item) => item.id !== id)]);\n    };\n\n    const onSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n        console.log(text);\n        console.log(file);\n        onChangeStage(stage + 1);\n    };\n\n    const validate = useCallback(\n        (text: string) => {\n            if (!text.length) return true;\n            if (text.length > 1000) return true;\n            return false;\n        },\n        [text],\n    );\n\n    return (\n        <FormContainer onSubmit={onSubmit} title={item.title} onClose={onClose}>\n            <textarea\n                className='border-2 border-[#66B22C] border-solid h-36 rounded-xl resize-none py-3 px-4 outline-none'\n                placeholder='  , '\n                onChange={onChange}\n                value={text}\n            />\n            <ul className='flex flex-col gap-2'>\n                {file.map((item) => (\n                    <li className='flex gap-2 items-center' key={item.id}>\n                        <img src={check} />\n                        <p>{item.name}</p>\n                        <button\n                            onClick={() => handleDeleteFile(item.id)}\n                            className='ml-auto'\n                        >\n                            <img src={deleteIcon} />\n                        </button>\n                    </li>\n                ))}\n            </ul>\n            <div className='self-end w-full'>\n                <input\n                    type='file'\n                    accept='image/png, image/jpeg'\n                    className='opacity-0 absolute invisible'\n                    onChange={handleFileInputChange}\n                    id={id}\n                />\n                <label\n                    htmlFor={id}\n                    className='h-20 bg-[#ECF5E4] rounded-xl flex items-center justify-center gap-4 px-5 py-4 cursor-pointer'\n                >\n                    <img src={vector} alt=' ' />\n                    <p className='font-bold text-start'> </p>\n                </label>\n            </div>\n            {item.button && (\n                <Button\n                    type='submit'\n                    disabled={validate(text)}\n                    bgColor={item.buttonColor}\n                >\n                    {item.button}\n                </Button>\n            )}\n        </FormContainer>\n    );\n};\n","import { FC, useEffect, useState } from \"react\";\nimport { Modal } from \"../../shared/components/Modal\";\nimport { FinalForm } from \"../FinalForm\";\nimport { useFeedback } from \"../../shared/hooks/useFeedback\";\nimport { InitialContent } from \"../InitialContent\";\nimport { FeedbackForm } from \"../FeedbackForm\";\nimport { FeedBackProps, Stages } from \"../../shared/types\";\nimport { STAGES } from \"../../shared/constants\";\n\nexport const FeedBackModal: FC<Omit<FeedBackProps, \"onClose\" | \"isVisible\">> = (props) => {\n    const { stage, onChangeStage, } = useFeedback();\n    const [visible, setVisible] = useState(false);\n\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            setVisible(true);\n        }, 5000);\n        return () => clearTimeout(timer);\n    }, [visible]);\n\n    const onClose = () => {\n        setVisible(false);\n        onChangeStage(0);\n    };\n\n    const getStage = (item: Stages) => {\n        switch (stage) {\n            case 0: {\n                return (\n                    <InitialContent\n                        key={item.id}\n                        item={item}\n                        {...props}\n                        onClose={onClose}\n                        isVisible={visible}\n                    />\n                );\n            }\n            case 1: {\n                return (\n                    <FeedbackForm\n                        key={item.id}\n                        item={item}\n                        {...props}\n                        onClose={onClose}\n                        isVisible={visible}\n                    />\n                );\n            }\n            case 2: {\n                return (\n                    <FinalForm\n                        key={item.id}\n                        item={item}\n                        {...props}\n                        onClose={onClose}\n                        isVisible={visible}\n                    />\n                );\n            }\n        }\n    };\n\n    return (\n        <Modal {...props} isVisible={visible} onClose={onClose}>\n            {STAGES.map((item, index) => {\n                if (index === stage) {\n                    return getStage(item);\n                }\n            })}\n        </Modal>\n    );\n};\n","import { FC } from \"react\";\nimport { FeedBackProvider } from \"../../context/FeedBackContext\";\nimport { FeedBackModal } from \"../FeedBackModal\";\nimport \"../../tailwind.css\";\n\n/*  IFeedBack */\ninterface IFeedBackProps {\n    /*   */\n    appId: number;\n}\n/**\n * @name Feedback\n * @description -  UX \n *\n * @param appId - The async callback\n *\n * @example\n * <Feedback appId={number} /> \n */\nexport const Feedback: FC<IFeedBackProps> = (props) => {\n    return (\n        <FeedBackProvider>\n            <FeedBackModal {...props} />\n        </FeedBackProvider>\n    );\n};\n"],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","React","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_OFFSCREEN_TYPE","MAYBE_ITERATOR_SYMBOL","FAUX_ITERATOR_SYMBOL","getIteratorFn","maybeIterable","maybeIterator","ReactSharedInternals","error","format","_len2","args","_key2","printWarning","level","ReactDebugCurrentFrame","stack","argsWithFormat","item","enableScopeAPI","enableCacheElement","enableTransitionTracing","enableLegacyHidden","enableDebugTracing","REACT_MODULE_REFERENCE","isValidElementType","type","getWrappedName","outerType","innerType","wrapperName","displayName","functionName","getContextName","getComponentNameFromType","context","provider","outerName","lazyComponent","payload","init","assign","disabledDepth","prevLog","prevInfo","prevWarn","prevError","prevGroup","prevGroupCollapsed","prevGroupEnd","disabledLog","disableLogs","props","reenableLogs","ReactCurrentDispatcher","prefix","describeBuiltInComponentFrame","name","source","ownerFn","x","match","reentry","componentFrameCache","PossiblyWeakMap","describeNativeComponentFrame","fn","construct","frame","control","previousPrepareStackTrace","previousDispatcher","Fake","sample","sampleLines","controlLines","s","_frame","syntheticFrame","describeFunctionComponentFrame","shouldConstruct","Component","prototype","describeUnknownElementTypeFrameInDEV","hasOwnProperty","loggedTypeFailures","setCurrentlyValidatingElement","element","owner","checkPropTypes","typeSpecs","values","location","componentName","has","typeSpecName","error$1","err","ex","isArrayImpl","isArray","typeName","value","hasToStringTag","willCoercionThrow","testStringCoercion","checkKeyStringCoercion","ReactCurrentOwner","RESERVED_PROPS","specialPropKeyWarningShown","specialPropRefWarningShown","didWarnAboutStringRefs","hasValidRef","config","getter","hasValidKey","warnIfStringRefCannotBeAutoConverted","self","defineKeyPropWarningGetter","warnAboutAccessingKey","defineRefPropWarningGetter","warnAboutAccessingRef","ReactElement","key","ref","jsxDEV","maybeKey","propName","defaultProps","ReactCurrentOwner$1","ReactDebugCurrentFrame$1","setCurrentlyValidatingElement$1","propTypesMisspellWarningShown","isValidElement","object","getDeclarationErrorAddendum","getSourceInfoErrorAddendum","ownerHasKeyUseWarning","getCurrentComponentErrorInfo","parentType","info","parentName","validateExplicitKey","currentComponentErrorInfo","childOwner","validateChildKeys","node","i","child","iteratorFn","iterator","step","validatePropTypes","propTypes","_name","validateFragmentProps","fragment","keys","didWarnAboutKeySpread","jsxWithValidation","isStaticChildren","validType","sourceInfo","typeString","children","beforeExample","afterExample","jsxWithValidationStatic","jsxWithValidationDynamic","jsx","jsxs","reactJsxRuntime_development","jsxRuntimeModule","require$$1","FeedBackContext","createContext","FeedBackProvider","rateValue","setRateValue","useState","stage","setStage","text","setText","onChangeRate","onSetText","onChangeStage","MotionConfigContext","MotionContext","PresenceContext","isBrowser","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","LazyContext","camelToDash","str","optimizedAppearDataAttribute","MotionGlobalConfig","Queue","process","index","createRenderStep","runNextFrame","thisFrame","nextFrame","numToRun","isProcessing","flushNextFrame","toKeepAlive","callback","keepAlive","immediate","addToCurrentFrame","queue","frameData","stepsOrder","maxElapsed","createRenderBatcher","scheduleNextBatch","allowKeepAlive","useDefaultElapsed","state","steps","acc","processStep","stepId","processBatch","timestamp","wake","microtask","cancelMicrotask","isRefObject","SwitchLayoutGroupContext","scheduleHandoffComplete","useVisualElement","visualState","createVisualElement","ProjectionNodeConstructor","parent","useContext","lazyContext","presenceContext","reducedMotionConfig","visualElementRef","useRef","visualElement","initialLayoutGroupConfig","createProjectionNode","useInsertionEffect","wantsHandoff","completeHandoff","initialPromotionConfig","layoutId","layout","drag","dragConstraints","layoutScroll","layoutRoot","getClosestProjectingNode","useMotionRef","externalRef","useCallback","instance","isVariantLabel","v","isAnimationControls","variantPriorityOrder","variantProps","isControllingVariants","isVariantNode","getCurrentTreeVariants","initial","animate","useCreateMotionContext","useMemo","variantLabelsAsDependency","prop","featureProps","featureDefinitions","loadFeatures","features","LayoutGroupContext","motionComponentSymbol","noop","any","warning","invariant","check","message","createMotionComponent","preloadedFeatures","useRender","useVisualState","MotionComponent","MeasureLayout","configAndProps","useLayoutId","isStatic","useStrictMode","layoutProjection","getProjectionFunctionality","ForwardRefComponent","forwardRef","layoutGroupId","isStrict","strictMessage","combined","createMotionProxy","createConfig","custom","customMotionComponentConfig","componentCache","_target","lowercaseSVGElements","isSVGComponent","scaleCorrectors","addScaleCorrector","correctors","transformPropOrder","transformProps","isForcedMotionValue","isMotionValue","translateAlias","numTransforms","buildTransform","transform","enableHardwareAcceleration","allowTransformNone","transformIsDefault","transformTemplate","transformString","transformName","checkStringStartsWith","token","isCSSVariableName","startsAsVariableToken","isCSSVariableToken","singleCssVariableRegex","getValueAsType","clamp","min","max","number","alpha","scale","sanitize","floatRegex","colorRegex","singleColorRegex","isString","createUnitType","unit","degrees","percent","px","vh","vw","progressPercentage","int","numberValueTypes","buildHTMLStyles","latestValues","options","style","vars","transformOrigin","hasTransform","hasTransformOrigin","transformIsNone","valueType","valueAsType","originX","originY","originZ","createHtmlRenderState","copyRawValuesOnly","target","useInitialMotionValues","useStyle","styleProp","useHTMLProps","htmlProps","validMotionProps","isValidMotionProp","shouldForward","loadExternalIsValidProp","isValidProp","filterProps","isDom","forwardMotionProps","filteredProps","calcOrigin","origin","offset","size","calcSVGTransformOrigin","dimensions","pxOriginX","pxOriginY","dashKeys","camelKeys","buildSVGPath","attrs","length","spacing","useDashCase","pathLength","pathSpacing","buildSVGAttrs","attrX","attrY","attrScale","pathOffset","latest","isSVGTag","createSvgRenderState","tag","useSVGProps","_isStatic","visualProps","rawStyles","createUseRender","elementProps","Fragment","renderedChildren","createElement","renderHTML","projection","camelCaseAttributes","renderSVG","renderState","_styleProp","scrapeMotionValuesFromProps","prevProps","_a","newValues","scrapeMotionValuesFromProps$1","targetKey","getValueState","resolveVariantFromProps","definition","current","velocity","useConstant","isKeyframesTarget","isCustomValue","resolveFinalValueInKeyframes","resolveMotionValue","unwrappedValue","makeState","createRenderState","onMount","makeLatestValues","makeUseVisualState","make","scrapeMotionValues","motionValues","isControllingVariants$1","isVariantNode$1","isInitialAnimationBlocked","variantToSet","resolved","transitionEnd","transition","valueTarget","cancelFrame","svgMotionConfig","htmlMotionConfig","createDomMotionConfig","addDomEvent","eventName","handler","isPrimaryPointer","event","extractEventInfo","pointType","addPointerInfo","addPointerEvent","combineFunctions","pipe","transformers","createLock","lock","openLock","globalHorizontalLock","globalVerticalLock","getGlobalLock","openHorizontal","openVertical","isDragActive","openGestureLock","Feature","addHoverEvent","isActive","callbackName","handleEvent","HoverGesture","FocusGesture","isFocusVisible","isNodeOrChild","fireSyntheticPointerEvent","syntheticPointerEvent","PressGesture","startEvent","startInfo","removePointerUpListener","endEvent","endInfo","onTap","onTapCancel","globalTapTarget","removePointerCancelListener","cancelEvent","cancelInfo","handleKeydown","keydownEvent","handleKeyup","keyupEvent","removeKeydownListener","handleBlur","removeBlurListener","onTapStart","whileTap","removePointerListener","removeFocusListener","observerCallbacks","observers","fireObserverCallback","entry","fireAllObserverCallbacks","entries","initIntersectionObserver","root","lookupRoot","rootObservers","observeIntersection","rootInteresectionObserver","thresholdNames","InViewFeature","viewport","rootMargin","amount","once","onIntersectionUpdate","isIntersecting","onViewportEnter","onViewportLeave","hasViewportOptionChanged","prevViewport","gestureAnimations","shallowCompare","next","prev","prevLength","resolveVariant","secondsToMilliseconds","seconds","millisecondsToSeconds","milliseconds","underDampedSpring","criticallyDampedSpring","keyframesTransition","ease","getDefaultTransition","valueKey","keyframes","isTransitionDefined","when","_delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed","getValueTransition","isNotNull","getFinalKeyframe","finalKeyframe","resolvedKeyframes","now","clearTime","time","newTime","isZeroValueString","isNone","isNumericalString","splitCSSVariableRegex","parseCSSVariable","token1","token2","fallback","maxDepth","getVariableValue","depth","trimmed","positionalKeys","isNumOrPxType","getPosFromMatrix","matrix","pos","getTranslateFromMatrix","pos2","pos3","_bbox","matrix3d","transformKeys","nonTranslationalTransformKeys","removeNonTranslationalTransform","removedTransforms","positionalValues","paddingLeft","paddingRight","y","paddingTop","paddingBottom","top","left","testValueType","dimensionValueTypes","findDimensionValueType","toResolve","isScheduled","anyNeedsMeasurement","measureAllKeyframes","resolversToMeasure","resolver","elementsToMeasure","transformsToRestore","restore","readAllKeyframes","flushKeyframeResolvers","KeyframeResolver","unresolvedKeyframes","onComplete","motionValue","isAsync","currentValue","valueAsRead","isColorString","testProp","splitColor","aName","bName","cName","clampRgbUnit","rgbUnit","rgba","red","green","blue","alpha$1","parseHex","r","hex","hsla","hue","saturation","lightness","color","test","_b","NUMBER_TOKEN","COLOR_TOKEN","VAR_TOKEN","VAR_FUNCTION_TOKEN","SPLIT_TOKEN","complexRegex","analyseComplexValue","originalValue","indexes","types","split","parsedValue","parseComplexValue","createTransformer","numSections","output","convertNumbersToZero","getAnimatableNone","parsed","complex","maxDefaults","applyDefaultFilter","defaultValue","functionRegex","filter","functions","defaultValueTypes","getDefaultValueType","defaultValueType","invalidTemplates","makeNoneKeyframesAnimatable","noneKeyframeIndexes","animatableTemplate","keyframe","noneIndex","DOMKeyframesResolver","originType","targetType","measureKeyframe","finalKeyframeIndex","unsetTransformName","unsetTransformValue","memo","result","isAnimatable","hasKeyframesChanged","canAnimate","originKeyframe","targetKeyframe","isOriginAnimatable","isTargetAnimatable","BaseAnimation","autoplay","delay","onUpdate","isGenerator","resolvedAnimation","resolve","reject","velocityPerSecond","frameDuration","velocitySampleDuration","calcGeneratorVelocity","resolveValue","t","prevT","safeMin","minDuration","maxDuration","minDamping","maxDamping","findSpring","duration","bounce","mass","envelope","derivative","dampingRatio","undampedFreq","exponentialDecay","delta","calcAngularFreq","initialGuess","approximateRoot","stiffness","rootIterations","durationKeys","physicsKeys","isSpringType","getSpringOptions","springOptions","derived","spring","restDelta","restSpeed","damping","isResolvedFromDuration","initialVelocity","initialDelta","undampedAngularFreq","isGranularScale","resolveSpring","angularFreq","dampedAngularFreq","freqForT","currentVelocity","isBelowVelocityThreshold","isBelowDisplacementThreshold","inertia","power","timeConstant","bounceDamping","bounceStiffness","modifyTarget","isOutOfBounds","nearestBoundary","amplitude","ideal","calcDelta","calcLatest","applyFriction","timeReachedBoundary","spring$1","checkCatchBoundary","hasUpdatedFrame","calcBezier","a1","a2","subdivisionPrecision","subdivisionMaxIterations","binarySubdivide","lowerBound","upperBound","mX1","mX2","currentX","currentT","cubicBezier","mY1","mY2","getTForX","aX","easeIn","easeOut","easeInOut","isEasingArray","mirrorEasing","easing","reverseEasing","circIn","circOut","circInOut","backOut","backIn","backInOut","easingLookup","easingDefinitionToFunction","x1","y1","x2","y2","progress","to","toFromDifference","mixNumber","hueToRgb","hslaToRgba","mixImmediate","mixLinearColor","fromExpo","expo","colorTypes","getColorType","asRGBA","model","mixColor","fromRGBA","toRGBA","blended","invisibleValues","mixVisibility","mixNumber$1","getMixer","mixComplex","mixArray","mixObject","numValues","blendValue","matchOrder","orderedOrigin","pointers","originIndex","originValue","template","originStats","targetStats","mix","createMixers","customMixer","mixers","mixerFactory","numMixers","mixer","easingFunction","interpolate","input","isClamp","inputLength","interpolator","progressInRange","fillOffset","remaining","offsetProgress","defaultOffset","arr","convertOffsetToTimes","o","defaultEasing","keyframeValues","times","easingFunctions","absoluteTimes","mapTimeToKeyframe","maxGeneratorDuration","calcGeneratorDuration","generator","timeStep","frameloopDriver","update","passTimestamp","generators","percentToProgress","MainThreadAnimation","KeyframeResolver$1","onStop","onResolved","keyframes$1","generatorFactory","mapPercentToKeyframes","mirroredGenerator","calculatedDuration","resolvedDuration","totalDuration","timeWithoutDelay","isInDelayPhase","frameGenerator","currentIteration","iterationProgress","done","isAnimationFinished","newSpeed","hasChanged","driver","onPlay","isBezierDefinition","isWaapiSupportedEasing","supportedWaapiEasing","cubicBezierAsString","mapEasingToNativeEasingWithDefault","mapEasingToNativeEasing","animateStyle","valueName","keyframeOptions","supportsWaapi","acceleratedValues","sampleDelta","requiresPregeneratedKeyframes","pregenerateKeyframes","sampleAnimation","pregeneratedKeyframes","AcceleratedAnimation","pregeneratedAnimation","animation","timeline","sampleTime","observeTimeline","prevProgress","onFrame","currentTime","supportsScrollTimeline","GroupPlaybackControls","animations","onResolve","onReject","newValue","cancelAll","cancelTimeline","speed","methodName","controls","animateMotionValue","isHandoff","valueTransition","shouldSkip","isWillChangeMotionValue","addUniqueItem","removeItem","SubscriptionManager","numSubscriptions","warned","warnOnce","condition","MAX_VELOCITY_DELTA","isFloat","collectMotionValues","MotionValue","render","prevFrameValue","subscription","unsubscribe","eventManagers","passiveEffect","stopPassiveEffect","endAnimation","startAnimation","setMotionValue","setTarget","getOptimisedAppearId","shouldBlockAnimation","protectedKeys","needsAnimating","shouldBlock","animateTarget","targetAndTransition","transitionOverride","willChange","animationTypeState","appearId","animateVariant","variant","getAnimation","getChildAnimations","forwardDelay","animateChildren","first","last","maxStaggerDuration","generateStaggerDuration","sortByTreeOrder","animateVisualElement","resolvedDefinition","reversePriorityOrder","numAnimationTypes","animateList","createAnimationState","createState","isInitialRender","buildResolvedTypeValues","setAnimateFunction","makeAnimator","animateChanges","changedActiveType","removedKeys","encounteredKeys","removedVariantIndex","typeState","propIsVariant","activeDelta","isInherited","shouldAnimateType","checkVariantsDidChange","handledRemovedValues","definitionList","resolvedValues","prevResolvedValues","allKeys","markToAnimate","valueHasChanged","fallbackAnimation","fallbackTarget","shouldAnimate","setActive","createTypeState","AnimationFeature","prevAnimate","id","ExitAnimationFeature","isPresent","onExitComplete","prevIsPresent","exitAnimation","register","distance","distance2D","xDelta","yDelta","PanSession","handlers","transformPagePoint","contextWindow","dragSnapToOrigin","getPanInfo","isPanStarted","isDistancePastThreshold","point","onStart","onMove","transformPoint","onEnd","onSessionEnd","resumeAnimation","panInfo","initialInfo","onSessionStart","subtractPoint","history","lastDevicePoint","startDevicePoint","getVelocity","timeDelta","timestampedPoint","lastPoint","calcLength","axis","isNear","maxDistance","calcAxisDelta","calcBoxDelta","calcRelativeAxis","relative","calcRelativeBox","calcRelativeAxisPosition","calcRelativePosition","applyConstraints","elastic","calcRelativeAxisConstraints","calcRelativeConstraints","layoutBox","bottom","right","calcViewportAxisConstraints","layoutAxis","constraintsAxis","calcViewportConstraints","constraintsBox","sourceLength","targetLength","rebaseAxisConstraints","constraints","relativeConstraints","defaultElastic","resolveDragElastic","dragElastic","resolveAxisElastic","minLabel","maxLabel","resolvePointElastic","label","createAxisDelta","createDelta","createAxis","createBox","eachAxis","convertBoundingBoxToBox","convertBoxToBoundingBox","transformBoxPoints","topLeft","bottomRight","isIdentityScale","hasScale","scaleX","scaleY","has2DTranslate","is2DTranslate","scalePoint","originPoint","distanceFromOrigin","scaled","applyPointDelta","translate","boxScale","applyAxisDelta","applyBoxDelta","box","applyTreeDeltas","treeScale","treePath","isSharedTransition","treeLength","transformBox","snapToDefault","translateAxis","transformAxis","transforms","scaleKey","originKey","axisOrigin","xKeys","yKeys","measureViewportBox","measurePageBox","rootProjectionNode","viewportBox","scroll","getContextWindow","elementDragControls","VisualElementDragControls","originEvent","snapToCursor","dragPropagation","onDragStart","measuredAxis","animationState","dragDirectionLock","onDirectionLock","onDrag","getCurrentDirection","isDragging","onDragEnd","_point","shouldDrag","axisValue","prevConstraints","onMeasureDragConstraints","constraintsElement","measuredConstraints","userConstraints","dragMomentum","dragTransition","onDragTransitionEnd","momentumAnimations","dragKey","externalMotionValue","boxProgress","stopPointerListener","dragListener","measureDragConstraints","stopMeasureLayoutListener","stopResizeListener","stopLayoutUpdateListener","hasLayoutChanged","direction","currentDirection","lockThreshold","DragGesture","dragControls","asyncHandler","PanGesture","pointerDownEvent","onPanSessionStart","onPanStart","onPan","onPanEnd","usePresence","useId","globalProjectionState","pixelsToPercent","pixels","correctBorderRadius","correctBoxShadow","projectionDelta","original","shadow","xScale","yScale","averageScale","MeasureLayoutWithContext","layoutGroup","switchLayoutGroup","defaultScaleCorrectors","layoutDependency","promoteContext","safeToRemove","borders","numBorders","asNumber","isPx","mixValues","follow","lead","shouldCrossfadeOpacity","isOnlyMember","easeCrossfadeIn","easeCrossfadeOut","borderLabel","followRadius","getRadius","leadRadius","radiusName","compress","copyAxisInto","originAxis","copyBoxInto","originBox","removePointDelta","removeAxisDelta","sourceAxis","removeAxisTransforms","removeBoxTransforms","sourceBox","isAxisDeltaZero","isDeltaZero","boxEquals","boxEqualsRounded","aspectRatio","NodeStack","prevLead","indexOfNode","member","preserveFollowOpacity","crossfade","resumingFrom","buildProjectionTransform","latestTransform","xTranslate","yTranslate","zTranslate","transformPerspective","rotate","rotateX","rotateY","skewX","skewY","elementScaleX","elementScaleY","compareByDepth","FlatTree","timeout","start","checkElapsed","record","data","isSVGElement","animateSingleValue","motionValue$1","transformAxes","hiddenVisibility","animationTarget","projectionFrameData","resetDistortingTransform","sharedAnimationValues","isOptimisedAppearTree","projectionNode","attachResizeListener","defaultParent","measureScroll","checkIsScrollRoot","resetTransform","propagateDirtyNodes","resolveTargetDelta","calcProjection","cleanDirtyNodes","subscriptionManager","isLayoutDirty","cancelDelay","resizeUnblockUpdate","finishAnimation","hasRelativeTargetChanged","newLayout","layoutTransition","defaultLayoutTransition","onLayoutAnimationStart","onLayoutAnimationComplete","targetChanged","hasOnlyRelativeTargetChanged","animationOptions","resetSkewAndRotation","shouldNotifyListeners","clearMeasurements","clearIsLayoutDirty","resetTransformStyle","updateLayout","notifyLayoutUpdate","clearSnapshot","removeLeadSnapshots","prevLayout","phase","needsMeasurement","isResetRequested","hasProjection","transformTemplateValue","transformTemplateHasChanged","removeTransform","pageBox","roundBox","boxWithoutScroll","rootScroll","transformOnly","withTransforms","boxWithoutTransform","nodeBox","forceRecalculation","isShared","relativeParent","canSkip","prevTreeScaleX","prevTreeScaleY","prevProjectionTransform","notifyAll","snapshot","snapshotLatestValues","mixedValues","targetDelta","relativeLayout","snapshotSource","layoutSource","isSharedLayoutAnimation","hasOpacityCrossfade","prevRelativeTarget","mixAxisDelta","mixBox","targetWithTransforms","shouldAnimatePositionOnly","xLength","yLength","needsReset","hasDistortingTransform","resetValues","styles","emptyStyles","valuesToRender","correct","applyTo","corrected","num","measuredLayout","animationType","axisSnapshot","layoutDelta","visualDelta","parentSnapshot","parentLayout","relativeSnapshot","mixAxis","userAgentContains","string","roundPoint","roundAxis","DocumentProjectionNode","notify","HTMLProjectionNode","documentNode","prefersReducedMotion","hasReducedMotionListener","initPrefersReducedMotion","motionMediaQuery","setReducedMotionPreferences","updateMotionValuesFromProps","nextValue","prevValue","existingValue","latestValue","visualElementStore","valueTypes","findValueType","propEventHandlers","numVariantProps","VisualElement","_props","_prevProps","_visualElement","blockInitialAnimation","initialMotionValues","remove","feature","valueIsTransform","removeOnChange","removeOnRenderRequest","other","featureDefinition","isEnabled","FeatureConstructor","listenerName","listener","startAtParent","closestVariantNode","valueFromInitial","DOMVisualElement","getComputedStyle","HTMLVisualElement","defaultType","computedStyle","SVGVisualElement","createDomVisualElement","motion","useIsMounted","isMounted","useForceUpdate","forcedRenderCount","setForcedRenderCount","forceRender","PopChildMeasure","PopChild","nonce","width","height","PresenceChild","presenceAffectsLayout","mode","presenceChildren","newChildrenMap","childId","isComplete","_","useUnmountEffect","getChildKey","updateChildLookup","allChildren","onlyElements","filtered","Children","AnimatePresence","exitBeforeEnter","filteredChildren","childrenToRender","exitingChildren","presentChildren","presentKeys","targetKeys","numPresent","component","insertionIndex","exitingComponent","onExit","leftOverKeys","childKey","leftOverKey","presentChild","presentChildKey","cloneElement","useMotionValue","setLatest","isCustomValueType","useImmediate","argOffset","inputValue","inputRange","outputRange","useCombineMotionValues","combineValues","updateValue","scheduleUpdate","subscriptions","useComputed","compute","useTransform","inputRangeOrTransformer","transformer","useListTransform","resolveElements","elements","scope","selectorCache","useReducedMotion","shouldReduceMotion","isDOMKeyframes","createGeneratorEasing","calcNextTime","labels","wrap","rangeSize","getEasingForSegment","eraseKeyframes","sequence","startTime","endTime","addKeyframes","compareByTime","defaultSegmentEasing","createAnimationsFromSequence","defaultTransition","sequenceTransition","defaultDuration","animationDefinitions","sequences","elementCache","timeLabels","prevTime","segment","subject","resolveValueSequence","valueKeyframes","valueSequence","elementIndex","numElements","valueKeyframesAsList","keyframesAsList","remainingTransition","calculatedDelay","numKeyframes","absoluteDelta","isNumberKeyframesArray","springTransition","springEasing","targetTime","remainder","subjectSequence","getSubjectSequence","getValueSequence","valueSequences","valueOffset","valueEasing","at","isNumber","animateElements","elementOrSelector","isSequence","animateSequence","scopedAnimate","valueOrElementOrSequence","$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c","$HgANd$react","$ff5963eb1fccf552$export$e08e3b67e392101e","callbacks","$c87311424ea30a05$var$testPlatform","re","_window_navigator_userAgentData","$c87311424ea30a05$export$9ac100e40613ea10","$c87311424ea30a05$export$186c6964ca17d99","$c87311424ea30a05$export$7bef049ce92e4224","$c87311424ea30a05$export$fedb369cb70207f1","$cc38e7bd3fc7b213$export$2bb74740c4e19def","checkForOverflow","isScrollable","$62d8ded9296f3872$export$cfa2225e87938781","scrollableNode","MAX_HEIGHT","IS_SSR","DEFAULT_TWEEN_CONFIG","REDUCED_MOTION_TWEEN_CONFIG","DRAG_CLOSE_THRESHOLD","DRAG_VELOCITY_THRESHOLD","getClosest","nums","goal","closest","minDifference","difference","applyRootStyles","rootId","body","cleanupRootStyles","onTransitionEnd","inDescendingOrder","validateSnapTo","snapTo","sheetHeight","mergeRefs","refs","isTouchDevice","useModalEffect","isOpen","prevOpen","usePrevious","useEventCallbacks","didOpen","handleAnimationComplete","_c","_d","useDimensions","setDimensions","useEffectEvent","handlerRef","useDragConstraints","constraintsRef","SheetContext","useSheetContext","SheetScrollerContext","SheetScrollerContextProvider","sheetContext","disableDrag","setDisableDrag","setDragEnabled","setDragDisabled","React2","useSheetScrollerContext","visualViewport","nonTextInputTypes","preventScrollCount","usePreventScroll","isDisabled","useLayoutEffect$1","isIOS","preventScrollMobileSafari","preventScrollStandard","chain","setStyle","scrollable","lastY","onTouchStart","getScrollParent","onTouchMove","scrollTop","onTouchEnd","willOpenKeyboard","onFocus","scrollIntoView","onWindowScroll","scrollX","scrollY","restoreStyles","removeEvents","addEvent","cur","scrollableTop","targetTop","styles_default","Sheet","onOpenStart","onOpenEnd","onClose","onCloseStart","onCloseEnd","onSnap","disableScrollLocking","snapPoints","mountPoint","detent","initialSnap","tweenConfig","rest","sheetRef","indicatorRotation","windowHeight","reduceMotion","zIndex","visibility","focusedElement","currentY","snapToValues","snapValue","snapIndex","roundedSheetHeight","useImperativeHandle","sheetEl","snapPoint","dragProps","sheet","createPortal","sheet_default","SheetContainer","className","initialY","maxSnapHeight","SheetContainer_default","SheetContent","sheetScrollerContext","SheetContent_default","SheetHeader","_dragProps","indicator1Transform","indicator2Transform","SheetHeader_default","isClickable","SheetBackdrop","Comp","pointerEvents","SheetBackdrop_default","SheetScroller","draggableAt","determineDragState","scrollHeight","clientHeight","isAtTop","isAtBottom","onScroll","scrollProps","SheetScroller_default","_SheetCompound","Sheet2","getWindowDimensions","useWindowDimensions","windowDimensions","setWindowDimensions","handleResize","Modal","isVisible","terrible","bad","neutral","good","excelent","GREEN_COLOR","MASK_PLACEHOLDER","RATES","STAGES","Input","borderColor","readOnly","isObject","obj","_obj$constructor","pick","_ref","DIRECTION","forceDirection","escapeRegExp","objectIncludes","arrA","arrB","dateA","dateB","regexpA","regexpB","ActionDetails","opts","IMask","el","maskedClass","mask","normalizeOpts","instanceOpts","_mask","createMask","nOpts","MaskedClass","MaskElement","end","KEY_Z","KEY_Y","HTMLMaskElement","_this$input$getRootNo","_this$input$getRootNo2","_this$input","HTMLInputMaskElement","HTMLContenteditableMaskElement","selection","anchorOffset","focusOffset","range","InputHistory","InputMask$1","_this$masked","masked","val","ev","listeners","cursorPos","newUnmaskedValue","newRawInputValue","newDisplayValue","isChanged","restOpts","updateMask","updateOpts","hIndex","details","oldRawValue","removeDirection","InputMask","ChangeDetails","prep","ContinuousTailDetails","stop","tail","beforePos","shiftChar","Masked","flags","fromPos","toPos","ch","checkTail","consistentState","noFixState","fixDetails","chDetails","consistentTail","appended","beforeTailState","tailDetails","ci","rawInput","ret","deleteCount","inserted","tailPos","eagerRemove","startChangePos","valLength","tval","ChunksTailDetails","chunks","tailChunk","lastChunk","extendLast","firstTailChunk","chunk","lastBlockIter","chunkBlock","remainChars","cstate","chunkShiftPos","PatternCursor","_this$block","PatternFixedDefinition","minPos","maxPos","appendEager","isResolved","PatternInputDefinition","isOptional","placeholderChar","displayChar","lazy","eager","maskOpts","boundPos","_flags$_beforeTailSta","MaskedRegExp","MaskedPattern","defs","pattern","unmaskingBlock","optionalBlock","bNames","expose","bOpts","blockOpts","maskedBlock","char","isInput","def","_blocks","maskedState","bi","unmaskedValue","_this$_mapPosToBlock","startBlockIndex","blockIter","block","blockDetails","chunkTail","bFromPos","bToPos","blockChunk","blockIndex","stopBefore","si","toBlockIndex","startBlockIter","endBlockIndex","_blocks2","accVal","blockStartPos","fromBlockIter","toBlockIter","isSameBlock","fromBlockStartPos","fromBlockEndPos","removeDetails","cursor","total","indices","gi","MaskedRange","maxLength","autofix","patternOpts","fromStr","toStr","sameCharsCount","minstr","maxstr","placeholder","padLength","DefaultPattern","MaskedDate","blocks","patternBlocks","date","day","month","year","MaskedDynamic","prevValueBeforeTail","insertValue","tailValue","prevMask","prevMaskState","_flags$_beforeTailSta2","currentDetails","_this$currentMask","typedValue","_this$currentMask2","_this$currentMask3","_this$currentMask4","compiledMasks","currentMaskRef","currentMask","mi","overwrite","skipInvalid","oldMask","_this$currentMask5","inputs","isCurrent","startInputPos","i1","i2","MaskedEnum","enum_","eopts","lengths","requiredLength","optionalLength","matchFrom","matches","mch","estr","istr","MaskedFunction","_MaskedNumber","MaskedNumber","mid","parts","prepCh","extendOnSeparators","count","slice","prevBeforeTailValue","prevBeforeTailSeparatorsCount","oldValue","accepted","skip","fixedNum","appendDetails","beforeTailValue","beforeTailSeparatorsCount","searchFrom","separatorPos","separatorAroundFromPos","separatorAroundToPos","valueBeforePos","valueAfterPos","separatorAtLeftPos","separatorAtLeftEndPos","separatorAtRightPos","validnum","formatted","sign","zeros","dropFractional","PIPE_TYPE","createPipe","arg","RepeatBlock","_ref2","_ref3","_ref4","_this$_blocks","_this$_mapPosToBlock$","allocated","_this$_blocks$bi","_this$_mapPosToBlock2","_this$_mapPosToBlock3","firstBlockIndex","lastBlockIndex","removeCount","w","z","u","A","reactIs_production_min","hasSymbol","REACT_ASYNC_MODE_TYPE","REACT_CONCURRENT_MODE_TYPE","REACT_BLOCK_TYPE","REACT_FUNDAMENTAL_TYPE","REACT_RESPONDER_TYPE","REACT_SCOPE_TYPE","typeOf","$$typeof","$$typeofType","AsyncMode","ConcurrentMode","ContextConsumer","ContextProvider","Element","ForwardRef","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","hasWarnedAboutDeprecatedIsAsyncMode","isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","reactIs_development","reactIsModule","getOwnPropertySymbols","propIsEnumerable","toObject","shouldUseNative","test1","test2","order2","test3","letter","objectAssign","symbols","ReactPropTypesSecret","ReactPropTypesSecret_1","getStack","checkPropTypes_1","ReactIs","require$$2","require$$3","require$$4","emptyFunctionThatReturnsNull","factoryWithTypeCheckers","throwOnDirectAccess","ITERATOR_SYMBOL","ANONYMOUS","ReactPropTypes","createPrimitiveTypeChecker","createAnyTypeChecker","createArrayOfTypeChecker","createElementTypeChecker","createElementTypeTypeChecker","createInstanceTypeChecker","createNodeChecker","createObjectOfTypeChecker","createEnumTypeChecker","createUnionTypeChecker","createShapeTypeChecker","createStrictShapeTypeChecker","is","PropTypeError","createChainableTypeChecker","validate","manualPropTypeCallCache","manualPropTypeWarningCount","checkType","isRequired","propFullName","secret","cacheKey","chainedCheckType","expectedType","propValue","propType","getPropType","preciseType","getPreciseType","typeChecker","expectedClass","expectedClassName","actualClassName","getClassName","expectedValues","valuesString","arrayOfTypeCheckers","checker","getPostfixForTypeWarning","expectedTypes","checkerResult","expectedTypesMessage","isNode","invalidValidatorError","shapeTypes","isSymbol","emptyFunction","emptyFunctionWithReset","factoryWithThrowingShims","shim","getShim","propTypesModule","MASK_PROPS","PropTypes","MASK_PROPS_NAMES","NON_MASK_OPTIONS_NAMES","MASK_OPTIONS_NAMES","pName","IMaskMixin","ComposedComponent","_Class","MaskedComponent","maskOptions","_this$element","cloneProps","nonMaskProp","maskProp","nestedComponentName","IMaskInputClass","inputRef","IMaskInputFn","$670gB$react","closeIcon","FormContainer","title","Button","bgColor","BUTTON_TEXT","FinalForm","phone","setPhone","handleChange","onSubmit","useFeedback","RateItem","onClick","InitialContent","vector","deleteIcon","byteToHex","unsafeStringify","getRandomValues","rnds8","rng","randomUUID","native","v4","buf","rnds","FeedbackForm","file","setFile","onChange","handleFileInputChange","uuidv4","handleDeleteFile","FeedBackModal","visible","setVisible","timer","getStage"],"mappings":"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","x_google_ignoreList":[0,1,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,309,310,311,312]}